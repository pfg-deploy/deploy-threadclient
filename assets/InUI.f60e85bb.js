import{c as $,g as C,m as y,a as d,i as o,d as v,t as s,K as T,f as E,E as S,F as g,G as U,q as G}from"./index.12d15d64.js";const K=s("<div> </div>"),N=s('<button class="border rounded border-hex-fff px-2"></button>'),M=s('<div class="max-w-lg mx-auto p-4 space-y-4"><div></div><label class="block"><div>Key</div><input type="password" class="block w-full border border-hex-fff"></label><label class="block"><div>Value</div><textarea class="block w-full border border-hex-fff" rows="10"></textarea></label><div class="space-x-2"><button class="border rounded border-hex-fff px-2">Decrypt</button></div></div>'),R=s("<div></div>"),D=s('<div class="bg-hex-000 h-screen py-2"><div><div class="max-w-lg mx-auto p-4 flex flex-col gap-2"></div></div></div>'),V=s('<div><div class="bg-zinc-700 inline-block p-2 px-4 rounded-3xl whitespace-pre-wrap max-w-md"></div></div>'),F=s('<div class="text-right"><div class="bg-blue-700 inline-block p-2 px-4 rounded-3xl whitespace-pre-wrap max-w-md"></div></div>'),W=s('<div class="text-red-500">ERROR: </div>');function x(t){return btoa(String.fromCharCode(...t))}function u(t){return Uint8Array.from(atob(t),r=>r.charCodeAt(0))}async function j(){const t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return new Uint8Array(await crypto.subtle.exportKey("raw",t))}async function q(t,r){const c=window.crypto.getRandomValues(new Uint8Array(12)),a=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:c},await crypto.subtle.importKey("raw",t,{name:"AES-GCM"},!1,["encrypt","decrypt"]),new TextEncoder().encode(r));return new Uint8Array([...c,...new Uint8Array(a)])}async function A(t,r){const c=[...r];if(c.length<12)throw new Error("EBADENCRYPTEDMESSAGE");const a=new Uint8Array(c.slice(0,12)),i=new Uint8Array(c.slice(12)),e=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:a},await crypto.subtle.importKey("raw",t,{name:"AES-GCM"},!1,["encrypt","decrypt"]),i);return new TextDecoder().decode(e)}function B(t,r){window[t]=r}function P(t,r){return window[t]??=r}const Q="tiYwBcc+TbgrF3a/ZjZcgg0pldlm3whn7xUAEUqASe0/F+hl2qYhM/kpex5hWSjL4AQAJ+j4ivQstkjHy+/z7aG6UBZQENGixHnbCrf+80QtkURFWDc=",[m,k]=T("--inui-compressor-key");function z(t){let r=null;const[c,a]=$(P("--term-app-sel",null));C(()=>B("--term-app-sel",c()));const i=()=>{const e=m()??prompt("Passcode?");if(e==null)return alert("Passcode required.");k(e),A(u(e),u(Q)).then(n=>{r=n,a("term")}).catch(n=>{alert("decrypt error: "+n)})};return c()==="term"&&(a(null),i()),y((()=>{const e=y(()=>c()==="term",!0);return()=>e()?d(I,{get reloadSelf(){return t.reloadSelf},content:r}):(()=>{const n=y(()=>c()==="encr",!0);return()=>n()?d(Y,{}):(()=>{const l=K.cloneNode(!0),p=l.firstChild;return o(l,d(v,{class:"underline",action:()=>i(),children:"term"}),p),o(l,d(v,{class:"underline",action:()=>a("encr"),children:"encr"}),null),l})()})()})())}function _(t){const[r,c]=$(0);return C(()=>{if(r()===2){const a=setTimeout(()=>{c(0)},1e3);S(()=>clearTimeout(a))}}),(()=>{const a=N.cloneNode(!0);return a.$$click=()=>{setTimeout(()=>{r()===0&&c(1)},100),(()=>{const e=()=>(async()=>{const n=await t.getValue();return navigator.clipboard.writeText(n)})();try{return navigator.clipboard.write([new ClipboardItem({"text/plain":(async()=>await t.getValue())()})]).catch(n=>e())}catch{return e()}})().then(()=>{c(2)}).catch(e=>{c(0),alert("copy error: "+e)})},o(a,(()=>{const i=y(()=>r()===0,!0);return()=>i()?t.children:r()===1?"Generating\u2026":"\u2713 Copied"})()),E(()=>a.disabled=r()!==0),a})()}function Y(){let t;return(()=>{const r=M.cloneNode(!0),c=r.firstChild,a=c.nextSibling,i=a.firstChild,e=i.nextSibling,n=a.nextSibling,l=n.firstChild,p=l.nextSibling,b=n.nextSibling,w=b.firstChild;o(c,d(_,{getValue:async()=>x(await j()),children:"Keygen"})),e.addEventListener("change",f=>void k(f.currentTarget.value));const h=t;return typeof h=="function"?h(p):t=p,o(b,d(_,{getValue:async()=>x(await q(u(m()??""),t.value)),children:"Copy Encrypted"}),w),w.$$click=()=>{(async()=>{t.value=await A(u(m()??""),u(t.value))})().catch(f=>{alert("EDECRYPT:"+f)})},E(()=>e.value=m()??""),r})()}function I(t){const r=document.createElement("style");return r.textContent=`
        html, body {
            margin-bottom: 0 !important;
            background-color: #000 !important;
        }
    `,S(()=>{r.remove()}),document.body.appendChild(r),(()=>{const c=D.cloneNode(!0),a=c.firstChild,i=a.firstChild;return(e=>{g(()=>{e.animate([{backgroundColor:"#222"},{}],{duration:200,iterations:1})})})(c),(e=>{g(()=>{e.animate([{opacity:0},{opacity:1}],{duration:200,iterations:1})})})(a),o(i,d(U,{get each(){return t.content.split(`
`).filter(e=>e)},children:e=>e.startsWith("[")?(()=>{const n=R.cloneNode(!0);return o(n,e),n})():e.startsWith("<")?(()=>{const n=V.cloneNode(!0),l=n.firstChild;return o(l,()=>e.substring(1)),n})():e.startsWith(">")?(()=>{const n=F.cloneNode(!0),l=n.firstChild;return o(l,()=>e.substring(1)),n})():(()=>{const n=W.cloneNode(!0);return n.firstChild,o(n,e,null),n})()})),c})()}G(["click"]);export{z as default};
