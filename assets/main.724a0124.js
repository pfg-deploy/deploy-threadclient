import{g as He,a as Ke}from"./_commonjsHelpers.2cf1d77b.js";function Qe(o,d){return d.forEach(function(u){u&&typeof u!="string"&&!Array.isArray(u)&&Object.keys(u).forEach(function(y){if(y!=="default"&&!(y in o)){var c=Object.getOwnPropertyDescriptor(u,y);Object.defineProperty(o,y,c.get?c:{enumerable:!0,get:function(){return u[y]}})}})}),Object.freeze(o)}var X={},T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var E=0;E<T.length;E++)z[T.charCodeAt(E)]=E;var Xe=function(o){var d=new Uint8Array(o),u,y=d.length,c="";for(u=0;u<y;u+=3)c+=T[d[u]>>2],c+=T[(d[u]&3)<<4|d[u+1]>>4],c+=T[(d[u+1]&15)<<2|d[u+2]>>6],c+=T[d[u+2]&63];return y%3===2?c=c.substring(0,c.length-1)+"=":y%3===1&&(c=c.substring(0,c.length-2)+"=="),c},Ye=function(o){var d=o.length*.75,u=o.length,y,c=0,A,C,k,b;o[o.length-1]==="="&&(d--,o[o.length-2]==="="&&d--);var _=new ArrayBuffer(d),P=new Uint8Array(_);for(y=0;y<u;y+=4)A=z[o.charCodeAt(y)],C=z[o.charCodeAt(y+1)],k=z[o.charCodeAt(y+2)],b=z[o.charCodeAt(y+3)],P[c++]=A<<2|C>>4,P[c++]=(C&15)<<4|k>>2,P[c++]=(k&3)<<6|b&63;return _},Ze=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",decode:Ye,encode:Xe}),xe=He(Ze);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyDescriptorDescriptor=o.regGlobal=o.rebindGlobal=o.regAutoOpaqueConstr=o.regOpaqueRec=o.WeakMapDescriptor=o.WeakSetDescriptor=o.WeakMapWorkaround=o.WeakSetWorkaround=o.getJsonDescriptor=o.regValueDescriptorGetter=o.getValueDescriptor=o.regObjectDescriptorGetter=o.getObjectDescriptor=o.BigIntDescriptor=o.undefinedSymbol=o.ObjectPropertiesDescriptor=o.readProps=o.writeProps=o.NotSerializableToken=o.PrimDescriptor=o.regNewConstructor=o.NotSerializableDescriptor=o.regConstructor=o.regPrim=o.regOpaquePrim=o.regOpaqueObject=o.updateInitialSnapshot=o.regDescriptor=o.descriptorTemplate=o.ReadContext=o.WriteContext=o.bind=o.BindDescriptor=o.setObjectDescriptor=o.boundFunSymbol=o.boundArgsSymbol=o.boundThisSymbol=o.parse=o.stringify=o.read=o.write=o.getState=o.resetState=o.descriptorSymbol=void 0;const d={log:console.log,warn:console.warn},u=WeakMap.prototype.set;function y(t,e,r){d.warn("Not serializable ",e,v,r);let n=t.jobs,a=0;for(;;){for(;n&&!n.started;)n=n.nextJob;if(!n||(d.warn(`SF#${++a}:`,n.index,n.debCtx,":",n.value),a>200))break;n=n.nextJob}}const c=Map,A=WeakMap,C=Set;function k(t){return t.symbol||(t.symbol=Symbol("@effectful/serialization/descriptor")),t.byName||(t.byName=new c),t.byValue||(t.byValue=new c),t.byObject||(t.byObject=new A),t.byPrototype||(t.byPrototype=new A),t.byTypeOfProp||(t.byTypeOfProp=new c),t}globalThis.__effectfulSerializationState||(globalThis.__effectfulSerializationState={});let b=k(__effectfulSerializationState),_=Object;o.descriptorSymbol=b.symbol;let P=b.byName,N=b.byValue,w=b.byObject,V=b.byPrototype,q=b.byTypeOfProp;function de(t={}){b=k(t),o.descriptorSymbol=b.symbol,P=b.byName,N=b.byValue,w=b.byObject,V=b.byPrototype,q=b.byTypeOfProp}o.resetState=de;function me(){return b}o.getState=me;const J={[o.descriptorSymbol]:!1},Y={arguments:!1,caller:!1,length:!1,name:!1};function Z(t,e={}){if(typeof t!="object"||Array.isArray(t))throw new TypeError("wrong argument type");const r=new G(e),n=[];n.push(r.step(t,n,0));const{sharedRefs:a}=r,i=e.alwaysByRef,l=[],f=e.refs,p=r.weakMaps;for(let s;(s=r.jobs)!=null;){if(s.started){i?(s.ref&&(s.ref.r=l.push(s.data)-1),f&&f.push(s.value)):a.push(s),s=r.jobs=s.nextJob;continue}s.started=!0;const g=s.value;s.data=s.descriptor.write(r,g,s.parent,s.index);for(const[h,D]of p)if(h.has(g)){const{k:j,v:M}=D;j.push(r.step(g,j,j.length)),M.push(r.step(h.get(g),M,M.length))}}if(r.weakSets.length)for(const s of r.sharedRefs.values()){const g=typeof s.value;if(!(g!=="object"&&g!=="function"))for(const[h,D]of r.weakSets)!h.has(s.value)||(s.ref||(s.ref={}),D.v.push(s.ref))}if(!i&&a.length){for(const s of a)s.ref?(s.ref.r=l.push(s.data)-1,s.parent&&(s.parent[s.index]=s.ref)):s.parent&&(s.parent[s.index]=s.data);if(f!=null)for(const s of a)f.push(s.value)}return l.length?Object.assign({x:l},n[0]):n[0]}o.write=Z;const he=[];function x(t,e={}){if(typeof t!="object")throw new TypeError("root value must be Object");const r=t.x,n=r?r.length:0,a=new te(e,r||he);if(n){const i=a.sharedVals,l=a.sharedDescriptors;for(let f=0;f<n;++f){const p=r[f];l[f]=B(a,p)}for(let f=0;f<n;++f)i[f]===I&&(i[f]=l[f].create(a,r[f]));for(let f=0;f<n;++f)l[f].readContent(a,r[f],i[f])}return B(a,t).read(a,t)}o.read=x;function we(t,e,r){return JSON.stringify(Z(t),e,r)}o.stringify=we;function Oe(t){return x(JSON.parse(t))}o.parse=Oe,o.boundThisSymbol=Symbol("@effectful/bind/this"),o.boundArgsSymbol=Symbol("@effectful/bind/args"),o.boundFunSymbol=Symbol("@effectful/bind/fun");function ee(){function t(...e){return t[o.boundFunSymbol].apply(t[o.boundThisSymbol],[...t[o.boundArgsSymbol],...e])}return u.call(w,t,o.BindDescriptor),t}function Se(t,e){u.call(w,t,e)}o.setObjectDescriptor=Se,o.BindDescriptor=m({name:"Bind",create(){return ee()},write(){return{}},overrideProps:Object.assign(Object.assign({},Y),{prototype:!1})});function Pe(t,e,...r){const n=ee();return n[o.boundThisSymbol]=e,n[o.boundFunSymbol]=t,n[o.boundArgsSymbol]=r,n}o.bind=Pe;let v=null;class G{constructor(e){this.sharedRefsMap=e.sharedRefsMap||(e.sharedRefsMap=new c),this.sharedRefs=e.sharedRefs||[],this.opts=e,this.symsByName=e.symsByName||(e.symsByName=new c),this.knownSyms=e.knownSyms||(e.knownSyms=new c),this.weakMaps=e.weakMaps||(e.weakMaps=[]),this.weakSets=e.weakSets||(e.weakSets=[]),this.jobs=void 0}step(e,r,n){let a=(0,o.getValueDescriptor)(e);if(!a){const{opts:i}=this;if(i.warnIgnored&&i.verbose&&y(this,n,e),!i.ignore)throw new TypeError(`not serializable value "${e}" at "${n}"(${v}) of "${r}"`);if(i.warnIgnored&&d.warn&&!i.verbose&&d.warn(`not serializable value "${e}" at "${n}"(${v}) of "${r}"`),i.ignore===!0)return o.NotSerializableToken;if(i.ignore==="opaque")a=typeof e=="object"||typeof e=="function"?O(e):$(e);else if(i.ignore==="placeholder")a=ne;else throw new TypeError(`unsupported value for ignore option = ${i.ignore}`)}return a?a.write(this,e,r,n):{}}}o.WriteContext=G,G.prototype.showStack=function(t,e){y(this,t,e)};const I={_undef:!0};class te{constructor(e,r){this.knownSyms=e.knownSyms||(e.knownSyms=new c),this.symsByName=e.symsByName||(e.symsByName=new c),this.opts=e;const n=r.length;this.sharedJsons=r,this.sharedVals=e.refs||(e.refs=Array(n).fill(I)),this.sharedDescriptors=Array(n)}step(e){return B(this,e).read(this,e)}createStep(e){return B(this,e).create(this,e)}}o.ReadContext=te;function re(t,e){const r={};if(this.valuePrototype!==void 0)return r;const n=Object.getPrototypeOf(e);return n===_.prototype||n===this.defaultPrototype||(r.p=t.step(n,r,"p")),r}function je(t,e){if(this.valueConstructor)return new this.valueConstructor;if(this.valuePrototype!==void 0&&this.valuePrototype!==!1)return Object.create(this.valuePrototype);const r=e.p;if(r===void 0)return this.defaultPrototype?Object.create(this.defaultPrototype):{};if(r===null)return Object.create(null);let n;return r.r!=null?(n=t.sharedVals[r.r],n===I&&(n=null)):r.$&&!r.f&&(n=t.step(r)),Object.create(n||null)}o.descriptorTemplate={read:H,write:re,create:je,readContent(t,e,r){e.p&&Object.getPrototypeOf(r)===null&&Object.setPrototypeOf(r,t.step(e.p))}};function De(t){return Object.assign({},t,{name:t.name,read(e,r){if(r.r!=null){const a=this.create(e,r);return this.readContent(e,r,a),a}return t.read(e,r)},write(e,r,n,a){let i=e.sharedRefsMap.get(r);return i==null&&(e.sharedRefsMap.set(r,e.jobs=i={ref:null,data:null,parent:n,value:r,descriptor:t,index:a,nextJob:e.jobs,started:!1,debCtx:v}),e.jobs=i,!e.opts.alwaysByRef)?null:(i.ref==null&&(i.ref={}),i.ref)},create(e,r){const n=r.r;if(n!=null){const a=e.sharedVals[n];return a!==I?a:e.sharedVals[n]=e.sharedDescriptors[n].create(e,e.sharedJsons[n])}return t.create(e,r)},readContent(e,r,n){r.r==null&&t.readContent(e,r,n)}})}function m(t){let{read:e,readContent:r,create:n,write:a}=t;e||t.create&&(e=t.readContent?H:t.create),!t.defaultPrototype&&t.props!==!1&&t.propsSnapshot!==!1&&t.value&&(t.defaultPrototype=Object.getPrototypeOf(t.value));const i=Object.assign({},J,t.typeofHint==="function"&&Y,t.overrideProps);r||(r=function(){}),e||(e=function(D,j){return this.create(D,j)}),n||(n=o.descriptorTemplate.create),a||(a=function(D,j){throw new TypeError(`not writable ${j}`)});const l=Ne(t);let f=l,p=0;if(!t.strictName)for(;P.get(f)!=null;f=`${l}_${++p}`);let s=Object.assign({},t,{read:e,readContent:r,create:n,write:a,name:f,overrideProps:i});if(t.props!==!1&&(s=Ae(s)),t.default$!==!1&&f!=="Object"){const h=s;s=Object.assign({},s,{write(D,j,M,Le){const Q=h.write(D,j,M,Le);return Q.$||(Q.$=f),Q}})}const g=s;return P.set(f,g),t.typeofTag&&q.set(t.typeofTag,g),t.refAware!==!1&&(s=De(s)),s={name:f,read:s.read,write:s.write,readContent:s.readContent,create:s.create,overrideProps:i,value:t.value,props:t.props,default$:t.default$,snapshot:s.snapshot},s}o.regDescriptor=m;function ke(t){const e=(0,o.getValueDescriptor)(t);if(!e)throw new TypeError("not serializable value");if(!e.snapshot||!e.value||e.value!==t)throw new TypeError("the object doesn't contain another snapshot");Object.assign(e.snapshot,Object.getOwnPropertyDescriptors(t))}o.updateInitialSnapshot=ke;function ve(t){return t.name||t.constructor&&t.constructor.name||"Object"}function Ne(t){return t.name?t.name:t.valuePrototype&&t.valuePrototype.name?t.valuePrototype.name:t.valueConstructor&&t.valueConstructor.name?t.valueConstructor.name:t.valuePrototype&&t.valuePrototype.constructor&&t.valuePrototype.constructor.name?t.valuePrototype.constructor.name:"Object"}function O(t,e=ve(t),r={props:!0,propsSnapshot:!0}){if(!t)return null;let n;return(n=w.get(t))!=null||(n=m(Object.assign({},ce,{name:e,typeofHint:typeof t},r,{value:t})),u.call(w,t,n)),n}o.regOpaqueObject=O;function $(t,e=String(t)){let r=N.get(t);return r||(r=m(Object.assign({},Ce,{name:e,value:t,refAware:!1})),N.set(t,r),r)}o.regOpaquePrim=$;function $e(t,e,r=String(e)){return t=m(Object.assign({},t,{name:r,value:e,refAware:!1})),N.set(e,t),t}o.regPrim=$e;function S(t,e={},r){const n=m(Object.assign({valuePrototype:t.prototype,name:t.name},o.descriptorTemplate,e,{overrideProps:Object.assign({},e.overrideProps),propsSnapshot:e.propsSnapshot}));return r?Object.defineProperty(t.prototype,o.descriptorSymbol,{value:n,configurable:!0}):u.call(V,t.prototype,n),n}o.regConstructor=S,o.NotSerializableDescriptor=m({name:"NotSerializableToken",read(){throw new TypeError("Trying to use not serializable value")},create(){},readContent(){},write(){return o.NotSerializableToken},props:!1,refAware:!1,default$:!1});const ne=m({name:"NotSerializable",read:oe,create:oe,readContent(){},write(){return{}},props:!1,refAware:!1});function oe(){if(this.name==="NotSerializable")return Ue;const t=function(){};return u.call(w,t,this),new Proxy(t,R)}function W(t,e={}){return S(t,Object.assign({valueConstructor:t},o.descriptorTemplate,e))}o.regNewConstructor=W;const ae=m(Object.assign(Object.assign({},o.descriptorTemplate),{name:"Object"}));o.PrimDescriptor=m({name:"Prim",read(t,e){return e},create(t,e){return e},write(t,e){return e},refAware:!1,props:!1,default$:!1});const Te=m({name:"Ref",read(t,e){return t.sharedVals[e.r]}});o.NotSerializableToken={_notSerializable:!0};function F(t,e,r,n){if((n&8)===0){const a=t.step(r.value,e,1);if(a===o.NotSerializableToken)return;e.push(a)}else e.push(null);return(n||r.set||r.get)&&e.push(n),r.get&&(e[3]=t.step(r.get,e,3)),r.set&&(e[4]=t.step(r.set,e,4)),e}function ie(t){let e=0;return t.configurable||(e=e|1),t.enumerable||(e=e|2),t.writable||(e=e|4),"value"in t||(e=e|8),e}function se(t,e,r,n,a){let i;if(!(e[r]===!1||((i=ie(n))&a)!==0)){if(t){const l=t[r];if(l&&("value"in l&&Object.is(l.value,n.value)||"get"in l&&l.get===n.get))return}return i}}function U(t,e,r,n,a){const i=[];let l;for(const f of Object.getOwnPropertyNames(e)){const p=e[f];if(!p||(l=se(a,r,f,p,n))===void 0)continue;v=f;const s=F(t,[f],p,l);s&&i.push(s)}for(const f of Object.getOwnPropertySymbols(e)){const p=e[f];if((l=se(a,r,f,p,n))===void 0)continue;v=String(f);const s=[],g=ue(t,f,s,0,!t.opts.ignore&&!t.knownSyms);g!==o.NotSerializableToken&&(s.push(g),F(t,s,p,l),s.length&&i.push(s))}return v=null,i}o.writeProps=U;function fe(t,e){let r;if(e.substr)r=e;else if(e.$){const n=P.get(e.$);n&&(r=n.read(t,e))}return r||(r=pe(t,e)),r}function L(t,e,r,n,a,i){return i.configurable=(r&1)===0,i.enumerable=(r&2)===0,(r&4)===0&&(i.writable=!0),(r&8)===0&&(i.value=t.step(e)),n&&(i.get=t.step(n)),a&&(i.set=t.step(a)),u.call(w,i,o.PropertyDescriptorDescriptor),i}function le(t,e,r){for(const[n,a,i,l,f]of e){const p=fe(t,n);if(i!=null){const s=L(t,a,i,l,f,{});try{Object.defineProperty(r,p,s);continue}catch(g){const h=Object.getOwnPropertyDescriptor(r,p);if(!h||h.configurable||!h.writable)throw g}}r[p]=t.step(a)}}o.readProps=le,o.ObjectPropertiesDescriptor={write(t,e){return{f:U(t,e,J,0)}},create(){return{}},readContent(t,e,r){for(const[n,a,i,l,f]of e.f)r[fe(t,n)]=L(t,a,i,l,f,{})}};function Ae(t){const e=t.overrideProps||J;let r;return t.props!==!1&&t.propsSnapshot!==!1&&t.value&&(r=Object.getOwnPropertyDescriptors(t.value)),{name:t.name,write(n,a,i,l){const f=t.write(n,a,i,l),p=U(n,Object.getOwnPropertyDescriptors(a),e,t.propsDescrMask||0,this.snapshot);return p.length&&(f.f=p),f},read:H,readContent(n,a,i){t.readContent(n,a,i);const l=a.f;l&&le(n,l,i)},create(n,a){return t.create(n,a)},snapshot:r}}function H(t,e){const r=this.create(t,e);return this.readContent(t,e,r),r}const ce={write(t,e){return e!==this.value||!this.name?re.call(this,t,e):{$:this.name}},create(){return this.value},default$:!1},Ce=Object.assign(Object.assign({},ce),{props:!1});function ue(t,e,r,n,a){const i=Symbol.keyFor(e);if(i)return{key:i};const l=N.get(e);if(l)return l.write(t,e,r,n);if(!a&&t.knownSyms){let f=t.knownSyms.get(e);if(!f){if(!t.symsByName)throw new TypeError(`couldn't write "${String(e)}"`);let s=e.description;if(!s){const h=String(e);s=h.substring(7,h.length-1)}let g=t.symsByName.get(s);g||t.symsByName.set(s,g=[]),f={name:s,id:g.length,value:e},g.push(f),t.knownSyms.set(e,f)}const p={name:f.name};return f.id&&(p.id=f.id),p}if(!a&&!t.opts.ignore)throw new TypeError(`couldn't write "${String(e)}"`);return o.NotSerializableToken}o.undefinedSymbol=Symbol("@effectful/serialization/undefined");function pe(t,e){if(e.key)return Symbol.for(e.key);const{name:r}=e;if(r&&t.symsByName){let n=t.symsByName.get(r);const a=e.id||0;if(n){const l=n[a];if(l)return l.value}const i={name:r,id:a,value:Symbol(e.name)};return n||t.symsByName.set(r,n=[]),n[a]=i,t.knownSyms&&t.knownSyms.set(i.value,i),i.value}if(!t.opts.ignore)throw new TypeError(`couldn't read "${JSON.stringify(e)}"`);return o.undefinedSymbol}function be(t,e){return m({name:t,write(){return{$:t}},create(){return e},refAware:!1,props:!1,default$:!1})}const _e=be("NaN",NaN),ye=be("undefined",void 0),We=m({write:ue,read:pe,name:"Symbol",refAware:!1,props:!1});o.BigIntDescriptor=m(typeof BigInt=="function"?{read(t,e){return BigInt(e.int)},write(t,e){return{int:e.toString()}},name:"Int",refAware:!1,props:!1}:{name:"Int",read(t,e){return e.int},write(t,e){return{int:String(e)}},refAware:!1,props:!1});let Be=function(e){let r=w.get(e);if(r)return r;const n=Object.getPrototypeOf(e);return r=V.get(n),r||(n&&n!==Object&&o.descriptorSymbol in n?n[o.descriptorSymbol]:(e.$$typeof&&(r=q.get(e.$$typeof)),r))};o.getObjectDescriptor=Be;function Me(t){o.getObjectDescriptor=t}o.regObjectDescriptorGetter=Me;let ze=function(e){if(e===void 0)return ye;switch(typeof e){case"number":if(isNaN(e))return _e;case"undefined":case"boolean":case"string":return o.PrimDescriptor;case"object":return e?(0,o.getObjectDescriptor)(e)||ae:o.PrimDescriptor;case"function":return(0,o.getObjectDescriptor)(e);case"symbol":return We;case"bigint":return o.BigIntDescriptor}return N.get(e)};o.getValueDescriptor=ze;function Ie(t){o.getValueDescriptor=t}o.regValueDescriptorGetter=Ie;function B(t,e){if(typeof e!="object"||e===null)return o.PrimDescriptor;if(Array.isArray(e))return Re;if("$"in e){const r=P.get(e.$);if(!r){if(t.opts.warnIgnored&&console.warn(`reading value with not registered type "${e.$}"`,e),!t.opts.ignore)throw new TypeError(`not registered type:${e.$}`);return t.opts.ignore==="placeholder"?m(Object.assign({},ne,{name:e.$})):ye}return r}return"r"in e?Te:ae}o.getJsonDescriptor=B;const Re=W(Array,Object.assign(Object.assign({},o.descriptorTemplate),{write(t,e){const r=[];for(const n of e)r.push(t.step(n,r,r.length));return r},readContent(t,e,r){for(const n of e)r.push(t.step(n))},props:!1,default$:!1,globalName:"Array"}));function ge(t){return Object.assign({},o.descriptorTemplate,{write(e,r){const n=[];for(const a of r)n.push(e.step(a,n,n.length));return{$:this.name||"Iterable",l:n}}},t)}const Ee=class{constructor(){this.prop=Symbol("@effectful/weakset")}add(e){switch(typeof e){case"function":case"object":Object.defineProperty(e,this.prop,{configurable:!0,writable:!0,value:!0});break;default:throw TypeError("Invalid value used in weak set")}return this}delete(e){return e[this.prop]?(delete e[this.prop],!0):!1}has(e){return!!e[this.prop]}};o.WeakSetWorkaround=Ee;const Ve=class{constructor(){this.prop=Symbol("@effectful/weakmap")}set(e,r){switch(typeof e){case"function":case"object":Object.defineProperty(e,this.prop,{configurable:!0,writable:!0,value:r});break;default:throw TypeError("Invalid value used in weak map")}return this}get(e){return e[this.prop]}delete(e){return e[this.prop]?(delete e[this.prop],!0):!1}has(e){return Object.prototype.hasOwnProperty.call(e,this.prop)}};o.WeakMapWorkaround=Ve,S(o.WeakSetWorkaround,{name:"WeakSet#"}),S(o.WeakMapWorkaround,{name:"WeakMap#"});const qe=WeakSet.prototype.add;o.WeakSetDescriptor=S(WeakSet,{name:"WeakSet",write(t,e){const r={v:[]};return t.weakSets.push([e,r]),r},create(){return new WeakSet},readContent(t,e,r){const{v:n}=e;for(const a of n)qe.call(r,t.step(a))}}),o.WeakMapDescriptor={name:"WeakMap",write(t,e){const r=[],n=[],a={k:r,v:n};for(const i of t.sharedRefsMap.values())e.has(i.value)&&(r.push(t.step(i.value,r,r.length)),n.push(t.step(e.get(i.value),n,n.length)));return t.weakMaps.push([e,a]),a},create(){return new WeakMap},readContent(t,e,r){const{k:n,v:a}=e;for(let i=0,l=n.length;i<l;++i)u.call(r,t.step(n[i]),t.step(a[i]))}},S(WeakMap,o.WeakMapDescriptor),W(C,ge({readContent(t,e,r){for(const n of e.l)r.add(t.step(n))},globalName:"Set"})),W(c,ge({write(t,e){const r=[],n=[];for(const[a,i]of e)r.push(t.step(a,r,r.length)),n.push(t.step(i,n,n.length));return{k:r,v:n}},readContent(t,e,r){const{k:n,v:a}=e;for(let i=0,l=n.length;i<l;++i)r.set(t.step(n[i]),t.step(a[i]))},globalName:"Map"})),W(RegExp,{name:"RegExp",write(t,e){const r={src:e.source,flags:e.flags};return e.lastIndex&&(r.last=e.lastIndex),r},create(t,e){const r=new RegExp(e.src,e.flags);return e.last&&(r.lastIndex=e.last),r},props:!1,refAware:!1,globalName:"RegExp"});function K(t,e=t.constructor.name,r={}){if(!t||!(typeof t=="function"||typeof t=="object")||w.has(t))return;const n=Object.getOwnPropertyDescriptors(t);for(const i of Object.getOwnPropertySymbols(n))a(n[i],`${e}#${String(i)}`);O(t,e,r.descriptor||{props:!1});for(const i of Object.getOwnPropertyNames(n))a(n[i],`${e}#${i}`);if(r.deep){const i=Object.getPrototypeOf(t);i&&K(i,`${e}#proto`,r)}function a(i,l){const f=i.value;if(!f)return;const p=typeof f;p==="function"||p==="object"?r.deep?K(f,l,r):O(f,l,r.descriptor):p==="symbol"&&Symbol.keyFor(f)==null&&$(f,`${e}#${l}#${String(f)}`)}}o.regOpaqueRec=K;function Je(t,e){return t.prototype[o.descriptorSymbol]={write(r,n,a,i){let l=t.name;return n.name?l+=`:${n.name}`:n.constructor!==t&&(l+=n.constructor.name),!e&&console.warn&&(y(r,l,n),console.warn("auto opaque",l,n,new Error().stack)),O(n,l).write(r,n,a,i)}}}o.regAutoOpaqueConstr=Je;function Ge(){if(w.has(globalThis))return;const t=b;_=globalThis.Object,b={byName:new c,byValue:new c(b.byValue),byObject:b.byObject,byTypeOfProp:new c(b.byTypeOfProp)},globalThis.__effectfulSerializationState={};for(let[e,r]of t.byName){if(r.globalName){const n=globalThis[r.globalName];if(!n)continue;r=Object.assign({},r,{value:n}),u.call(w,n,r)}b.byName.set(e,r)}b=k(__effectfulSerializationState)}o.rebindGlobal=Ge;function Fe(){if(!w.has(globalThis)){O(globalThis,"#global",{props:!0,propsSnapshot:!0,overrideProps:{AnonymousContent:!1}});for(const t of Object.getOwnPropertyNames(globalThis))try{const e=globalThis[t];if(!e||typeof e!="function"&&typeof e!="object")continue;if(t==="location"){O(globalThis.location,"location",{props:!1});continue}const r=w.get(e);if(r&&r.props===!1)continue;O(e,`#${t}`);for(const n of Object.getOwnPropertyNames(e)){if(n==="prototype")continue;const a=Object.getOwnPropertyDescriptor(e,n);typeof a.value=="function"&&O(a.value,`#G#${t}#{j}`)}if(typeof e=="function"&&e.prototype)for(const n of Object.getOwnPropertyNames(e.prototype)){if(n==="prototype")continue;const a=Object.getOwnPropertyDescriptor(e.prototype,n);typeof a.value=="function"&&O(a.value,`#G##${t}#{j}`)}}catch{continue}}}o.regGlobal=Fe,$(o.boundThisSymbol,"#this"),$(o.boundArgsSymbol,"#args"),$(o.boundFunSymbol,"#fun");const R={};for(const t of["apply","construct","defineProperty","deleteProperty","enumerate","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"])R[t]=function(e){const r=w.get(e);throw new TypeError(`${t} in a not restored object${r?` (${r.name})`:""}`)};R.get=function(t,e){const r=w.get(t);throw new TypeError(`getting ${e} in a not restored object${r?` (${r.name})`:""}`)};const Ue=new Proxy(function(){},R);if(o.PropertyDescriptorDescriptor=m({read(t,e){return{}},readContent(t,e,r){L(t,e.v,e.f||0,e.s,e.g,r)},write(t,e){const r=F(t,[],e,ie(e));return r?{v:r[0],f:r[1],s:r[2],g:r[3]}:{}},name:"PD",props:!1}),S(String,{create(t,e){return new String(e.v)},write(t,e){return{v:String(e)}}}),S(Number,{create(t,e){return new Number(e.v)},write(t,e){return{v:Number(e)}}}),typeof ArrayBuffer<"u"){const{encode:t,decode:e}=xe,r=S(ArrayBuffer,{name:"ArrayBuffer",write(n,a){return{d:t(a)}},create(n,a){return e(a.d)},props:!1});for(const n of["DataView","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"]){const a=globalThis[n];!a||S(a,{name:n,write(i,l){const f={o:l.byteOffset,l:l.length};return f.b=r.write(i,l.buffer,f,"b"),f},create(i,l){return new a(r.read(i,l.b),l.o,l.l)},props:!1})}}})(X);var et=Ke(X),ot=Object.freeze(Qe({__proto__:null,[Symbol.toStringTag]:"Module",default:et},[X]));export{ot as m};
