import{D as p,e as o,z as xe,M as mt,y as E,B as x,N as He,A as pt,O as kt,P as _t}from"./index.e666e6a6.js";import{e as C}from"./base.50b98d34.js";async function ft(e,t){if(t.kind==="subreddit"){const i=()=>{},[r,n]=await Promise.all([f(`/r/${t.subreddit}/api/widgets`,{method:"GET",onerror:i,cache:!0}),f(`/r/${t.subreddit}/about`,{method:"GET",onerror:i,cache:!0})]),d={subreddit:t.subreddit,sub_t5:n??null,widgets:r??null};return bt(e,d)}else throw new Error("TODO sidebar for "+t.kind)}function bt(e,t){const i=t.widgets,r=u=>{const s=i.items[u];if(!s)throw new Error("bad widget "+u);return s},n=u=>ht(e,u,t),d=[...t.sub_t5?[gt(e,t.sub_t5,t.subreddit)]:[],...t.sub_t5?[xt(e,t.sub_t5,t.subreddit,{collapsed:!!i})]:[],...i?i.layout.sidebar.order.map(u=>n(r(u))):[],...i?[n(r(i.layout.moderatorWidget))]:[]];return d.length===0&&d.push(p.createSymbolLinkToError(e,"Failed to fetch sidebar for this page :(",{content:e,subinfo:t})),d}function ht(e,t,i){try{return wt(e,t,i)}catch(r){const n=r;return p.createSymbolLinkToError(e,"Widget errored: "+n.toString(),{widget:t,e:n})}}function g(e,t,i){return p.createSymbolLinkToValue(e,{url:i.link_to??null,disallow_pivot:!0,parent:null,replies:i.replies??null,client_id:a.id,kind:"post",content:t,internal_data:i.internal_data})}function X(e,t){const i=p.createSymbolLinkToValue(e,t);return p.prefilledHorizontalLoader(e,i,t)}function yt(e,t,i,r){return g(e,{kind:"post",title:{text:t},body:i,collapsible:!1},{internal_data:r})}function wt(e,t,i){if(t.kind==="moderators")return yt(e,"Moderators",{kind:"richtext",content:[o.p(o.link(a,"/message/compose?to=/r/"+i.subreddit,{style:"pill-empty"},o.txt("Message the mods"))),o.ul(...t.mods.map(r=>o.li(o.p(o.link(a,"/u/"+r.name,{is_user_link:r.name},o.txt("u/"+r.name)),...W({type:r.authorFlairType,text:r.authorFlairText,text_color:r.authorFlairTextColor,background_color:r.authorFlairBackgroundColor,richtext:r.authorFlairRichText}).flatMap(n=>[o.txt(" "),o.flair(n)]))))),o.p(o.link(a,"/r/"+i.subreddit+"/about/moderators",{},o.txt("View All Moderators")))]},{internal_data:{widget:t,subinfo:i}});if(t.kind==="subreddit-rules")return g(e,{kind:"post",title:{text:t.shortName},body:{kind:"none"},collapsible:!1},{internal_data:{widget:t,subinfo:i},replies:{display:"tree",loader:X(e,t.data.map((r,n)=>g(e,{kind:"post",title:{text:n+1+". "+r.shortName},body:{kind:"text",content:r.descriptionHtml,markdown_format:"reddit_html",client_id:a.id},collapsible:{default_collapsed:!0}},{internal_data:r})))}});if(t.kind==="post-flair")return g(e,{kind:"post",title:{text:t.shortName},body:{kind:"none"},collapsible:!1},{internal_data:{widget:t,subinfo:i},replies:{display:"repivot_list",loader:X(e,t.order.map(r=>{const n=t.templates[r],d=W({type:n.type,text:n.text,text_color:n.textColor,background_color:n.backgroundColor,richtext:n.richtext});return g(e,{kind:"post",title:null,flair:d,body:{kind:"none"},collapsible:!1},{internal_data:n,link_to:"/r/"+i.subreddit+'/search?q=flair:"'+encodeURIComponent(n.text)+'"&restrict_sr=1'})}))}});if(t.kind==="textarea")return g(e,{kind:"post",title:{text:t.shortName},body:{kind:"text",content:t.textHtml,markdown_format:"reddit_html",client_id:a.id},collapsible:!1},{internal_data:t});if(t.kind==="button")return g(e,{kind:"post",title:{text:t.shortName},body:{kind:"text",content:t.descriptionHtml,markdown_format:"reddit_html",client_id:a.id},collapsible:!1},{internal_data:t,replies:{display:"repivot_list",loader:X(e,t.buttons.map(r=>g(e,{kind:"post",title:{text:r.kind==="text"?r.text:"TODO SUPPORT BUTTON KIND "+r.kind},body:{kind:"none"},collapsible:!1},{internal_data:r,link_to:r.kind==="image"?r.linkUrl:r.kind==="text"?r.url:void 0})))}});if(t.kind==="community-list")return g(e,{kind:"post",title:{text:t.shortName},body:{kind:"none"},collapsible:!1},{internal_data:t,replies:{display:"repivot_list",loader:X(e,t.data.map(r=>r.type==="subreddit"?g(e,{kind:"post",title:{text:"r/"+r.name},thumbnail:{kind:"image",url:r.communityIcon||r.iconUrl},body:{kind:"none"},collapsible:{default_collapsed:!0},actions:{vote:Q(r.name,r.subscribers,r.isSubscribed)}},{internal_data:r,link_to:"/r/"+r.name}):(N(r.type),p.createSymbolLinkToError(e,"unsupported community type: "+r.type,r))))}});if(t.kind==="calendar")return g(e,{kind:"post",title:{text:t.shortName},body:{kind:"none"},collapsible:!1},{internal_data:t,replies:{display:"tree",loader:X(e,t.data.map(r=>g(e,{kind:"post",title:{text:r.title},body:{kind:"array",body:[{kind:"richtext",content:[o.p(o.txt("From "),o.timeAgo(r.startTime*1e3),o.txt(", to "),o.timeAgo(r.endTime*1e3))]},...r.locationHtml!=null?[{kind:"text",client_id:a.id,content:r.locationHtml,markdown_format:"reddit_html"}]:[],...r.descriptionHtml!=null?[{kind:"text",client_id:a.id,content:r.descriptionHtml,markdown_format:"reddit_html"}]:[]]},collapsible:{default_collapsed:!0}},{internal_data:r})))}});if(t.kind==="image"){const r=t.data[t.data.length-1];return g(e,{kind:"special",tag_uuid:"FullscreenImage@-N0D1IW1oTVxv8LLf7Ed",not_typesafe_data:{url:r.url,link_url:r.linkUrl??null,w:r.width,h:r.height},fallback:{kind:"post",title:{text:t.shortName},body:{kind:"richtext",content:[{kind:"body",body:{kind:"captioned_image",url:r.url,w:r.width,h:r.height}},...r.linkUrl!=null?[o.p(o.link({id:a.id},r.linkUrl,{},o.txt(r.linkUrl)))]:[]]},collapsible:!1}},{internal_data:t})}else if(t.kind==="custom"){const r={kind:"iframe_srcdoc",srcdoc:`
                <head>
                    <link rel="stylesheet" href="${t.stylesheetUrl}">
                    <base target="_blank">
                </head>
                <body>${t.textHtml}</body>
            `,height_estimate:t.height};return g(e,{kind:"special",tag_uuid:"FullscreenEmbed@-N0D96jIL-HGWHWbWKn1",not_typesafe_data:r,fallback:{kind:"post",title:{text:t.shortName},body:r,collapsible:!1}},{internal_data:t})}else throw t.kind==="id-card"||t.kind==="menu"?new Error("TODO support widget of known type: "+t.kind):(N(t.kind),new Error("TODO support widget of type: "+t.kind))}function gt(e,t,i){return g(e,{kind:"post",title:{text:t.data.title},body:{kind:"text",content:t.data.public_description,markdown_format:"none",client_id:a.id},actions:{vote:Q(i,t.data.subscribers,t.data.user_is_subscriber??!1)},collapsible:!1},{internal_data:{content:e,t5:t,subreddit:i}})}function xt(e,t,i,{collapsed:r}){return g(e,{kind:"post",title:{text:"old.reddit sidebar"},body:{kind:"text",client_id:a.id,markdown_format:"reddit_html",content:t.data.description_html},collapsible:{default_collapsed:r}},{internal_data:{t5:t,subreddit:i}})}function oe(...e){console.log(...e)}async function Ve(e){const t=Date.now(),i={};try{const[r,n]=le(e);if(console.log("PARSED URL:",r),r.kind==="link_out")return{content:i,pivot:p.createSymbolLinkToValue(i,{kind:"post",client_id:a.id,content:{kind:"post",title:{text:"Not Supported"},body:{kind:"richtext",content:[o.h1(o.link(a,"raw!"+r.out,{},o.txt("View on reddit.com"))),o.p(o.txt("ThreadClient does not support this URL"))]},collapsible:!1},parent:null,replies:null,url:null,internal_data:r})};if(r.kind==="todo")return{content:i,pivot:p.createSymbolLinkToValue(i,{kind:"post",client_id:a.id,content:{kind:"post",title:{text:"Not Supported"},body:{kind:"richtext",content:[o.h1(o.link(a,"raw!https://www.reddit.com"+r.path,{},o.txt("View on reddit.com"))),o.p(o.txt("ThreadClient does not yet support this URL")),o.p(o.txt(r.msg))]},collapsible:!1},parent:null,replies:null,url:null,internal_data:r})};if(r.kind==="raw"){const s=await f(r.path,{method:"GET"});return{content:i,pivot:de(i,n,s)}}else{if(r.kind==="redirect")return{content:i,pivot:p.createSymbolLinkToValue(i,{kind:"post",client_id:a.id,content:{kind:"post",title:{text:"Not Supported"},body:{kind:"richtext",content:[o.h1(o.link(a,"raw!https://www.reddit.com"+n,{},o.txt("View on reddit.com"))),o.p(o.txt("Error! Redirect Loop. ThreadClient tried to redirect more than 100 times."))]},collapsible:!1},parent:null,replies:null,url:null,internal_data:r})};if(r.kind==="subreddit_sidebar"){const s=await ft(i,r.sub);return{content:i,pivot:p.createSymbolLinkToValue(i,{kind:"post",client_id:a.id,content:{kind:"post",title:{text:"Sidebar"},body:{kind:"none"},collapsible:!1},parent:null,replies:{display:"tree",loader:p.prefilledHorizontalLoader(i,Je(r.sub),s)},url:"/"+[...r.sub.base,"@sidebar"].join("/"),internal_data:r})}}else if(r.kind==="submit")if(r.sub.kind==="subreddit"||r.sub.kind==="userpage"){const s=r.sub.kind==="userpage"?"u_"+r.sub.user:r.sub.subreddit,[l]=await Promise.all([f(`/r/${s}/about`,{method:"GET",cache:!0})]),c=l.data.link_flair_enabled?await f(`/r/${s}/api/link_flair_v2`,{method:"GET",cache:!0}):[],m=Nt(i,r.sub,s,l,c);return{content:i,pivot:m}}else return{content:i,pivot:p.createSymbolLinkToValue(i,{kind:"post",client_id:a.id,content:{kind:"post",title:{text:"Not Supported"},body:{kind:"richtext",content:[o.h1(o.link(a,"raw!https://www.reddit.com"+n,{},o.txt("Submit on reddit.com"))),o.p(o.txt("TODO: support submitting to "+r.sub.kind))]},collapsible:!1},parent:null,replies:null,url:null,internal_data:r})}}const d=mt(r,{comments:s=>"/comments/"+s.post_id_unprefixed+"?"+E({sort:s.sort_override,comment:s.focus_comment,context:s.context}),duplicates:s=>"/duplicates/"+s.post_id_unprefixed+"?"+E({after:s.after,before:s.before,sort:s.sort,crossposts_only:""+s.crossposts_only}),subreddit:s=>x(y(s.sub,s.current_sort),{before:s.before??void 0,after:s.after??void 0}),wiki:s=>"/"+[...s.sub.base,"wiki",...s.path].join("/")+"?"+E(s.query),user:()=>n,inbox:()=>n,subreddits:()=>n}),u=await f(d,{method:"GET"});return{content:i,pivot:Tt(i,n,r,u)}}catch(r){const n=r;console.log(n);const d=n.toString().includes("NetworkError"),u=t>Date.now()-50,s=navigator.userAgent.includes("Firefox");if(d)return{content:i,pivot:p.createSymbolLinkToValue(i,{kind:"post",client_id:a.id,content:{kind:"post",title:{text:"Error Loading Page"},body:{kind:"richtext",content:[...u&&s?[o.h1(o.txt("Firefox Enhanced Tracking Protection may be active")),o.p(o.txt("Try disabling Enhanced Tracking Protection for this site.")),o.ul(o.ili(o.txt("Look at the left side of the URL bar for a shield icon")),o.ili(o.txt("Click it")),o.ili(o.txt("Flip the switch to turn Enhanced Tracking Protection off"))),o.p(o.txt("Enhanced Tracking Protection blocks ThreadClient from sending requests to Reddit, which prevents ThreadClient from functioning.")),o.h2(o.txt("Other things to check:"))]:[o.h1(o.txt("There was a network error loading this page")),o.h2(o.txt("Things to check:"))],o.ul(o.ili(o.txt("Make sure your internet is working")),o.ili(o.txt("Make sure "),o.link(a,"https://www.redditstatus.com/",{},o.txt("Reddit is working"))),o.ili(o.txt("If your browser has tracking protection, try disabling it. Tracking prevention often blocks requests to social media sites, such as Reddit.")))]},collapsible:!1},parent:null,replies:null,url:null,internal_data:[e,n,{is_networkerror:d,error_was_instant:u,browser_is_firefox:s}]})};throw n}}function y(e,t){return"/"+[...e.base,t.v==="unsupported"?"hot":t.v].join("/")+(t.v==="controversial"||t.v==="top"?"?t="+encodeURIComponent(t.t):"")}function $e(e){return e==="t5_hcxiu"||e==="t5_q7cbs"?{v:"new",t:"all"}:{v:"hot",t:"all"}}const ze=C("submit");async function vt(e,t){const i=ze.decode(e),r=t.fields?._title?.title;if(r==null||r.length===0)throw new Error("a title is requierd");const n=t.fields?._content?.content;if(n==null)throw new Error("post content is required");const d=t.fields?._postflair?.flair_one,u=t.fields?._postopts?.flair_many,s=n?.tab??"_textpost",l=k=>u?.[k]??!1;if(l("_EVENT"))throw new Error("Making Event Posts is not yet supported in ThreadClient");const c={api_type:"json",validate_on_submit:"true",show_error_list:"true",title:r,flair_id:d??void 0,kind:0,sendreplies:J(!0),nsfw:J(l("_OVER18")),spoiler:J(l("_SPOILER")),original_content:J(l("_OC")),discussion_type:l("_LIVECHAT")?"CHAT":void 0,sr:i.sub};if(s==="_nothing")c.kind="self",c.text="";else if(s==="_textpost")c.kind="self",c.text=n.choices?._textpost?.text??"";else if(s==="_linkpost")c.kind="link",c.url=n.choices?._linkpost?.link??"";else throw new Error("TODO support content kind: "+s);console.log("sendbody",c);const m=await f("/api/submit",{method:"POST",query:{resubmit:"true"},body:c,mode:"urlencoded"});return console.log("%+%",m),m.json.data.url}function Nt(e,t,i,r,n){const d=jt(t),u="raw!https://www.reddit.com/"+[...t.base,"submit"].join("/");return p.fillLink(e,d,{kind:"post",content:{kind:"submit",submission_data:{send_name:"Post",client_id:a.id,submit_key:ze.encode({kind:"newpost",sub:i}),title:"Submitting to r/"+i,fields:[{kind:"title",id:"_title"},{kind:"content",id:"_content",default_id:"_textpost",content_types:[{kind:"none",id:"_nothing",disabled:null},{kind:"text",mode:"reddit",id:"_textpost",disabled:null,client_id:a.id},{kind:"todo",title:"Images & Video",linkout:u,id:"_imagepost",reason:"Uploading images with threadclient is not supported yet",linkout_label:"Submit on reddit.com",client_id:a.id,disabled:r.data.submission_type!=="self"&&r.data.allow_images?null:"Image posts are not allowed on this subreddit"},{kind:"link",id:"_linkpost",disabled:r.data.submission_type!=="self"?null:"Talk posts are not allowed on this subreddit"},{kind:"todo",title:"Poll",linkout:u,id:"_pollpost",reason:"Creating polls with threadclient is not supported yet",linkout_label:"Submit on reddit.com",client_id:a.id,disabled:r.data.submission_type!=="self"&&r.data.allow_polls?null:"Polls are not allowed on this subredit"},{kind:"todo",title:"Talk",linkout:u,id:"_talkpost",reason:"Creating talk posts with threadclient is not supported.",linkout_label:"Submit on reddit.com",client_id:a.id,disabled:r.data.submission_type!=="self"&&r.data.allow_talks?null:"Talk posts are not allowed on this subreddit"}]},{kind:"flair_one",id:"_postflair",flairs:n.map(s=>({id:s.id,flairs:W(s)}))},{kind:"flair_many",id:"_postopts",flairs:[{id:"_OC",flairs:[at],disabled:r.data.original_content_tag_enabled?null:"OC tag not allowed on this sub"},{id:"_OVER18",flairs:[dt]},{id:"_SPOILER",flairs:[ot]},{id:"_LIVECHAT",flairs:[{elems:[{kind:"text",text:"Live Chat",styles:{}}],content_warning:!1}],disabled:r.data.is_chat_post_feature_enabled&&r.data.allow_chat_post_creation?null:"Live chat posts are not allowed on this sub"},{id:"_EVENT",flairs:[{elems:[{kind:"text",text:"Event",styles:{}}],content_warning:!1}],disabled:"ThreadClient does not yet support creating event posts"}]}]}},internal_data:{about:r,flairinfo:n},parent:null,replies:null,url:"/"+[...t.base,"submit"].join("/"),client_id:a.id}),d}function Tt(e,t,i,r){if(Array.isArray(r)){if(r[0].data.children.length!==1)return de(e,t,r);const n=r[0].data.children[0];if(n.kind!=="t3")return de(e,t,r);const d=n.data.name,s=r[1].data.children[0];s&&s.kind==="t1"&&s.data.parent_id;const l=i.kind==="comments"?i.focus_comment:null,c={kind:"subreddit_unloaded",listing:{kind:"Listing",data:{before:null,children:[],after:null}},details:{kind:"subreddit",base:["r",n.data.subreddit],subreddit:n.data.subreddit},missing_replies:!0,sort:$e(n.data.subreddit_id)};z(e,c);const k=He(t)[1].get("sort"),h={kind:"post",sort:k!=null?{v:k}:"default",suggested_sort:n.data.suggested_sort??"confidence"};let O=z(e,{kind:"post",post:n,replies:r[1],missing_replies:l!=null?!0:void 0,sort:h});if(l!=null){const v=Z(`t1_${l.toLowerCase()}`,h);e[v]?O=v:oe("focused comment not found in tree `"+v.toString()+"`",O,e)}return O}else if(r.kind==="Listing"){const n={kind:"subreddit_unloaded",listing:r,details:i.kind==="subreddit"?i.sub:{kind:"error",pathraw:t,base:[t]},sort:i.kind==="subreddit"?i.current_sort:{v:"unsupported",t:"all"}};return z(e,n)}else{if(r.kind==="wikipage")return z(e,{kind:"wikipage",listing:r,pathraw:t});r.kind==="t5"?oe("TODO t5"):r.kind==="UserList"?oe("TODO userlist"):N(r.kind)}return de(e,t,r)}function G(e,t){return(()=>{if(e.kind==="homepage")return"SR_home";if(e.kind==="mod")return"SR_mod";if(e.kind==="multireddit")return"SR_multi/u:"+e.user.toLowerCase()+"/m:"+e.multireddit.toLowerCase();if(e.kind==="userpage")return"SR_user/"+e.user.toLowerCase();if(e.kind==="subreddit")return"SR_sub/"+e.subreddit.toLowerCase();if(e.kind==="error")return"SR_eunsupported/"+e.pathraw;xe(e)})()+"[/"+t?.v+"?t="+t?.t+"]"}function de(e,t,i){return p.createSymbolLinkToValue(e,{kind:"post",client_id:a.id,parent:null,url:null,replies:null,content:{kind:"post",title:{text:"Error!"},collapsible:!1,body:{kind:"richtext",content:[...ae(t),o.pre(JSON.stringify(i,null,"  "),"json")]}},internal_data:null})}function B(e,t){return{kind:"post",sort:{v:t},suggested_sort:e?.suggested_sort??"confidence"}}function Ot(e){return e==null||e.sort==="default"||e.suggested_sort===e.sort.v?"default":e.sort}function ve(e){return e==null||e.sort==="default"||e.suggested_sort===e.sort.v?"[sort:default]":"[sort:"+e.sort.v+"]"}function Z(e,t){return p.stringLink("OBJECT_"+e+ve(t))}function je(e,t){return p.stringLink("OBJECT-REPLIES_"+e+ve(t))}function Ue(e,t){return p.stringLink("OBJECT-DEPTH-LOADER_"+e+ve(t))}function Et(e,t){return p.stringLink("OBJECT-CONTEXT-LOADER_"+e+ve(t))}function St(e,t){return p.stringLink("SUBREDDIT_"+G(e,t))}function Pt(e,t){return p.stringLink("SUBREDDIT-POSTS_"+G(e,t))}function Rt(e,t){return p.stringLink("SUBREDDIT-LOAD-POSTS_"+G(e,t))}function Dt(e,t,i){return p.stringLink("SUBREDDIT-NEXTPAGE-CONTENT_["+G(e,t)+"]_"+i)}function It(e,t,i){return p.stringLink("SUBREDDIT-NEXTPAGE-REQUEST["+G(e,t)+"]_"+i)}function Lt(e){return p.stringLink("WIKIPAGE_"+e)}function Je(e){return p.stringLink("SIDEBAR_"+G(e,null))}function Ct(e){return p.stringLink("SIDEBAR-LOADER_"+G(e,null))}function jt(e){return p.stringLink("SUBMIT-POST_"+G(e,null))}function Ut(e,t){if(e.kind==="t1")return{kind:"comment",comment:e,parent_fullname:t.parent_fullname,sort:t.sort};if(e.kind==="t3")return{kind:"post",post:e,replies:"not_loaded",sort:t.sort};if(e.kind==="more")return e.data.children.length===0?{kind:"depth_more",item:e,parent_fullname:t.parent_fullname}:{kind:"more",item:e};e.kind!=="t5"&&N(e.kind),oe("TODO setUpCommentOrUnmounted",e.kind,e)}function Te(e,t,i){const r=Ut(t,{parent_fullname:i.parent_fullname,sort:i.sort});return r==null?p.createSymbolLinkToError(e,"eunsupported",t):z(e,r)}function U(e,t){const i=Ot(t);return i==="default"?e.data.permalink:x(e.data.permalink,{sort:i.v})}function Ae(e){const t=e.data;return{creation_date:t.created_utc*1e3,edited:t.edited?{date:t.edited*1e3}:void 0,pinned:t.pinned||t.stickied||!1,in:e.kind==="t3"?{name:t.subreddit_name_prefixed,link:"/"+t.subreddit_name_prefixed,client_id:a.id}:void 0,comments:e.kind==="t3"?e.data.num_comments:void 0}}function qe(e){return{kind:"link",text:"View on reddit.com",url:Qe(e),client_id:"reddit"}}function z(e,t){const i={data:t};if(i.data.kind==="comment"){const r=i.data.comment,n=r.data,d=i.data.sort,u=je(n.name,d),s=Ue(n.name,d);p.fillLinkOnce(e,s,()=>$.encode({kind:"parent_permalink",post_id:n.link_id.replace("t3_",""),parent_id:n.id}));const l={display:"tree",reply:{action:fe(n.name),locked:n.locked},loader:{kind:"horizontal_loader",key:u,load_count:null,request:s,client_id:a.id,autoload:!0}},c=(()=>{if(!n.replies)return!0;const S=n.replies.data.children;if(i.data.missing_replies??!1)return!(S.length>0);if(S.length===1){const q=S[0];if(q.kind==="more"&&q.data.name==="t1__")return!1}return!0})(),m=(()=>n.replies?n.replies.data.children.map(S=>Te(e,S,{parent_fullname:n.name,sort:d})):[])();c&&p.fillLink(e,u,m);const k=n.author==="FatFingerHelperBot",h=Et(n.name,d);p.fillLinkOnce(e,h,()=>$.encode({kind:"vertical",bottom_post:n.name,top_post:n.link_id}));const O={loader:{kind:"vertical_loader",key:Z(n.parent_id,d),temp_parent:Z(n.link_id,d),request:h,load_count:n.depth,client_id:a.id,autoload:!1}},v=Z(n.name,d),A=x(n.permalink,{context:"3"});return p.fillLinkOnce(e,v,()=>({kind:"post",client_id:a.id,url:A,parent:O,replies:l,content:{kind:"post",title:null,author:ye(n,Ie(n.all_awardings??[])),body:it(n),info:Ae(r),collapsible:{default_collapsed:k||(n.collapsed??!1)},actions:{vote:re(n),code:Re(n.body),other:[be(n.name),ke(n.name),he(n.name,n.saved),_e(n.name,n.subreddit),qe(A)]}},internal_data:i.data})),v}else if(i.data.kind==="post"){const r=i.data.post,n=r.data,d=i.data.sort,u=je(n.name,d),s=Ue(n.name,d);p.fillLinkOnce(e,s,()=>$.encode({kind:"parent_permalink",post_id:n.id,parent_id:null}));const l={display:"tree",reply:{action:fe(n.name),locked:n.locked},loader:{kind:"horizontal_loader",key:u,load_count:n.num_comments,client_id:a.id,request:s,autoload:!0},sort_options:[{kind:"url",name:"Best",url:U(r,B(d,"confidence"))},{kind:"url",name:"Top",url:U(r,B(d,"top"))},{kind:"url",name:"New",url:U(r,B(d,"new"))},{kind:"url",name:"Controversial",url:U(r,B(d,"controversial"))},{kind:"url",name:"Old",url:U(r,B(d,"old"))},{kind:"url",name:"Random",url:U(r,B(d,"random"))},{kind:"url",name:"Q&A",url:U(r,B(d,"qa"))},{kind:"url",name:"Live",url:U(r,B(d,"live"))}]},c=(()=>i.data.replies==="not_loaded"?[]:i.data.replies.data.children.map(O=>Te(e,O,{parent_fullname:n.name,sort:d})))();i.data.missing_replies!==!0&&i.data.replies!=="not_loaded"&&p.fillLink(e,u,c);const m=Z(n.name,d),k=U(r,d);return p.fillLinkOnce(e,m,()=>({kind:"post",client_id:a.id,url:k,parent:{loader:p.prefilledVerticalLoader(e,z(e,{kind:"subreddit_unloaded",missing_replies:!0,listing:{kind:"Listing",data:{before:null,after:null,children:[]}},details:{kind:"subreddit",subreddit:n.subreddit,base:["r",n.subreddit]},sort:$e(n.subreddit_id)}),void 0)},replies:l,content:{kind:"post",title:{text:n.title},collapsible:{default_collapsed:!0},flair:st(n),author:ye(n),body:rt(n),thumbnail:nt(n,"open"),info:Ae(r),actions:{vote:re(n),code:Re(n.is_self?n.selftext:n.url),other:[{kind:"link",client_id:a.id,url:"/domain/"+n.domain,text:n.domain},ke(n.name),he(n.name,n.saved),{kind:"link",client_id:a.id,url:"/duplicates/"+n.id,text:"Duplicates"},_e(n.name,n.subreddit),be(n.name),qe(k)]}},internal_data:i.data})),m}else if(i.data.kind==="subreddit_unloaded"){const r=i.data,n=r.listing,d=Pt(i.data.details,i.data.sort),u=Rt(i.data.details,i.data.sort);p.fillLinkOnce(e,u,()=>$.encode({kind:"link_replies",url:x(y(r.details,r.sort),{before:void 0,after:void 0})}));const s={display:"repivot_list",loader:{kind:"horizontal_loader",key:d,load_count:null,request:u,client_id:a.id,autoload:!0},sort_options:[{kind:"url",name:"Hot",url:y(r.details,{v:"hot",t:"all"})},{kind:"url",name:"Best",url:y(r.details,{v:"best",t:"all"})},{kind:"url",name:"New",url:y(r.details,{v:"new",t:"all"})},{kind:"url",name:"Rising",url:y(r.details,{v:"rising",t:"all"})},{kind:"more",name:"Top",submenu:[{kind:"url",name:"Hour",url:y(r.details,{v:"top",t:"hour"})},{kind:"url",name:"Day",url:y(r.details,{v:"top",t:"day"})},{kind:"url",name:"Week",url:y(r.details,{v:"top",t:"week"})},{kind:"url",name:"Month",url:y(r.details,{v:"top",t:"month"})},{kind:"url",name:"Year",url:y(r.details,{v:"top",t:"year"})},{kind:"url",name:"All",url:y(r.details,{v:"top",t:"all"})}]},{kind:"more",name:"Controversial",submenu:[{kind:"url",name:"Hour",url:y(r.details,{v:"controversial",t:"hour"})},{kind:"url",name:"Day",url:y(r.details,{v:"controversial",t:"day"})},{kind:"url",name:"Week",url:y(r.details,{v:"controversial",t:"week"})},{kind:"url",name:"Month",url:y(r.details,{v:"controversial",t:"month"})},{kind:"url",name:"Year",url:y(r.details,{v:"controversial",t:"year"})},{kind:"url",name:"All",url:y(r.details,{v:"controversial",t:"all"})}]}]};if(!i.data.missing_replies&&(n.data.children.length>0||n.data.after!=null)){const c=[];for(const m of n.data.children)c.push(Te(e,m,{parent_fullname:"@E_SUBREDDIT",sort:null}));if(n.data.after!=null){const m=Dt(i.data.details,i.data.sort,n.data.after),k=It(i.data.details,i.data.sort,n.data.after);c.push({kind:"horizontal_loader",key:m,load_count:null,request:k,client_id:a.id,autoload:!1})}p.fillLink(e,d,c)}const l=St(i.data.details,i.data.sort);return p.fillLinkOnce(e,l,()=>({kind:"post",client_id:a.id,url:"/"+r.details.base.join("/"),parent:null,replies:s,content:{kind:"page",title:JSON.stringify(t),wrap_page:{sidebar:{display:"tree",loader:{kind:"horizontal_loader",key:Je(r.details),load_count:null,request:p.fillLinkOnce(e,Ct(r.details),()=>$.encode({kind:"sidebar",sub:r.details})),client_id:a.id,autoload:!0}},header:{kind:"bio",banner:null,icon:null,name:{display:JSON.stringify(t).toString(),link_name:JSON.stringify(t).toString()},body:null,menu:null,raw_value:i}}},internal_data:i.data})),l}else{if(i.data.kind==="depth_more")return p.createSymbolLinkToError(e,"ERROR; 'depth_more' be handled seperately by reply iterators",i);if(i.data.kind==="more")return p.createSymbolLinkToError(e,"ERROR; 'more' be handled seperately by reply iterators",i);if(i.data.kind==="wikipage"){const r=i.data,n=r.listing,d=r.pathraw.substring(r.pathraw.lastIndexOf("/")+1),u=Lt(r.pathraw);return p.fillLinkOnce(e,u,()=>({kind:"post",client_id:a.id,url:r.pathraw,parent:null,replies:null,content:{kind:"post",title:{text:d},collapsible:!1,body:{kind:"text",content:n.data.content_html,client_id:a.id,markdown_format:"reddit_html"},info:{edited:{date:n.data.revision_date*1e3}},author:ni(n.data.revision_by),actions:{other:n.data.may_revise?[{kind:"link",client_id:a.id,text:"Edit",url:"TODO edit wiki page"}]:[]}},internal_data:i.data})),u}else xe(i.data)}}const $=C("loader");async function At(e){await new Promise(i=>setTimeout(i,1e3));let t=$.decode(e);if(t.kind==="parent_permalink"&&(t={kind:"link_replies",url:`/comments/${t.post_id}/comment/${t.parent_id??""}?context=0`}),t.kind==="sidebar"&&(t={kind:"link_replies",url:"/"+[...t.sub.base,"@sidebar"].join("/")}),t.kind==="link_replies")return{content:(await Ve(t.url)).content};if(t.kind==="more")throw new Error("TODO more");if(t.kind==="vertical")throw new Error("TODO vertical");xe(t)}const ue=new Set(["/","/r/:subredditName/collection/:collectionId","/r/:subredditName/collection/:collectionId/:partialPostId","/r/:subredditName/collection/:collectionId/:partialPostId/:partialCommentId","/r/:subredditName/comments/:partialPostId/:urlSafePostTitle/:partialCommentId","/r/:subredditName/comments/:partialPostId/:urlSafePostTitle?","/r/:subredditName/duplicates/:partialPostId/:urlSafePostTitle?","/user/:subredditName/collection/:collectionId","/user/:subredditName/collection/:collectionId/:partialPostId","/user/:subredditName/collection/:collectionId/:partialPostId/:partialCommentId","/user/:subredditName/comments/:partialPostId/:urlSafePostTitle/:partialCommentId","/user/:subredditName/comments/:partialPostId/:urlSafePostTitle?","/user/:subredditName/duplicates/:partialPostId/:urlSafePostTitle?","","/best","/hot","/new","/rising","/controversial","/top","/gilded","/awarded","/acknowledgements","/appeal","/appeals","/avatar","/avatar/:username","/avatar/:username/:avatarId","/coins","/coins/mobile","/comments/:partialPostId/:urlSafePostTitle/:partialCommentId","/comments/:partialPostId/:urlSafePostTitle?","/community-points/","/community-points/documentation/*","/duplicates/:partialPostId/:urlSafePostTitle?","/econ-management","/explore","/explore/:categoryName","/framedGild/:thingId","/framedModal/:type","/label/subreddits","/me/f/mod","/me/f/mod/awarded","/me/f/mod/best","/me/f/mod/controversial","/me/f/mod/gilded","/me/f/mod/hot","/me/f/mod/new","/me/f/mod/rising","/me/f/mod/top","/me/m/:multiredditName","/me/m/:multiredditName/awarded","/me/m/:multiredditName/best","/me/m/:multiredditName/controversial","/me/m/:multiredditName/gilded","/me/m/:multiredditName/hot","/me/m/:multiredditName/new","/me/m/:multiredditName/rising","/me/m/:multiredditName/top","/me/m/:multiredditName/search","/message/inbox","/message/unread","/message/messages","/message/comments","/message/selfreply","/message/mentions","/message/compose","/message/sent","/message/moderator","/message/messages/:messageId([A-Za-z0-9]+)","/notifications/","/original","/original/:categoryName/:sort([a-z]+)?","/original/submit","/powerup","/powerups","/prediction","/predictions","/premium","/r/:subredditName","/r/:subredditName/awarded","/r/:subredditName/best","/r/:subredditName/controversial","/r/:subredditName/gilded","/r/:subredditName/hot","/r/:subredditName/new","/r/:subredditName/rising","/r/:subredditName/top","/r/:subredditName/about","/r/:subredditName/about/awards","/r/:subredditName/about/powerups","/r/:subredditName/about/muted","/r/:subredditName/about/badges","/r/:subredditName/about/banned","/r/:subredditName/about/chat","/r/:subredditName/about/settings","/r/:subredditName/about/contributors","/r/:subredditName/about/emojis","/r/:subredditName/about/emotes","/r/:subredditName/about/eventposts","/r/:subredditName/about/moderators","/r/:subredditName/about/rules","/r/:subredditName/about/removal","/r/:subredditName/about/modqueue","/r/:subredditName/about/reports","/r/:subredditName/about/spam","/r/:subredditName/about/talkhosts","/r/:subredditName/about/unmoderated","/r/:subredditName/about/edited","/r/:subredditName/about/postflair","/r/:subredditName/about/log","/r/:subredditName/about/flair","/r/:subredditName/about/edit","/r/:subredditName/about/userflair","/r/:subredditName/about/wiki","/r/:subredditName/about/wikicontributors","/r/:subredditName/about/wikibanned","/r/:subredditName/about/traffic","/r/:subredditName/about/scheduledposts","/r/:subredditName/about/broadcasting","/r/:subredditName/about/content","/r/:subredditName/about/predictions","/r/:subredditName/about/wiki/:wikiPageName*","/r/:subredditName/about/wiki/edit/:wikiPageName+","/r/:subredditName/about/wiki/create/:wikiPageName+","/r/:subredditName/about/wiki/settings/:wikiPageName+","/r/:subredditName/about/wiki/revisions/:wikiPageName+","/r/:subredditName/about/wiki/revisions","/r/:subredditName/about/wiki/wikibanned","/r/:subredditName/about/wiki/wikicontributors","/r/:subredditName/predictions","/r/:subredditName/search","/r/:subredditName/submit","/r/:subredditName/w/:wikiPageName*","/r/:subredditName/wiki/","/r/:subredditName/wiki/:wikiPageName+","/r/:subredditName/wiki/edit/:wikiPageName+","/r/:subredditName/wiki/create/:wikiPageName+","/r/:subredditName/wiki/revisions/:wikiPageName+","/r/:subredditName/wiki/revisions","/r/:subredditName/wiki/settings/:wikiPageName+","/r/mod","/r/mod/awarded","/r/mod/best","/r/mod/controversial","/r/mod/gilded","/r/mod/hot","/r/mod/new","/r/mod/rising","/r/mod/top","/r/mod/about","/r/mod/about/edited","/r/mod/about/modqueue","/r/mod/about/reports","/r/mod/about/spam","/r/mod/about/unmoderated","/r/u_:profileName","/r/u_:profileName/:rest(.*)","/report","/rpan/:partialPostId?","/rpan/r/:subredditName/:partialPostId?","/search","/settings","/settings/account","/settings/messaging","/settings/profile","/settings/privacy","/settings/notifications","/settings/feed","/settings/gold","/settings/payments","/settings/premium","/settings/creator","/settings/special","/settings/dsp","/settings/data-request","/submit","/subreddits/leaderboard","/subreddits/leaderboard/:categoryName/","/t/:topicSlug","/talk","/u/:profileName","/u/:profileName/:rest(.*)","/u/me/avatar","/user/:profileName","/user/:profileName/downvoted","/user/:profileName/hidden","/user/:profileName/saved","/user/:profileName/upvoted","/user/:profileName/gilded","/user/:profileName/given","/user/:profileName/about/awards","/user/:profileName/about/edit/moderation","/user/:profileName/avatar","/user/:profileName/comments","/user/:profileName/draft/:draftId","/user/:profileName/followers","/user/:profileName/gilded/given","/user/:profileName/posts","/user/:profileName/snoo","/user/:profileName/submit","/user/:profileName/submitted","/user/:profileName/submitted/:rest(.*)","/user/:username/m/:multiredditName","/user/:username/m/:multiredditName/awarded","/user/:username/m/:multiredditName/best","/user/:username/m/:multiredditName/controversial","/user/:username/m/:multiredditName/gilded","/user/:username/m/:multiredditName/hot","/user/:username/m/:multiredditName/new","/user/:username/m/:multiredditName/rising","/user/:username/m/:multiredditName/top","/user/:username/m/:multiredditName/search","/user/me","/user/me/:rest(.*)","/user/me/avatar","/vault/","/vault/burn","/verification/:verificationToken","/w/:wikiPageName*","/web/community-points/","/web/membership/:subredditName","/web/points-migration/","/web/special-membership/:subredditName","/wiki/","/wiki/:wikiPageName+","inexact|/prefs","inexact|/prefs/deactivate","inexact|/prefs/blocked","inexact|/user/:username/about/edit","inexact|/user/:username/about/edit/privacy"]),b=pt(),_=[],T=e=>({kind:"link_out",out:"https://www.reddit.com"+e.path+"?"+E(e.query)}),Y=e=>t=>({kind:"todo",path:t.path+"?"+E(t.query),msg:e});b.route(["raw",{path:"rest"}],e=>({kind:"raw",path:"/"+e.path.join("/")+"?"+E(e.query)}));_.push("/acknowledgements");b.route(["acknowledgements"],T);_.push("/appeal");b.route(["appeal"],T);_.push("/appeals");b.route(["appeals"],T);_.push("/avatar");b.route(["appeals"],T);_.push("/coins");b.route(["coins"],T);_.push("/coins/mobile");b.route(["coins","mobile"],T);_.push("/r/u_:profileName","/r/u_:profileName/:rest(.*)");b.route(["r",{user:{kind:"starts-with",text:"u_"}},{remainder:"rest"}],e=>({kind:"redirect",to:"/"+["user",e.user,...e.remainder].join("/")+"?"+E(e.query)}));_.push("/u/:profileName","/u/:profileName/:rest(.*)","/u/me/avatar");b.route(["u",{user:"any"},{remainder:"rest"}],e=>({kind:"redirect",to:"/"+["user",e.user,...e.remainder].join("/")+"?"+E(e.query)}));_.push("/verification/:verificationToken");b.route(["verification",{vtoken:"any"}],T);_.push("/label/subreddits");b.route(["label","subreddits"],T);_.push("/premium");b.route(["premium"],T);_.push("/framedGild/:thingId");b.route(["framedGild",{thing:"any"}],T);_.push("/framedModal/:type");b.route(["framedModal",{type:"any"}],T);_.push("/community-points/","/vault/","/web/community-points/");b.route(["community-points"],T);b.route(["vault"],T);b.route(["web","community-points"],T);function ce(e,t){const i=n=>n.multireddit!=null&&n.user!=null?{kind:"multireddit",multireddit:n.multireddit,user:n.user,base:["user",n.user,"m",n.multireddit]}:n.user!=null?{kind:"userpage",user:n.user,base:["user",n.user]}:n.subreddit!=null?{kind:"subreddit",subreddit:n.subreddit,base:["r",n.subreddit]}:{kind:"homepage",base:[]};(t==="home"||t==="subreddit"||t==="user")&&(t==="home"&&_.push("/submit"),t==="subreddit"&&_.push("/r/:subredditName/submit"),t==="user"&&_.push("/user/:profileName/submit"),e.route(["submit"],n=>({kind:"submit",sub:i(n)})));const r=["best","hot","new","rising","controversial","top","gilded","awarded"];if(t==="home"&&_.push("","/",...r.map(n=>"/"+n)),t==="subreddit"&&_.push("/r/:subredditName",...r.map(n=>"/r/:subredditName/"+n)),t==="multireddit"&&_.push("/user/:username/m/:multiredditName",...r.map(n=>"/user/:username/m/:multiredditName/"+n)),e.route([{sort:[...r,...t==="user"?[]:[null]]}],n=>({kind:"subreddit",sub:i(n),is_user_page:!1,current_sort:{v:n.sort??"hot",t:n.query.t??"all"},before:n.query.before??null,after:n.query.after??null})),t==="subreddit"&&e.route(["@sidebar"],n=>({kind:"subreddit_sidebar",sub:i(n)})),t==="subreddit"||t==="user"||t==="home"){const n=t==="subreddit"?"/r/:subredditName":t==="user"?"/user/:subredditName":t==="home"?"":xe(t);_.push(n+"/duplicates/:partialPostId/:urlSafePostTitle?"),e.route(["duplicates",{post_id_unprefixed:"any"},{url_safe_post_title:"optional"}],d=>({kind:"duplicates",sub:i(d),post_id_unprefixed:d.post_id_unprefixed,after:d.query.after??null,before:d.query.before??null,crossposts_only:d.query.crossposts_only==="true",sort:d.query.sort??"num_comments"})),_.push(n+"/comments/:partialPostId/:urlSafePostTitle?"),e.route(["comments",{post_id_unprefixed:"any"},{url_safe_post_title:"optional"}],d=>({kind:"comments",sub:i(d),post_id_unprefixed:d.post_id_unprefixed,focus_comment:d.query.comment??null,sort_override:d.query.sort??null,sort_override_time:d.query.t??null,context:d.query.context??null})),_.push(n+"/comments/:partialPostId/:urlSafePostTitle/:partialCommentId"),e.route(["comments",{post_id_unprefixed:"any"},{url_safe_post_title:"any"},{partial_comment_id:"any"}],d=>({kind:"comments",sub:i(d),post_id_unprefixed:d.post_id_unprefixed,focus_comment:d.partial_comment_id,sort_override:d.query.sort??null,context:d.query.context??null}))}}b.with(["user","me"],e=>{_.push("/user/me/avatar"),e.catchall(Y("redirect to current user"))});b.with(["user",{user:"any"}],e=>{_.push("/user/:profileName/avatar"),e.route(["user",{profile_name:"any"},"avatar"],i=>({kind:"redirect",to:"/avatar"})),_.push("/user/:profileName","/user/:profileName/comments","/user/:profileName/submitted","/user/:profileName/submitted/:rest(.*)"),e.route([{tab:["overview","comments","submitted",null]}],i=>({kind:"user",username:i.user,current:{kind:"sorted-tab",tab:i.tab??"overview",sort:{sort:i.query.sort??(i.tab==="submitted"?"hot":"new"),t:i.query.t??"all"}}})),_.push("/user/:profileName/posts"),e.route(["posts"],i=>({kind:"redirect",to:"/user/"+i.user+"/submitted?"+E(i.query)}));const t=["downvoted","hidden","saved","upvoted"];_.push(...[...t,"gilded","given"].map(i=>"/user/:profileName/"+i)),_.push("/user/:profileName/gilded/given"),e.route([{tab:t}],i=>({kind:"user",username:i.user,current:{kind:"unsorted-tab",tab:i.tab}})),e.route(["gilded",{by:["received","given",null]}],i=>({kind:"user",username:i.user,current:{kind:"gild-tab",tab:"gilded",by:i.by??i.query.show??"received"}})),e.route(["given"],i=>({kind:"user",username:i.user,current:{kind:"gild-tab",tab:"gilded",by:"given"}})),_.push("/user/:profileName/snoo"),e.route(["snoo"],Y("snoo")),_.push("/user/:profileName/draft/:draftId"),e.route(["draft",{draft_id:"any"}],Y("drafts")),_.push("/user/:profileName/about/edit/moderation"),e.route(["about","edit","moderation"],Y("user profile moderation settings")),e.with(["m",{multireddit:"any"}],i=>ce(i,"multireddit")),ce(e,"user")});b.with(["r",{subreddit:"any"}],e=>{_.push("/r/:subredditName/wiki/revisions","/r/:subredditName/wiki/settings/:wikiPageName+","/r/:subredditName/wiki/edit/:wikiPageName+","/r/:subredditName/wiki/create/:wikiPageName+","/r/:subredditName/wiki/revisions/:wikiPageName+","/r/:subredditName/wiki/","/r/:subredditName/w/:wikiPageName*","/r/:subredditName/wiki/:wikiPageName+"),e.with([{w_wiki:["w","wiki"]}],t=>{t.route([{wiki_path:"rest"}],i=>({kind:"wiki",sub:{kind:"subreddit",base:["r",i.subreddit],subreddit:i.subreddit},path:i.wiki_path.length===0?["index"]:i.wiki_path,query:i.query}))}),ce(e,"subreddit")});b.route([{w_wiki:["w","wiki"]},{wiki_path:"rest"}],e=>({kind:"wiki",sub:{kind:"homepage",base:[]},path:e.wiki_path,query:e.query}));b.with(["message"],e=>{const t=["inbox","unread","messages","comments","selfreply","mentions"];_.push(...t.map(i=>"/message/"+i)),e.route([{tab:[...t]}],i=>({kind:"inbox",current:{tab:"inbox",inbox_tab:i.tab}})),_.push("/message/compose"),e.route(["compose"],i=>({kind:"inbox",current:{tab:"compose",to:i.query.to,subject:i.query.subject,message:i.query.message}})),_.push("/message/sent"),e.route(["sent"],i=>({kind:"inbox",current:{tab:"sent"}})),_.push("/message/moderator"),e.route(["moderator"],i=>({kind:"inbox",current:{tab:"mod"}})),_.push("/message/messages/:messageId([A-Za-z0-9]+)"),e.route(["messages",{message_id:"any"}],i=>({kind:"inbox",current:{tab:"message",msgid:i.message_id}}))});ce(b,"home");b.with(["mod"],e=>{b.catchall(Y("not supported"))});b.with(["subreddits"],e=>{e.with(["mine"],t=>{t.route([{tab:[null,"subscriber","contributor","moderator"]}],i=>({kind:"subreddits",value:{tab:"mine",subtab:i.tab??"subscriber"}}))}),e.route([{tab:[null,"new","popular"]}],t=>({kind:"subreddits",value:{tab:t.tab??"popular"}}))});b.catchall(Y("not supported"));const me=[];for(const e of _)ue.has(e)?ue.delete(e):me.push("\u2022 unknown: "+e);if(ue.size>0)for(const e of ue)me.push("\u2022 missing: "+e);if(me.length>0){console.log("reddit router ::");for(const e of me)console.log(e)}const pe="biw1k0YZmDUrjg",De="https://thread.pfg.pw/login/reddit";function W(e){if(e.type==null)return[];if(e.type==="text"&&(e.text==null||e.text===""))return[];const t=e.type==="richtext"?(e.richtext??[]).flatMap(r=>r.e==="text"?[{kind:"text",text:r.t,styles:{}}]:r.e==="emoji"?[{kind:"emoji",url:r.u,name:r.a}]:(N(r.e),[{kind:"error",text:"#TODO("+r.e+")",value:r}])):e.type==="text"?[{kind:"text",text:e.text,styles:{}}]:[{kind:"error",text:"TODO: "+e.type,value:e}],i=t.map(r=>r.kind==="text"?r.text:"").join("");return[{color:e.background_color??void 0,elems:t,content_warning:i.toLowerCase().startsWith("cw:")||i.toLowerCase().startsWith("tw:")}]}function Ie(e){const t=[];for(const i of e.sort((r,n)=>n.count-r.count)){t.length>0&&t.push({kind:"text",text:" ",styles:{}});const r=i.resized_static_icons[0],n=i.resized_icons[i.resized_icons.length-1];t.push({kind:"emoji",url:r.url,name:i.name,hover:{url:n.url,w:n.width,h:n.height,description:i.description+" (price: "+i.coin_price+")"}}),i.count>1&&t.push({kind:"text",text:"\xD7"+i.count,styles:{}})}return t.length===0?[]:[{elems:t,content_warning:!1,system:"none"}]}function Oe(e){return L.encode({kind:"vote",query:e})}function qt(e){return L.encode({kind:"delete",fullname:e})}const L=C("act");function Ye(e,t){try{return Ee(e.document,t)}catch(i){return console.log("Error parsing richtext:",i),[o.p(o.error("Error parsing richtext: "+i,i))]}}function Ee(e,t){return e.map(i=>Bt(i,t))}function N(e){console.log("Expected unsupported",e)}function Se(e,t){if(e.status!=="valid")return{thumb:null,aspect:void 0,body:{kind:"richtext",content:[o.p(o.error("Bad Status "+e.status+", "+t,e))]}};if(e.e==="Image"){const i=e.p?.[0]??e.s;return{thumb:i.u??"error",aspect:i.x/i.y,body:{kind:"captioned_image",url:e.s.u,w:e.s.x,h:e.s.y,caption:t}}}if(e.e==="AnimatedImage"){const i=e.p?.[0];return{thumb:i?i.u:"error",aspect:i?i.x/i.y:void 0,body:{kind:"video",source:e.s.mp4!=null?{kind:"video",sources:[{url:e.s.mp4,quality:e.s.x+"\xD7"+e.s.y}]}:{kind:"img",url:e.s.gif},aspect:e.s.x/e.s.y,gifv:!0,caption:t}}}return e.e==="RedditVideo"?{thumb:null,aspect:void 0,body:{kind:"video",source:kt(e.id),aspect:e.x/e.y,gifv:e.isGif??!1,caption:t}}:(N(e.e),{thumb:null,aspect:void 0,body:{kind:"richtext",content:[o.p(o.error("TODO "+e.e+", "+t,e))]}})}function Bt(e,t){switch(e.e){case"par":if(e.c.length===1&&(e.c[0]?.e==="gif"||e.c[0]?.e==="img")){const i=e.c[0],r=t.media_metadata[i.id];return r?o.kind("body",{body:Se(r,i.id.split("|")[0]).body}):o.p(o.error("Missing media id "+i.id,r))}else return e.c.length===1&&e.c[0]?.e==="text"&&e.c[0].t.match(/^---+$/)?o.hr():o.p(...ie(e.c,t));case"img":case"video":case"gif":{const i=t.media_metadata[e.id];return i?o.kind("body",{body:Se(i,e.c).body}):o.p(o.error("unknown id "+e.id,t))}case"h":return o.hn(e.l,...ie(e.c,t));case"hr":return o.hr();case"blockquote":return o.blockquote(...Ee(e.c,t));case"list":return o.kind("list",{ordered:e.o},e.c.map(i=>o.li(...Ee(i.c,t))));case"code":return o.pre(e.c.map(i=>{switch(i.e){case"raw":return i.t;case"unsupported":return"Err \xAB"+JSON.stringify(i)+"\xBB"}}).join(`
`));case"table":return o.table(e.h.map(i=>Ft(i,t)),...e.c.map(i=>i.map(r=>Mt(r,t))))}return N(e.e),o.p(o.error("TODO "+e.e,e))}function Ft(e,t){return o.th(e.a!=null?{L:"left",C:"center",R:"right"}[e.a]:void 0,...ie(e.c??[],t))}function Mt(e,t){return o.td(...ie(e.c,t))}function Be(e){return e>=10240&&e<=10495}function Fe(e,t,i){if(t.length===0){e=e.replaceAll("\xAF_(\u30C4)_/\xAF","\xAF\\_(\u30C4)_/\xAF");let s=0,l=0;if([...e].forEach(c=>{const m=c.codePointAt(0);m!==8206&&m!==32&&(l+=1),Be(m)&&s++}),s>l*.9&&s>10){const c=[];let m=[];for(const k of e.split(" "))[...k].filter(v=>Be(v.codePointAt(0))).length>5?c.length>0?(m.length>0&&(c[c.length-1]+=" "+m.join(" ")),m=[],c.push(k)):(c.push([...m,k].join(" ")),m=[]):m.push(k);return c.push(...m),[o.txt(c.join(`
`))]}return[o.txt(e)]}const r=[];let n=0;const d=s=>{const l=u.slice(n,s).join("");l.length>0&&r.push(o.txt(l))},u=[...e];return t.forEach(([s,l,c])=>{d(l),n=l+c;const m=u.slice(l,l+c).join(""),k=Wt(s);k.error!=null?r.push(o.error(m,k.error)):k.code?r.push(o.code(m)):r.push(o.txt(m,{strong:k.strong,emphasis:k.emphasis,strikethrough:k.strike,superscript:k.super}))}),d(u.length),r}function Gt(e,t){switch(e.e){case"text":return Fe(e.t,e.f??[]);case"r/":case"u/":return[o.link(a,"/"+e.e+e.t,{is_user_link:e.e==="u/"?e.t:void 0},o.txt((e.l?"/":"")+e.e+e.t))];case"link":return[o.link(a,e.u,{title:e.a},...Fe(e.t,e.f??[]))];case"br":return[o.br()];case"spoilertext":return[o.spoiler(...ie(e.c,t))];case"raw":return[o.txt(e.t)];case"gif":case"img":{const i=t.media_metadata[e.id];return i?i.status!=="valid"?[o.error("Bad status "+i.status,i)]:i.e==="AnimatedImage"?[o.link(a,i.s.mp4??i.s.gif,{},o.txt("[embedded "+e.id.split("|")[0]+"]"))]:i.e==="Image"?i.t==="emoji"?[{kind:"emoji",url:i.s.u,name:":"+e.id.split("|")[2]+":"}]:[o.link(a,i.s.u,{},o.txt("[embedded "+e.id.split("|")[0]+"]"))]:[o.error("Unsupported "+i.e,i)]:[o.error("Missing media id "+e.id,i)]}}return N(e.e),[o.error("TODO "+e.e,e)]}function ie(e,t){return(e??[]).flatMap(i=>Gt(i,t))}function Wt(e){return{strong:!!(e&1),emphasis:!!(e&2),strike:!!(e&8),super:!!(e&32),code:!!(e&64),error:e&-108?"unsupported style "+e.toString(2):void 0}}function Ht(){const e=localStorage.getItem("reddit-secret");return!(e==null||e==="")}function Me(e){const i="https://"+(e?"oauth.reddit.com":"www.reddit.com"),r=localStorage.getItem("--use-mock");return r!=null?r+i:i}function Vt(e,t,i){const[r,n,d]=He(t);if(!r.startsWith("/"))throw new Error("path didn't start with `/` : `"+t+"`");if(i.override??!1)return Me(e)+r+n.toString();n.set("raw_json","1"),n.set("rtj","yes"),n.set("emotes_as_images","true"),n.set("gilding_detail","1"),n.set("profile_img","true");const u=Me(e)+r+".json?"+n.toString()+(d===""?"":"#"+d);return console.log("!PATHURL",u),u}let V=[];function $t(){return new Promise(e=>{V.push(e),V.length===1&&Jt().then(t=>{V.forEach(i=>i(t)),V=[]}).catch(t=>{console.log("Get access token error",t),V.forEach(i=>i(null)),V=[]})})}function zt(){return[...crypto.getRandomValues(new Uint8Array(25))].map(e=>e.toString(16).padStart(2,"0")).join("")}async function Jt(){const e=localStorage.getItem("reddit-secret");if(e===""||e==null){const i=localStorage.getItem("reddit-app-data");let r;if(i!=null){const u=JSON.parse(i);if(u.expires<Date.now())r=u.device_id;else return u.access_token}else r=zt();const n=await fetch("https://www.reddit.com/api/v1/access_token",{method:"POST",mode:"cors",credentials:"omit",headers:{Authorization:"Basic "+btoa(pe+":"),"Content-Type":"application/x-www-form-urlencoded"},body:E({grant_type:"https://oauth.reddit.com/grants/installed_client",device_id:r,redirect_uri:De})}).then(u=>u.json());if(n.error)throw console.log(n),new Error("error: "+JSON.stringify(n));const d={access_token:n.access_token,expires:Date.now()+n.expires_in*1e3,scope:n.scope,device_id:r};return localStorage.setItem("reddit-app-data",JSON.stringify(d)),d.access_token}const t=JSON.parse(e);if(console.log(t.expires,Date.now()),t.expires<Date.now()){console.log("Token expired, refreshing\u2026");const[i,r]=await fetch("https://www.reddit.com/api/v1/access_token",{method:"POST",mode:"cors",credentials:"omit",headers:{Authorization:"Basic "+btoa(pe+":"),"Content-Type":"application/x-www-form-urlencoded"},body:_t`grant_type=refresh_token&refresh_token=${t.refresh_token}`}).then(async d=>[d.status,await d.json()]);if(i!==200)throw console.log("Error! got",r,"with status code",i),new Error("Status code "+i);if("error"in r)throw console.log("refresh attempt: ",r,t),new Error("Got error while refreshing token: "+r.error);const n={access_token:r.access_token,refresh_token:r.refresh_token??t.refresh_token,expires:Date.now()+r.expires_in*1e3,scope:r.scope};return console.log("Refresh info:",r,n),localStorage.setItem("reddit-secret",JSON.stringify(n)),console.log("Refreshed \u221A"),n.access_token}return t.access_token}async function Yt(){const e=await $t();return e==null?"":"Bearer "+e}function Q(e,t,i){return{kind:"counter",client_id:a.id,increment:{icon:"join",color:"white",label:"Subscribe",undo_label:"Unsubscribe"},decrement:null,unique_id:"/subscribe/"+e+"/",time:Date.now(),style:"pill-filled",incremented_style:"pill-empty",count_excl_you:i?t-1:t,you:i?"increment":void 0,actions:{increment:L.encode({kind:"subscribe",subreddit:e,direction:"sub"}),reset:L.encode({kind:"subscribe",subreddit:e,direction:"unsub"})}}}function Qt(e,t){try{return Kt(e,t)}catch(i){return console.log("widget error",i),{kind:"widget",title:"Error!",raw_value:e,widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.error("Uh oh! Error "+i.toString(),e))]}}}}}function Kt(e,t){return e.kind==="moderators"?{kind:"widget",title:"Moderators",raw_value:e,widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.link(a,"/message/compose?to=/r/"+t,{style:"pill-empty"},o.txt("Message the mods"))),o.ul(...e.mods.map(i=>o.li(o.p(o.link(a,"/u/"+i.name,{is_user_link:i.name},o.txt("u/"+i.name)),...W({type:i.authorFlairType,text:i.authorFlairText,text_color:i.authorFlairTextColor,background_color:i.authorFlairBackgroundColor,richtext:i.authorFlairRichText}).flatMap(r=>[o.txt(" "),o.flair(r)]))))),o.p(o.link(a,"/r/"+t+"/about/moderators",{},o.txt("View All Moderators")))]}}}:e.kind==="community-list"?{kind:"widget",title:e.shortName,raw_value:e,widget_content:{kind:"list",items:e.data.map(i=>i.type==="subreddit"?{icon:i.communityIcon||i.iconUrl||void 0,name:{kind:"text",text:"r/"+i.name},click:{kind:"link",url:"/r/"+i.name},action:Q(i.name,i.subscribers,i.isSubscribed)}:(N(i.type),{name:{kind:"text",text:"ERROR UNSUPPORTED"+i.type},click:{kind:"body",body:{kind:"richtext",content:[o.pre(JSON.stringify(i,null,"	"),"json")]}}}))}}:e.kind==="id-card"?{kind:"widget",title:"Error!",raw_value:e,widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.error("Not supported "+e.kind,e))]}}}:e.kind==="menu"?{kind:"widget",title:"Error!",raw_value:e,widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.error("Uh oh! TODO widget "+e.kind,e))]}}}:e.kind==="textarea"?{kind:"widget",title:e.shortName,raw_value:e,widget_content:{kind:"body",body:{kind:"text",client_id:a.id,content:e.textHtml,markdown_format:"reddit_html"}}}:e.kind==="subreddit-rules"?{kind:"widget",title:e.shortName,raw_value:e,widget_content:{kind:"list",items:e.data.map((i,r)=>({name:{kind:"text",text:""+(r+1)+". "+i.shortName},click:{kind:"body",body:{kind:"text",client_id:a.id,content:i.descriptionHtml,markdown_format:"reddit_html"}}}))}}:e.kind==="image"?{kind:"widget",title:e.shortName,raw_value:e,widget_content:{kind:"image",src:e.data[e.data.length-1].url,link_url:e.data[e.data.length-1].linkUrl,width:e.data[e.data.length-1].width,height:e.data[e.data.length-1].height}}:e.kind==="post-flair"?{kind:"widget",title:e.shortName,raw_value:e,widget_content:{kind:"list",items:e.order.map(i=>{const r=e.templates[i],n=W({type:r.type,text:r.text,text_color:r.textColor,background_color:r.backgroundColor,richtext:r.richtext});return n.length!==1?(console.log("bad flair",r,n),{name:{kind:"text",text:"error bad flair"},click:{kind:"body",body:{kind:"richtext",content:[o.p(o.error("bad flair",[r,n]))]}}}):{name:{kind:"flair",flair:n[0]},click:{kind:"link",url:"/r/"+t+'/search?q=flair:"'+encodeURIComponent(r.text)+'"&restrict_sr=1'}}})}}:e.kind==="custom"?{kind:"widget",title:e.shortName,raw_value:e,widget_content:{kind:"iframe",height:""+e.height,srcdoc:`
            <head>
                <link rel="stylesheet" href="${e.stylesheetUrl}">
                <base target="_blank">
            </head>
            <body>${e.textHtml}</body>
        `}}:e.kind==="button"?{kind:"widget",title:e.shortName,raw_value:e,widget_content:{kind:"list",above_text:{kind:"text",content:e.descriptionHtml,client_id:a.id,markdown_format:"reddit_html"},items:e.buttons.map(i=>i.kind==="text"?{name:{kind:"text",text:i.text},click:{kind:"link",url:i.url}}:i.kind==="image"?{name:{kind:"image",src:i.url,w:i.width,h:i.height,alt:i.text},click:{kind:"link",url:i.linkUrl}}:(N(i.kind),{name:{kind:"text",text:"TODO "+i.kind},click:{kind:"body",body:{kind:"none"}}}))}}:e.kind==="calendar"?{kind:"widget",title:e.shortName,raw_value:e,widget_content:{kind:"body",body:{kind:"array",body:e.data.flatMap((i,r)=>[...r!==0?[{kind:"richtext",content:[o.hr()]}]:[],{kind:"text",client_id:a.id,content:i.titleHtml,markdown_format:"reddit_html"},{kind:"richtext",content:[o.p(o.timeAgo(i.startTime*1e3))]},...i.locationHtml!=null?[{kind:"text",client_id:a.id,content:i.locationHtml,markdown_format:"reddit_html"}]:[],...i.descriptionHtml!=null?[{kind:"text",client_id:a.id,content:i.descriptionHtml,markdown_format:"reddit_html"}]:[]])}}}:(N(e.kind),{kind:"widget",title:"Error!",raw_value:e,widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.error("Uh oh! Unsupported widget "+e.kind,e))]}}})}function Xt(e,t){return{kind:"widget",title:e.data.title,raw_value:e,widget_content:{kind:"community-details",description:e.data.public_description},actions_bottom:[Q(t,e.data.subscribers,e.data.user_is_subscriber??!1),{kind:"link",url:"/r/"+t+"/submit?--tc-view=page2",client_id:a.id,text:"Create Post",page1_style:"pill-empty"}]}}function Zt(e,t,{collapsed:i}){return{kind:"thread",raw_value:e,body:{kind:"text",client_id:a.id,markdown_format:"reddit_html",content:e.data.description_html},display_mode:{body:i?"collapsed":"visible",comments:"visible"},link:"/r/"+t+"/about/sidebar",layout:"reddit-post",title:{text:"old.reddit sidebar"},actions:[],default_collapsed:!1}}function ei(e){const t=e.widgets,i=d=>{const u=t.items[d];if(!u)throw new Error("bad widget "+d);return u},r=d=>Qt(d,e.subreddit),n=[...e.sub_t5?[Xt(e.sub_t5,e.subreddit)]:[],...e.sub_t5?[Zt(e.sub_t5,e.subreddit,{collapsed:!!t})]:[],...t?t.layout.sidebar.order.map(d=>r(i(d))):[],...t?[r(i(t.layout.moderatorWidget))]:[]];return n.length===0&&n.push({kind:"widget",title:"Error",widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.txt("Failed to fetch sidebar for this page :("))]}},raw_value:e}),n}function ti(e){if(!e)return{kind:"thread",title:{text:"Listing"},body:{kind:"text",client_id:a.id,content:"Listing",markdown_format:"none"},display_mode:{body:"collapsed",comments:"collapsed"},link:"TODO no link",layout:"error",actions:[],default_collapsed:!1,raw_value:e};const t=[{text:"Posts",action:{kind:"link",client_id:a.id,url:"/r/"+e.subreddit},selected:!0}];e:if(e.widgets){const i=e.widgets?.layout.topbar.order.length;if(i===0)break e;if(i!==1){t.push({text:"ERROR Topbar Order",action:{kind:"link",client_id:a.id,url:"error"},selected:!1});break e}const r=e.widgets.items[e.widgets.layout.topbar.order[0]];if(r.kind!=="menu"){t.push({text:"ERROR Topbar Item",action:{kind:"link",client_id:a.id,url:"error"},selected:!1});break e}r.showWiki&&t.push({text:"Wiki",action:{kind:"link",client_id:a.id,url:"/r/"+e.subreddit+"/wiki/index"},selected:!1});const n=d=>{if("children"in d)return{text:d.text,selected:!1,action:{kind:"menu",children:d.children.map(n)}};if("url"in d)return{text:d.text,selected:!1,action:{kind:"link",client_id:a.id,url:d.url}};F(d)};t.push(...r.data.map(d=>({...n(d),selected:!1})))}return{kind:"bio",...e.sub_t5?lt(e.sub_t5.data):{banner:null,icon:null},name:{display:e.sub_t5?.data.title,link_name:e.sub_t5?e.sub_t5.data.display_name_prefixed:"r/"+e.subreddit},body:null,subscribe:e.sub_t5?Q(e.subreddit,e.sub_t5.data.subscribers,e.sub_t5.data.user_is_subscriber??!1):void 0,menu:t.length===1?null:t,raw_value:e}}const Pe=C("deferred_inbox");function Qe(e){return e.startsWith("/mod/")?"raw!https://mod.reddit.com"+e.replace("/mod/",""):"raw!https://www.reddit.com"+e}function I(e){const t=[{kind:"link",text:"View on reddit.com",url:Qe(e),client_id:"reddit"}];return Ht()?{actions:[{kind:"act",client_id:a.id,action:L.encode({kind:"log_out"}),text:"Log Out"},...t],inboxes:[{id:"/messages",name:"Messages",active_color:"orange",hydrate:Pe.encode({kind:"inbox"}),url:"/message/inbox"},{id:"/modmail",name:"Modmail",active_color:"green",hydrate:Pe.encode({kind:"modmail"}),url:"/mod/mail/all"}]}:{actions:[{kind:"link",client_id:a.id,url:di(),text:"Log In",...t},{kind:"link",client_id:a.id,url:"raw!https://www.reddit.com/register",text:"Sign Up"},...t],inboxes:[]}}function ee(e,t,i){const r=[];return i.warning&&r.push(...i.warning),{title:"Error View",navbar:I(e),body:{kind:"one",item:{parents:[{kind:"thread",raw_value:t,body:{kind:"richtext",content:[...r,o.pre(JSON.stringify(t,null,"	"),"json")]},display_mode:{body:"visible",comments:"visible"},link:e,layout:"error",actions:[],default_collapsed:!1}],replies:[]}},sidebar:i.sidebar??void 0,display_style:"comments-view"}}function D(e,t,i,r){const n=t;if(Array.isArray(i)){if(i[0].data.children.length!==1)return ee(e,i,{sidebar:r.sidebar,warning:ae(e)});const d=i[0].data.children[0];if(d.kind!=="t3")return ee(e,i,{sidebar:r.sidebar,warning:ae(e)});const u=d.data.name,s=d.data.suggested_sort??"confidence",l=d.data.contest_mode,c=d.data.can_mod_post,m=d.data.permalink,k=d.data.locked,h=d.data.discussion_type==="CHAT",O=i[1].data.children,v=[],A=O[0];A&&A.kind==="t1"&&A.data.parent_id!==u&&v.push(Xe(A.data.subreddit,(u??"").replace("t3_",""),A.data.parent_id.replace("t1_","")));let S=O.map(P=>H(P,{link_fullname:u},{permalink:m,sort:s,is_chat:h}));if(n.kind==="comments"&&n.focus_comment!=null){const P=j=>{if(j.length!==1)return;const R=j[0];if(R.kind==="thread")return R},K=j=>{const R=j.raw_value;if(typeof R=="object"&&R&&"data"in R&&typeof R.data=="object"&&R.data&&"name"in R.data&&typeof R.data.name=="string"){const Ce=R.data.name;return Ce.startsWith("t1_")?Ce.replace("t1_",""):void 0}};let w=P(S),Ne;for(;w;){if(K(w)===n.focus_comment){Ne=w;break}w=P(w.replies??[])}if(Ne){for(w=P(S);w&&w!==Ne;){v.push(w);const j=w.replies;w.replies=void 0,w=P(j??[])}if(w){v.push(w);const j=w.replies;w.replies=void 0,S=j??[]}else S=[]}}i[1].data.after!=null&&S.push({kind:"load_more",url:"TODO",load_more:M.encode({kind:"duplicates",lmurl:"todo"}),raw_value:i[1]});let q;return n.kind==="comments"?l&&!c?q=[{selected:!0,text:"Random",action:{kind:"link",client_id:a.id,url:x(m,{sort:"random"})}}]:q=[["confidence","Best"],["top","Top"],["new","New"],["controversial","Controversial"],["old","Old"],["random","Random"],["qa","Q&A"],["live","Live"]].map(([P,K])=>({selected:(n.sort_override??s)===P,text:K,action:{kind:"link",client_id:a.id,url:x(m,{sort:P})}})):n.kind==="duplicates"?q=[["num_comments","Comments"],["new","New"]].map(([P,K])=>({selected:n.sort===P,text:K,action:{kind:"link",client_id:a.id,url:x(m.replace("/comments","/duplicates"),{sort:P})}})):q=[{selected:!1,text:"error "+n.kind,action:{kind:"link",client_id:a.id,url:"error"}}],{title:d.kind==="t3"?d.data.title:"ERR top not t3",navbar:I(e),body:{kind:"one",item:{parents:[H(d,{force_expand:v.length>0?"closed":"open",show_post_reply_button:!0},{permalink:m,sort:"unsupported",is_chat:h}),...l?[(()=>({kind:"thread",body:{kind:"richtext",content:[o.p(o.txt("This thread is in contest mode.")),o.p(o.txt(c?"As a mod, you can sort comments however you wish. Regular users have randomized sorting and cannot see scores.":"Sorting is randomized and scores are hidden."))]},display_mode:{body:"visible",comments:"collapsed"},raw_value:l,link:"no",actions:[],default_collapsed:!1,layout:"reddit-post"}))()]:[],...k?[(()=>({kind:"thread",body:{kind:"richtext",content:[o.p(o.txt("This thread is locked.")),o.p(o.txt(c?"Only mods like you can comment on this thread.":"You are not able to comment on this thread."))]},display_mode:{body:"visible",comments:"collapsed"},raw_value:k,link:"no",actions:[],default_collapsed:!1,layout:"reddit-post"}))()]:[],...v],menu:q,replies:S}},sidebar:r.sidebar??void 0,display_style:"comments-view"}}if(i.kind==="wikipage")return{title:e+" | Wiki",navbar:I(e),body:{kind:"one",item:{parents:[{kind:"thread",raw_value:i,body:{kind:"text",client_id:a.id,markdown_format:"reddit_html",content:i.data.content_html},display_mode:{body:"visible",comments:"visible"},link:e,layout:"error",actions:[],default_collapsed:!1}],replies:[]}},sidebar:r.sidebar??void 0,display_style:"comments-view"};if(i.kind==="t5")return{title:e+" | Sidebar",navbar:I(e),body:{kind:"one",item:{parents:[{kind:"thread",raw_value:i,body:{kind:"text",client_id:a.id,markdown_format:"reddit_html",content:i.data.description_html},display_mode:{body:"visible",comments:"visible"},link:e,layout:"reddit-post",title:{text:"old.reddit sidebar"},actions:[],default_collapsed:!1}],replies:[]}},sidebar:r.sidebar??void 0,display_style:"comments-view"};if(i.kind==="UserList")return{title:e,navbar:I(e),body:{kind:"one",item:{parents:[{kind:"thread",body:{kind:"richtext",content:[o.h1(o.txt("User List")),o.table([o.th("left",o.txt("Username")),o.th("left",o.txt("Added")),o.th("left",o.txt("Perms"))],...i.data.children.map(d=>[o.td(o.link(a,"/u/"+d.name,{is_user_link:d.name},o.txt("u/"+d.name))),o.td(o.timeAgo(d.date*1e3)),o.td(...d.mod_permissions.flatMap((u,s)=>[...s!==0?[o.txt(", ")]:[],o.txt(u)]))]))]},display_mode:{body:"visible",comments:"visible"},raw_value:i,layout:"reddit-post",link:e,actions:[],default_collapsed:!1}],replies:[]}},sidebar:r.sidebar??void 0,display_style:"comments-view"};if(i.kind==="Listing"){i.data.before!=null;let d;if(i.data.after!=null){const l=x(e,{before:void 0,after:i.data.after});d={kind:"load_more_unmounted",load_more_unmounted:Ke.encode({kind:"listing",url:l}),url:l,count:void 0,raw_value:i}}const u=[["overview","Overview"],["comments","Comments"],["submitted","Submitted"]],s=[["upvoted","Upvoted"],["downvoted","Downvoted"],["hidden","Hidden"],["saved","Saved"]];return{title:e,navbar:I(e),body:{kind:"listing",menu:n.kind==="subreddit"?[{selected:n.current_sort.v==="hot",text:"Hot",action:{kind:"link",client_id:a.id,url:"/"+[...n.sub.base,...n.is_user_page?["hot"]:[]].join("/")}},{selected:n.current_sort.v==="best",text:"Best",action:{kind:"link",client_id:a.id,url:"/"+[...n.sub.base,"best"].join("/")}},{selected:n.current_sort.v==="new",text:"New",action:{kind:"link",client_id:a.id,url:"/"+[...n.sub.base,"new"].join("/")}},{selected:n.current_sort.v==="rising",text:"Rising",action:{kind:"link",client_id:a.id,url:"/"+[...n.sub.base,"rising"].join("/")}},...[["top","Top"],["controversial","Controversial"]].map(([l,c])=>({selected:n.current_sort.v===l,text:n.current_sort.v===l?c+" ("+n.current_sort.t+")":c,action:{kind:"menu",children:[["hour","Hour"],["day","Day"],["week","Week"],["month","Month"],["year","Year"],["all","All Time"]].map(([m,k])=>({text:k,selected:n.current_sort.v===l&&n.current_sort.t===m,action:{kind:"link",client_id:a.id,url:"/"+[...n.sub.base,l].join("/")+"?t="+m}}))}}))]:n.kind==="user"?[...u.map(([l,c])=>({selected:n.current.tab===l,text:c,action:{kind:"show-line-two",children:[{selected:n.current.tab===l&&n.current.sort.sort==="hot",text:"Hot",action:{kind:"link",client_id:a.id,url:x("/"+["u",n.username,l].join("/"),{sort:"hot"})}},{selected:n.current.tab===l&&n.current.sort.sort==="new",text:"New",action:{kind:"link",client_id:a.id,url:x("/"+["u",n.username,l].join("/"),{sort:"new"})}},...[["top","Top"],["controversial","Controversial"]].map(([m,k])=>({selected:n.current.tab===l&&n.current.sort.sort===m,text:n.current.tab===l&&n.current.sort.sort===m?k+" ("+n.current.sort.t+")":k,action:{kind:"menu",children:[["hour","Hour"],["day","Day"],["week","Week"],["month","Month"],["year","Year"],["all","All Time"]].map(([h,O])=>({text:O,selected:n.current.tab===l&&n.current.sort.sort===m&&n.current.sort.t===h,action:{kind:"link",client_id:a.id,url:x("/"+["u",n.username,l].join("/"),{sort:m,t:h})}}))}}))]}})),{selected:n.current.tab==="gilded",text:"Gilded",action:{kind:"show-line-two",children:[{selected:n.current.tab==="gilded"&&n.current.by==="received",text:"Received",action:{kind:"link",client_id:a.id,url:"/"+["u",n.username,"gilded"].join("/")}},{selected:n.current.tab==="gilded"&&n.current.by==="given",text:"Given",action:{kind:"link",client_id:a.id,url:"/"+["u",n.username,"gilded","given"].join("/")}}]}},...s.map(([l,c])=>({selected:n.current.tab===l,text:c,action:{kind:"link",client_id:a.id,url:"/"+["u",n.username,l].join("/")}}))]:n.kind==="inbox"?[{selected:n.current.tab==="compose",text:"Compose",action:{kind:"link",client_id:a.id,url:"/message/compose"}},{selected:n.current.tab==="inbox",text:"Inbox",action:{kind:"show-line-two",children:[["inbox","All"],["unread","Unread"],["messages","Messages"],["comments","Comment Replies"],["selfreply","Post Replies"],["mentions","Username Mentions"]].map(([l,c])=>({text:c,selected:n.current.tab==="inbox"&&n.current.inbox_tab===l,action:{kind:"link",client_id:a.id,url:"/message/"+l}}))}},{selected:n.current.tab==="sent",text:"Sent",action:{kind:"link",client_id:a.id,url:"/message/sent"}}]:[{text:"Error! "+n.kind,selected:!1,action:{kind:"link",client_id:a.id,url:e}}],header:r.header??{kind:"thread",title:{text:"Listing"},body:{kind:"text",client_id:a.id,content:"Listing",markdown_format:"none"},display_mode:{body:"collapsed",comments:"collapsed"},link:"TODO no link",layout:"error",actions:[],default_collapsed:!1,raw_value:n},items:n.kind==="inbox"?i.data.children.map(l=>ii(l)):i.data.children.map(l=>ri(l,void 0,{permalink:e,sort:"unsupported",is_chat:!1})),next:d},sidebar:r.sidebar??void 0,display_style:"fullscreen-view"}}return N(i.kind),ee(e,i,{sidebar:r.sidebar,warning:ae(e)})}function ae(e){const t=e.startsWith("/mod/")||e.startsWith("/mod?")||e.startsWith("/mod#")||e==="/mod";return t&&(e=e.replace("/mod","")),[o.h1(o.txt("This url is not supported yet")),t?o.h2(o.txt("View it on mod.reddit.com: "),o.link(a,"raw!https://mod.reddit.com"+e,{},o.txt("mod.reddit.com"+e))):o.h2(o.txt("View it on reddit.com: "),o.link(a,"raw!https://www.reddit.com"+e,{},o.txt("reddit.com"+e))),o.p(o.txt("Submit an issue "),o.link(a,"https://github.com/pfgithub/threadclient/issues",{},o.txt("here")),o.txt(" if you would like to see this supported. Mention the url: "),o.code(e))]}const Ke=C("load_more_unmounted"),M=C("load_more");function re(e){const t={id:e.name,rank:"2"};return{kind:"counter",client_id:a.id,unique_id:"/vote/"+e.name+"/",time:Date.now(),increment:{icon:"up_arrow",color:"orange",label:"Upvote",undo_label:"Undo Upvote"},decrement:{icon:"down_arrow",color:"indigo",label:"Downvote",undo_label:"Undo Downvote"},special:"reddit-points",count_excl_you:(e.score_hidden??e.hide_score??!1)&&e.score===1?"hidden":e.score+(e.likes===!0?-1:e.likes===!1?1:0),you:e.likes===!0?"increment":e.likes===!1?"decrement":void 0,percent:e.upvote_ratio,actions:e.archived??!1?{error:"archived <6mo"}:{increment:Oe({...t,dir:"1"}),decrement:Oe({...t,dir:"-1"}),reset:Oe({...t,dir:"0"})}}}function Ge(e){if(e.kind==="t1"||e.kind==="t4"){const t=e.data;return{kind:"thread",info:{time:t.created_utc*1e3,edited:!1,author:t.author!=null?{name:"u/"+t.author,link:"/u/"+t.author,color_hash:t.author,client_id:a.id}:void 0,pinned:!1},body:{kind:"text",client_id:a.id,content:t.body_html,markdown_format:"reddit_html"},display_mode:{body:"visible",comments:"collapsed"},link:t.context,layout:"reddit-comment",default_collapsed:!1,actions:[...e.kind==="t1"?[re(t)]:[],...t.context?[{kind:"link",client_id:a.id,url:t.context,text:"Context"}]:[],...e.kind==="t4"?[{kind:"link",client_id:a.id,url:"/message/messages/"+t.id,text:"Permalink"}]:[],{kind:"counter",client_id:a.id,neutral_icon:"envelope_open",increment:{icon:"envelope",color:"white",label:"Mark Unread",undo_label:"\u{1F836} New"},decrement:null,count_excl_you:"none",you:t.new?"increment":void 0,unique_id:"/unread/"+t.name+"/",time:Date.now(),actions:{increment:L.encode({kind:"mark_read",direction:"un",fullname:t.name}),reset:L.encode({kind:"mark_read",direction:"",fullname:t.name})}}],raw_value:e}}return{kind:"thread",body:{kind:"richtext",content:[o.p(o.error("Unsupported "+e.kind,e))]},display_mode:{body:"visible",comments:"collapsed"},layout:"error",default_collapsed:!1,actions:[],raw_value:e,link:"no"}}function ii(e){if(e.kind==="t1"||e.kind==="t4"){const t=e.data;return{parents:[{kind:"thread",title:{text:t.subject},body:{kind:"none"},display_mode:{body:"visible",comments:"collapsed"},link:"no",layout:"reddit-post",default_collapsed:!1,actions:[],raw_value:e},Ge(e)],replies:typeof t.replies=="object"?t.replies.data.children.map(i=>Ge(i)):[]}}return{parents:[{kind:"thread",body:{kind:"richtext",content:[o.p(o.error("Unsupported "+e.kind,e))]},display_mode:{body:"visible",comments:"collapsed"},layout:"error",default_collapsed:!1,actions:[],raw_value:e,link:"no"}],replies:[]}}function ri(e,t={},i){const r=H(e,t,i);return e.kind==="t1"&&"link_title"in e.data?{parents:[{kind:"thread",title:{text:e.data.link_title},info:{time:!1,edited:!1,in:{name:e.data.subreddit_name_prefixed,link:"/"+e.data.subreddit_name_prefixed},author:{color_hash:e.data.link_author,name:e.data.link_author,link:"/u/"+e.data.link_author,client_id:a.id},pinned:!1},body:{kind:"link",client_id:a.id,url:e.data.link_permalink},display_mode:{body:"visible",comments:"collapsed"},link:e.data.link_permalink,layout:"reddit-post",default_collapsed:!1,actions:[{kind:"link",client_id:a.id,url:e.data.link_permalink,text:"Permalink"}],raw_value:e,replies:[]},...e.data.parent_id===e.data.link_id?[]:[Xe(e.data.subreddit,e.data.link_id.replace("t3_",""),e.data.parent_id.replace("t1_",""))],r],replies:[]}:{parents:[r],replies:[]}}function Xe(e,t,i){return{kind:"load_more",load_more:M.encode({kind:"context",subreddit:e,link_id:t,parent_id:i}),url:"/r/"+e+"/comments/"+t+"?comment="+i.replace("t1_","")+"&context=8",raw_value:[e,t,i]}}function H(e,t={},i){try{return oi(e,t,i)}catch(r){return console.log(r),{kind:"thread",body:{kind:"richtext",content:[o.p(o.error("Error! "+r.toString(),r))]},display_mode:{body:"visible",comments:"visible"},raw_value:{error:r,listing:e},link:"Error!",layout:"error",actions:[],default_collapsed:!1}}}function ke(e){return{kind:"delete",client_id:a.id,data:qt(e)}}const Ze=C("report");function _e(e,t){return{kind:"report",client_id:a.id,data:Ze.encode({subreddit:t,fullname:e})}}function fe(e){return{kind:"reply",client_id:a.id,key:"reply-"+e,text:"Reply",reply_info:ge.encode({parent_id:e}),mode:"reply"}}function be(e){return{kind:"reply",client_id:a.id,key:"edit-"+e,text:"Edit",reply_info:ge.encode({parent_id:e}),mode:"edit"}}function he(e,t){return{kind:"counter",client_id:a.id,increment:{icon:"bookmark",color:"green",label:"Save",undo_label:"Unsave"},decrement:null,unique_id:`/save/${e}/`,time:Date.now(),count_excl_you:"none",you:t?"increment":void 0,actions:{increment:L.encode({kind:"save",fullname:e,direction:""}),reset:L.encode({kind:"save",fullname:e,direction:"un"})}}}function et(e){const t={admin:"admin",moderator:"moderator",unsupported:"error"};return{color_hash:e.author,client_id:a.id,name:e.author,link:"/u/"+e.author,flair:[...e.flair_bits?W(e.flair_bits):[],...e.is_submitter?se([{elems:[{kind:"text",text:"\xABOP\xBB",styles:{}}],content_warning:!1,system:"op"}]):[],...e.author_cakeday??!1?se([{elems:[{kind:"text",text:"\xAB\u{1F370}\xBB",styles:{}}],content_warning:!1,system:"cake"}]):[],...e.distinguished!=null?se([{elems:[{kind:"text",text:"\xAB"+e.distinguished+"\xBB",styles:{}}],content_warning:!1,system:t[e.distinguished]??t.unsupported}]):[],...e.additional_flairs??[]],pfp:e.pfp!=null&&e.pfp!==""?{cw_masked:!!(e.pfp_over18&&!e.pfp.includes("profileIcon_snoo")),url:e.pfp,view:e.pfp.includes("profileIcon_snoo-nftv2")?"reddit-nft":null}:void 0}}function ye(e,t){return et({author:e.author,flair_bits:{type:e.author_flair_type,text:e.author_flair_text,text_color:e.author_flair_text_color,background_color:e.author_flair_background_color,richtext:e.author_flair_richtext},additional_flairs:t,distinguished:e.distinguished,is_submitter:"is_submitter"in e?e.is_submitter??!1:!1,author_cakeday:e.author_cakeday,pfp:e.profile_img,pfp_over18:e.profile_over_18??!1})}function ni(e){return et({author:e.data.name,flair_bits:null,additional_flairs:[],distinguished:null,is_submitter:!1,author_cakeday:!1,pfp:e.data.icon_img,pfp_over18:e.data.subreddit.over18})}const Le=C("fetch_removed_path");function tt(e,t){return{permalink:x(t,{sort:e.sort}),sort:e.sort,is_chat:e.is_chat}}const we={anti_evil_ops:()=>({short:"Anti-Evil Operations",title:"Removed by Reddit's Anti-Evil Operations",body:"For violations of reddit's Content Policy: https://reddit.com/help/contentpolicy"}),community_ops:()=>({short:"Community Operations",title:"Sorry, this post was removed by Reddit's Community team.",body:"It's rare, but Reddit's Community Team will occasionally remove posts from feeds to keep communities safe and civil."}),legal_operations:()=>({short:"Legal Operations",title:"This post was removed for legal reasons",body:"\xABTODO fill this\xBB"}),copyright_takedown:()=>({short:"Copyright Takedown",title:"Removed for Copyright Infringement",body:"\xABTODO fill this\xBB"}),reddit:()=>({short:"Spam Filters",title:"Sorry, this post was removed by Reddit's spam filters.",body:"Reddit's automated bots frequently filter posts it thinks might be spam."}),author:()=>({short:"Author",title:"Removed by the author",body:"The author of this post decided to remove it."}),deleted:()=>({short:"Author",title:"Deleted by the author",body:"The author of this post decided to delete it."}),moderator:(e,t)=>({short:"Moderators",title:"Removed by moderators of "+t,body:"Moderators of "+t+" decided to remove this post, likely due to a violation of the subreddit rules."}),automod_filtered:()=>({short:"Filtered by AutoModerator",title:"This post was filtered by AutoModerator",body:"\xABTODO fill this\xBB"}),content_takedown:()=>({short:"Content Takedown",title:"Sorry, this post was removed by Reddit.",body:"Reddit administrators occasionally remove posts that violate Reddit's User Agreement and Content Policy."}),unsupported:e=>({short:e,title:"This post was removed for \xAB"+e+"\xBB",body:"ThreadClient does not know what that means."})};function Re(e){return{kind:"code",body:{kind:"richtext",content:[o.pre(e,"markdown")]}}}function it(e){let t;e.author==="[deleted]"&&(JSON.stringify(e.rtjson)===JSON.stringify({document:[{c:[{e:"text",t:"[deleted]"}],e:"par"}]})?t=we.deleted("deleted",e.subreddit_name_prefixed):JSON.stringify(e.rtjson)===JSON.stringify({document:[{c:[{e:"text",t:"[removed]"}],e:"par"}]})&&(t=we.moderator("moderator",e.subreddit_name_prefixed)));const i={kind:"richtext",content:Ye(e.rtjson,{media_metadata:e.media_metadata??{}})};return t!=null?{kind:"removed",removal_message:t,fetch_path:Le.encode({path:"https://api.pushshift.io/reddit/comment/search?ids="+e.id}),body:i,client_id:a.id}:i}function rt(e){if(e.crosspost_parent_list&&e.crosspost_parent_list.length===1)return{kind:"crosspost",source:H({kind:"t3",data:e.crosspost_parent_list[0]},{force_expand:"crosspost"},tt({permalink:e.permalink,sort:"unsupported",is_chat:!1},e.permalink)),client_id:a.id};if(e.is_self)return{kind:"array",body:[e.rtjson.document.length?{kind:"richtext",content:Ye(e.rtjson,{media_metadata:e.media_metadata??{}})}:e.url==="https://www.reddit.com"+e.permalink?{kind:"none"}:{kind:"link",client_id:a.id,url:e.url,embed_html:e.media_embed?.content},e.poll_data?{kind:"poll",votable:"Cannot vote",total_votes:e.poll_data.total_vote_count,choices:e.poll_data.options.map(t=>({name:t.text,votes:t.vote_count??"hidden",id:t.id})),vote_data:"",select_many:!1,your_votes:e.poll_data.user_selection!=null?[{id:e.poll_data.user_selection}]:[],close_time:e.poll_data.voting_end_timestamp}:void 0]};if(e.gallery_data)return{kind:"gallery",images:e.gallery_data.items.map(t=>{if(!e.media_metadata)throw new Error("missing media metadata");const i=e.media_metadata[t.media_id];if(!i)throw new Error("missing mediameta for "+t.media_id);return Se(i,t.caption)})};if(e.rpan_video)return{kind:"video",source:{kind:"video",sources:[{url:e.rpan_video.hls_url}]},gifv:!1};if(e.preview&&e.preview.images.length===1){const t=e.preview.images[0];if(t.variants.mp4){const i=t.variants.mp4,r=[...i.resolutions,i.source].sort((n,d)=>d.width-n.width).map(n=>({url:n.url,quality:n.width+"\xD7"+n.height}));return{kind:"video",source:{kind:"video",sources:r,preview:[...r].reverse()},gifv:!0}}if(e.preview.enabled)return{kind:"captioned_image",url:t.source.url,w:t.source.width,h:t.source.height}}return{kind:"link",client_id:a.id,url:e.url,embed_html:e.media_embed?.content}}function nt(e,t){if(t!=="crosspost")return e.preview?.images?.[0]?.resolutions?.[0]?.url!=null?{kind:"image",url:e.preview.images[0].resolutions[0].url}:e.rpan_video?{kind:"image",url:e.rpan_video.scrubber_media_url}:e.thumbnail!=null&&e.thumbnail!==""?e.thumbnail.includes("/")?{kind:"image",url:e.thumbnail}:{kind:"default",thumb:se({self:"self",default:"default",image:"image",spoiler:"spoiler",nsfw:"nsfw",account:"account"})[e.thumbnail]??"error"}:{kind:"default",thumb:"default"}}const ot={elems:[{kind:"text",text:"Spoiler",styles:{}}],content_warning:!0},dt={elems:[{kind:"text",text:"NSFW",styles:{}}],content_warning:!0},at={elems:[{kind:"text",text:"OC",styles:{}}],content_warning:!1};function st(e){const t=[];return t.push(...W({type:e.link_flair_type,text:e.link_flair_text,text_color:e.link_flair_text_color,background_color:e.link_flair_background_color,richtext:e.link_flair_richtext})),e.spoiler&&t.push(ot),e.over_18&&t.push(dt),e.is_original_content&&t.push(at),t.push(...Ie(e.all_awardings??[])),e.approved===!0&&t.push({elems:[{kind:"text",text:"\u2713 Approved",styles:{}}],content_warning:!1,system:"approved"}),t}const se=e=>e;function oi(e,t={},i){if(t.force_expand??="closed",e.kind==="t1"){const r=e.data;return{kind:"thread",body:it(r),display_mode:{body:"visible",comments:"visible"},raw_value:e,link:x(r.permalink,{context:"3",sort:i.sort}),layout:"reddit-comment",info:{time:r.created_utc*1e3,edited:r.edited===!1?!1:r.edited*1e3,author:ye(r,Ie(r.all_awardings??[])),pinned:r.pinned||r.stickied||!1},actions:(()=>[fe(r.name),{kind:"link",client_id:a.id,text:"Permalink",url:r.permalink?x(r.permalink,{context:"3",sort:i.sort}):"Error no permalink"},be(r.name),ke(r.name),he(r.name,r.saved),_e(r.name,r.subreddit),...i.is_chat?[]:[re(r)],Re(r.body)])(),default_collapsed:r.collapsed,replies:[...r.locked?[(()=>({kind:"thread",body:{kind:"richtext",content:[o.p(o.txt("This comment is locked.")),o.p(o.txt("Only moderators are able to comment on this thread."))]},display_mode:{body:"visible",comments:"collapsed"},raw_value:r.locked,link:"no",actions:[],default_collapsed:!1,layout:"reddit-post"}))()]:[],...r.replies?r.replies.data.children.map(d=>H(d,t,tt(i,r.permalink))):[]]}}else if(e.kind==="t3"){const r=e.data,n=r.removed_by_category!=null?(we[r.removed_by_category]??we.unsupported)(r.removed_by_category,r.subreddit_name_prefixed):void 0,d=r.name.substring(3);r.mod_reports.length+r.user_reports.length>0;const u=rt(r);return{kind:"thread",title:{text:r.title},flair:st(r),body:n!=null?{kind:"removed",removal_message:n,fetch_path:Le.encode({path:"https://api.pushshift.io/reddit/submission/search?ids="+d}),body:u,client_id:a.id}:u,display_mode:t.force_expand==="crosspost"?{body:"visible",comments:"collapsed"}:{body:"collapsed",body_default:t.force_expand,comments:"collapsed"},raw_value:e,link:r.permalink,thumbnail:nt(r,t.force_expand),layout:"reddit-post",info:{time:r.created_utc*1e3,edited:r.edited===!1?!1:r.edited*1e3,author:ye(r,[]),in:{link:"/"+r.subreddit_name_prefixed,name:r.subreddit_name_prefixed},pinned:r.stickied||!1},actions:[...t.show_post_reply_button??!1?[fe(r.name)]:[],{kind:"link",client_id:a.id,url:r.permalink,text:r.num_comments.toLocaleString()+" comment"+(r.num_comments===1?"":"s")},{kind:"link",client_id:a.id,url:"/domain/"+r.domain,text:r.domain},be(r.name),ke(r.name),he(r.name,r.saved),re(r),{kind:"link",client_id:a.id,url:r.permalink.replace("/comments/","/duplicates/"),text:"Duplicates"},_e(r.name,r.subreddit)],default_collapsed:!1}}else if(e.kind==="more"){const r=e.data;if(r.children.length===0)return{kind:"load_more",load_more:M.encode({kind:"parent_permalink",permalink:i.permalink}),url:i.permalink,count:void 0,raw_value:e};if(t.link_fullname==null)throw new Error("!options.link_fullname");return{kind:"load_more",load_more:M.encode({kind:"api_loadmore",link_fullname:t.link_fullname,children:r.children,parent_permalink:i}),url:i.permalink,count:r.children.length,raw_value:e}}else if(e.kind==="t5"){const{data:r}=e;return{kind:"thread",display_mode:{body:"collapsed",body_default:"closed",comments:"visible"},raw_value:e,link:r.url,layout:"reddit-post",title:{text:r.display_name_prefixed},thumbnail:{kind:"image",url:r.community_icon},body:{kind:"text",client_id:a.id,content:r.description_html,markdown_format:"reddit_html"},actions:[Q(r.url.replace("/r/","").replace("/u/","u_"),r.subscribers,r.user_is_subscriber??!1)],default_collapsed:!0}}else return N(e.kind),{kind:"thread",title:{text:"unsupported listing kind "+e.kind},body:{kind:"text",client_id:a.id,content:"unsupported",markdown_format:"none"},display_mode:{body:"collapsed",comments:"collapsed"},raw_value:e,link:"TODO no link",layout:"error",actions:[],default_collapsed:!1}}function di(){const e=typeof location<"u"?location.host:"NOSTATE",t=["account","creddits","edit","flair","history","identity","livemanage","modconfig","modcontributors","modflair","modlog","modmail","modothers","modposts","modself","modwiki","mysubreddits","privatemessages","read","report","save","structuredstyles","submit","subscribe","vote","wikiedit","wikiread"].join(" ");return"raw!https://www.reddit.com/api/v1/authorize?"+E({client_id:pe,response_type:"code",state:e,redirect_uri:De,duration:"permanent",scope:t})}async function ne(e){if(e.kind==="homepage")return{sidebar:null};if(e.kind==="userpage")return{sidebar:null};if(e.kind==="mod")return{sidebar:null};if(e.kind==="subreddit"){const[t,i]=await Promise.all([f(`/r/${e.subreddit}/api/widgets`,{method:"GET",onerror:n=>{},cache:!0}),f(`/r/${e.subreddit}/about`,{method:"GET",onerror:n=>{},cache:!0})]),r={subreddit:e.subreddit,sub_t5:i??null,widgets:t??null};return{sidebar:ei(r),header:ti(r)}}if(e.kind==="multireddit"){const[t]=await Promise.all([f("/"+["api","multi",...e.base].join("/"),{method:"GET",onerror:i=>{},cache:!0})]);return{sidebar:t?ai(t):null}}if(e.kind==="error")return{sidebar:null};F(e)}function ai(e){const t=e.data;return[{kind:"widget",title:t.display_name,raw_value:e,widget_content:{kind:"body",body:{kind:"array",body:[{kind:"richtext",content:[o.p(o.txt("Curated by "),o.link(a,"/u/"+t.owner,{is_user_link:t.owner.toLowerCase()},o.txt("u/"+t.owner))),o.p(o.txt("Created "),o.timeAgo(t.created_utc*1e3))]},{kind:"text",client_id:a.id,content:t.description_html,markdown_format:"reddit_html"}]}},actions_bottom:[{kind:"link",client_id:a.id,text:"Create a copy",url:"TODO"}]},{kind:"widget",title:"Subreddits ("+t.subreddits.length+")",raw_value:t.subreddits,widget_content:{kind:"list",items:t.subreddits.map(i=>({name:{kind:"text",text:"r/"+i.name},click:{kind:"link",client_id:a.id,url:"/r/"+i.name}}))}}]}function lt(e){const t=e.banner_background_image||e.banner_img||"",i=e.primary_color||"",r=e.community_icon||e.icon_img||"";return{banner:t?{kind:"image",desktop:t}:i?{kind:"color",color:i}:null,icon:r?{url:r}:null}}function si(e,t,i){const r=[];return e?.data?r.push({kind:"bio",...lt(e.data.subreddit),name:{display:e.data.name,link_name:"u/"+e.data.name},menu:null,raw_value:e,body:{kind:"text",client_id:a.id,content:e.data.subreddit.public_description,markdown_format:"none"},subscribe:{kind:"counter",client_id:a.id,increment:{icon:"join",color:"white",label:"Follow",undo_label:"Unfollow"},decrement:null,unique_id:"/follow/"+e.data.name+"/",time:Date.now(),style:"pill-filled",incremented_style:"pill-empty",count_excl_you:e.data.is_friend?e.data.subreddit.subscribers-1:e.data.subreddit.subscribers,you:e.data.is_friend?"increment":void 0,actions:{error:"TODO implement add friend"}}},{kind:"widget",title:"About",widget_content:{kind:"body",body:{kind:"richtext",content:[o.h1(o.link(a,"/u/"+e.data.name,{is_user_link:e.data.name},o.txt(e.data.name))),o.p(o.txt(e.data.link_karma+" post karma")),o.p(o.txt(e.data.comment_karma+" comment karma")),o.p(o.txt("Account created "),o.timeAgo(e.data.created_utc*1e3))]}},raw_value:e}):r.push({kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.txt("Failed to fetch user info for this user :("))]}},raw_value:e}),i?.data?r.push({kind:"widget",title:"Moderates",raw_value:i,widget_content:{kind:"list",items:i.data.map(n=>({icon:n.community_icon||n.icon_img||"undefined",name:{kind:"text",text:n.sr_display_name_prefixed},click:{kind:"link",url:n.url}}))}}):i||r.push({kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.txt("Failed to fetch modded subs for this user :("))]}},raw_value:i}),t?.data?r.push({kind:"widget",title:"Trophy Case",widget_content:{kind:"body",body:{kind:"richtext",content:[...t.data.trophies.map(({data:n})=>{const d=[...n.url!=null?[o.p(o.link(a,n.url,{},o.txt(n.url)))]:[],...n.description!=null?[o.p(o.txt(n.description))]:[]];return{kind:"body",body:{kind:"crosspost",client_id:a.id,source:{kind:"thread",title:{text:n.name},body:d.length?{kind:"richtext",content:d}:{kind:"none"},thumbnail:{kind:"image",url:n.icon_70},display_mode:{body:"collapsed",comments:"collapsed",body_default:"closed"},raw_value:n,link:n.icon_70,layout:"reddit-post",info:{time:n.granted_at!=null?n.granted_at*1e3:!1,edited:!1,pinned:!0},actions:[],default_collapsed:!1}}}})]}},raw_value:e}):r.push({kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.txt("Failed to fetch trophy case for this user :("))]}},raw_value:t}),r}function J(e){return JSON.stringify(e)}function le(e){let t=b.parse(e);for(let i=0;t.kind==="redirect"&&i<100;i++)e=t.to,t=b.parse(e);return[t,e]}function ci(e){return e}const a={id:"reddit",getPage:Ve,loader:At,submit:vt,async getThread(e){try{const[t,i]=le(e);if(console.log("PARSED URL:",t),t.kind==="comments"){const[r,n]=await Promise.all([f(`/comments/${t.post_id_unprefixed}`,{method:"GET",query:{sort:t.sort_override,comment:t.focus_comment,context:t.context}}),ne(t.sub)]);return D(i,t,r,{...n})}else if(t.kind==="duplicates"){const[r,n]=await Promise.all([f(`/duplicates/${t.post_id_unprefixed}`,{method:"GET",query:{after:t.after,before:t.before,sort:t.sort,crossposts_only:""+t.crossposts_only}}),ne(t.sub)]);return D(i,t,r,{...n})}else if(t.kind==="subreddit"){const r="/"+[...t.sub.base,t.current_sort.v].join("/"),[n,d]=await Promise.all([f(r,{method:"GET",query:{t:t.current_sort.t,before:t.before,after:t.after}}),ne(t.sub)]);return D(i,t,n,{...d})}else if(t.kind==="wiki"){const r="/"+[...t.sub.base,"wiki",...t.path].join("/")+"?"+E(t.query),[n,d]=await Promise.all([f(r,{method:"GET"}),ne(t.sub)]);return D(i,t,n,{...d})}else if(t.kind==="user"){const r=i,[n,d,u,s]=await Promise.all([f(r,{method:"GET"}),f(`/user/${t.username}/about`,{method:"GET",onerror:l=>{},cache:!0}),f(`/api/v1/user/${t.username}/trophies`,{method:"GET",onerror:l=>{},cache:!0}),f(`/user/${t.username}/moderated_subreddits`,{method:"GET",onerror:l=>{},cache:!0})]);return D(i,t,n,{sidebar:si(d,u,s)})}else if(t.kind==="subreddits"){const n=await f(i,{method:"GET"});return D(i,t,n,{sidebar:null})}else if(t.kind==="inbox"){if(t.current.tab!=="compose"){if(t.current.tab!=="mod"){if(t.current.tab!=="message")if(t.current.tab==="inbox"){const r="/message/"+t.current.inbox_tab,n=await f(r,{method:"GET"});return D(i,t,n,{sidebar:null})}else t.current.tab==="sent"||F(t.current)}}}else{if(t.kind==="link_out")return{title:"LinkOut",navbar:I(i),body:{kind:"one",item:{parents:[{kind:"thread",body:{kind:"richtext",content:[o.h1(o.link(a,"raw!"+t.out,{},o.txt("View on reddit.com"))),o.p(o.txt("ThreadClient does not support this URL"))]},display_mode:{comments:"visible",body:"visible"},link:i,raw_value:t,layout:"reddit-post",actions:[],default_collapsed:!1}],replies:[]}},display_style:"comments-view"};if(t.kind==="todo"){const r=await f(t.path,{method:"GET",onerror:n=>({kind:"unsupported",extra:{title:n.message,stack:n.stack,console:n}})});return D(i,t,r,{sidebar:[{kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.txt("This page "),o.code(i),o.txt(" is not supported (yet)")),o.p(o.link(a,"raw!https://www.reddit.com"+t.path,{},o.txt("View on reddit.com"))),o.p(o.txt(t.msg))]}},raw_value:t}]})}else if(t.kind==="raw"){const r=await f(t.path,{method:"GET"});return ee(i,r,{sidebar:[{kind:"widget",title:"Raw",widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.txt("This is a raw page.")),o.p(o.link(a,t.path,{},o.txt("View Rendered")))]}},raw_value:t}]})}else{if(t.kind==="redirect")return{title:"LinkOut",navbar:I(i),body:{kind:"one",item:{parents:[{kind:"thread",body:{kind:"richtext",content:[o.h1(o.txt("Error! Redirect Loop")),o.p(o.txt("ThreadClient tried to redirect over 100 times.")),o.p(o.txt("Path: "),o.code(i),o.error("Code",t))]},display_mode:{comments:"visible",body:"visible"},link:i,raw_value:t,layout:"reddit-post",actions:[],default_collapsed:!1}],replies:[]}},display_style:"comments-view"};if(t.kind==="subreddit_sidebar")throw new Error("ENOTSUPPORTED;SUBREDDIT-SIDEBAR;PAGE1");if(t.kind==="submit")return{title:"Submit",navbar:I(i),body:{kind:"one",item:{parents:[{kind:"thread",title:{text:"Submit"},body:{kind:"richtext",content:[o.p(o.link(a,x(i,{"--tc-view":"page2"}),{},o.txt("submit a post to "+t.sub.base.join("/"))))]},display_mode:{comments:"visible",body:"visible"},link:i,raw_value:t,layout:"reddit-post",actions:[],default_collapsed:!1}],replies:[]}},display_style:"comments-view"};F(t)}}return ee(i,t,{sidebar:[{kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[o.p(o.txt("This page "),o.code(i),o.txt(" is not supported (yet)")),o.p(o.txt(t.kind)),o.p(o.txt("View it on "),o.link(a,"raw!https://reddit.com"+i,{},o.txt("reddit.com")),o.txt("."))]}},raw_value:t}]})}catch(t){const i=t;console.log(i);const r=i.toString().includes("NetworkError");return{title:"Error",navbar:I(e),body:{kind:"one",item:{parents:[{kind:"thread",title:{text:"Error"},body:{kind:"text",client_id:a.id,content:`Error ${i.toString()}`+(r?". If you're using Firefox, try disabling 'Enhanced Tracker Protection'  for this site. Enhanced tracker protection indiscriminately blocks all  requests to social media sites, including Reddit.":"."),markdown_format:"none"},display_mode:{body:"visible",comments:"collapsed"},link:e,layout:"error",actions:[],default_collapsed:!1,raw_value:{}}],replies:[]}},display_style:"comments-view"}}},async login(e,t){const i=t.get("code"),r=t.get("state");if(i==null||r==null)throw new Error("No login requested");if(r!==location.host)throw new Error("Login was for "+r);const n=await fetch("https://www.reddit.com/api/v1/access_token",{method:"POST",mode:"cors",credentials:"omit",headers:{Authorization:"Basic "+btoa(pe+":"),"Content-Type":"application/x-www-form-urlencoded"},body:E({grant_type:"authorization_code",code:i,redirect_uri:De})}).then(u=>u.json());if(n.error)throw console.log(n.error),new Error("error "+n.error);const d={access_token:n.access_token,refresh_token:n.refresh_token,expires:Date.now()+n.expires_in*1e3,scope:n.scope};console.log(n,d),localStorage.setItem("reddit-secret",JSON.stringify(d))},async fetchRemoved(e){const t=Le.decode(e),[i,r]=await fetch(t.path).then(async u=>[u.status,await u.text()]),n=JSON.parse(r.split("&lt;").join("<").split("&gt;").join(">").split("&amp;").join("&"));if(i!==200)throw console.log(i,n),new Error("Got status "+i);if(n.data.length===0)throw console.log(i,n),new Error("Post was deleted before it could be saved:.");const d=n.data[0];if(d.selftext==="[deleted]"||d.selftext==="[removed]"||d.body==="[deleted]"||d.body==="[removed]")throw new Error("Post was deleted before it could be saved.");if(d.selftext)return{kind:"text",client_id:a.id,content:d.selftext,markdown_format:"reddit"};if(d.body)return{kind:"text",client_id:a.id,content:d.body,markdown_format:"reddit"};throw console.log("got item",d),new Error("no selftext or body")},async act(e){const t=L.decode(e);if(t.kind==="vote"){const i=await f("/api/vote",{method:"POST",mode:"urlencoded",body:t.query});console.log(i)}else if(t.kind==="delete"){const i=await f("/api/del",{method:"POST",mode:"urlencoded",body:{id:t.fullname}});console.log(i)}else if(t.kind==="save"){const i=await f(`/api/${t.direction}save`,{method:"POST",mode:"urlencoded",body:{id:t.fullname}});console.log(i)}else if(t.kind==="subscribe"){const i=await f("/api/subscribe",{method:"POST",mode:"urlencoded",body:{action:t.direction,sr_name:t.subreddit}});console.log(i)}else if(t.kind==="mark_read"){const i=await f(`/api/${t.direction}read_message`,{method:"POST",mode:"urlencoded",body:{id:t.fullname},override:!0});console.log(i)}else t.kind==="log_out"?localStorage.removeItem("reddit-secret"):ct(t)},previewReply(e,t){ge.decode(t);const i={kind:"thread",body:{kind:"text",client_id:a.id,content:e,markdown_format:"reddit"},display_mode:{body:"visible",comments:"visible"},raw_value:[e,t],link:"no link",layout:"reddit-comment",info:{time:!1,edited:!1,author:{name:"TODO You",color_hash:"TODO You",link:"/u/TODO You",client_id:a.id},pinned:!1},actions:[{kind:"counter",client_id:a.id,increment:{icon:"up_arrow",color:"orange",label:"Upvote",undo_label:"Undo Upvote"},decrement:{icon:"down_arrow",color:"indigo",label:"Downvote",undo_label:"Undo Downvote"},special:"reddit-points",unique_id:null,time:0,count_excl_you:0,you:"increment",percent:1,actions:{error:"reply not posted"}}],default_collapsed:!1};return{kind:"legacy",client_id:a.id,thread:i}},async sendReply(e,t,i){const r=ge.decode(t),n=[];for(let c=0;c<=7;c++){if(c===4||c===7)continue;const m="Testing 1<<"+c;n.push({e:"par",c:[{e:"text",t:m,f:[[1<<c,0,7],[64,8,m.length]]}]})}const d={document:n},u={api_type:"json",thing_id:r.parent_id,return_rtjson:J(!0),...e==="richtext_demo"?{richtext_json:J(d)}:{text:e}},s={reply:"/api/comment",edit:"/api/editusertext"}[i],l=await f(s,{method:"POST",mode:"urlencoded",body:u});return console.log(l),H({kind:"t1",data:l},{},{permalink:"TODO",sort:"unsupported",is_chat:!1})},async fetchReportScreen(e){const t=Ze.decode(e),[i,r]=await Promise.all([await f(`/r/${t.subreddit}/about/rules`,{method:"GET",cache:!0}),await f(`/r/${t.subreddit}/about`,{method:"GET",cache:!0})]),n=t.fullname.startsWith("t1_")?"comment":t.fullname.startsWith("t3_")?"link":"unsupported",d=[],u=[];for(const s of i.rules){if(s.kind==="link"){if(n!=="link")continue}else if(s.kind==="comment"){if(n!=="comment")continue}else s.kind==="all"||N(s.kind);u.push({title:s.violation_reason,description:{kind:"text",client_id:a.id,content:s.description_html??"",markdown_format:"reddit_html"},report:{kind:"submit",data:te.encode({fullname:t.fullname,subreddit:t.subreddit,reason:{kind:"sub",id:s.short_name}})}})}r.data.free_form_reports&&u.push({title:"Custom Reason",report:{kind:"textarea",input_title:"Custom Reason",char_limit:100,data:te.encode({fullname:t.fullname,subreddit:t.subreddit,reason:{kind:"sub_other"},text_max:100})}}),d.push({title:"r/"+t.subreddit+"'s rules",report:{kind:"more",screens:u}});for(const s of i.site_rules_flow)d.push(ut(t,s));return d},async sendReport(e,t){const i=te.decode(e);if(console.log(i,t),i.text_max==null){if(t!=null)throw new Error("never. got text in non-textual entry?")}else{if(t==null)throw new Error("never. missing text");if(t.length>i.text_max)throw new Error("report text too long (max "+i.text_max+")")}if(i.reason.kind==="sub_other"&&t==null)throw new Error("never. missing text on sub_other");const r=await f("/api/report",{method:"POST",mode:"urlencoded",body:{sr_name:i.subreddit,thing_id:i.fullname,...i.reason.kind==="sub"?{rule_reason:i.reason.id}:i.reason.kind==="site"?{site_reason:i.reason.id,custom_text:t??void 0}:i.reason.kind==="sub_other"?{reason:t}:F(i.reason)}});if(console.log("GOT Response:",r),r.success!==!0)throw console.log(r),new Error("Got error response, check console");return{title:i.reason.kind==="sub_other"?"Report Sent!":i.reason.id,body:t!=null?{kind:"text",client_id:a.id,content:t,markdown_format:"none"}:{kind:"none"}}},async loadMore(e){const t=M.decode(e);if(t.kind==="api_loadmore"){const i=[...t.children],r=i.splice(0,100),n=await f("/api/morechildren",{method:"GET",query:{api_type:"json",limit_children:"false",children:r.join(","),link_id:t.link_fullname,sort:t.parent_permalink.sort}}),d=[],u=new Map;for(const l of n.json.data.things){u.set(l.data.name,l);const c=u.get(l.data.parent_id);if(c){if(c.kind!=="t1")throw new Error("expected t1 here");c.data.replies||={kind:"Listing",data:{before:null,children:[],after:null}},c.data.replies.data.children.push(l)}else d.push(l)}const s=d.map(l=>H(l,{link_fullname:t.link_fullname},t.parent_permalink));if(i.length>0){const l=s[s.length-1];if(l&&l.kind==="load_more"){const c=M.decode(l.load_more);if(c.kind==="api_loadmore")c.children=[...i,...c.children],l.load_more=M.encode(c);else throw new Error("bad (this is not good)")}else s.push({kind:"load_more",load_more:M.encode({kind:"api_loadmore",link_fullname:t.link_fullname,children:i,parent_permalink:t.parent_permalink}),url:t.parent_permalink.permalink,raw_value:i})}return s}else if(t.kind==="parent_permalink"){const i=await f(t.permalink,{method:"GET"}),[r,n]=le(t.permalink);if(r.kind!=="comments")throw new Error("bad link to parent_permalink: "+r.kind);const d=D(n,r,i,{sidebar:null});if(d.body.kind==="one")return d.body.item.replies;throw console.log("Error",d),new Error("todo support load more returning other body ("+d.body.kind+")")}else{if(t.kind==="context")throw new Error("TODO load more context");if(t.kind==="duplicates")throw new Error("TODO load more duplicates");F(t)}},async loadMoreUnmounted(e){const t=Ke.decode(e);if(t.kind==="listing"){const i=await f(t.url,{method:"GET"}),[r,n]=le(t.url),d=D(n,r,i,{sidebar:null});if(d.body.kind==="listing")return{children:d.body.items,next:d.body.next};throw console.log("Error",d),new Error("todo support load more returning other body ("+d.body.kind+")")}else{if(t.kind==="TODO more")throw new Error("TODO more");F(t)}},async hydrateInbox(e){const t=Pe.decode(e);if(t.kind==="inbox"){const r=(await f("/api/me",{method:"GET"})).data.inbox_count;return{messages:r===0?{kind:"zero"}:{kind:"exact",value:r},url:r===0?"/message/inbox":"/message/unread"}}else if(t.kind==="modmail"){const i=await f("/api/mod/conversations/unread/count",{method:"GET"});return{messages:i.notifications>0?{kind:"exact",value:i.notifications}:{kind:"zero"},url:"/mod/mail/all"}}else F(t)}};function F(e){throw console.log("not never:",e),new Error("Expected never")}function ut(e,t){let i;if("nextStepReasons"in t)i={kind:"more",screens:t.nextStepReasons.map(r=>ut(e,r))};else if("fileComplaint"in t&&t.fileComplaint===!0){const r=t.complaintUrl.replace("%25%28thing%29",encodeURIComponent(e.fullname));i={kind:"more",screens:[{title:t.complaintPageTitle,description:{kind:"text",client_id:a.id,content:t.complaintPrompt,markdown_format:"none"},report:{kind:"link",url:"raw!"+r,text:t.complaintButtonText}}]}}else if("canWriteNotes"in t&&t.canWriteNotes===!0){const r=t.isAbuseOfReportButton??!1?250:2e3;i={kind:"textarea",input_title:t.notesInputTitle,char_limit:r,data:te.encode({fullname:e.fullname,subreddit:e.subreddit,text_max:r,reason:{kind:"site",id:t.reasonText}})}}else"canSpecifyUsernames"in t&&t.canSpecifyUsernames===!0?i={kind:"link",url:"raw!https://reddit.com/report",text:"Open Reddit"}:i={kind:"submit",data:te.encode({fullname:e.fullname,subreddit:e.subreddit,reason:{kind:"site",id:t.reasonText}})};return{title:t.reasonTextToShow,report:i}}const te=C("send_report"),We=new Map;async function f(e,t){const i=t.mode;try{const r=await Yt(),n=Vt(!!r,x(e,t.query??{}),{override:t.override}),d={method:t.method,mode:"cors",credentials:"omit",headers:{...r?{Authorization:r}:{},...t.method==="POST"?{"Content-Type":{json:"application/json",urlencoded:"application/x-www-form-urlencoded"}[i]}:{}},...t.method==="POST"?{body:i==="json"?JSON.stringify(t.body):i==="urlencoded"?Object.entries(t.body??(()=>{throw new Error("post with undefined body")})()).flatMap(([k,h])=>h==null?[]:[encodeURIComponent(k)+"="+encodeURIComponent(h)]).join("&"):ct(t)}:{}},u=JSON.stringify([n,d]),s=We.get(u);if(s!=null&&(t.cache??!1))return s;const[l,c]=await fetch(n,d).then(async k=>[k.status,await k.json()]);if(l!==200){if(t.onstatus)return t.onstatus(l,c);throw console.log(l,c),new Error("got status "+l)}const m=c;if(typeof m=="object"){if("json"in m&&typeof m.json=="object"&&"errors"in m.json&&m.json.errors.length>0)throw new Error(m.json.errors.map(([k,h])=>k+": "+h).join(", "));if("jquery"in m&&Array.isArray(m.jquery)&&"success"in m&&m.success===!1)throw new Error(m.jquery.flatMap(k=>k[2]==="call"?k[3].map(h=>typeof h=="string"?h:""):[]).join(", "))}return(t.cache??!1)&&We.set(u,c),c}catch(r){if(console.log("Got error",r),t.onerror)return t.onerror(r);throw r}}const ge=C("reply");function ct(e){throw console.log(e),new Error("not unreachable")}export{et as authorFromInfo,ye as authorFromPostOrComment,ni as authorFromT2,Ie as awardingsToFlair,a as client,Q as createSubscribeAction,ke as deleteButton,ci as ec,be as editButton,N as expectUnsupported,W as flairToGenericFlair,at as flair_oc,dt as flair_over18,ot as flair_spoiler,Re as getCodeButton,it as getCommentBody,re as getPointsOn,rt as getPostBody,st as getPostFlair,nt as getPostThumbnail,J as jstrOf,D as pageFromListing,le as parseLink,Qe as rawlink,f as redditRequest,fe as replyButton,_e as reportButton,Ye as richtextDocument,he as saveButton,tt as sortWrap,ae as urlNotSupportedYet};
