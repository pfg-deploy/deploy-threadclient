const no=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};no();window.el=(...e)=>document.createElement(...e);window.txt=e=>document.createTextNode(e);window.anychange=(e,t)=>(e.forEach(n=>n.oninput=()=>t()),t(),t);window.body=document.getElementById("maincontent")||document.body;Node.prototype.attr=function(e){return Object.entries(e).forEach(([t,n])=>n==null?this.removeAttribute(t):this.setAttribute(t,n)),this};Node.prototype.adto=function(e){return e.appendChild(this),this};Node.prototype.adch=function(...e){return e.forEach(t=>this.appendChild(t)),this};Node.prototype.atxt=function(e){return this.appendChild(txt(e)),this};Node.prototype.onev=function(...e){return this.addEventListener(...e),this};Node.prototype.clss=function(...e){return e.forEach(t=>t.split(/[. ]/g).filter(n=>n).map(n=>this.classList.add(n))),this};Node.prototype.styl=function(e){return Object.entries(e).forEach(([t,n])=>this.style.setProperty(t,n)),this};Object.defineProperty(Array.prototype,"last",{enumerable:!1,get:function(){return this[this.length-1]}});Object.defineProperty(Object.prototype,"dwth",{enumerable:!1,value:function(e){return e(this),this}});const ro=(e,t)=>e===t,Le=Symbol("solid-proxy"),bt={equals:ro};let we=null,rr=ar;const Ve={},ke=1,yt=2,or={owned:null,cleanups:null,context:null,owner:null};var j=null;let it=null,W=null,Ze=null,J=null,de=null,un=0;function ue(e,t){const n=W,r=j,o=e.length===0?or:{owned:null,cleanups:null,context:null,owner:t||r};j=o,W=null;try{return mn(()=>e(()=>vn(o)),!0)}finally{W=n,j=r}}function A(e,t){t=t?Object.assign({},bt,t):bt;const n={value:e,observers:null,observerSlots:null,pending:Ve,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.pending!==Ve?n.pending:n.value)),gn(n,o));return[sr.bind(n),r]}function Kt(e,t,n){const r=st(e,t,!0,ke);Te(r)}function E(e,t,n){const r=st(e,t,!1,ke);Te(r)}function F(e,t,n){rr=uo;const r=st(e,t,!1,ke);r.user=!0,de?de.push(r):queueMicrotask(()=>Te(r))}function oo(e,t){let n;const r=st(()=>{n?n():H(e),n=void 0},void 0,!1,0);return r.user=!0,o=>{n=o,Te(r)}}function R(e,t,n){n=n?Object.assign({},bt,n):bt;const r=st(e,t,!0,0);return r.pending=Ve,r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Te(r),sr.bind(r)}function Yt(e,t,n){arguments.length===2?typeof t=="object"&&(n=t,t=e,e=!0):arguments.length===1&&(t=e,e=!0),n||(n={}),n.globalRefetch!==!1&&(ut||(ut=new Set),ut.add(x),j&&q(()=>ut.delete(x)));const r=new Set,[o,l]=A(n.initialValue),[i,s]=A(void 0,{equals:!1}),[c,a]=A(!1),[d,f]=A();let h,m=null,g=null,b=!1,$=typeof e=="function";function N(p,k,C,T){return m===p&&(m=null,g&&p===g&&n.onHydrated&&n.onHydrated(T,{value:k}),g=null,f(h=C),w(k)),k}function w(p){Ae(()=>{l(()=>p),a(!1);for(const k of r.keys())k.decrement();r.clear()})}function S(){const p=so,k=o();if(h)throw h;return W&&!W.user&&p&&Kt(()=>{i(),m&&(p.resolved||r.has(p)||(p.increment(),r.add(p)))}),k}function x(p=!0){if(p&&b)return;b=!1,f(h=void 0);const k=$?e():e;if(k==null||k===!1){N(m,H(o));return}const C=g||H(()=>t(k,{value:o(),refetching:p}));return typeof C!="object"||!("then"in C)?(N(m,C),C):(m=C,b=!0,queueMicrotask(()=>b=!1),Ae(()=>{a(!0),s()}),C.then(T=>N(C,T,void 0,k),T=>N(C,T,T)))}return Object.defineProperties(S,{loading:{get(){return c()}},error:{get(){return d()}}}),$?Kt(()=>x(!1)):x(!1),[S,{refetch:x,mutate:l}]}let ut;function Ae(e){if(Ze)return e();let t;const n=Ze=[];try{t=e()}finally{Ze=null}return mn(()=>{for(let r=0;r<n.length;r+=1){const o=n[r];if(o.pending!==Ve){const l=o.pending;o.pending=Ve,gn(o,l)}}},!1),t}function H(e){let t,n=W;return W=null,t=e(),W=n,t}function lr(e,t,n){const r=Array.isArray(e);let o,l=n&&n.defer;return i=>{let s;if(r){s=[];for(let a=0;a<e.length;a++)s.push(e[a]())}else s=e();if(l){l=!1;return}const c=H(()=>t(s,o,i));return o=s,c}}function lo(e){F(()=>H(e))}function q(e){return j===null||(j.cleanups===null?j.cleanups=[e]:j.cleanups.push(e)),e}function io(e){we||(we=Symbol("error")),j===null||(j.context===null?j.context={[we]:[e]}:j.context[we]?j.context[we].push(e):j.context[we]=[e])}function ir(){return W}function fn(e){const t=Symbol("context");return{id:t,Provider:fo(t),defaultValue:e}}function Lt(e){let t;return(t=pn(j,e.id))!==void 0?t:e.defaultValue}function hn(e){const t=R(e);return R(()=>Jt(t()))}let so;function sr(){const e=it;if(this.sources&&(this.state||e)){const t=J;J=null,this.state===ke||e?Te(this):wt(this),J=t}if(W){const t=this.observers?this.observers.length:0;W.sources?(W.sources.push(this),W.sourceSlots.push(t)):(W.sources=[this],W.sourceSlots=[t]),this.observers?(this.observers.push(W),this.observerSlots.push(W.sources.length-1)):(this.observers=[W],this.observerSlots=[W.sources.length-1])}return this.value}function gn(e,t,n){if(Ze)return e.pending===Ve&&Ze.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let r=!1;return e.value=t,e.observers&&e.observers.length&&mn(()=>{for(let o=0;o<e.observers.length;o+=1){const l=e.observers[o];r&&it.disposed.has(l),(r&&!l.tState||!r&&!l.state)&&(l.pure?J.push(l):de.push(l),l.observers&&cr(l)),r||(l.state=ke)}if(J.length>1e6)throw J=[],new Error},!1),t}function Te(e){if(!e.fn)return;vn(e);const t=j,n=W,r=un;W=j=e,ao(e,e.value,r),W=n,j=t}function ao(e,t,n){let r;try{r=e.fn(t)}catch(o){dr(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?gn(e,r):e.value=r,e.updatedAt=n)}function st(e,t,n,r=ke,o){const l={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:j,context:null,pure:n};return j===null||j!==or&&(j.owned?j.owned.push(l):j.owned=[l]),l}function et(e){const t=it;if(e.state===0||t)return;if(e.state===yt||t)return wt(e);if(e.suspense&&H(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<un);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===ke||t)Te(e);else if(e.state===yt||t){const o=J;J=null,wt(e,n[0]),J=o}}function mn(e,t){if(J)return e();let n=!1;t||(J=[]),de?n=!0:de=[],un++;try{return e()}catch(r){dr(r)}finally{co(n)}}function co(e){J&&(ar(J),J=null),!e&&(de.length?Ae(()=>{rr(de),de=null}):de=null)}function ar(e){for(let t=0;t<e.length;t++)et(e[t])}function uo(e){let t,n=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[n++]=o:et(o)}const r=e.length;for(t=0;t<n;t++)et(e[t]);for(t=r;t<e.length;t++)et(e[t])}function wt(e,t){const n=it;e.state=0;for(let r=0;r<e.sources.length;r+=1){const o=e.sources[r];o.sources&&(o.state===ke||n?o!==t&&et(o):(o.state===yt||n)&&wt(o,t))}}function cr(e){const t=it;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=yt,r.pure?J.push(r):de.push(r),r.observers&&cr(r))}}function vn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const l=o.pop(),i=n.observerSlots.pop();r<o.length&&(l.sourceSlots[i]=r,o[r]=l,n.observerSlots[r]=i)}}if(e.owned){for(t=0;t<e.owned.length;t++)vn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function dr(e){const t=we&&pn(j,we);if(!t)throw e;t.forEach(n=>n(e))}function pn(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:pn(e.owner,t):void 0}function Jt(e){if(typeof e=="function"&&!e.length)return Jt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Jt(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function fo(e){return function(n){let r;return Kt(()=>r=H(()=>(j.context={[e]:n.value},hn(()=>n.children)))),r}}const Xt=Symbol("fallback");function xt(e){for(let t=0;t<e.length;t++)e[t]()}function ho(e,t,n={}){let r=[],o=[],l=[],i=0,s=t.length>1?[]:null;return q(()=>xt(l)),()=>{let c=e()||[],a,d;return H(()=>{let h=c.length,m,g,b,$,N,w,S,x,p;if(h===0)i!==0&&(xt(l),l=[],r=[],o=[],i=0,s&&(s=[])),n.fallback&&(r=[Xt],o[0]=ue(k=>(l[0]=k,n.fallback())),i=1);else if(i===0){for(o=new Array(h),d=0;d<h;d++)r[d]=c[d],o[d]=ue(f);i=h}else{for(b=new Array(h),$=new Array(h),s&&(N=new Array(h)),w=0,S=Math.min(i,h);w<S&&r[w]===c[w];w++);for(S=i-1,x=h-1;S>=w&&x>=w&&r[S]===c[x];S--,x--)b[x]=o[S],$[x]=l[S],s&&(N[x]=s[S]);for(m=new Map,g=new Array(x+1),d=x;d>=w;d--)p=c[d],a=m.get(p),g[d]=a===void 0?-1:a,m.set(p,d);for(a=w;a<=S;a++)p=r[a],d=m.get(p),d!==void 0&&d!==-1?(b[d]=o[a],$[d]=l[a],s&&(N[d]=s[a]),d=g[d],m.set(p,d)):l[a]();for(d=w;d<h;d++)d in b?(o[d]=b[d],l[d]=$[d],s&&(s[d]=N[d],s[d](d))):o[d]=ue(f);o=o.slice(0,i=h),r=c.slice(0)}return o});function f(h){if(l[d]=h,s){const[m,g]=A(d);return s[d]=g,t(c[d],m)}return t(c[d])}}}function go(e,t,n={}){let r=[],o=[],l=[],i=[],s=0,c;return q(()=>xt(l)),()=>{const a=e()||[];return H(()=>{if(a.length===0)return s!==0&&(xt(l),l=[],r=[],o=[],s=0,i=[]),n.fallback&&(r=[Xt],o[0]=ue(f=>(l[0]=f,n.fallback())),s=1),o;for(r[0]===Xt&&(l[0](),l=[],r=[],o=[],s=0),c=0;c<a.length;c++)c<r.length&&r[c]!==a[c]?i[c](()=>a[c]):c>=r.length&&(o[c]=ue(d));for(;c<r.length;c++)l[c]();return s=i.length=l.length=a.length,r=a.slice(0),o=o.slice(0,s)});function d(f){l[c]=f;const[h,m]=A(a[c]);return i[c]=m,t(h,c)}}}function u(e,t){return H(()=>e(t))}function ft(){return!0}const mo={get(e,t,n){return t===Le?n:e.get(t)},has(e,t){return e.has(t)},set:ft,deleteProperty:ft,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ft,deleteProperty:ft}},ownKeys(e){return e.keys()}};function Mt(e){return typeof e=="function"?e():e}function We(...e){return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=Mt(e[n])[t];if(r!==void 0)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in Mt(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(Mt(e[n])));return[...new Set(t)]}},mo)}function vo(e){let t,n;const r=o=>{if(t){const i=t();if(i)return i(o)}else{const[i]=Yt(()=>(n||(n=e())).then(s=>s.default),{globalRefetch:!1});t=i}let l;return R(()=>(l=t())&&H(()=>l(o)))};return r.preload=()=>n||((n=e()).then(o=>t=()=>o.default),n),r}function z(e){const t="fallback"in e&&{fallback:()=>e.fallback};return R(ho(()=>e.each,e.children,t||void 0))}function Ha(e){const t="fallback"in e&&{fallback:()=>e.fallback};return R(go(()=>e.each,e.children,t||void 0))}function po(e){let t=!1;const n=hn(()=>e.children),r=R(()=>{let o=n();Array.isArray(o)||(o=[o]);for(let l=0;l<o.length;l++){const i=o[l].when;if(i)return[l,i,o[l]]}return[-1]},void 0,{equals:(o,l)=>o[0]===l[0]&&(t?o[1]===l[1]:!o[1]==!l[1])&&o[2]===l[2]});return R(()=>{const[o,l,i]=r();if(o<0)return e.fallback;const s=i.children;return(t=typeof s=="function"&&s.length>0)?H(()=>s(l)):s})}function jt(e){return e}let ht;function _o(e){let t;const[n,r]=A(t);ht||(ht=new Set),ht.add(r),q(()=>ht.delete(r));let o;return R(()=>{if((o=n())!=null){const l=e.fallback;return typeof l=="function"&&l.length?H(()=>l(o,()=>r(null))):l}return io(r),e.children})}try{self["workbox:window:6.5.1"]&&_()}catch{}function Qt(e,t){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(o){n(o.data)},e.postMessage(t,[r.port2])})}function bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yo(e,t){var n;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=function(o,l){if(o){if(typeof o=="string")return Ln(o,l);var i=Object.prototype.toString.call(o).slice(8,-1);return i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set"?Array.from(o):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ln(o,l):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.1"]&&_()}catch{}var Vt=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};function Wt(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var Ke=function(e,t){this.type=e,Object.assign(this,t)};function gt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function wo(){}var xo={type:"SKIP_WAITING"};function An(e,t){if(!t)return e&&e.then?e.then(wo):Promise.resolve()}var ko=function(e){var t,n;function r(s,c){var a,d;return c===void 0&&(c={}),(a=e.call(this)||this).nn={},a.tn=0,a.rn=new Vt,a.en=new Vt,a.on=new Vt,a.un=0,a.an=new Set,a.cn=function(){var f=a.fn,h=f.installing;a.tn>0||!Wt(h.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=h,f.removeEventListener("updatefound",a.cn)):(a.hn=h,a.an.add(h),a.rn.resolve(h)),++a.tn,h.addEventListener("statechange",a.ln)},a.ln=function(f){var h=a.fn,m=f.target,g=m.state,b=m===a.vn,$={sw:m,isExternal:b,originalEvent:f};!b&&a.mn&&($.isUpdate=!0),a.dispatchEvent(new Ke(g,$)),g==="installed"?a.wn=self.setTimeout(function(){g==="installed"&&h.waiting===m&&a.dispatchEvent(new Ke("waiting",$))},200):g==="activating"&&(clearTimeout(a.wn),b||a.en.resolve(m))},a.dn=function(f){var h=a.hn,m=h!==navigator.serviceWorker.controller;a.dispatchEvent(new Ke("controlling",{isExternal:m,originalEvent:f,sw:h,isUpdate:a.mn})),m||a.on.resolve(h)},a.gn=(d=function(f){var h=f.data,m=f.ports,g=f.source;return gt(a.getSW(),function(){a.an.has(g)&&a.dispatchEvent(new Ke("message",{data:h,originalEvent:f,ports:m,sw:g}))})},function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];try{return Promise.resolve(d.apply(this,f))}catch(m){return Promise.reject(m)}}),a.sn=s,a.nn=c,navigator.serviceWorker.addEventListener("message",a.gn),a}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o,l,i=r.prototype;return i.register=function(s){var c=(s===void 0?{}:s).immediate,a=c!==void 0&&c;try{var d=this;return function(f,h){var m=f();return m&&m.then?m.then(h):h(m)}(function(){if(!a&&document.readyState!=="complete")return An(new Promise(function(f){return window.addEventListener("load",f)}))},function(){return d.mn=Boolean(navigator.serviceWorker.controller),d.yn=d.pn(),gt(d.bn(),function(f){d.fn=f,d.yn&&(d.hn=d.yn,d.en.resolve(d.yn),d.on.resolve(d.yn),d.yn.addEventListener("statechange",d.ln,{once:!0}));var h=d.fn.waiting;return h&&Wt(h.scriptURL,d.sn.toString())&&(d.hn=h,Promise.resolve().then(function(){d.dispatchEvent(new Ke("waiting",{sw:h,wasWaitingBeforeRegister:!0}))}).then(function(){})),d.hn&&(d.rn.resolve(d.hn),d.an.add(d.hn)),d.fn.addEventListener("updatefound",d.cn),navigator.serviceWorker.addEventListener("controllerchange",d.dn),d.fn})})}catch(f){return Promise.reject(f)}},i.update=function(){try{return this.fn?An(this.fn.update()):void 0}catch(s){return Promise.reject(s)}},i.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(s){try{return gt(this.getSW(),function(c){return Qt(c,s)})}catch(c){return Promise.reject(c)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Qt(this.fn.waiting,xo)},i.pn=function(){var s=navigator.serviceWorker.controller;return s&&Wt(s.scriptURL,this.sn.toString())?s:void 0},i.bn=function(){try{var s=this;return function(c,a){try{var d=c()}catch(f){return a(f)}return d&&d.then?d.then(void 0,a):d}(function(){return gt(navigator.serviceWorker.register(s.sn,s.nn),function(c){return s.un=performance.now(),c})},function(c){throw c})}catch(c){return Promise.reject(c)}},o=r,(l=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&bo(o.prototype,l),r}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,r){this.Sn(n).add(r)},t.removeEventListener=function(n,r){this.Sn(n).delete(r)},t.dispatchEvent=function(n){n.target=this;for(var r,o=yo(this.Sn(n.type));!(r=o()).done;)(0,r.value)(n)},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e}());function $o(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisterError:l}=e;let i,s;const c=async(a=!0)=>{a&&i?.addEventListener("controlling",d=>{d.isUpdate&&window.location.reload()}),s&&s.waiting&&await Qt(s.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){i=new ko("/sw.js",{scope:"/",type:"classic"}),i.addEventListener("activated",a=>{a.isUpdate||r?.()});{const a=()=>{n?.()};i.addEventListener("waiting",a),i.addEventListener("externalwaiting",a)}i.register({immediate:t}).then(a=>{s=a,o?.(a)}).catch(a=>{l?.(a)})}return c}const Co={version:`22c261d
`,log:[{hash:"22c261d",hash_full:"22c261d05db1f7f37f7d2ca9d4346338feeb9941",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649797194000",commit_title:"fix test",commit_body:`fix test
`},{hash:"a51ac52",hash_full:"a51ac523546ee60f78de09d3dfe55a1462b20d0f",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649796498000",commit_title:"prefer reddit_html over reddit markdown which requires loading a wasm module. also in the future we can make `reddit_html` not have to collapse whitespace as it is always sent collapsed already",commit_body:"prefer reddit_html over reddit markdown which requires loading a wasm module. also in the future we can make `reddit_html` not have to collapse whitespace as it is always sent collapsed already\n"},{hash:"6815d8c",hash_full:"6815d8c6de73a7f2be418095addea5f039f97979",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649796099000",commit_title:"fix the comment preview not being like the resulting posted comment",commit_body:`fix the comment preview not being like the resulting posted comment
`},{hash:"368bde7",hash_full:"368bde7aa329734d5e242e9d200c3d2d728dcc30",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649793044000",commit_title:'this parent_id thing is really annoying. i think we should patch reddit responses to add a parent_id to "more" instead of making this mess',commit_body:`this parent_id thing is really annoying. i think we should patch reddit responses to add a parent_id to "more" instead of making this mess
`},{hash:"4cb4e7b",hash_full:"4cb4e7b8543be9815795d4d8c158ac2e6093b400",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649790540000",commit_title:"oops",commit_body:`oops
`},{hash:"4db9fed",hash_full:"4db9fedb6f1152434ee6d693e3e073f217bde846",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649790414000",commit_title:"fix a bug in my show implementation",commit_body:`fix a bug in my show implementation
`},{hash:"f05d38b",hash_full:"f05d38b684605468018bd6cdce64662231235705",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649788925000",commit_title:"oh oops, last commit didn't fix",commit_body:`oh oops, last commit didn't fix
`},{hash:"7f772fd",hash_full:"7f772fd5058e5eccda3decc574a5727785a989d2",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649788882000",commit_title:"fix a bug collapsing a comment not doing what it should. also we could consider instead of doing this logic we could just say if you collapse something, anything who's indent contains that collapse thing gets display:none'd",commit_body:`fix a bug collapsing a comment not doing what it should. also we could consider instead of doing this logic we could just say if you collapse something, anything who's indent contains that collapse thing gets display:none'd
`},{hash:"9589ada",hash_full:"9589ada01e25f712f672822ec58bec24314471d6",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649788492000",commit_title:"page2 is becoming usable. we have loaders now (for post comments, parent refocuses, and depth, but missing vertical loaders and loadmore loaders. loadmore will be easyish (some data transformation) but we don't even have vertical loaders implemented in /test/faker yet so that will be glhf)",commit_body:`page2 is becoming usable. we have loaders now (for post comments, parent refocuses, and depth, but missing vertical loaders and loadmore loaders. loadmore will be easyish (some data transformation) but we don't even have vertical loaders implemented in /test/faker yet so that will be glhf)
`},{hash:"86df261",hash_full:"86df2618d56e32787d34fcf75b98ab242f04a492",author_name:"pfg",author_email:"pfg@pfg.pw",date:"1649786663000",commit_title:"fix this bug. this feels messy.",commit_body:`fix this bug. this feels messy.
`}],build_time:1649797698730,build_mode:"production"},No="modulepreload",Tn={},So="/",Y=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${So}${r}`,r in Tn)return;Tn[r]=!0;const o=r.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${l}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":No,o||(i.as="script",i.crossOrigin=""),i.href=r,document.head.appendChild(i),o)return new Promise((s,c)=>{i.addEventListener("load",s),i.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Eo=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Po=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Eo]),Lo=new Set(["innerHTML","textContent","innerText","children"]),Ao={className:"class",htmlFor:"for"},Rn={class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"},To=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Ro={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function B(e,t){return R(e,void 0,t?void 0:{equals:t})}function Oo(e,t,n){let r=n.length,o=t.length,l=r,i=0,s=0,c=t[o-1].nextSibling,a=null;for(;i<o||s<l;){if(t[i]===n[s]){i++,s++;continue}for(;t[o-1]===n[l-1];)o--,l--;if(o===i){const d=l<r?s?n[s-1].nextSibling:n[l-s]:c;for(;s<l;)e.insertBefore(n[s++],d)}else if(l===s)for(;i<o;)(!a||!a.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[l-1]&&n[s]===t[o-1]){const d=t[--o].nextSibling;e.insertBefore(n[s++],t[i++].nextSibling),e.insertBefore(n[--l],d),t[o]=n[l]}else{if(!a){a=new Map;let f=s;for(;f<l;)a.set(n[f],f++)}const d=a.get(t[i]);if(d!=null)if(s<d&&d<l){let f=i,h=1,m;for(;++f<o&&f<l&&!((m=a.get(t[f]))==null||m!==d+h);)h++;if(h>d-s){const g=t[i];for(;s<d;)e.insertBefore(n[s++],g)}else e.replaceChild(n[s++],t[i++])}else i++;else t[i++].remove()}}}const On="_$DX_DELEGATE";function At(e,t,n){let r;return ue(o=>{r=o,t===document?e():v(t,e(),t.firstChild?null:void 0,n)}),()=>{r(),t.textContent=""}}function y(e,t,n){const r=document.createElement("template");r.innerHTML=e;let o=r.content.firstChild;return n&&(o=o.firstChild),o}function te(e,t=window.document){const n=t[On]||(t[On]=new Set);for(let r=0,o=e.length;r<o;r++){const l=e[r];n.has(l)||(n.add(l),t.addEventListener(l,Bo))}}function M(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Io(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function Do(e,t,n,r){r?Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n:Array.isArray(n)?e.addEventListener(t,o=>n[0](n[1],o)):e.addEventListener(t,n)}function Mo(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let l,i;for(l=0,i=o.length;l<i;l++){const s=o[l];!s||s==="undefined"||t[s]||(In(e,s,!1),delete n[s])}for(l=0,i=r.length;l<i;l++){const s=r[l],c=!!t[s];!s||s==="undefined"||n[s]===c||!c||(In(e,s,!0),n[s]=c)}return n}function _n(e,t,n={}){const r=e.style,o=typeof n=="string";if(t==null&&o||typeof t=="string")return r.cssText=t;o&&(r.cssText=void 0,n={}),t||(t={});let l,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)l=t[i],l!==n[i]&&(r.setProperty(i,l),n[i]=l);return n}function jo(e,t,n,r){typeof t=="function"?E(o=>Mn(e,t(),o,n,r)):Mn(e,t,void 0,n,r)}function v(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Be(e,t,r,n);E(o=>Be(e,t(),o,n),r)}function Vo(e,t,n,r,o={},l=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;Dn(e,i,null,o[i],n,l)}for(const i in t){if(i==="children"){r||Be(e,t.children);continue}const s=t[i];o[i]=Dn(e,i,s,o[i],n,l)}}function Wo(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function In(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,l=r.length;o<l;o++)e.classList.toggle(r[o],n)}function Dn(e,t,n,r,o,l){let i,s,c;if(t==="style")return _n(e,n,r);if(t==="classList")return Mo(e,n,r);if(n===r)return r;if(t==="ref")l||n(e);else if(t.slice(0,3)==="on:")e.addEventListener(t.slice(3),n);else if(t.slice(0,10)==="oncapture:")e.addEventListener(t.slice(10),n,!0);else if(t.slice(0,2)==="on"){const a=t.slice(2).toLowerCase(),d=To.has(a);Do(e,a,n,d),d&&te([a])}else if((c=Lo.has(t))||!o&&(Rn[t]||(s=Po.has(t)))||(i=e.nodeName.includes("-")))i&&!s&&!c?e[Wo(t)]=n:e[Rn[t]||t]=n;else{const a=o&&t.indexOf(":")>-1&&Ro[t.split(":")[0]];a?Io(e,a,t,n):M(e,Ao[t]||t,n)}return n}function Bo(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n!==null;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r(o,e):r(e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function Mn(e,t,n={},r,o){return t||(t={}),!o&&"children"in t&&E(()=>n.children=Be(e,t.children,n.children)),t.ref&&t.ref(e),E(()=>Vo(e,t,r,!0,n,!0)),n}function Be(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(t=t.toString()),i){let s=n[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),n=Re(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||l==="boolean")n=Re(e,n,r);else{if(l==="function")return E(()=>{let s=t();for(;typeof s=="function";)s=s();n=Be(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[];if(Zt(s,t,o))return E(()=>n=Be(e,s,n,r,!0)),()=>n;if(s.length===0){if(n=Re(e,n,r),i)return n}else Array.isArray(n)?n.length===0?jn(e,s,r):Oo(e,n,s):(n&&Re(e),jn(e,s));n=s}else if(t instanceof Node){if(Array.isArray(n)){if(i)return n=Re(e,n,r,t);Re(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Zt(e,t,n){let r=!1;for(let o=0,l=t.length;o<l;o++){let i=t[o],s;if(i instanceof Node)e.push(i);else if(!(i==null||i===!0||i===!1))if(Array.isArray(i))r=Zt(e,i)||r;else if((s=typeof i)=="string")e.push(document.createTextNode(i));else if(s==="function")if(n){for(;typeof i=="function";)i=i();r=Zt(e,Array.isArray(i)?i:[i])||r}else e.push(i),r=!0;else e.push(document.createTextNode(i.toString()))}return r}function jn(e,t,n){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Re(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let l=!1;for(let i=t.length-1;i>=0;i--){const s=t[i];if(o!==s){const c=s.parentNode===e;!l&&!i?c?e.replaceChild(o,s):e.insertBefore(o,n):c&&s.remove()}else l=!0}}else e.insertBefore(o,n);return[o]}const Uo="http://www.w3.org/2000/svg";function Ho(e,t=!1){return t?document.createElementNS(Uo,e):document.createElement(e)}function qo(e){const{useShadow:t}=e,n=document.createTextNode(""),r=e.mount||document.body;function o(){return()=>e.children}if(r instanceof HTMLHeadElement){const[l,i]=A(!1),s=()=>i(!0);ue(c=>v(r,()=>l()?c():o()(),null)),q(()=>{s()})}else{const l=Ho(e.isSVG?"g":"div",e.isSVG),i=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"host",{get(){return n.parentNode}}),v(i,o()),r.appendChild(l),e.ref&&e.ref(l),q(()=>r.removeChild(l))}return n}function Fo(e,t){const n=e,r=n[t];return r?Object.hasOwnProperty.call(n,t)?"error"in r?{error:r.error,value:null}:{value:r.data,error:null}:{error:"[read]Link found but not in hasOwnProperty: "+t.toString(),value:null}:{error:"[read]Link not found: "+t.toString(),value:null}}function zo(e,t,n){return{...t,kind:e,...n?{children:n}:{}}}const I={kind:zo,p:(...e)=>I.kind("paragraph",{},e),hn:(e,...t)=>I.kind("heading",{level:e},t),h1:(...e)=>I.hn(1,...e),h2:(...e)=>I.hn(2,...e),ul:(...e)=>I.kind("list",{ordered:!1},e),ol:(...e)=>I.kind("list",{ordered:!0},e),li:(...e)=>I.kind("list_item",{},e),ili:(...e)=>I.kind("tight_list_item",{},e),blockquote:(...e)=>I.kind("blockquote",{},e),txt:(e,t={})=>I.kind("text",{text:e,styles:t}),link:(e,t,n,...r)=>I.kind("link",{url:t,client_id:e.id,...n},r),pre:(e,t)=>I.kind("code_block",{text:e,lang:t}),error:(e,t)=>I.kind("error",{text:e,value:t}),br:()=>I.kind("br",{}),flair:e=>I.kind("flair",{flair:e}),table:(e,...t)=>I.kind("table",{headings:e},t),th:(e,...t)=>({align:e,children:t}),td:(...e)=>({children:e}),timeAgo:e=>I.kind("time_ago",{start:e}),hr:()=>I.kind("horizontal_line",{}),code:e=>I.kind("code",{text:e}),spoiler:(...e)=>I.kind("spoiler",{},e)},qa={link:(e,t,n,r)=>({selected:r,action:{kind:"link",client_id:e.id,url:n},text:t})};function Go(e){const t="https://v.redd.it/"+e;return{kind:"video",sources:[{url:t+"/DASHPlaylist.mpd"},{url:t+"/HLSPlaylist.m3u8"}],preview:[{url:t+"/DASH_96.mp4",type:"video/mp4"},{url:t+"/DASH_96",type:"video/mp4"}]}}function Vn(e,t){const n=e.split(".");return n.pop(),n.push(t),n.join(".")}function Wn(e){return{kind:"video",source:Go(e),gifv:!1}}function Tt(e,t){let n;try{n=new URL(e)}catch{}const r=n,o=r?.pathname??e;if(r?o.endsWith(".gif")&&r.searchParams.get("format")==="mp4":!1)return{kind:"video",gifv:!0,source:{kind:"video",sources:[{url:e,quality:"Highest"}]}};if((r?.hostname??"")==="i.imgur.com"&&o.endsWith(".gif")||o.endsWith(".gifv"))return{kind:"video",gifv:!0,source:{kind:"video",sources:[{url:Vn(e,"webm"),quality:"Highest"},{url:Vn(e,"mp4"),quality:"Highest"},{url:e,quality:"Highest"}]}};if((r?.hostname??"")==="i.redd.it"||o.endsWith(".png")||o.endsWith(".jpg")||o.endsWith(".jpeg")||o.endsWith(".gif")||o.endsWith(".webp")||(r?.hostname??"")==="pbs.twimg.com")return{kind:"captioned_image",url:e,w:null,h:null};if(e.startsWith("https://v.redd.it/"))return Wn(e.replace("https://v.redd.it/",""));if(r&&(r.host==="reddit.com"||r.host.endsWith(".reddit.com")&&r.pathname.startsWith("/link"))){const i=o.split("/");if(i.shift(),i[0]==="link"&&i[2]==="video"&&i[4]==="player")return Wn(i[3]??"")}if(r&&(r.host==="gfycat.com"||r.host.endsWith(".gfycat.com"))&&r.pathname.split("/").length===2)return{kind:"gfycatv1",id:r.pathname.replace("/","").split("-")[0].split(".")[0].toLowerCase(),host:"gfycat.com"};if(r&&(r.host==="redgifs.com"||r.host.endsWith(".redgifs.com"))&&r.pathname.split("/").length===3&&r.pathname.startsWith("/watch/")){const i=r.pathname.replace("/watch/","").split("-")[0].split(".")[0].toLowerCase();return{kind:"gfycatv2",id:i,host:"redgifs.com"}}if(o.endsWith(".mp4")||o.endsWith(".webm"))return{kind:"video",gifv:!1,source:{kind:"video",sources:[{url:e,quality:"Highest"}]}};if(o.endsWith(".mp3"))return{kind:"audio",url:e};if(r&&(r.host==="www.youtube.com"||r.host==="youtube.com"||r.host==="m.youtube.com")&&r.pathname==="/watch"){const i=r.searchParams.get("v");if(i!=null)return{kind:"youtube",id:i,search:r.searchParams.toString()}}if(r&&r.host==="youtu.be"&&r.pathname.split("/").length===2){const i=r.pathname.split("/")[1]??"no_id";return{kind:"youtube",id:i,search:r.searchParams.toString()}}if(r&&(r.host==="vocaroo.com"||r.host==="www.vocaroo.com"||r.host==="voca.ro")){const i=r.pathname.split("/").filter(s=>s);if(i.length===1&&i[0]!=null&&i[0]!=="")return{kind:"audio",url:"https://media.vocaroo.com/mp3/"+i[0]}}if(r&&(r.host==="giphy.com"||r.host==="www.giphy.com")){const i=r.pathname.split("/").filter(s=>s);if(i.length===3&&i[0]==="gifs"&&i[2]==="fullscreen"){const s=i[1].split("-"),c=s[s.length-1];return{kind:"video",source:{kind:"video",sources:[{url:"https://media4.giphy.com/media/"+c+"/giphy.mp4",quality:"Highest"}]},gifv:!0}}}if(r&&(r.host==="www.imgur.com"||r.host==="imgur.com"||r.host==="m.imgur.com")){const i=r.pathname.split("/").filter(a=>a),s=i[1],c=i[0]==="gallery"?"gallery":i[0]==="a"?"album":void 0;if(c!==void 0&&i.length===2)return{kind:"imgur",imgur_id:s,imgur_kind:c};if(i.length===1&&(i[0]??"").length>4)return{kind:"captioned_image",url:"https://i.imgur.com/"+i[0]+".jpg",w:null,h:null}}if(r&&r.host==="clips.twitch.tv"&&r.pathname.split("/").filter(i=>i).length===1){const i=r.pathname.split("/").filter(s=>s)[0];if(i!=null)return{kind:"twitch_clip",slug:i}}if(r&&(r.host==="soundcloud.com"||r.host.endsWith(".soundcloud.com")))return{kind:"oembed",client_id:"n/a",url:"https://soundcloud.com/oembed?format=json&url="+encodeURIComponent(e)};if(r&&(r.host==="tiktok.com"||r.host.endsWith(".tiktok.com")))return{kind:"oembed",client_id:"n/a",url:"https://www.tiktok.com/oembed?url="+encodeURIComponent(e)};if(t.suggested_embed!=null)return{kind:"reddit_suggested_embed",suggested_embed:t.suggested_embed}}async function Ko(e,t){const n=await fetch("https://api."+e+"/v2/gifs/"+t).then(s=>s.json());if(console.log("gfy response",n),"errorMessage"in n)throw new Error("Gfycat error: "+n.errorMessage+"; logged="+n.logged+"; reported="+n.reported);if("message"in n)throw new Error("Gfycat error: "+n.message+"; logged="+n.logged+"; reported="+n.reported);const{gif:r,user:o}=n,l="https://www."+e,i={kind:"video",aspect:r.width/r.height,gifv:!1,source:{kind:"video",sources:[{url:r.urls.hd,quality:"HD"},{url:r.urls.sd,quality:"SD"}],thumbnail:r.urls.thumbnail}};return{kind:"post",parent:null,replies:null,url:"https://www."+e+"/watch/"+t,client_id:l,display_style:"centered",content:{kind:"post",title:null,thumbnail:{kind:"image",url:r.urls.thumbnail},flair:r.tags.map(s=>({content_warning:!1,elems:[{kind:"text",text:s}]})),info:{creation_date:r.createDate*1e3},author:o?{name:o.name,color_hash:o.username,link:o.url,client_id:l,pfp:{url:o.profileImageUrl,hover:o.profileImageUrl}}:void 0,body:i,show_replies_when_below_pivot:!1,collapsible:{default_collapsed:!1},actions:{vote:{kind:"counter",client_id:l,unique_id:"like_"+t,time:Date.now(),neutral_icon:"heart",special:void 0,increment:{icon:"heart",color:"pink",label:"Like",undo_label:"Unlike"},decrement:null,count_excl_you:r.likes,you:void 0,actions:{error:"gfycat liking is not supported"}},other:[{kind:"link",text:r.views+" Views",url:"https://www."+e+"/watch/"+t,client_id:l}]}},internal_data:n}}const Bn=Symbol("raw");function Yo(e){return(t,...n)=>{const r=[];return t.forEach((l,i)=>{if(r.push({raw:l}),i<n.length){const s=n[i];typeof s=="object"&&Bn in s?r.push({raw:s[Bn]}):r.push({val:s})}}),r.map(l=>"raw"in l?l.raw:e(l.val)).join("")}}const Jo=Yo(e=>encodeURIComponent(e));function Fa(e){let t="";for(const[n,r]of Object.entries(e))r!=null&&(t&&(t+="&"),t+=Jo`${n}=${r}`);return t}function Xo(e){return e.replace(/[^a-zA-Z0-9. ]/giu,t=>"&#"+t.codePointAt(0)+";")}function ur(e){throw console.log("not never:",e),new Error("Expected never")}function Un(e,t,n,r){const o={...e},l=[...t];for(const i of n)if(typeof i=="string"){if(l.shift()!==i)return null}else{const s=Object.entries(i);if(!s[0]||s.length!==1)throw new Error("bad bit object");const[c,a]=s[0];if(a==="any"){const d=l.shift();if(d==null)return null;o[c]=d}else if(a==="rest")o[c]=l.splice(0);else if(a==="optional")o[c]=l.shift()??null;else if(Array.isArray(a)||"forEach"in a){const d=l.shift()??null;if(!a.includes(d))return null;o[c]=d}else if(a.kind==="starts-with"){const d=l.shift();if(d==null||!d.startsWith(a.text))return null;o[c]=d.replace(a.text,"")}}return r.assert_end&&l.length!==0?null:{opts:o,path:l}}function fr(e){const t=[],n={with(r,o){const l=fr(!1);o(l),t.push((i,s)=>{const c=Un(i,s,r,{assert_end:!1});return c?l.parseSub(c.opts,c.path):null})},route(r,o){t.push((l,i)=>{const s=Un(l,i,r,{assert_end:!0});return s?o(s.opts):null})},catchall(r){t.push((o,l)=>r(o))},parse(r){if(!e)throw new Error("not root, ParentOpts \u2260 BaseParentOpts");let o;try{o=new URL(r,new URL("https://example/"))}catch{return null}const l=o.pathname.split("/").filter(s=>s),i={query:Object.fromEntries(o.searchParams),path:o.pathname};return n.parseSub(i,l)},parseSub(r,o){for(const l of t){const i=l(r,o);if(i!=null)return i}return null}};return n}function za(){return fr(!0)}function hr(e,t){const n=t[e.kind]??t.unsupported??(()=>{throw new Error("condition "+e.kind+" was not handled and no unsupported branch")});return()=>n(e)}function at(e,t){return hr(e,t)()}const Qo=y("<div><div></div></div>"),Zo=y("<div aria-hidden></div>");function tl(e){let t;const n=(o,l,i)=>{if(l.bottom<0||l.right<0||l.left>o[0]||l.top>o[1])return;let s=l.top,c=l.left,a=l.width,d=l.height;if(a<8){const f=8-a;c-=f,a+=f*2}if(d<8){const f=8-d;s-=f,d+=f*2}ue(f=>{const h=i/10%360|0,m=1e3,g=(()=>{const b=Qo.cloneNode(!0),$=b.firstChild;return(N=>{lo(()=>{N.offsetWidth,N.style.opacity="0"})})(b),b.addEventListener("transitionend",N=>{N.target===N.currentTarget&&f()}),b.style.setProperty("position","fixed"),b.style.setProperty("top",s+"px"),b.style.setProperty("left",c+"px"),b.style.setProperty("width",a+"px"),b.style.setProperty("height",d+"px"),b.style.setProperty("z-index","2147483647"),b.style.setProperty("opacity","100"),b.style.setProperty("transition","1000ms opacity"),$.style.setProperty("width","100%"),$.style.setProperty("height","100%"),$.style.setProperty("box-sizing","border-box"),$.style.setProperty("border","1px solid hsl("+h+", 100%, 50%)"),b})();t.appendChild(g),q(()=>g.remove())})},r=(o,l,i)=>{if(l instanceof Element)n(o,l.getBoundingClientRect(),i);else if(l instanceof Text){const s=document.createRange();s.selectNode(l),n(o,s.getBoundingClientRect(),i)}else l instanceof Comment||console.log("EBADNODE",l)};return F(()=>{const o=new MutationObserver(l=>{const i=new Set,s=a=>{a.forEach(d=>{i.add(d),s(d.childNodes)})};for(const a of l)a.type==="attributes"?i.add(a.target):a.type==="childList"?s(a.addedNodes):a.type==="characterData"&&i.add(a.target);const c=[window.innerWidth,window.innerHeight];i.forEach(a=>r(c,a,Date.now()))});o.observe(e.observe_root,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),q(()=>o.disconnect())}),(()=>{const o=Zo.cloneNode(!0),l=t;return typeof l=="function"?l(o):t=o,o.style.setProperty("pointer-events","none"),o})()}const nl=y("<time></time>");function X(e){return R(()=>{const t=hr(e.item,"fallback"in e?{...e.children,unsupported:e.fallback}:e.children);return H(()=>t())})}function P(e){const t=R(()=>"if"in e?e.if??!1:!0);return R(()=>t()&&("when"in e?e.when!=null:!0)?"when"in e?(()=>{const n=e.children;return H(()=>n(e.when))})():e.children:e.fallback)}function gr(e,t){if(document.getSelection()?.isCollapsed===!1)return!1;let r=e;for(;r&&r!==t;){if(r instanceof HTMLElement&&(r.nodeName==="A"||r.nodeName==="BUTTON"||r.nodeName==="VIDEO"||r.nodeName==="AUDIO"||r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"||r.nodeName==="IFRAME"||r.classList.contains("resizable-iframe")||r.classList.contains("handles-clicks")))return!1;r=r.parentNode}return!0}function Bt(e,t){if(!t.endsWith("s"))throw new Error("!s");return e===1?e+t.substring(0,t.length-1):e+t}function rl(e,t,n={}){const r=t-e;if(r<0)return[n.short??!1?"later":"in the future "+new Date(e).toISOString(),-r];if(r<60*1e3)return[n.short??!1?"now":"just now",60*1e3-r];let o=60*1e3,l=60;if(r<l*o){const s=r/o|0;return[n.short??!1?s+"m":Bt(s," minutes")+" ago",o-(r-s*o)]}if(o*=l,l=24,r<l*o){const s=r/o|0;return[n.short??!1?s+"h":Bt(s," hours")+" ago",o-(r-s*o)]}if(o*=l,l=30,r<l*o){const s=r/o|0;return[n.short??!1?s+"d":Bt(s," days")+" ago",o-(r-s*o)]}const i=new Date(e).getFullYear();return i===new Date(t).getFullYear()?[n.short??!1?new Date(e).toLocaleString(void 0,{month:"short"}):"in "+new Date(e).toLocaleString(void 0,{month:"long"}),-1]:[n.short??!1?""+i:"in "+i,-1]}function mr(e,t={}){const[n,r]=A(Date.now());return R(()=>{const l=rl(e,n(),t);if(l[1]>0){const i=setTimeout(()=>r(Date.now()),Math.min(l[1]+10,2147483647));q(()=>clearTimeout(i))}return l[0]})}function vr(e){return(()=>{const t=nl.cloneNode(!0);return v(t,()=>mr(e.start)),E(n=>{const r=new Date(e.start).toString(),o=""+new Date(e.start);return r!==n._v$&&M(t,"datetime",n._v$=r),o!==n._v$2&&M(t,"title",n._v$2=o),n},{_v$:void 0,_v$2:void 0}),t})()}function ol(e){const[t,n]=A(localStorage.getItem(e)),r=o=>{o.key===e&&n(o.newValue)};return window.addEventListener("storage",r),q(()=>window.removeEventListener("storage",r)),[t,o=>{o==null?localStorage.removeItem(e):localStorage.setItem(e,o),n(o)}]}function ll(e,t){return t==null||typeof t!="object"?!1:t.key===e.sym}function il(e,t){const n=hn(e);return R(()=>{let r=n();return Array.isArray(r)||(r=[r]),r.filter(o=>o).map(t)})}function pr(){const e=Symbol(""+Math.random()),r=Object.assign(o=>({key:e,value:o,toString(){throw new Error("TypesafeChild not allowed in DOM")}}),{useChildren:o=>il(o,l=>{if(!ll(r,l))throw console.log("Ebad_tsch_child",r,l),new Error("bad tsch child");return l.value}),sym:e});return r}function sl(e,t){return"status_msg"in e?{kind:"richtext",content:[I.p(I.error("Could not preview oembed",e))]}:e.url!=null?{kind:"link_preview",client_id:t,thumb:e.embed_url||e.image||void 0,click:e.embed_url?{kind:"captioned_image",url:e.embed_url,w:null,h:null}:{kind:"link",client_id:t,url:e.url,embed_html:e.html||void 0},click_enabled:!!(e.embed_url||e.html),title:e.title,description:e.description,url:e.url}:{kind:"reddit_suggested_embed",suggested_embed:e.html}}const bn=Symbol("store-raw"),kt=Symbol("store-node"),al=Symbol("store-name");function _r(e,t){let n=e[Le];if(!n){Object.defineProperty(e,Le,{value:n=new Proxy(e,ul)});const r=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let l=0,i=r.length;l<i;l++){const s=r[l];if(o[s].get){const c=o[s].get.bind(n);Object.defineProperty(e,s,{get:c})}}}return n}function he(e){return e!=null&&typeof e=="object"&&(e[Le]||!e.__proto__||e.__proto__===Object.prototype||Array.isArray(e))}function Ue(e,t=new Set){let n,r,o,l;if(n=e!=null&&e[bn])return n;if(!he(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,s=e.length;i<s;i++)o=e[i],(r=Ue(o,t))!==o&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let c=0,a=i.length;c<a;c++)l=i[c],!s[l].get&&(o=e[l],(r=Ue(o,t))!==o&&(e[l]=r))}return e}function $t(e){let t=e[kt];return t||Object.defineProperty(e,kt,{value:t={}}),t}function cl(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Le||t===kt||t===al||(delete n.value,delete n.writable,n.get=()=>e[Le][t]),n}function dl(e){if(ir()){const t=$t(e);(t._||(t._=en()))()}return Reflect.ownKeys(e)}function en(){const[e,t]=A(void 0,{equals:!1,internal:!0});return e.$=t,e}const ul={get(e,t,n){if(t===bn)return e;if(t===Le)return n;const r=e[t];if(t===kt||t==="__proto__")return r;const o=he(r);if(ir()&&(typeof r!="function"||e.hasOwnProperty(t))){let l,i;o&&(l=$t(r))&&(i=l._||(l._=en()),i()),l=$t(e),i=l[t]||(l[t]=en()),i()}return o?_r(r):r},set(){return!0},deleteProperty(){return!0},ownKeys:dl,getOwnPropertyDescriptor:cl};function re(e,t,n){if(e[t]===n)return;const r=Array.isArray(e),o=e.length,l=n===void 0,i=r||l===t in e;l?delete e[t]:e[t]=n;let s=$t(e),c;(c=s[t])&&c.$(),r&&e.length!==o&&(c=s.length)&&c.$(),i&&(c=s._)&&c.$()}function fl(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];re(e,o,t[o])}}function Je(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,s=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)Je(e,[r[c]].concat(t),n);return}else if(s&&i==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&Je(e,[c].concat(t),n);return}else if(s&&i==="object"){const{from:c=0,to:a=e.length-1,by:d=1}=r;for(let f=c;f<=a;f+=d)Je(e,[f].concat(t),n);return}else if(t.length>1){Je(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let l=t[0];typeof l=="function"&&(l=l(o,n),l===o)||r===void 0&&l==null||(l=Ue(l),r===void 0||he(o)&&he(l)&&!Array.isArray(l)?fl(o,l):re(e,r,l))}function br(e,t){const n=Ue(e||{}),r=_r(n);function o(...l){Ae(()=>Je(n,l))}return[r,o]}function Oe(e,t,n,r,o){const l=t[n];if(e===l)return;if(!he(e)||!he(l)||o&&e[o]!==l[o]){e!==l&&re(t,n,e);return}if(Array.isArray(e)){if(e.length&&l.length&&(!r||o&&e[0][o]!=null)){let c,a,d,f,h,m,g,b;for(d=0,f=Math.min(l.length,e.length);d<f&&(l[d]===e[d]||o&&l[d][o]===e[d][o]);d++)Oe(e[d],l,d,r,o);const $=new Array(e.length),N=new Map;for(f=l.length-1,h=e.length-1;f>=d&&h>=d&&(l[f]===e[h]||o&&l[f][o]===e[h][o]);f--,h--)$[h]=l[f];if(d>h||d>f){for(a=d;a<=h;a++)re(l,a,e[a]);for(;a<e.length;a++)re(l,a,$[a]),Oe(e[a],l,a,r,o);l.length>e.length&&re(l,"length",e.length);return}for(g=new Array(h+1),a=h;a>=d;a--)m=e[a],b=o?m[o]:m,c=N.get(b),g[a]=c===void 0?-1:c,N.set(b,a);for(c=d;c<=f;c++)m=l[c],b=o?m[o]:m,a=N.get(b),a!==void 0&&a!==-1&&($[a]=l[c],a=g[a],N.set(b,a));for(a=d;a<e.length;a++)a in $?(re(l,a,$[a]),Oe(e[a],l,a,r,o)):re(l,a,e[a])}else for(let c=0,a=e.length;c<a;c++)Oe(e[c],l,c,r,o);l.length>e.length&&re(l,"length",e.length);return}const i=Object.keys(e);for(let c=0,a=i.length;c<a;c++)Oe(e[i[c]],l,i[c],r,o);const s=Object.keys(l);for(let c=0,a=s.length;c<a;c++)e[s[c]]===void 0&&re(l,s[c],void 0)}function ve(e,t={}){const{merge:n,key:r="id"}=t,o=Ue(e);return l=>!he(l)||!he(o)?o:(Oe(o,{state:l},"state",n,r),l)}const yr={get(e,t){if(t===bn)return e;const n=e[t];return he(n)?new Proxy(n,yr):n},set(e,t,n){return re(e,t,Ue(n)),!0},deleteProperty(e,t){return re(e,t,void 0),!0}};function Ga(e){return t=>(he(t)&&e(new Proxy(t,yr)),t)}const hl=y("<style>.cfg-reddit-pfp {display: none;}</style>"),gl=y('<div class="block"><div class="w-22px h-22px flex items-center justify-center"><i></i></div></div>'),ml=y("<div><pre><code> </code></pre><button>Code</button> / <button>Retry</button></div>"),tn=fn();function xe(e){const n=Lt(tn)?.i??0,r=n+1;return u(tn.Provider,{value:{i:r},get children(){return e.children(n%2===0?"bg-postcolor-100":"bg-body",n)}})}const nn=fn();function wr(e){const t=Lt(nn),n=R(()=>{const r=t?.visible()??!0,o=e.visible();return r?o:!1});return u(nn.Provider,{value:{visible:n},get children(){return e.children}})}function yn(){return Lt(nn)?.visible??(()=>!0)}const xr=fn();function vl(e){return u(xr.Provider,{get value(){return{pgin:()=>e.pgin,content:()=>e.pgin.page.content,addContent:e.addContent}},get children(){return e.children}})}function kr(){return Lt(xr)}function $r(){const e=kr();if(!e)throw new Error("no page root context here.");return e}function ne(e,t,n){const r=()=>{const a=localStorage.getItem(e)??void 0;return n.deserialize?n.deserialize(a):a},[o,l]=A(r()),i=()=>{l(r())};return window.addEventListener("storage",i),Object.assign(()=>o()??t(),{base:t,override:o,setOverride:a=>{a==null?localStorage.removeItem(e):localStorage.setItem(e,n.serialize?n.serialize(a):a),i()}})}function Hn(e,t,n){const r=window.matchMedia(e),[o,l]=A(r.matches?t:n),i=()=>{l(()=>r.matches?t:n)};return r.addEventListener("change",i),q(()=>{r.removeEventListener("change",i)}),o}const pl=ue(()=>{const e={colorScheme:ne("color-scheme",Hn("(prefers-color-scheme: dark)","dark","light"),{}),authorPfp:ne("pfp-cfg",()=>"on",{}),updateNotifications:ne("update_notices",()=>"on",{}),customVideoControls:ne("custom_video_controls",()=>"browser",{}),pageVersion:ne("page_version",()=>"1",{}),linkHelpers:ne("link_helpers",()=>"show",{}),highlightRerenders:ne("cors_proxy",()=>"off",{}),galleryDisplay:ne("gallery_display",()=>"fullscreen",{}),motion:ne("motion",Hn("(prefers-reduced-motion: reduce)","reduce","full"),{}),animationTime:ne("animation_time",()=>.2,{serialize:t=>JSON.stringify(t),deserialize:t=>t!=null&&t!==""?JSON.parse(t):void 0}),animationDevMode:ne("animation_dev_mode",()=>"none",{}),signature:ne("signature",()=>"",{})};return F(()=>{document.documentElement.classList.toggle("dark",e.colorScheme()==="dark")}),e});At(()=>u(P,{get if(){return le().authorPfp()==="off"},get children(){return hl.cloneNode(!0)}}),el("div").adto(document.head));function le(){return pl}const[_l,bl]=A(window.innerWidth);window.addEventListener("resize",()=>{bl(window.innerWidth)});const rn=ue(e=>({sm:R(()=>_l()<640)}));function V(...e){return e.flat().join(" ")}function yl(e){return(()=>{const t=gl.cloneNode(!0),n=t.firstChild,r=n.firstChild;return E(o=>{const l=e.icon.class+" "+e.size,i=e.icon.label;return l!==o._v$&&(r.className=o._v$=l),i!==o._v$2&&M(r,"aria-label",o._v$2=i),o},{_v$:void 0,_v$2:void 0}),t})()}function wn(e){const[t,n]=A(!0);return u(_o,{fallback:(r,o)=>(console.log(r),(()=>{const l=ml.cloneNode(!0),i=l.firstChild,s=i.firstChild,c=s.firstChild,a=i.nextSibling,d=a.nextSibling,f=d.nextSibling;return a.$$click=()=>console.log(r,e.data),f.$$click=()=>{n(!1),setTimeout(()=>n(!0),200),o()},E(h=>{const m=r instanceof Error?r.toString()+`

`+r.stack:"Something went wrong",g=G["outlined-button"],b=G["outlined-button"];return m!==h._v$3&&(c.data=h._v$3=m),g!==h._v$4&&(a.className=h._v$4=g),b!==h._v$5&&(f.className=h._v$5=b),h},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),l})()),get children(){return u(P,{get if(){return t()},get fallback(){return"Retrying..."},get children(){return e.children}})}})}te(["click"]);const wl=y("<span></span>");function ge(e,t,n){const r=L(),o=At(()=>{const[l,i]=A(r.visible);return r.on("hide",()=>i(!1)),r.on("show",()=>i(!0)),u(wr,{visible:l,get children(){return u(tn.Provider,{get value(){return{i:n.color_level}},get children(){return H(()=>t())}})}})},e);return r.on("cleanup",()=>o()),r}function ce(e){const t=yn();return(()=>{const n=wl.cloneNode(!0);return(r=>{F(()=>{const o=L(),l=e.getValue(o).adto(r);F(()=>{o.setVisible(t())}),q(()=>{o.cleanup(),l.remove()})})})(n),n})()}function qn({h:e,s:t,l:n,a:r=1}){if(t===0){const[d,f,h]=[n,n,n].map(m=>Math.round(m*255));return{r:d,g:h,b:f,a:r}}const o=(1-Math.abs(2*n-1))*t,l=o*(1-Math.abs(e/60%2-1)),i=n-o/2,[s,c,a]=(e<60?[o,l,0]:e<120?[l,o,0]:e<180?[0,o,l]:e<240?[0,l,o]:e<300?[l,0,o]:[o,0,l]).map(d=>Math.round((d+i)*255));return{r:s,g:c,b:a,a:r}}function Ct(e){const{r:t,g:n,b:r,a:o}=e;return o!=null&&o<1?`rgba(${$e(t)}, ${$e(n)}, ${$e(r)}, ${$e(o,2)})`:`rgb(${$e(t)}, ${$e(n)}, ${$e(r)})`}function $e(e,t=0){const n=e.toFixed(t);if(t===0)return n;const r=n.indexOf(".");if(r>=0){const o=n.match(/0+$/);if(o)return o.index===r+1?n.substring(0,r):n.substring(0,o.index)}return n}function xl(e){let t=1779033703^e.length;for(let n=0;n<e.length;n++)t=Math.imul(t^e.charCodeAt(n),3432918353),t=t<<13|t>>>19;return function(){return t=Math.imul(t^t>>>16,2246822507),t=Math.imul(t^t>>>13,3266489909),(t^=t>>>16)>>>0}}function kl(e,t,n,r){return function(){e>>>=0,t>>>=0,n>>>=0,r>>>=0;let o=e+t|0;return e=t^t>>>9,t=n+(n<<3)|0,n=n<<21|n>>>11,r=r+1|0,o=o+r|0,n=n+o|0,(o>>>0)/4294967296}}function Cr(e){const t=xl(e);return kl(t(),t(),t(),t())}function Nr(e){const t=e()*360,n=e()*.5+.5,r=e(),o={h:t,s:n,l:r*.3+.2,a:1},l={...o,l:1-(r*.4+.1)};return[qn(o),qn(l)]}const Ut=y("<div></div>");let ct=!1;document.addEventListener("keydown",e=>{e.key==="Shift"&&(ct=!0)},{capture:!0});document.addEventListener("keyup",e=>{e.key==="Shift"&&(ct=!1)},{capture:!0});document.addEventListener("focus",e=>{ct=!1});function Sr(){const e=le();return H(()=>e.motion()==="reduce")?0:H(()=>ct&&e.animationDevMode()==="shift_slow"?3:e.animationTime())}function xn(e,t,n,r){const[o,l]=A(null);e.addEventListener("transitionend",i=>{i.target===i.currentTarget&&(l(null),r(n(),!1,!1))}),F(lr([n],()=>{const i=e.getBoundingClientRect(),s=Pt.getBoundingClientRect(),c=()=>5+Math.max(0,s.bottom,window.visualViewport.offsetTop),a=()=>window.visualViewport.offsetTop+window.visualViewport.height;console.log(i.top,i.bottom,c(),a());let d=0;if(i.top<c()&&i.bottom>c()){const g=document.documentElement.scrollTop;e.scrollIntoView(),document.documentElement.scrollTop-=c();const b=document.documentElement.scrollTop;d=g-b}const f=n();if(t.motion()==="reduce"||t.animationTime()===0){r(f,!1,!1);return}const h=Math.min(i.bottom,a())-i.top-d,m=document.documentElement.scrollTop;l(null),r(f,!1,!0),requestAnimationFrame(()=>{const g=e.getBoundingClientRect(),b=Math.min(g.bottom,a())-g.top;if(b===h){r(f,!1,!1);return}r(f,!0,!0),l(h),e.scrollTop=d,requestAnimationFrame(()=>{document.documentElement.scrollTop=m,e.scrollTop=d,l(b)})})},{defer:!0})),F(()=>{o()!=null?(console.log("ANIMATING",ct),e.style.height=o()+"px",e.style.overflow="hidden",e.style.transition=Sr()+"s height"):(e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition"))})}function Er(e){const t=le(),[n,r]=A({main:e.when,animating:!1});return(()=>{const o=Ut.cloneNode(!0);return(l=>{xn(l,t,()=>e.when,(i,s,c)=>{r({main:i||s,animating:c})}),F(()=>{l.style.display=n().main||e.fallback!=null?"block":"none"})})(o),v(o,u(P,{get if(){return n().main||n().animating},get children(){const l=Ut.cloneNode(!0);return v(l,()=>e.children),E(()=>l.className=n().animating&&!n().main?"hidden":""),l}}),null),v(o,u(P,{get if(){return!n().main||n().animating},get children(){const l=Ut.cloneNode(!0);return v(l,()=>e.fallback),E(()=>l.className=n().animating&&n().main?"hidden":""),l}}),null),o})()}const Fn=y("<a></a>"),Pr=y("<span></span>"),$l=y("<button></button>");function Cl(e){const t=R(()=>{if(!e.allow_preview)return;const n=Tt(e.href,{});if(!n)return;const[r,o]=A(!1);return{visible:r,setVisible:o,body:n}});return[u(se,{get client_id(){return e.client_id},get href(){return e.href},get style(){return t()?"previewable":"normal"},get onClick(){return t()?()=>{const n=t();n.setVisible(!n.visible())}:void 0},get children(){return[B(()=>e.children),u(P,{get when(){return t()},children:n=>[" ",B(()=>n.visible()?"\u25BE":"\u25B8")]})]}}),u(P,{get when(){return t()},children:n=>u(Er,{get when(){return n.visible()},get children(){return u(Q,{autoplay:!0,get body(){return n.body}})}})})]}function He(e){const t=R(()=>e.href==null?{kind:"none"}:It(e.client_id,e.href));return u(X,{get item(){return t()},children:{error:n=>(()=>{const r=Fn.cloneNode(!0);return(o=>e.btnref?.(o))(r),r.$$click=o=>{o.stopPropagation(),alert(e.href)},v(r,()=>e.children),E(o=>{const l=e.class+" error",i=n.title;return l!==o._v$&&(r.className=o._v$=l),i!==o._v$2&&M(r,"title",o._v$2=i),o},{_v$:void 0,_v$2:void 0}),r})(),mailto:n=>(()=>{const r=Pr.cloneNode(!0);return(o=>e.btnref?.(o))(r),v(r,()=>e.children),E(()=>M(r,"title",n.title)),r})(),link:n=>(()=>{const r=Fn.cloneNode(!0);return(o=>e.btnref?.(o))(r),r.$$click=o=>{if(!(!e.onClick&&!e.onClickNoPreventDefault)&&(e.onClickNoPreventDefault?.(o),o.stopPropagation(),!o.defaultPrevented&&o.button===0&&!Fr(o))){if(o.preventDefault(),e.onClick)return e.onClick(o);ze({path:n.url})}},jo(r,()=>n.external?{target:"_blank",rel:"noopener noreferrer"}:{},!1,!0),v(r,()=>e.children),E(o=>{const l=e.class,i=n.url;return l!==o._v$3&&(r.className=o._v$3=l),i!==o._v$4&&M(r,"href",o._v$4=i),o},{_v$3:void 0,_v$4:void 0}),r})(),none:()=>(()=>{const n=$l.cloneNode(!0);return(r=>e.btnref?.(r))(n),n.$$click=r=>{e.onClickNoPreventDefault?.(r),r.defaultPrevented||e.onClick?.(r)},v(n,()=>e.children),E(r=>{const o=e.class,l=e.disabled;return o!==r._v$5&&(n.className=r._v$5=o),l!==r._v$6&&(n.disabled=r._v$6=l),r},{_v$5:void 0,_v$6:void 0}),n})()}})}function se(e){return u(He,{get client_id(){return e.client_id},get class(){return G[e.style]+" outline-default"},get href(){return e.href},get onClick(){return e.onClick},get children(){return e.children}})}function Lr(e){const t=()=>{const[n,r]=Nr(Cr(e.color_hash.toLowerCase()));return{"--light-color":Ct(n),"--dark-color":Ct(r)}};return(()=>{const n=Pr.cloneNode(!0);return v(n,u(se,{style:"userlink",get href(){return e.href},get client_id(){return e.client_id},get children(){return e.children}})),E(r=>_n(n,t(),r)),n})()}te(["click"]);function Ar(e){if(typeof e.onClick!="string"&&"url"in e.onClick)return{href:e.onClick.url,client_id:e.client_id}}function Tr(e){if(typeof e.onClick!="string"&&typeof e.onClick=="function")return e.onClick}function Rr(e){return e.onClick==="disabled"}const Nl={"reddit-upvote":"text-$upvote-color","reddit-downvote":"text-$downvote-color",blue:"text-blue-600 dark:text-blue-500",green:"text-green-600 dark:text-green-500",white:"text-gray-300 dark:text-black",yellow:"text-yellow-600 dark:text-yellow-300",pink:"text-pink-500 dark:text-pink-300"};function Rt(e){return e==null?"":Nl[e]}const Sl={blue:["bg-blue-700","bg-blue-500"],green:["bg-green-700","bg-green-500"]};function El(e,t){return e==null?"":Sl[e]?.[+t]??"bg-red-500"}function Or(e){return u(He,{get btnref(){return e.btnref},get class(){return V("py-1 px-2 rounded-md","text-gray-600","hover:text-black","bg-gray-200 border-b-1 border-gray-500","dark:border-t-1 dark:border-b-0 dark:bg-white dark:border-gray-400",e.url!=null?"hover:underline":"","outline-default")},get onClick(){return e.onClick},get href(){return e.url?.href},get client_id(){return e.url?.client_id??"ENOCLILENTID"},get disabled(){return e.disabled},get children(){return e.children}})}const Pl=y('<div tabindex="0"></div>'),Ll=y('<div><div tabindex="0"></div><div tabindex="0"></div><div class="bg-gray-100 p-1 rounded-lg"></div><div tabindex="0"></div></div>'),[Al,Tl]=A(Symbol());function Rl(){Tl(Symbol())}function Ol(e){const[t,n]=A({rect:new DOMRect(0,0,0,0),scroll:[0,0]}),[r,o]=A(!1),[l,i]=A(!1),s=a=>{o(d=>{const f=typeof a=="boolean"?a:a(d);return d!==f&&i(!0),f})};F(lr(Al,()=>{s(!1)},{defer:!0}));let c;return[u(Or,{btnref:a=>c=a,onClick:a=>{const d=a.target.getBoundingClientRect();n({rect:d,scroll:[window.scrollX,window.scrollY],closing:!1}),s(f=>!f)},get children(){return B(()=>typeof e.label=="function",!0)()?e.label(r):e.label}}),u(P,{get if(){return r()||l()},get children(){return(()=>{let a,d;const[f,h]=A(!1);F(()=>{const g=b=>{let $=b.target;for(;$;){if($===c||$===a)return;$=$.parentElement}s(!1)};document.addEventListener("click",g,{capture:!0,passive:!1}),q(()=>document.removeEventListener("click",g,{capture:!0}))});const m=document.createElement("div");return oe.appendChild(m),q(()=>{m.remove()}),[(()=>{const g=Pl.cloneNode(!0);return g.addEventListener("focus",()=>d.focus()),g})(),u(qo,{mount:m,get children(){const g=Ll.cloneNode(!0),b=g.firstChild,$=b.nextSibling,N=$.nextSibling,w=N.nextSibling;(x=>{a=x,x.style.transformOrigin="top right";const p=()=>{const T=Sr()/2;x.style.transition=T+"s opacity, "+T+"s transform"},k=()=>{x.style.transform="scale(0.95)",x.style.opacity="0",p(),x.style.transitionTimingFunction="ease-in"},C=()=>{x.style.transform="",x.style.opacity="",p(),x.style.transitionTimingFunction="ease-out"};k(),F(()=>{const T=r();requestAnimationFrame(()=>{requestAnimationFrame(()=>{T?C():k()})})}),F(()=>{f()?x.style.outline="1px dotted var(--outline-color)":x.style.outline=""})})(g),g.addEventListener("transitionend",x=>{x.target===x.currentTarget&&i(!1)}),g.style.setProperty("--dbtn-max-width","24rem"),g.style.setProperty("--dbtn-padding","1rem"),g.style.setProperty("--dbtn-left","max(calc(var(--dbtn-target-pos) - var(--dbtn-max-width)),calc(0px + var(--dbtn-padding)))"),g.style.setProperty("left","var(--dbtn-left)"),g.style.setProperty("right","calc(100vw - min(calc(var(--dbtn-left) + var(--dbtn-max-width)),100vw - var(--dbtn-padding)))"),g.style.setProperty("z-index","1000000000"),b.addEventListener("focus",()=>{c.focus()}),$.$$focusout=()=>{h(!1)},$.$$focusin=()=>{h(!0)};const S=d;return typeof S=="function"?S($):d=$,v(N,()=>e.children),w.addEventListener("focus",()=>{s(!1),c.focus()}),E(x=>{const p=V("absolute"),k=t().rect.bottom+t().scroll[1]+"px",C=t().rect.right+"px";return p!==x._v$&&(g.className=x._v$=p),k!==x._v$2&&g.style.setProperty("top",x._v$2=k),C!==x._v$3&&g.style.setProperty("--dbtn-target-pos",x._v$3=C),x},{_v$:void 0,_v$2:void 0,_v$3:void 0}),g}})]})()}})]}te(["focusin","focusout"]);const Il=y("<div></div>"),Dl=y('<span class="ml-2"></span>');function Ml(e){return u(He,{onClickNoPreventDefault:t=>{Rl(),e.onClick?.(t)},get href(){return e.url?.href},get client_id(){return e.url?.client_id??"ENOCLILENTID"},get class(){return V("w-full block p-2 text-left hover:bg-gray-200","focus-visible:bg-gray-200 rounded-lg",e.url!=null?"hover:underline":"")},get disabled(){return e.disabled},get children(){const t=Il.cloneNode(!0);return v(t,u(P,{get when(){return e.icon},children:n=>[n,Dl.cloneNode(!0)]}),null),v(t,()=>e.children,null),E(()=>t.className="w-full "+e.class),t}})}const jl=y("<i></i>");function Vl(e){return(()=>{const t=jl.cloneNode(!0);return E(n=>{const r=e.tag+" "+(e.filled?"fas":"far"),o=e.label??void 0,l=e.label==null;return r!==n._v$&&(t.className=n._v$=r),o!==n._v$2&&M(t,"aria-label",n._v$2=o),l!==n._v$3&&M(t,"aria-hidden",n._v$3=l),n},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}const zn={comments:[!0,"fa-comment"],creation_time:[!0,"fa-clock"],edit_time:[!0,"fa-edit","fa-pencil"],up_arrow:[!1,"fa-arrow-up"],down_arrow:[!1,"fa-arrow-down"],controversiality:[!0,"fa-smile"],pinned:[!1,"fa-thumbtack"],bookmark:[!0,"fa-bookmark"],envelope:[!0,"fa-envelope"],envelope_open:[!0,"fa-envelope-open"],star:[!0,"fa-star"],join:[!0,"fa-plus-square"],heart:[!0,"fa-heart"],code:[!1,"fa-code"],link:[!1,"fa-link"],eye:[!0,"fa-eye"],reply:[!1,"fa-reply"],chevron_up:[!1,"fa-chevron-up"],chevron_down:[!1,"fa-chevron-down"]};function dt(e){return u(Vl,{get tag(){return zn[e.icon][1]},get filled(){return zn[e.icon][0]?e.bold:!0},get label(){return e.label}})}function Wl(e){return u(Ml,{get icon(){return u(dt,{get icon(){return e.action.icon},get label(){return e.action.text},get bold(){return e.action.color!=null}})},get class(){return V(e.action.color==null?"":"font-bold",Rt(e.action.color))},get url(){return Ar(e.action)},get onClick(){return Tr(e.action)},get disabled(){return Rr(e.action)},get children(){return e.action.text}})}const Bl=y("<span> </span>");function Ul(e){return u(Or,{get url(){return Ar(e.action)},get onClick(){return Tr(e.action)},get disabled(){return Rr(e.action)},get children(){const t=Bl.cloneNode(!0),n=t.firstChild;return v(t,u(dt,{get icon(){return e.action.icon},get label(){return e.action.text},get bold(){return e.action.color!=null}}),n),v(t,()=>e.action.text,null),E(()=>t.className=e.action.color==null?void 0:"font-bold "+Rt(e.action.color)),t}})}const Ir="@@!!ARRAY_KEY";//! flattens higherarchical page2 structure to a flat array
const tt={todo:(e,t)=>({kind:"todo",note:e,data:t}),err:(e,t)=>({kind:"error",note:e,data:t})};function Dr(e,t,n,r){const o=qe(n,e);if(o.error!=null)return tt.err(o.error,e);const l=o.value,i=l.kind==="post"&&l.content.kind==="post"&&l.content.collapsible!==!1?l.content.collapsible.default_collapsed:!1,s=_e(n.collapse_data,e,{default:i}).collapsed(),c={id:e,threaded:!1,collapsed:s};return{kind:"post",content:l,indent:r.threaded?t.map((a,d,f)=>d===f.length-1?{...a,threaded:!0}:a):t,collapse:c,first_in_wrapper:r.first_in_wrapper,is_pivot:r.is_pivot,at_or_above_pivot:r.at_or_above_pivot,threaded:r.threaded,depth:r.depth,id:e}}function Mr(e,t){const n=[];function r(o){for(const l of o){const i=qe(t,l);if(i.error!=null)n.push(Symbol("error; "+i.error));else{const s=i.value;s.kind==="loaded"?r(s.replies?.items??[]):n.push(l)}}}return r(e.replies?.items??[]),n}function jr(e,t,n,r){const o=[],l=qe(n,e);if(l.error!=null)return o.push(tt.err(l.error,e)),o;const i=l.value,s=Dr(e,t,n,r);if(o.push(s),s.kind!=="post")return o;const c=s.indent.map(f=>f.threaded?{...f,threaded:!1}:f),a=[...c,s.collapse];if(i.kind==="post"&&i.content.kind==="post"?i.content.show_replies_when_below_pivot:!0){const f=Mr(i,n),h=f.length===1&&(r.threaded?!0:qe(n,f[0]).value?.replies?.items.length===1);if(h&&r.threaded||!s.collapse.collapsed)for(const m of f)o.push(...jr(m,r.threaded&&h?c:a,n,{...r,first_in_wrapper:!1,threaded:h,depth:r.depth+1}))}return o}function _e(e,t,n){return H(()=>{const r=e.map.get(t);if(r==null){if(!n)throw new Error("accessing cstate before it has been created");const[o,l]=A(0),[i,s]=A(n.default),c={hovering:o,setHovering:l,collapsed:i,setCollapsed:s};return e.map.set(t,c),c}return r})}function qe(e,t){const n=e.content;return Fo(n,t)}function Hl(e,t){const n=qe(e,t);if(n.error!=null)throw console.log("Failed to read link. Link:",t,"Result:",n,"Searching in",e.content),new Error("Could not read link; "+n.error);return n.value}function ql(e,t){const n=[];function r(i){const s=qe(t,i);if(s.error!=null)return n.push({error:s.error}),null;const c=s.value;if(c.kind==="loaded")for(const a of[...c.replies?.items??[]].reverse())r(a);else n.push({value:i});return c.parent}let o=e;for(;o;)o=r(o);const l=n[0];return l&&(l.pivot=!0),[...n].reverse()}function Fl(e,t){const n=[],r=Hl(t,e),o=ql(e,t);for(const i of o)n.push({kind:"wrapper_start"}),"error"in i?n.push(tt.err(i.error,o)):n.push(Dr(i.value,[],t,{first_in_wrapper:!0,at_or_above_pivot:!0,is_pivot:i.pivot??!1,threaded:!1,depth:0})),n.push({kind:"wrapper_end"});if(r.replies){n.push({kind:"horizontal_line"}),r.replies?.reply&&n.push(tt.todo("(add reply)",r));for(const i of Mr(r,t))n.push({kind:"wrapper_start"}),n.push(...jr(i,[],t,{first_in_wrapper:!0,is_pivot:!1,at_or_above_pivot:!1,threaded:!1,depth:0})),n.push({kind:"wrapper_end"});r.replies.items.length===0&&n.push(tt.todo("*There are no replies*",r))}console.log("FLATTEN RESULT",n,t,Object.entries(t.content).length);let l=0;return{body:n.map(i=>{const s=(()=>i.kind==="post"?{v:i.id}:(l+=1,{v:l}))();return{...i,[Ir]:s.v}})}}const zl=y("<div></div>"),Gl=y('<button aria-label="Collapse"></button>');function Vr(e){let t=!1;return q(()=>{if(!e.id||!e.cstates)return;const n=_e(e.cstates,e.id);t&&n.setHovering(r=>r-1),t=!1}),(()=>{const n=Gl.cloneNode(!0);return n.addEventListener("mouseleave",()=>{if(!e.id||!e.cstates)return;const r=_e(e.cstates,e.id);t&&r.setHovering(o=>o-1),t=!1}),n.$$mouseover=()=>{if(!e.id||!e.cstates)return;const r=_e(e.cstates,e.id);t||r.setHovering(o=>o+1),t=!0},n.$$click=()=>e.onClick(),M(n,"draggable",!0),v(n,u(P,{get if(){return!e.collapsed_anim},get children(){const r=zl.cloneNode(!0);return E(()=>r.className=V("w-3px h-full",e.cstates&&e.id&&_e(e.cstates,e.id).hovering()>0?"bg-$collapse-line-color-hover":"bg-$collapse-line-color")),r}})),E(r=>{const o=V("w-15px box-border cursor-pointer min-h-13px pl-6px pr-6px","z-1 static outline-default",e.class??"",e.collapsed_anim?"bgimg-collapse-btn-collapsed":"",e.threaded??!1?"threaded-new":""),l=e.collapsed_raw,i=e.real?void 0:"-1",s=e.real?!0:void 0;return o!==r._v$&&(n.className=r._v$=o),l!==r._v$2&&M(n,"aria-pressed",r._v$2=l),i!==r._v$3&&M(n,"tabindex",r._v$3=i),s!==r._v$4&&M(n,"aria-hidden",r._v$4=s),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),n})()}te(["click","mouseover"]);const Kl=y("<span> points</span>"),Yl=y("<button></button>"),Jl=y('<div class="flex flex-col items-center gap-2px"></div>');function Ot(e){const[t,n]=A(null);let r;return R(()=>{const o=Kr(e().client_id+"_"+e().unique_id,{count:e().count_excl_you,you:e().you,time:e().time});q(()=>{o.cleanup()});const{state:l,onupdate:i}=o.associated_data;return r=o.associated_data,n({...l}),i(()=>n({...l})),0})(),[t,o=>{Object.assign(r.state,o),r.emit()}]}function Xl(e){const[t]=Ot(()=>e.counter),n=()=>Yr(t());return[(()=>{const r=Kl.cloneNode(!0),o=r.firstChild;return v(r,()=>n().text,o),E(()=>M(r,"title",n().raw)),r})(),u(P,{get when(){return e.counter.percent},children:r=>" "+r.toLocaleString(void 0,{style:"percent"})+" upvoted"})]}async function Ql(e,t,n){if("error"in n.actions)throw await new Promise(o=>setTimeout(o,500)),new Error("counter is error: "+n.actions.error);const r=n.actions[e??"reset"];if(r==null)throw new Error("action "+e+" requested when it is not available.");await t.act(r)}async function Wr(e,t,n,r){n({...t,loading:!0,your_vote:e});try{const o=await Pn(r.client_id);if(!o)throw new Error("missing client");await Ql(e,o,r),n({...t,loading:!1,your_vote:e})}catch(o){n({...t}),console.log(o),alert("Error while voting: "+o)}}function Gn(e){const[t,n]=Ot(()=>e.counter),r=()=>t().your_vote===e.mode;return(()=>{const o=Yl.cloneNode(!0);return o.$$click=()=>{Wr(r()?void 0:e.mode,t(),n,e.counter)},o.style.setProperty("font-size","15px"),o.style.setProperty("width","15px"),o.style.setProperty("height","15px"),v(o,u(dt,{get icon(){return r()?e.counter[e.mode].icon:e.counter.neutral_icon??e.counter[e.mode].icon},get label(){return e.counter[e.mode][r()?"undo_label":"label"]},get bold(){return r()}})),E(l=>{const i=Rt(r()?e.counter[e.mode].color:null),s=t().loading,c=r();return i!==l._v$&&(o.className=l._v$=i),s!==l._v$2&&(o.disabled=l._v$2=s),c!==l._v$3&&M(o,"aria-pressed",l._v$3=c),l},{_v$:void 0,_v$2:void 0,_v$3:void 0}),o})()}function Zl(e){return(()=>{const t=Jl.cloneNode(!0);return v(t,u(Gn,{get counter(){return e.counter},mode:"increment"}),null),v(t,u(P,{get if(){return e.counter.decrement!=null},get children(){return u(Gn,{get counter(){return e.counter},mode:"decrement"})}}),null),t})()}te(["click"]);const Kn=y("<span></span>"),ei=y('<img class="inline-block w-4 h-4 align-middle object-contain">');function nt(e){return(()=>{const t=Kn.cloneNode(!0);return v(t,u(z,{get each(){return e.flairs},children:n=>[" ",(()=>{const r=Kn.cloneNode(!0);return v(r,u(z,{get each(){return n.elems},children:o=>u(X,{item:o,children:{text:l=>B(()=>l.text),emoji:l=>(()=>{const i=ei.cloneNode(!0);return E(s=>{const c=l.name,a=l.url,d=l.w,f=l.h;return c!==s._v$4&&M(i,"title",s._v$4=c),a!==s._v$5&&M(i,"src",s._v$5=a),d!==s._v$6&&M(i,"width",s._v$6=d),f!==s._v$7&&M(i,"height",s._v$7=f),s},{_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0}),i})()}})})),E(o=>{const l=n.system!=null?{none:"",op:"text-blue-500",cake:"text-gray-500",admin:"text-red-500",moderator:"text-green-500",approved:"text-green-500",error:"text-red-500"}[n.system]:"rounded-full px-2"+(n.color!=null?" bg-flair-light dark:bg-flair-dark":" bg-gray-300")+(n.fg_color!=null?" flair-text-"+n.fg_color:""),i=n.color,s=n.color;return l!==o._v$&&(r.className=o._v$=l),i!==o._v$2&&r.style.setProperty("--flair-color",o._v$2=i),s!==o._v$3&&r.style.setProperty("--flair-color-dark",o._v$3=s),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()]})),t})()}function ti(e){return[u(P,{get if(){return e.post.info?.pinned===!0},get children(){return u(Ne,{icon:"pinned",value:["none",-1e3],color:"green",text:"Pinned"})}}),u(P,{get when(){return e.post.actions?.vote},children:t=>{const[n]=Ot(()=>t),r=()=>n().pt_count;return[u(Ne,We(()=>{const o=r(),l=n();return{value:o==="hidden"?["hidden",-1e3]:o==="none"?["none",-1e3]:["number",o+{increment:1,decrement:-1,none:0}[l.your_vote??"none"]],icon:{none:t.neutral_icon??t.increment.icon,increment:t.increment.icon,decrement:t.decrement?.icon??t.increment.icon}[l.your_vote??"none"],color:{none:null,increment:t.increment.color,decrement:t.decrement?.color??t.increment.color}[l.your_vote??"none"],text:"Points",disabled:l.loading}})),u(P,{get when(){return t.percent},children:o=>u(Ne,{icon:"controversiality",value:["percent",o],color:null,text:"Controversiality"})})]}}),u(P,{get when(){return e.post.info?.comments},children:t=>u(Ne,{icon:"comments",value:["number",t],color:null,text:"Comments"})}),u(P,{get when(){return e.post.info?.creation_date},children:t=>u(Ne,{icon:"creation_time",value:["timeago",t],color:null,text:"Posted"})}),u(P,{get when(){return e.post.info?.edited},children:t=>u(Ne,{icon:"edit_time",get value(){return t.date==null?["none",-1e3]:["timeago",t.date]},color:null,text:"Edited"})})]}const Ne=pr();function ni(e){return Ne.useChildren(()=>u(ti,{get post(){return e()}}))}function Yn(e){return u(Ee,We(()=>{const{action:t,state:n,setState:r,direction:o,client_id:l}=e,i=n.your_vote;return{icon:t[o].icon,color:i===o?t[o].color:null,text:i===o?t[o].undo_label:t[o].label,onClick:n.loading?"disabled":()=>{Wr(i===o?void 0:o,n,r,t)},client_id:l}}))}function Ht(e){return u(X,{get item(){return e.action},fallback:t=>u(Ee,{icon:"code",color:null,get text(){return"TODO "+t.kind},onClick:"disabled",client_id:"*UNUSED*"}),children:{counter:t=>{const[n,r]=Ot(()=>t);return[u(Yn,We(()=>({action:t,state:n(),setState:r,direction:"increment",client_id:e.opts.client_id}))),u(P,{get if(){return t.decrement!=null},get children(){return u(Yn,We(()=>({action:t,state:n(),setState:r,direction:"decrement",client_id:e.opts.client_id})))}})]}}})}function ri(e){return[B((()=>{const t=B(()=>!!(e.opts.collapse_data&&e.opts.id&&e.post.collapsible!==!1&&!e.opts.is_pivot),!0);return()=>t()?u(Ee,We(()=>{const n=_e(e.opts.collapse_data,e.opts.id),r=n.collapsed();return{icon:r?"chevron_down":"chevron_up",color:null,text:r?"Uncollapse":"Collapse",onClick:()=>n.setCollapsed(o=>!o),client_id:e.opts.client_id}})):null})()),B((()=>{const t=B(()=>e.opts.frame?.url!=null,!0);return()=>t()?u(Ee,{icon:"link",color:null,get text(){return B(()=>e.post.info?.comments!=null,!0)()?e.post.info.comments.toLocaleString()+" comment"+(e.post.info.comments===1?"":"s"):"Comments"},get onClick(){return{url:e.opts.frame.url}},get client_id(){return e.opts.client_id}}):null})()),u(P,{get when(){return e.post.actions?.vote},children:t=>u(Ht,{action:t,get opts(){return e.opts}})}),u(P,{get when(){return e.opts.frame?.replies?.reply},children:t=>u(Ee,{icon:"reply",color:null,text:"Reply",onClick:()=>alert("TODO"),get client_id(){return e.opts.client_id}})}),u(z,{get each(){return e.post.actions?.other??[]},children:t=>u(Ht,{action:t,get opts(){return e.opts}})}),u(P,{get when(){return e.post.actions?.code},get fallback(){return u(Ee,{icon:"code",color:null,text:"Code",onClick:()=>{console.log(e.post,e.opts)},get client_id(){return e.opts.client_id}})},children:t=>u(Ht,{action:t,get opts(){return e.opts}})})]}const Ee=pr();function oi(e,t){return Ee.useChildren(()=>u(ri,{get post(){return e()},get opts(){return t()}}))}const Jn=y("<div></div>"),Ce={Container(e){return(()=>{const t=Jn.cloneNode(!0);return v(t,()=>e.children),E(()=>t.className=V("flex flex-wrap",{top:"items-start",center:"items-center",bottom:"items-end",baseline:"items-baseline"}[e.vertical],e.dir==="right"?"justify-end":"")),t})()},Child(e){return(()=>{const t=Jn.cloneNode(!0);return v(t,()=>e.children),E(()=>t.className=V({top:"self-start",center:"self-center",bottom:"self-end",none:""}[e.vertical??"none"],e.fullwidth??!1?"flex-1":"")),t})()}},li=y("<span></span>"),ii=y('<div class="text-gray-500 flex flex-wrap gap-2 <sm:text-xs"></div>');function si(e){return e<1e4?""+e:e<1e5?(e/1e3).toFixed(2).match(/^-?\d+(?:\.\d{0,1})?/)?.[0]+"k":e<1e6?(e/1e3|0)+"k":e<1e8?(e/1e6).toFixed(2).match(/^-?\d+(?:\.\d{0,1})?/)?.[0]+"m":(e/1e6|0)+"m"}function ai({value:e}){if(e[0]==="none")return["",""];if(e[0]==="percent")return[" "+e[1].toLocaleString(void 0,{style:"percent"})," "+e[1].toLocaleString(void 0,{style:"percent"})];if(e[0]==="timeago")return[" "+mr(e[1],{short:!0})()," "+new Date(e[1]).toLocaleString()];if(e[0]==="number")return[" "+si(e[1])," "+e[1].toLocaleString()];if(e[0]==="hidden")return[" \u2014"," Hidden"];ur(e[0])}function ci(e){const t=R(()=>ai(e.item)),n=()=>e.item.text+(e.item.value[0]==="none"?"":":");return(()=>{const r=li.cloneNode(!0);return v(r,u(dt,{get icon(){return e.item.icon},get bold(){return e.item.color!=null},get label(){return n()}}),null),v(r,()=>t()[0],null),E(o=>{const l=V(Rt(e.item.color),e.item.disabled??!1?"opacity-50":""),i=n()+t()[1];return l!==o._v$&&(r.className=o._v$=l),i!==o._v$2&&M(r,"title",o._v$2=i),o},{_v$:void 0,_v$2:void 0}),r})()}function Xn(e){const t=ni(()=>e.post);return(()=>{const n=ii.cloneNode(!0);return v(n,u(z,{get each(){return t()},children:r=>u(ci,{item:r})})),n})()}const di=y('<img alt="" class="w-8 h-8 object-center inline-block rounded-full">'),ui=y('<div class="flex flex-col items-center mr-1 gap-2 sm:pr-1"></div>'),Qn=y("<div></div>"),fi=y('<div class="mr-2 inline-block"></div>'),hi=y('<div class="mr-2"></div>'),gi=y("<div><div></div><div></div></div>"),mi=y('<div class="pl-2"></div>'),vi=y('<div class="mt-2"></div>'),pi=y("<section></section>"),_i=y('<div class="text-sm"><div class="mt-2"></div><div class="flex flex-wrap gap-2"></div></div>'),bi=y('<article><div class="flex-1"><div></div></div></article>'),yi=y("<button></button>"),wi=y('<img alt="">'),xi=y('<span role="heading"></span>'),ki=y('<div class="whitespace-normal max-lines max-lines-1"></div>'),$i=y("<button>Show Anyway</button>");function Ci(e){return(()=>{const t=di.cloneNode(!0);return E(()=>M(t,"src",e.src_url)),t})()}function Br(e){const[t,n]=e.opts.collapse_data&&e.opts.id?(()=>{if(e.opts.is_pivot)return A(!0);const b=_e(e.opts.collapse_data,e.opts.id);return[()=>!b.collapsed(),N=>!b.setCollapsed(w=>!(typeof N=="boolean"?N:N(!w)))]})():A(e.opts.is_pivot?!0:!(e.content.collapsible!==!1&&(e.opts.is_pivot?!1:e.content.collapsible.default_collapsed))),[r,o]=A(t()),[l,i]=A(!!(e.content.flair??[]).find(b=>b.content_warning)),s=()=>!!e.content.thumbnail||!!e.content.title,c=()=>!!e.content.thumbnail&&!r(),a=le(),[d,f]=A({visible:r(),animating:!1}),h=()=>e.opts.frame?.url!=null&&!e.opts.is_pivot,m=kr(),g=oi(()=>e.content,()=>e.opts);return(()=>{const b=bi.cloneNode(!0),$=b.firstChild,N=$.firstChild;return(w=>xn(w,a,t,(S,x,p)=>{f({visible:x||S,animating:p}),o(S||x)}))(b),b.style.setProperty("--left-v","8px"),v(b,u(P,{get if(){return B(()=>e.content.collapsible!==!1&&(e.content.thumbnail!=null?!!r():!0),!0)()&&!rn.sm()},get children(){const w=ui.cloneNode(!0);return v(w,u(P,{get when(){return e.content.actions?.vote},children:S=>(()=>{const x=Qn.cloneNode(!0);return v(x,u(Zl,{counter:S})),E(()=>x.className=r()||c()?"":" hidden"),x})()}),null),v(w,u(Vr,{class:"flex-1",get collapsed_raw(){return!t()},get collapsed_anim(){return!r()},onClick:()=>{n(S=>!S)},real:!0,get cstates(){return e.opts.collapse_data},get id(){return e.opts.id}}),null),w}}),$),v($,u(Ce.Container,{dir:"right",vertical:"center",get children(){return[u(P,{get if(){return!r()},get when(){return e.content.thumbnail},children:w=>u(xe,{children:S=>u(Ce.Child,{get children(){const x=yi.cloneNode(!0);return x.$$click=()=>n(p=>!p),v(x,u(X,{item:w,children:{image:p=>(()=>{const k=wi.cloneNode(!0);return E(C=>{const T=p.url,D=V("w-full h-full object-contain rounded-md");return T!==C._v$6&&M(k,"src",C._v$6=T),D!==C._v$7&&(k.className=C._v$7=D),C},{_v$6:void 0,_v$7:void 0}),k})(),default:p=>["TODO ",B(()=>p.kind)]}})),E(()=>x.className=V("w-12 h-12 sm:w-16 sm:h-16 mr-4 rounded-md "+S,l()&&w.kind==="image"?"thumbnail-content-warning":"","block")),x}})})}),u(Ce.Child,{fullwidth:!0,get children(){const w=gi.cloneNode(!0),S=w.firstChild,x=S.nextSibling;return w.$$click=p=>{if(!h()||!gr(p.target,p.currentTarget))return;p.stopPropagation();const k="/"+e.opts.client_id+e.opts.frame?.url;if(p.ctrlKey||p.metaKey||p.altKey)window.open(k);else{if(!t()){n(!0);return}ze({path:k,page:e.opts.id&&m?{pivot:e.opts.id,content:m.content()}:void 0})}},v(S,u(P,{get when(){return e.content.title},children:p=>(()=>{const k=xi.cloneNode(!0);return v(k,u(P,{get when(){return e.opts.frame?.url},get fallback(){return p.text},children:C=>u(He,{get client_id(){return e.opts.client_id},href:C,class:"hover:underline",get children(){return p.text}})})),k})()}),null),v(S,u(nt,{get flairs(){return e.content.flair??[]}}),null),v(x,u(Ce.Container,{dir:"right",vertical:"center",get children(){return[u(Ce.Child,{get children(){return[(()=>{const p=Qn.cloneNode(!0);return v(p,u(P,{get when(){return e.content.author},children:k=>[u(P,{get if(){return B(()=>!!r(),!0)()&&a.authorPfp()==="on"},get when(){return k.pfp},fallback:"By ",children:C=>[u(Ci,{get src_url(){return C.url}})," "]}),u(Lr,{get client_id(){return k.client_id},get href(){return k.link},get color_hash(){return k.color_hash},get children(){return k.name}})," "]}),null),v(p,u(P,{get if(){return r()||s()},get children(){return[u(P,{get when(){return e.content.author},children:k=>u(P,{get when(){return k.flair},children:C=>[u(nt,{flairs:C})," "]})}),u(P,{get when(){return e.content.info?.in},children:k=>[" in ",u(se,{get href(){return k.link},style:"previewable",get client_id(){return k.client_id},get children(){return k.name}})," "]})]}}),null),E(()=>p.className=V("mr-2",c()?"block":"inline-block")),p})(),u(P,{get if(){return!e.opts.is_pivot||!r()},get children(){const p=fi.cloneNode(!0);return v(p,u(Xn,{get post(){return e.content}})),p}})]}}),u(Ce.Child,{fullwidth:!0,get children(){const p=hi.cloneNode(!0);return v(p,u(P,{get if(){return!(r()||s())},get children(){return u(P,{get if(){return e.content.collapsible!==!1&&e.content.collapsible.default_collapsed===!0},get fallback(){return(()=>{const k=ki.cloneNode(!0);return v(k,()=>"\u201C"+(()=>{const C=St(e.content.body);return C.length>500?C.substring(0,500)+"\u2026":C})()+"\u201D"),k})()},get children(){return u(P,{get when(){return e.content.actions?.vote},fallback:"[Collapsed by default]",children:k=>[u(Xl,{counter:k})," "]})}})}})),p}})]}})),E(p=>{const k="flex-1"+(h()?" hover-outline":""),C=V(e.opts.is_pivot&&r()?"text-3xl":"text-base"),T=V("text-gray-500","text-sm",r()||c()?"":"filter grayscale text-$collapsed-header-color italic");return k!==p._v$&&(w.className=p._v$=k),C!==p._v$2&&(S.className=p._v$2=C),T!==p._v$3&&(x.className=p._v$3=T),p},{_v$:void 0,_v$2:void 0,_v$3:void 0}),w}}),u(P,{get if(){return B(()=>!e.opts.is_pivot,!0)()&&(r()||c())},get children(){return u(Ce.Child,{vertical:"top",get children(){return[mi.cloneNode(!0),u(Ol,{label:"\u2026",get children(){return u(z,{get each(){return g()},children:w=>u(Wl,{action:w})})}})]}})}})]}}),N),v(N,u(wr,{visible:()=>d().visible||d().animating,get children(){return[(()=>{const w=pi.cloneNode(!0);return v(w,u(P,{get if(){return d().visible||d().animating},get children(){return[u(P,{get if(){return B(()=>!!r(),!0)()&&c()},get children(){return vi.cloneNode(!0)}}),u(Er,{get when(){return!l()},get fallback(){return["Content Warning:"," ",u(nt,{get flairs(){return(e.content.flair??[]).filter(S=>S.content_warning)}})," ",(()=>{const S=$i.cloneNode(!0);return S.$$click=()=>i(!1),E(()=>S.className=G["pill-filled"]),S})()]},get children(){return u(Q,{get body(){return e.content.body},autoplay:!1})}})]}})),E(()=>w.className=e.opts.is_pivot?"py-4":""),w})(),u(P,{get if(){return e.opts.is_pivot},get children(){const w=_i.cloneNode(!0),S=w.firstChild,x=S.nextSibling;return v(w,u(Xn,{get post(){return e.content}}),S),v(x,u(z,{get each(){return g()},children:p=>u(Ul,{action:p})})),w}})]}})),E(w=>{const S=V(e.opts.is_pivot?["text-base m-2"]:"text-sm",e.content.collapsible!==!1?"":"pl-15px","flex flex-row"),x=r()?"block":"none";return S!==w._v$4&&(b.className=w._v$4=S),x!==w._v$5&&N.style.setProperty("display",w._v$5=x),w},{_v$4:void 0,_v$5:void 0}),b})()}te(["click"]);const Ni=y("<button>code</button>"),Ur=y("<div></div>");function Hr(e){return u(X,{get item(){return e.content},children:{post:t=>u(Br,{content:t,get opts(){return e.opts}}),page:()=>"TODO page",legacy:t=>u(ce,{getValue:n=>{const r=el("div").clss("-mt-10px -ml-10px"),o=el("div").clss("post text-sm").adto(r),l=ae(t.client_id);return Sn(l,t.thread,o,{clickable:!0}).defer(n),r}}),client:()=>"TODO client"}})}function kn(e){const t=n=>["TODO support. also in the parent list these should probably"," ","be one of those navbars with bits like ClientName ",">"," PageName ",">"," \u2026"," ",(()=>{const r=Ni.cloneNode(!0);return r.$$click=()=>console.log(n),r})()];return(()=>{const n=Ur.cloneNode(!0);return v(n,u(wn,{get data(){return[e.listing,e.opts]},get children(){return u(X,{get item(){return e.listing},children:{page:r=>t(r),client:r=>t(r),post:r=>u(Br,{content:r,get opts(){return e.opts}}),legacy:r=>u(ce,{getValue:o=>{const l=ae(r.client_id);return Se(l,r.thread,{clickable:e.opts.clickable}).defer(o)}})}})}})),n})()}function $n(e){return u(xe,{children:(t,n)=>(()=>{const r=Ur.cloneNode(!0);return v(r,()=>e.children),E(()=>r.className=(n===0?"object-wrapper top-level-wrapper":"p-10px mt-10px rounded-xl")+" "+t+" "+(e.restrict_w??!1?"max-w-xl":"")),r})()})}te(["click"]);const Si=y("<span></span>"),Ei=y('<span class="whitespace-pre-wrap"></span>'),Pi=y("<br>"),Li=y('<button class="absolute top-0 left-0 bottom-0 right-0 w-full h-full rounded bg-spoiler-color hover:bg-spoiler-color-hover cursor-pointer" title="Click to reveal spoiler"></button>'),Ai=y('<span class="relative bg-spoiler-color-hover rounded"><span></span></span>'),Ti=y('<img class="w-4 h-4 object-contain inline-block">'),Ri=y('<code class="bg-gray-200 p-1 rounded text-gray-800"></code>'),Oi=y("<p></p>"),Ii=y('<h1 class="text-3xl text-gray-900 font-black"></h1>'),Di=y('<h2 class="text-2xl text-gray-900 font-bold"></h2>'),Mi=y('<h3 class="text-xl text-gray-900 font-semibold"></h3>'),ji=y('<h4 class="text-lg text-gray-900 font-medium"></h4>'),Vi=y('<h5 class="text-base text-gray-600 font-normal"></h5>'),Wi=y('<h6 class="text-sm text-gray-600 font-normal underline"></h6>'),Bi=y('<div class="py-2"><div class="w-full h-2px bg-gray-400 rounded"></div></div>'),Ui=y('<blockquote class="border-l-2 border-gray-600 text-gray-600 pl-3"></blockquote>'),Hi=y("<li></li>"),Pe=y("<div></div>"),qi=y('<ol class="list-decimal pl-4"></ol>'),Fi=y('<ul class="list-disc pl-4"></ul>'),zi=y("<table><thead><tr></tr></thead><tbody></tbody></table>"),Gi=y("<th></th>"),Ki=y("<tr></tr>"),Yi=y("<td></td>"),Ji=y('<select class="block"><option value="null">None</option></select>'),Xi=y('<pre tabindex="0"></pre>'),Qi=y("<button> </button>"),Zi=y("<option></option>"),es=y('<code class="!whitespace-pre-wrap"></code>'),ts=y('<div class="my-2"></div>'),ns=y('<div class="max-lines max-lines-1 select-none"></div>'),rs=y('<div><div class="max-lines max-lines-1 break-all font-light text-gray-800 dark:text-gray-400 select-none"></div></div>'),os=y('<div class="max-1-line break-all font-light text-gray-800 dark:text-gray-400 select-none"></div>'),ls=y('<div class="inline-block"></div>'),is={link:"normal","pill-empty":"pill-empty"};function ss(e){const t=()=>(e.rts.style??"link")==="link",n=le();return(()=>{const r=Si.cloneNode(!0);return v(r,u(po,{get children(){return[u(jt,{get when(){return e.rts.is_user_link!=null&&e.rts.is_user_link},children:o=>u(Lr,{get client_id(){return e.rts.client_id},color_hash:o,get href(){return e.rts.url},get children(){return u(pe,{get spans(){return e.rts.children}})}})}),u(jt,{get when(){return B(()=>e.rts.is_user_link==null,!0)()&&t()},get children(){return u(Cl,{get client_id(){return e.rts.client_id},get href(){return e.rts.url},get allow_preview(){return n.linkHelpers()==="hide"},get children(){return u(pe,{get spans(){return e.rts.children}})}})}}),u(jt,{get when(){return B(()=>e.rts.is_user_link==null,!0)()&&!t()},get children(){return u(se,{get client_id(){return e.rts.client_id},get href(){return e.rts.url},get style(){return is[e.rts.style??"link"]},get children(){return u(pe,{get spans(){return e.rts.children}})}})}})]}})),E(()=>M(r,"title",e.rts.title)),r})()}function as(e){return u(X,{get item(){return e.span},children:{text:t=>(()=>{const n=Ei.cloneNode(!0);return v(n,()=>t.text),E(r=>{const o=t.styles.strong,l=t.styles.emphasis,i=t.styles.strikethrough,s=t.styles.superscript,c=t.styles.superscript;return o!==r._v$&&n.classList.toggle("font-bold",r._v$=o),l!==r._v$2&&n.classList.toggle("italic",r._v$2=l),i!==r._v$3&&n.classList.toggle("line-through",r._v$3=i),s!==r._v$4&&n.classList.toggle("align-top",r._v$4=s),c!==r._v$5&&n.classList.toggle("text-xs",r._v$5=c),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})(),link:t=>u(ss,{rts:t}),br:()=>Pi.cloneNode(!0),spoiler:t=>{const[n,r]=A(!1);return(()=>{const o=Ai.cloneNode(!0),l=o.firstChild;return v(o,u(P,{get if(){return!n()},get children(){const i=Li.cloneNode(!0);return i.$$click=()=>r(!0),i}}),l),v(l,u(pe,{get spans(){return t.children}})),E(()=>l.className=V("rounded","transition-opacity","bg-spoiler-color-revealed",n()?"":"opacity-0 invisible")),o})()},emoji:t=>(()=>{const n=Ti.cloneNode(!0);return E(r=>{const o=t.url,l=t.name;return o!==r._v$6&&M(n,"src",r._v$6=o),l!==r._v$7&&M(n,"title",r._v$7=l),r},{_v$6:void 0,_v$7:void 0}),n})(),flair:t=>u(nt,{get flairs(){return[t.flair]}}),time_ago:t=>u(vr,{get start(){return t.start}}),error:t=>u(ce,{getValue:n=>O("error").atxt(t.text).onev("click",r=>{console.log(t.value)})}),code:t=>(()=>{const n=Ri.cloneNode(!0);return v(n,()=>t.text),n})()}})}function pe(e){return u(z,{get each(){return e.spans},children:t=>u(as,{span:t})})}function cs(e){return u(X,{get item(){return e.paragraph},children:{paragraph:t=>(()=>{const n=Oi.cloneNode(!0);return v(n,u(pe,{get spans(){return t.children}})),n})(),body:t=>u(Q,{get body(){return t.body},autoplay:!1}),heading:t=>{const n=()=>u(pe,{get spans(){return t.children}});return t.level===1?(()=>{const r=Ii.cloneNode(!0);return v(r,n),r})():t.level===2?(()=>{const r=Di.cloneNode(!0);return v(r,n),r})():t.level===3?(()=>{const r=Mi.cloneNode(!0);return v(r,n),r})():t.level===4?(()=>{const r=ji.cloneNode(!0);return v(r,n),r})():t.level===5?(()=>{const r=Vi.cloneNode(!0);return v(r,n),r})():(()=>{const r=Wi.cloneNode(!0);return v(r,n),r})()},horizontal_line:()=>Bi.cloneNode(!0),blockquote:t=>(()=>{const n=Ui.cloneNode(!0);return v(n,u(Nt,{get content(){return t.children}})),n})(),list:t=>{const n=R(()=>t.children.every(o=>o.kind==="tight_list_item"||o.children.length===1)),r=()=>u(z,{get each(){return t.children},children:o=>(()=>{const l=Hi.cloneNode(!0);return v(l,u(X,{item:o,children:{list_item:i=>u(Nt,{get content(){return i.children},get tight(){return n()}}),tight_list_item:i=>(()=>{const s=Pe.cloneNode(!0);return v(s,u(pe,{get spans(){return i.children}})),E(()=>s.classList.toggle("my-2",!n())),s})()}})),E(()=>l.classList.toggle("tight",n())),l})()});return t.ordered?(()=>{const o=qi.cloneNode(!0);return v(o,r),o})():(()=>{const o=Fi.cloneNode(!0);return v(o,r),o})()},code_block:t=>u(fs,{get text(){return t.text},get default_language(){return t.lang??null}}),table:t=>(()=>{const n=zi.cloneNode(!0),r=n.firstChild,o=r.firstChild,l=r.nextSibling;return v(o,u(z,{get each(){return t.headings},children:i=>(()=>{const s=Gi.cloneNode(!0);return v(s,u(pe,{get spans(){return i.children}})),E(()=>s.className=Zn[i.align??"none"]),s})()})),v(l,u(z,{get each(){return t.children},children:i=>(()=>{const s=Ki.cloneNode(!0);return v(s,u(z,{each:i,children:(c,a)=>(()=>{const d=Yi.cloneNode(!0);return v(d,u(pe,{get spans(){return c.children}})),E(()=>d.className=Zn[t.headings[a()]?.align??"none"]),d})()})),s})()})),n})()}})}const Zn={left:"text-left",center:"text-center",right:"text-right",none:""},[Xe,ds]=A(void 0);let qt=!1;function us(){(!Xe()||qt)&&(qt=!0,Y(()=>import("./prismjs.4ed8587c.js").then(function(e){return e.p}),["assets/prismjs.4ed8587c.js","assets/_commonjsHelpers.2cf1d77b.js"]).then(e=>ds(e)).catch(e=>{alert("error loading syntax highlighter"),qt=!1,console.log(e)}))}function fs(e){const[t,n]=A(e.default_language);F(()=>n(e.default_language));const[r,o]=A(null),l=()=>e.text.length<1e4,[i,s]=A(!1);return F(()=>{(t()!=null||i())&&us()}),F(()=>{if(!l())return;let c=!0;q(()=>c=!1),o(null),Xe()&&t()!=null&&Xe().highlight(e.text,t()??"plaintext").then(a=>{c&&(o(a),a==null&&console.log("syn hl language not supported",t()))}).catch(a=>{console.log(a),alert("error highlighting")})}),(()=>{const c=Xi.cloneNode(!0);return v(c,u(P,{get if(){return l()},get children(){const a=Pe.cloneNode(!0);return v(a,u(P,{get if(){return B(()=>!!Xe(),!0)()&&i()},get fallback(){return(()=>{const d=Qi.cloneNode(!0),f=d.firstChild;return d.$$click=()=>{s(h=>!h)},v(d,()=>t()??"None",f),v(d,()=>i()?"\u25B4":"\u25BE",null),E(()=>d.className=V(["font-sans"])),d})()},get children(){const d=Ji.cloneNode(!0);return d.firstChild,d.$$input=f=>{const h=f.currentTarget.value;n(h==="null"?null:h)},v(d,u(z,{get each(){return Xe().listLanguages().sort((f,h)=>f.localeCompare(h))},children:f=>(()=>{const h=Zi.cloneNode(!0);return h.value=f,v(h,f),h})()}),null),d}})),E(()=>a.className=V(["absolute","top-0 right-0","transition-opacity","opacity-0","group-hover:opacity-100","group-focus:opacity-100","focus:opacity-100","bg-gray-100 rounded","p-2 px-3"])),a}}),null),v(c,u(P,{get when(){return r()},get fallback(){return(()=>{const a=es.cloneNode(!0);return v(a,()=>e.text),a})()},children:a=>(()=>{const d=Pe.cloneNode(!0);return d.innerHTML=a,d})()}),null),E(()=>c.className=V(["bg-gray-200 p-2 rounded text-gray-800","relative","group","outline-default","language-"+(t()??"none"),"!whitespace-pre-wrap"])),c})()}function hs(e){const t=le(),n=R(()=>{const i=Tt(e.link.url,{});if(!i)return;const[s,c]=A(!1);return{visible:s,toggleVisible:()=>c(a=>!a),body:i}}),r=R(()=>{const i=It(e.link.client_id,e.link.url);return i.kind==="link"?{link:i.url,external:i.external}:{link:"error",external:!0}}),[o,l]=A({open:!1,temporary:!1});return u(P,{get if(){return r().link!=="error"},get children(){const i=ts.cloneNode(!0);return v(i,u(xe,{children:s=>u(He,{get client_id(){return e.link.client_id},get class(){return V("p-2 px-4","block",s,"rounded-xl",o().open?"rounded-b-none":"")},get href(){return e.link.url},get onClick(){return n()?()=>{n().toggleVisible()}:void 0},get children(){return[(()=>{const c=ns.cloneNode(!0);return v(c,u(P,{get when(){return n()},children:a=>B(()=>a.visible()?"\u25BE ":"\u25B8 ")}),null),v(c,()=>e.link.title,null),c})(),u(P,{get if(){return!o().open||o().temporary},get children(){const c=rs.cloneNode(!0),a=c.firstChild;return v(a,u(P,{get if(){return B(()=>!n(),!0)()&&r().external},get children(){return[u(er,{})," "]}}),null),v(a,()=>r().link,null),E(()=>c.style.setProperty("display",o().open?"none":"block")),c}})]}})}),null),v(i,u(P,{get when(){return n()},children:s=>[(()=>{const c=Pe.cloneNode(!0);return(a=>xn(a,t,s.visible,(d,f,h)=>{l({open:d||f,temporary:h})}))(c),v(c,u(P,{get if(){return o().open||o().temporary},get children(){const a=Pe.cloneNode(!0);return v(a,u(Q,{get body(){return s.body},autoplay:!0})),E(()=>a.style.setProperty("display",o().open?"block":"none")),a}})),c})(),u(P,{get if(){return o().open||o().temporary},get children(){const c=Pe.cloneNode(!0);return v(c,u(xe,{children:a=>u(He,{get client_id(){return e.link.client_id},get class(){return V("p-2 px-4","block",a,"rounded-xl rounded-t-none")},get href(){return e.link.url},get children(){const d=os.cloneNode(!0);return v(d,u(P,{get if(){return r().external},get children(){return[u(er,{})," "]}}),null),v(d,()=>r().link,null),d}})})),E(()=>c.style.setProperty("display",o().open?"block":"none")),c}})]}),null),i}})}function Nt(e){const t=le();return u(z,{get each(){return e.content},children:n=>[(()=>{const r=Pe.cloneNode(!0);return v(r,u(cs,{paragraph:n})),E(()=>r.classList.toggle("my-2",!(e.tight??!1))),r})(),u(P,{get if(){return t.linkHelpers()==="show"},get children(){return u(z,{get each(){return ms(n)},children:r=>u(hs,{link:r})})}})]})}function gs(e){return u(Nt,{get content(){return e.content}})}function er(){return(()=>{const e=ls.cloneNode(!0);return v(e,u(yl,{size:"icon-sm",icon:{class:"icon-external",label:"External"}})),e})()}function ms(e){return at(e,{paragraph:t=>Ie(t.children),body:()=>[],heading:t=>Ie(t.children),horizontal_line:()=>[],blockquote:()=>[],list:t=>t.children.flatMap(n=>n.kind==="tight_list_item"?Ie(n.children):[]),code_block:()=>[],table:t=>[...t.headings.flatMap(n=>Ie(n.children)),...t.children.flatMap(n=>n.flatMap(r=>Ie(r.children)))]})}function Ie(e){return e.flatMap(t=>at(t,{link:n=>[{title:rt(n.children),url:n.url,client_id:n.client_id}],error:()=>[],text:()=>[],br:()=>[],spoiler:n=>Ie(n.children),emoji:()=>[],flair:()=>[],time_ago:()=>[],code:()=>[]}))}function on(e){return e.map(t=>at(t,{paragraph:n=>rt(n.children),body:n=>St(n.body),heading:n=>rt(n.children),horizontal_line:n=>"---",blockquote:n=>on(n.children),list:n=>n.children.map((r,o)=>{const l=n.ordered?""+o+". ":"\u2022 ";if(r.kind==="tight_list_item")return l+rt(r.children);if(r.kind==="list_item")return l+on(r.children);ur(r)}).join(`
`),code_block:n=>n.text,table:()=>"[table]"})).join(`
`)}function rt(e){return e.map(t=>at(t,{link:n=>rt(n.children),error:n=>"[error]",text:n=>n.text,br:()=>`
`,spoiler:n=>"[spoiler]",emoji:n=>":"+n.name+":",flair:()=>"[flair]",time_ago:()=>"[time ago]",code:n=>n.text})).join("")}te(["click","input"]);const De=y("<div></div>"),vs=y("<div><div></div></div>"),ps=y('<div><div class="border p-2"><div class="font-bold"></div><div></div></div></div>'),_s=y("<button></button>"),bs=y("<div>Loading...</div>"),ys=y("<div><div>TODO polls are currently not supported</div><ul></ul></div>"),ws=y("<li> (<!>)</li>"),xs=y("<div>Caption: </div>"),ks=y("<audio></audio>"),$s=y('<div><h1 class="text-base font-light"><svg aria-label="Mastodon" class="preview-image" viewBox="0 0 713.35878 175.8678" style="fill: currentColor;"><use href="/images/mastodon/Logotype (Full).svg#base" width="713.35878" height="175.8678"></use></svg></h1><h2 class="text-2xl font-black py-1">Select your instance</h2><div class="py-1"><label>Instance Name: <input class="border rounded-md p-1" placeholder="mastodon.social"></label><button>Go \u2192</button></div><p class="py-2">Not on mastodon? Join at </p><p class="py-2">Note that some instances may require logging in before they let you view timelines.</p></div>'),Cs=y('<div><button>Retry</button><span class="text-red-500"></span></div>'),Ns=y("<button><img></button>"),Ss=y("<button>Prev</button>"),Es=y("<button>Next</button>"),Ps=y("<button>Gallery</button>"),Ls=vo(()=>Y(()=>import("./preview_video.3a2f555f.js"),[]));function Q(e){return u(wn,{get data(){return e.body},get children(){return u(As,{get body(){return e.body},get autoplay(){return e.autoplay}})}})}function As(e){return u(X,{get item(){return e.body},children:{text:t=>{const[n]=Yt(()=>JSON.parse(JSON.stringify(t)),o=>ga(o)),r=R(o=>n()??o,void 0);return(()=>{const o=De.cloneNode(!0);return v(o,u(P,{get when(){return r()},get fallback(){return"Loading\u2026"},children:l=>u(Q,{body:l,autoplay:!1})})),E(()=>o.className=n.loading?"opacity-50":"opacity-100"),o})()},link:t=>{const n=R(()=>{const r=Tt(t.url,{suggested_embed:t.embed_html});if(!!r)return{body:r}});return(()=>{const r=vs.cloneNode(!0),o=r.firstChild;return v(o,u(se,{get client_id(){return t.client_id},get href(){return t.url},style:"normal",get children(){return t.url}})),v(r,u(P,{get when(){return n()},children:l=>u(Q,{get body(){return l.body},get autoplay(){return e.autoplay}})}),null),r})()},none:()=>[],gallery:t=>u(Os,{get images(){return t.images}}),removed:t=>{const[n,r]=A({kind:"none"});return(()=>{const o=ps.cloneNode(!0),l=o.firstChild,i=l.firstChild,s=i.nextSibling;return v(i,()=>t.removal_message.title),v(s,()=>t.removal_message.body),v(l,u(P,{get when(){return(n().kind!=="loaded"?!0:void 0)&&t.fetch_path},children:c=>{const a=async()=>{const d=await Pn(t.client_id);let f,h=!1;if(r({kind:"loading"}),!d)throw new Error("invalid client");if(!d.fetchRemoved)throw new Error("client provided a removal fetch path but has no fetchRemoved");try{f=await d.fetchRemoved(c)}catch(m){const g=m;h=!0,console.log(g),f={kind:"text",client_id:"n/a",content:"Error! "+g.toString(),markdown_format:"none"}}console.log("Got new body:",f),r({kind:h?"error":"loaded",body:f})};return(()=>{const d=_s.cloneNode(!0);return d.$$click=()=>{a().catch(console.log)},v(d,()=>({none:"View",loading:"...",error:"Retry",loaded:"never"})[n().kind]),E(f=>{const h=G["outlined-button"],m=n().kind==="loading"||n().kind==="loaded";return h!==f._v$&&(d.className=f._v$=h),m!==f._v$2&&(d.disabled=f._v$2=m),f},{_v$:void 0,_v$2:void 0}),d})()}}),null),v(o,u(Q,{get body(){return t.body},get autoplay(){return e.autoplay}}),null),v(o,u(X,{get item(){return n()},children:{none:()=>[],loading:()=>bs.cloneNode(!0),error:c=>(()=>{const a=De.cloneNode(!0);return v(a,u(Q,{get body(){return c.body},autoplay:!1})),a})(),loaded:c=>(()=>{const a=De.cloneNode(!0);return v(a,u(Q,{get body(){return c.body},autoplay:!1})),a})()}}),null),o})()},crosspost:t=>u($n,{restrict_w:!0,get children(){return u(kn,{get listing(){return{kind:"legacy",thread:t.source,client_id:t.client_id}},get opts(){return{clickable:!0,client_id:t.client_id,frame:null,replies:null,at_or_above_pivot:!1,is_pivot:!1}}})}}),richtext:t=>(()=>{const n=De.cloneNode(!0);return v(n,u(gs,{get content(){return t.content}})),n})(),poll:t=>(()=>{const n=ys.cloneNode(!0),r=n.firstChild,o=r.nextSibling;return v(o,u(z,{get each(){return t.choices},children:l=>(()=>{const i=ws.cloneNode(!0),s=i.firstChild,c=s.nextSibling;return c.nextSibling,v(i,()=>l.name,s),v(i,()=>l.votes==="hidden"?"hidden":"Vote(s)",c),i})()})),n})(),captioned_image:t=>(()=>{const n=De.cloneNode(!0);return v(n,u(ce,{getValue:()=>{const r=el("div");return xa(t.url,{w:t.w??void 0,h:t.h??void 0,alt:t.alt}).adto(r),r}}),null),v(n,u(P,{get when(){return t.caption},children:r=>(()=>{const o=xs.cloneNode(!0);return o.firstChild,v(o,r,null),o})()}),null),n})(),video:t=>u(Ls,{video:t,get autoplay(){return e.autoplay}}),audio:t=>(()=>{const n=ks.cloneNode(!0);return(r=>{const o=yn();F(()=>{o()||r.pause()})})(n),n.controls=!0,v(n,()=>t.alt??"Audio is not supported and alt text was not provided"),E(r=>{const o=t.url,l=e.autoplay;return o!==r._v$3&&M(n,"src",r._v$3=o),l!==r._v$4&&(n.autoplay=r._v$4=l),r},{_v$3:void 0,_v$4:void 0}),n})(),array:t=>u(z,{get each(){return t.body},children:n=>n?u(Q,{body:n,autoplay:!1}):null}),gfycatv1:t=>u(ce,{getValue:n=>{const r=el("div");return ua(t.host,t.id,{autoplay:e.autoplay}).defer(n).adto(r),r}}),gfycatv2:t=>u(Ts,{data:t}),imgur:t=>u(ce,{getValue:n=>{const r=el("div");return wa(t.imgur_kind,t.imgur_id).defer(n).adto(r),r}}),youtube:t=>u(ce,{getValue:n=>{const r=el("div");return ya(t.id,t.search,{autoplay:e.autoplay}).defer(n).adto(r),r}}),twitch_clip:t=>{const[n]=Yt(t.slug,ba);return u(P,{get when(){return n()},children:r=>u(Q,{body:r,autoplay:!1})})},reddit_suggested_embed:t=>u(ce,{getValue:n=>{const r=el("div");return _a(t.suggested_embed).defer(n).adto(r),r}}),link_preview:t=>u(ce,{getValue:n=>{const r=el("div");return va(t.client_id,t).defer(n).adto(r),r}}),oembed:t=>u(ce,{getValue:n=>{const r=el("div");return pa(t).defer(n).adto(r),r}}),mastodon_instance_selector:t=>{const[n,r]=A(""),o=R(()=>{const i=n();return i.trim()?i.indexOf("/")>-1?!1:i.indexOf(".")!==-1:!1}),l=()=>{!o()||ze({path:"/"+t.client_id+"/"+n().replaceAll("/","-")})};return(()=>{const i=$s.cloneNode(!0),s=i.firstChild,c=s.nextSibling,a=c.nextSibling,d=a.firstChild,f=d.firstChild,h=f.nextSibling,m=d.nextSibling,g=a.nextSibling;return g.firstChild,s.style.setProperty("max-width","6rem"),h.$$keydown=b=>{b.key==="Enter"&&l()},h.$$input=b=>r(b.currentTarget.value),m.$$click=()=>{l()},v(g,u(se,{client_id:"",style:"normal",href:"https://joinmastodon.org",children:"joinmastodon.org"}),null),E(b=>{const $=n(),N=!o(),w=G[o()?"pill-filled":"pill-empty"];return $!==b._v$5&&(h.value=b._v$5=$),N!==b._v$6&&(m.disabled=b._v$6=N),w!==b._v$7&&(m.className=b._v$7=w),b},{_v$5:void 0,_v$6:void 0,_v$7:void 0}),i})()}}})}function St(e){return at(e,{text:()=>"[text]",richtext:t=>on(t.content),link:t=>t.url,captioned_image:()=>"[image]",video:()=>"[video]",gfycatv1:()=>"[gif]",gfycatv2:()=>"[gif]",youtube:()=>"[video]",imgur:()=>"[images]",twitch_clip:()=>"[video]",oembed:()=>"[link]",reddit_suggested_embed:()=>"[content]",audio:()=>"[audio]",gallery:()=>"[gallery]",poll:()=>"[poll]",none:()=>"",removed:t=>St(t.body),crosspost:()=>"[crosspost]",array:t=>t.body.map(n=>n?St(n):"").join(`
`),link_preview:t=>t.url,mastodon_instance_selector:()=>"[mastodon instance selector]"})}function Ts(e){const[t,n]=A({kind:"loading"}),[r,o]=A(Symbol());return F(()=>{r();let l=!0;q(()=>l=!1);const i=e.data;Ko(i.host,i.id).then(s=>{!l||n({kind:"loaded",frame:s})}).catch(s=>{!l||(console.log("got error",s,s.stack),n({kind:"error",message:s.toString()}))})}),u($n,{restrict_w:!0,get children(){return u(X,{get item(){return t()},children:{loading:()=>"loading...",loaded:({frame:l})=>u(kn,{get listing(){return l.content},get opts(){return{clickable:!0,client_id:l.client_id,frame:l,replies:null,at_or_above_pivot:!1,is_pivot:!1}}}),error:l=>(()=>{const i=Cs.cloneNode(!0),s=i.firstChild,c=s.nextSibling;return s.$$click=()=>{n({kind:"loading"}),o(Symbol())},v(c,()=>l.message),i})()}})}})}function Rs(e){const t=e.getBoundingClientRect();return{x:t.left,y:t.top+(window.pageYOffset??document.documentElement.scrollTop),w:t.width,h:t.height}}function Os(e){const[t,n]=br({kind:"overview"}),[r,o]=A({enabled:!1,index:0,loading:!1}),l=le(),i=R(()=>e.images.every(h=>h.body.kind==="captioned_image")),s=()=>i()&&l.galleryDisplay()==="fullscreen";let c;const a=h=>{n(ve({kind:"overview",fullscreen_index:h},{merge:!0}));const m=c.querySelector(".img-"+h);if(!m)return{x:0,y:0,w:0};const g=Rs(m),b=e.images[h];if(b&&b.aspect!=null)if(b.aspect>1){const $=g.h;g.h=g.w*(1/b.aspect),g.y+=($-g.h)/2}else{const $=g.w;g.w=g.h*b.aspect,g.x+=($-g.w)/2}return g};let d;q(()=>{d&&d()});const f=yn();return F(()=>{f()||d&&d()}),(()=>{const h=De.cloneNode(!0),m=c;return typeof m=="function"?m(h):c=h,v(h,u(X,{item:t,children:{overview:g=>u(xe,{children:b=>u(z,{get each(){return e.images},children:($,N)=>(()=>{const w=Ns.cloneNode(!0),S=w.firstChild;return w.$$click=()=>{s()?(o({enabled:!0,index:N(),loading:!0}),Y(()=>import("./gallery.647861f2.js"),["assets/gallery.647861f2.js","assets/gallery.ba89e886.css","assets/_commonjsHelpers.2cf1d77b.js"]).then(x=>{o({enabled:!0,index:N(),loading:!1}),d&&d();const p=x.showGallery(e.images,N(),a,{onclose:()=>{console.log("gallery closed"),o(k=>({...k,enabled:!1}))},setIndex:k=>{o({enabled:!0,index:k,loading:!1})}});d=()=>{p.cleanup(),n(ve({kind:"overview",fullscreen_index:void 0},{merge:!0}))}}).catch(x=>{console.log("Error loading gallery component",x),n(ve({kind:"image",index:N()},{merge:!0}))})):n(ve({kind:"image",index:N()},{merge:!0}))},E(x=>{const p=V("m-1 inline-block rounded-md",b),k=$.thumb??"error",C=V("w-24 h-24 object-contain img-"+N(),r().enabled&&r().index===N()?r().loading?"opacity-50":"opacity-0":"");return p!==x._v$8&&(w.className=x._v$8=p),k!==x._v$9&&M(S,"src",x._v$9=k),C!==x._v$10&&(S.className=x._v$10=C),x},{_v$8:void 0,_v$9:void 0,_v$10:void 0}),w})()})}),image:g=>[(()=>{const b=Ss.cloneNode(!0);return b.$$click=()=>n(ve({kind:"image",index:g.index-1},{merge:!0})),E($=>{const N=G["outlined-button"],w=g.index<=0;return N!==$._v$11&&(b.className=$._v$11=N),w!==$._v$12&&(b.disabled=$._v$12=w),$},{_v$11:void 0,_v$12:void 0}),b})(),B(()=>g.index+1),"/",B(()=>e.images.length),(()=>{const b=Es.cloneNode(!0);return b.$$click=()=>n(ve({kind:"image",index:g.index+1},{merge:!0})),E($=>{const N=G["outlined-button"],w=g.index>=e.images.length-1;return N!==$._v$13&&(b.className=$._v$13=N),w!==$._v$14&&(b.disabled=$._v$14=w),$},{_v$13:void 0,_v$14:void 0}),b})(),(()=>{const b=Ps.cloneNode(!0);return b.$$click=()=>n(ve({kind:"overview"},{merge:!0})),E(()=>b.className=G["outlined-button"]),b})(),u(Q,{get body(){return e.images[g.index].body},autoplay:!0})]}})),h})()}te(["click","input","keydown"]);const Is=y('<div class="flex justify-center flex-row"><div class="w-full max-w-prose"><div class="bg-white p-5 sm:m-5 sm:p-10 shadow sm:rounded-xl"><header><h1 class="text-3xl sm:text-5xl font-black">ThreadClient</h1><h2 class="text-base font-light text-gray-800 dark:text-gray-400">A client for Reddit and Mastodon</h2></header><div class="mt-10"></div><main><p>Try for </p><p>Try for </p></main><div class="mt-10"></div><footer><p class="text-gray-800 dark:text-gray-400"> \xB7 <!> \xB7 </p></footer><div class="mt-2"></div></div></div></div>');function Ds(e){return(()=>{const t=Is.cloneNode(!0),n=t.firstChild,r=n.firstChild,o=r.firstChild,l=o.nextSibling,i=l.nextSibling,s=i.firstChild;s.firstChild;const c=s.nextSibling;c.firstChild;const a=i.nextSibling,d=a.nextSibling,f=d.firstChild,h=f.firstChild,m=h.nextSibling;return m.nextSibling,v(s,u(se,{client_id:"",href:"/reddit",style:"normal",children:"Reddit"}),null),v(c,u(se,{client_id:"",href:"/mastodon",style:"normal",children:"Mastodon"}),null),v(f,u(se,{client_id:"",href:"/settings",style:"action-button",children:"Settings"}),h),v(f,u(se,{client_id:"",href:"https://github.com/pfgithub/threadclient",style:"action-button",children:"Github"}),m),v(f,u(se,{client_id:"",href:"https://github.com/pfgithub/threadclient/blob/main/privacy.md",style:"action-button",children:"Privacy"}),null),t})()}function qr(e,t){const[n,r]=br({data:null}),o=oo(()=>{o(()=>r("data",ve(e(),{merge:t.merge,key:t.key})))});return o(()=>{r("data",ve(e()))}),n}const Ms=y('<div class="absolute top-0 left-0 w-full h-full"></div>'),js=y("<div><div></div></div>");function Vs(e){const[t,n]=A(null),r=R(()=>t()!=null),[o,l]=A(!1),i=R(()=>r()||o());let s=0;F(()=>{const d=t();d!=null&&(s=d)});let c,a=[];return q(()=>{a.forEach(d=>d())}),(()=>{const d=js.cloneNode(!0),f=d.firstChild;d.$$pointerdown=m=>{const g=m.pointerId;if(m.pointerType==="mouse"||r()||document.getSelection()?.isCollapsed===!1)return;if(CSS.supports("-webkit-touch-callout: none")){const C=window.innerWidth,T=m.clientX;if(Math.min(Math.abs(T),Math.abs(C-T))<50)return}let $=!1;m.preventDefault(),c.style.transition="";const N=()=>{const C=t()!==0&&t()!=null;c.style.transition="0.1s transform",C&&c.offsetWidth,Ae(()=>{C&&l(!0),n(null)}),k()},w=C=>{if(C.pointerId!==g)return;const T=C.clientX-m.clientX,D=C.clientY-m.clientY;($||Math.abs(T)>10&&Math.abs(D)<Math.abs(T))&&($=!0,n(T))},S=C=>{C.pointerId===g&&(e.onRelease(t()??0),N())},x=C=>{C.pointerId===g&&N()},p=()=>{k()};document.addEventListener("pointermove",w),document.addEventListener("pointerup",S),document.addEventListener("pointercancel",x),document.addEventListener("selectionchange",p);const k=()=>{a=a.filter(C=>C!==k),document.removeEventListener("pointermove",w),document.removeEventListener("pointerup",S),document.removeEventListener("pointercancel",x),document.removeEventListener("selectionchange",p)};a.push(k)},d.style.setProperty("width","100%"),d.style.setProperty("touch-action","pan-y pinch-zoom"),d.style.setProperty("position","relative"),v(d,u(P,{get if(){return i()},get children(){const m=Ms.cloneNode(!0);return v(m,()=>H(()=>e.background(()=>t()??s))),m}}),f),f.addEventListener("transitionend",m=>{m.target===m.currentTarget&&l(!1)});const h=c;return typeof h=="function"?h(f):c=f,v(f,()=>e.children),E(m=>{const g=i()?"hidden":"unset",b=(()=>{const $=t();return $!=null?"translateX("+$+"px)":""})();return g!==m._v$&&d.style.setProperty("overflow-x",m._v$=g),b!==m._v$2&&f.style.setProperty("transform",m._v$2=b),m},{_v$:void 0,_v$2:void 0}),d})()}te(["pointerdown"]);const Ws=y('<div><div class="absolute w-100px h-full flex items-center justify-center"><div></div></div></div>');function Bs(e){return{background:t=>{const n=R(()=>t()<0?e.right_stop:e.left_stop),r=R(()=>t()<0),o=R(()=>Math.abs(t())>100);return(()=>{const l=Ws.cloneNode(!0),i=l.firstChild,s=i.firstChild;return v(s,u(dt,{get icon(){return n().icon},get bold(){return o()},label:null})),E(c=>{const a=El(n().color,o())+" w-full h-full relative",d={...r()?{right:"-100px"}:{left:"-100px"},transform:"translateX("+t()+"px)"},f=o()?"bounceanim":"";return a!==c._v$&&(l.className=c._v$=a),c._v$2=_n(i,d,c._v$2),f!==c._v$3&&(s.className=c._v$3=f),c},{_v$:void 0,_v$2:void 0,_v$3:void 0}),l})()},onRelease:t=>{t<-100&&e.right_stop.onActivate(),t>100&&e.left_stop.onActivate()}}}const Us=y('<div style="border-bottom-left-radius: 0; border-bottom-right-radius: 0"></div>'),Hs=y('<div style="border-top-left-radius: 0; border-top-right-radius: 0"></div>'),qs=y('<div class="pt-2"></div>'),Fs=y('<div><div class="flex flex-row"><div></div></div></div>'),zs=y("<div><div></div></div>"),Gs=y('<div class="py-1"><button class="text-blue-500 hover:underline"></button></div>'),Ks=y('<p class="text-red-600 dark:text-red-500">Error loading; </p>'),Ys=y('<hr class="my-2 border-t-2">'),Js=y("<div>TODO: <!> <button>code</button></div>"),Xs=y('<div class="text-red-500">Error: <!> <button>code</button></div>'),tr=["bg-red-500","bg-orange-500","bg-yellow-500","bg-green-500","bg-blue-500","bg-purple-500"];function Qs(e){return tr[e%tr.length]}function Zs(e){return u(wn,{get data(){return e.item},get children(){return u(ea,{get item(){return e.item},get collapse_data(){return e.collapse_data}})}})}function ea(e){return u(X,{get item(){return e.item},children:{wrapper_start:()=>u(xe,{children:t=>(()=>{const n=Us.cloneNode(!0);return n.className=" "+t+" h-2 sm:rounded-xl mt-4",n})()}),wrapper_end:()=>u(xe,{children:t=>(()=>{const n=Hs.cloneNode(!0);return n.className=" "+t+" h-2 sm:rounded-xl mb-4",n})()}),post:t=>u(Vs,We(()=>Bs({left_stop:{icon:"bookmark",color:"green",onActivate:()=>{alert("TODO")}},right_stop:{icon:"chevron_up",color:"blue",onActivate:()=>{_e(e.collapse_data,t.collapse.id).setCollapsed(r=>!r)}}}),{get children(){return u(xe,{children:n=>(()=>{const r=Fs.cloneNode(!0),o=r.firstChild,l=o.firstChild;return r.className="px-2 "+n,v(o,u(P,{get if(){return!rn.sm()},get fallback(){return u(P,{get if(){return t.indent.length>0},get children(){const i=zs.cloneNode(!0),s=i.firstChild;return E(c=>{const a=(t.indent.length-3)*.25+"rem",d=V("w-1","mr-2","pl-0.5",t.first_in_wrapper?"":"pt-2"),f=V("w-full h-full",Qs(t.depth-1),"rounded-md");return a!==c._v$&&i.style.setProperty("margin-left",c._v$=a),d!==c._v$2&&(i.className=c._v$2=d),f!==c._v$3&&(s.className=c._v$3=f),c},{_v$:void 0,_v$2:void 0,_v$3:void 0}),i}})},get children(){return u(z,{get each(){return t.indent},children:i=>u(Vr,{collapsed_raw:!1,collapsed_anim:!1,onClick:()=>{_e(e.collapse_data,i.id).setCollapsed(c=>!c)},real:!1,get cstates(){return e.collapse_data},get threaded(){return i.threaded},get id(){return i.id}})})}}),l),v(l,u(P,{get if(){return!t.first_in_wrapper},get children(){return qs.cloneNode(!0)}}),null),v(l,u(X,{get item(){return t.content},children:{post:i=>u(Hr,{get content(){return i.content},get opts(){return{clickable:!1,frame:i,client_id:i.client_id,replies:i.replies,at_or_above_pivot:t.at_or_above_pivot,is_pivot:t.is_pivot,collapse_data:e.collapse_data,id:t.id}}}),loader:i=>{const[s,c]=A(!1),[a,d]=A(null),f=$r();return(()=>{const h=Gs.cloneNode(!0),m=h.firstChild;return m.$$click=()=>{c(!0);const g=f.pgin();(async()=>(a()!=null&&await new Promise(b=>setTimeout(b,200)),await ae(i.client_id).loader(t.id,i)))().then(b=>{Ae(()=>{c(!1),d(null),console.log("adding content",b.content,t),f.addContent(g,b.content)})}).catch(b=>{console.log("Error loading; ",b),Ae(()=>{c(!1),d(b.toString())})})},v(m,(()=>{const g=B(()=>!!s(),!0);return()=>g()?"Loading\u2026":(a()!=null?"Retry Load":"Load More")+(i.load_count!=null?" ("+i.load_count+")":"")})()),v(h,u(P,{get when(){return a()},children:g=>(()=>{const b=Ks.cloneNode(!0);return b.firstChild,v(b,g,null),b})()}),null),E(()=>m.disabled=s()),h})()}}}),null),E(()=>l.className="flex-1 "+(rn.sm()&&t.threaded?"threaded-new":"")),r})()})}})),horizontal_line:()=>(()=>{const t=Ys.cloneNode(!0);return t.style.setProperty("border-top-color","var(--collapse-line-color)"),t})(),todo:t=>(()=>{const n=Js.cloneNode(!0),r=n.firstChild,o=r.nextSibling,l=o.nextSibling,i=l.nextSibling;return v(n,()=>t.note,o),i.$$click=()=>console.log(t.data),n})(),error:t=>(()=>{const n=Xs.cloneNode(!0),r=n.firstChild,o=r.nextSibling,l=o.nextSibling,i=l.nextSibling;return v(n,()=>t.note,o),i.$$click=()=>console.log(t.data),n})()}})}te(["click"]);const ta=y('<div class="m-4 <sm:mx-0"></div>');function na(e){const t={map:new Map},n=$r(),r=qr(()=>(console.log("Reloading data!"),Fl(e.pivot,{collapse_data:t,content:n.content()})),{key:Ir,merge:!0});return(()=>{const o=ta.cloneNode(!0);return v(o,u(z,{get each(){return r.data.body},children:l=>u(Zs,{item:l,collapse_data:t})})),o})()}const ra=y('<label class="my-3"><input type="checkbox"> Show my signature on this post</label>'),oa=y('<div><textarea class="border my-3 w-full resize-y"></textarea><div class="flex space-x-1 my-3"><button></button><button>Cancel<div></div></button></div></div>'),la=y('<pre class="error"><code>There was an error! </code></pre>'),ia=y("<button>Hide error</button>");function sa(e){const t=le(),[n,r]=ol("comment-draft-"+e.action.client_id+"-"+e.action.key),[o,l]=A(!0),i=()=>{const m=n()??"",g=t.signature();return o()&&g.trim()?m+(m.trim()?`

`:"")+g:m},s=()=>i().trim()==="",[c,a]=A(!1),[d,f]=A(void 0),h=qr(()=>ae(e.action.client_id).previewReply(i(),e.action.reply_info),{key:null,merge:!0});return(()=>{const m=oa.cloneNode(!0),g=m.firstChild,b=g.nextSibling,$=b.firstChild,N=$.nextSibling;return g.$$input=w=>{r(w.currentTarget.value)},v(m,u(P,{get if(){return!!t.signature().trim()},get children(){const w=ra.cloneNode(!0),S=w.firstChild;return S.$$input=x=>{l(x.currentTarget.checked)},E(()=>S.checked=o()),w}}),b),$.$$click=w=>{a(!0),ae(e.action.client_id).sendReply(i(),e.action.reply_info,e.action.mode).then(x=>{console.log("Got response",x),r(null),e.onAddReply({kind:"post",internal_data:x.raw_value,content:x.kind==="thread"?{kind:"legacy",thread:x,client_id:e.action.client_id}:{kind:"post",title:{text:"Error"},body:{kind:"richtext",content:[I.p(I.error("Unsupported 'load more'",x))]},show_replies_when_below_pivot:!1,collapsible:!1},display_style:"centered",parent:null,replies:null,url:null,client_id:e.action.client_id})}).catch(x=>{a(!1);const p=x;console.log("Got error",p),f(p.toString()+`
`+p.stack)})},v($,()=>c()?"\u2026":e.action.text),N.$$click=w=>{e.onCancel()},v(m,u(P,{get when(){return d()},children:w=>[(()=>{const S=la.cloneNode(!0),x=S.firstChild;return x.firstChild,v(x,w,null),S})(),(()=>{const S=ia.cloneNode(!0);return S.$$click=()=>f(void 0),S})()]}),null),v(m,u(P,{get if(){return!s()},get when(){return h.data},children:w=>(console.log("Value changed",w),u($n,{restrict_w:!0,get children(){return u(kn,{listing:w,get opts(){return{clickable:!1,replies:null,at_or_above_pivot:!0,is_pivot:!0,frame:null,client_id:e.action.client_id}}})}}))}),null),E(w=>{const S=c(),x=n()??"",p=s()||c(),k=G[s()?"pill-empty":"pill-filled"],C=c(),T=G["pill-empty"];return S!==w._v$&&(g.disabled=w._v$=S),x!==w._v$2&&(g.value=w._v$2=x),p!==w._v$3&&($.disabled=w._v$3=p),k!==w._v$4&&($.className=w._v$4=k),C!==w._v$5&&(N.disabled=w._v$5=C),T!==w._v$6&&(N.className=w._v$6=T),w},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),m})()}te(["input","click"]);const aa=y('<ul class="ml-10"></ul>'),ca=y('<main class="client-wrapper"><div class="display-comments-view"></div></main>');function ee(e){throw console.log("not never:",e),new Error("is not never")}function Fr(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function It(e,t){if(t.startsWith("/")&&e&&(t="/"+e+t),t.startsWith("mailto:"))return{kind:"mailto",title:t.replace("mailto:","")};let n=!1;if(t.startsWith("raw!")&&(t=t.replace("raw!",""),n=!0),!t.startsWith("http")&&!t.startsWith("/"))return{kind:"error",title:t};let r;try{r=new URL(t)}catch{r=void 0}return r&&!n&&(r.host==="reddit.com"||r.host.endsWith(".reddit.com"))&&(r.host==="mod.reddit.com"?t="/reddit/mod"+r.pathname+r.search+r.hash:t="/reddit"+r.pathname+r.search+r.hash),r&&!n&&r.host==="redd.it"&&(t="/reddit/comments"+r.pathname+r.search+r.hash),t.startsWith("/")?{kind:"link",url:t.replace("/","#"),external:!1}:{kind:"link",url:t,external:!0}}function U(e,t,n,r={}){const o=It(e,t);if(o.kind==="error")return el("a").clss(...ln(n),"error").attr({title:o.title}).clss("error").onev("click",l=>{l.stopPropagation(),alert(t)});if(o.kind==="mailto")return el("span").attr({title:o.title});if(o.kind==="link"){const l=o.url,i=el("a").clss(...ln(n)).attr({href:l,target:"_blank",rel:"noopener noreferrer"});return(l.startsWith("/")||r.onclick)&&(i.onclick=s=>{if(s.stopPropagation(),!s.defaultPrevented&&s.button===0&&!Fr(s)){if(s.preventDefault(),r.onclick)return r.onclick();ze({path:l})}}),i}else ee(o)}function da(e,t,n){const r=n.get("t")??n.get("start")??void 0,o=el("iframe").attr({allow:"fullscreen",src:"https://www.youtube.com/embed/"+e+"?version=3&enablejsapi=1&playerapiid=ytplayer"+(t.autoplay?"&autoplay=1":"")+(r!=null?"&start="+r.replace("s",""):"")});return{node:el("div").clss("resizable-iframe").styl({width:"640px",height:"360px"}).adch(o),onhide:()=>{o.contentWindow?.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*")}}}function Ft(e){return["inline-block mx-1 px-1 text-base border-b-2 transition-colors",e?"border-gray-900":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900"].join(" ")}function ua(e,t,n){const r=el("div"),o=L(r),l=Fe().adto(r);return fetch("https://api."+e+"/v1/gfycats/"+t).then(i=>i.json()).then(i=>{if(console.log("gfylike response:",i),l.remove(),r.adch(el("div").adch(O("code-button").atxt("code").onev("click",f=>{f.stopPropagation(),console.log(i)}))),"message"in i){el("div").clss("error").adto(r).atxt("Error: "+i.message);return}if("errorMessage"in i){el("div").clss("error").adto(r).atxt("Error: "+i.errorMessage);return}const{gfyItem:s}=i;s.title!=null&&r.adch(el("div").atxt("Title: "+s.title)),s.description!=null&&r.adch(el("div").atxt("Description: "+s.description));const c=[...s.mp4Url!=null?[{url:s.mp4Url,type:"video/mp4",quality:"Highest"}]:[],...s.webmUrl!=null?[{url:s.webmUrl,type:"video/webm",quality:"Highest"}]:[],...s.content_urls.webm?[{url:s.content_urls.webm.url,quality:"Highest"}]:[],...s.content_urls.mp4?[{url:s.content_urls.mp4.url,quality:"Highest"},{url:s.content_urls.mp4.url.replace(".mp4","-mobile.mp4"),quality:"Mobile"}]:[],...s.content_urls.mobile?[{url:s.content_urls.mobile.url,quality:"Mobile"}]:[],...s.mobileUrl!=null?[{url:s.mobileUrl,quality:"Mobile"}]:[]],a=s.content_urls,d=a.max5mbGif??a.max2mbGif??a.max1mbGif;Z({kind:"video",aspect:s.width/s.height,gifv:!1,source:c.length>0?{kind:"video",sources:c}:d!=null?{kind:"img",url:d.url}:{kind:"img",url:(()=>{throw console.log("Bad gfy image in",s),new Error("Bad gfy image")})()}},{autoplay:n.autoplay}).defer(o).adto(r)}).catch(i=>{const s=i;console.log(s),l.parentNode&&l.remove(),r.adch(el("div").clss("error").atxt("Error loading gfycat : "+s.toString()))}),o}function Me(e){const t=el("span");return At(()=>u(nt,{flairs:e}),t),t}function Ye(e){const t=el("span"),n=L(t);return ge(t,()=>u(vr,{start:e}),{color_level:1}).defer(n),n}function fa(e){let t;return async()=>{if(!t){t=[];let r;try{r=await e()}catch(l){throw console.log("failed to load",l),alert("failed to load dynamic load object. check console."),l}const o=t;t={loaded:r},o.forEach(l=>l())}if("loaded"in t)return t.loaded;const n=t;return await new Promise(r=>n.push(r)),t.loaded}}const ha=fa(async()=>{const e=new TextEncoder,t=new TextDecoder,n=await(await Y(()=>import("./snudown.69d6942c.js"),[])).default({env:{__assert_fail:(r,o,l,i)=>{throw console.log(r,o,l,i),new Error("assert failed")},__stack_chk_fail:()=>{throw new Error("stack overflow")},debugprints:(r,o)=>{console.log("print text:",t.decode(new Uint8Array(n.memory.buffer,r,o)))},debugprinti:r=>{console.log("print int:",r)},debugprintc:r=>{console.log("print char:",String.fromCodePoint(r))},debugpanic:(r,o)=>{throw new Error("Panic: "+t.decode(new Uint8Array(n.memory.buffer,r,o)))}}});return{renderMd(r){try{const o=e.encode(r),l=n.allocString(o.byteLength);new Uint8Array(n.memory.buffer,l,o.byteLength).set(o);const s=n.markdownToHTML(l,o.byteLength),c=n.strlen(s),a=new Uint8Array(n.memory.buffer,s,c),d=t.decode(a);return n.freeText(l,o.byteLength),n.freeText(s,c),d}catch(o){const l=o;return console.log(l.toString()+`
`+l.stack),Xo("Error "+l.toString()+`
`+l.stack)}}}});async function ga(e){const t=e.content;if(e.markdown_format==="reddit"){const[n,r]=await Promise.all([ha(),Y(()=>import("./html_to_richtext.2a8d4ad6.js"),[])]),o=n.renderMd(t);return{kind:"richtext",content:r.parseContentHTML(o,e.client_id)}}else{if(e.markdown_format==="none")return{kind:"richtext",content:[I.p(I.txt(t))]};if(e.markdown_format==="reddit_html"){const n=await Y(()=>import("./html_to_richtext.2a8d4ad6.js"),[]);return console.log(t),{kind:"richtext",content:n.parseContentHTML(t,e.client_id)}}else ee(e.markdown_format)}}function Z(e,t){try{return ma(e,t)}catch(n){const r=n;console.log(r);const o=el("div");return el("div").clss("error").adto(o).atxt("Got error: "+r.toString()),el("code").adto(el("pre").adto(o)).atxt(r.stack??"no stack"),L(o)}}function ma(e,t){const n=el("div"),r=L(n),o=el("div").adto(n);return ge(o,()=>u(Q,{body:e,get autoplay(){return t.autoplay}}),{color_level:1}).defer(r),r}function va(e,t){const n=el("div"),r=L(n);let o;t.click_enabled?o=el("div").clss("bg-body rounded-lg block").adto(n):o=U(e,t.url,"none",{onclick:t.click_enabled?()=>{o.remove(),Z(t.click,{autoplay:!0}).defer(r).adto(n)}:void 0}).clss("bg-body rounded-lg hover:shadow-md hover:bg-gray-100 block").adto(n);const l=el("article").clss("flex",t.click_enabled?"flex-col":"flex-row").adto(o),i=el("div").clss(t.click_enabled?"w-full h-auto min-h-10 relative":"w-24 h-full flex items-center justify-center bg-gray-100","rounded-lg overflow-hidden").adto(el("div").adto(l));if(t.thumb!=null?t.click_enabled?i.adch(el("img").clss(t.click_enabled?"w-full h-full":"").attr({src:t.thumb})):el("div").styl({"background-image":`url(${JSON.stringify(t.thumb)})`,"background-size":"contain","background-position":"center","background-repeat":"no-repeat"}).clss("w-full h-full").adto(i):i.adch(el("div").atxt("\u{1F517}")),t.click_enabled){const c=el("div").adto(i);c.clss("flex items-center justify-center absolute top-0 left-0 bottom-0 right-0");const a=el("div").clss("rounded-lg bg-gray-200 p-2 flex shadow-md gap-3").adto(c);el("button").clss("hover:underline").adto(a).atxt("Play").onev("click",d=>{d.stopPropagation(),i.innerHTML="",Z(t.click,{autoplay:!0}).defer(r).adto(i)}),a.atxt(" "),U(e,t.url,"none").clss("hover:underline").atxt("Open").adto(a)}const s=el("div").clss("flex flex-col p-3 text-sm").adto(l);return s.adch(el("h1").clss("max-lines max-lines-1 font-black").atxt(t.title)),s.adch(el("p").clss("max-lines max-lines-2").atxt(t.description)),s.adch(el("div").clss("max-lines max-lines-1 font-light break-all").atxt(t.url)),r}function pa(e){const t=el("div"),n=L(t);return Dt(fetch(e.url,{headers:{Accept:"application/json"}}).then(r=>r.json()),r=>{console.log("oembed resp",r);const o=el("div"),l=L(o);return Z(sl(r,e.client_id),{autoplay:!1}).defer(n).adto(o),l}).defer(n).adto(t),n}function _a(e){try{const t=el("template");t.innerHTML=e;const n=t.content.childNodes[0];if(!n)throw new Error("missing iframe");const r=n instanceof HTMLIFrameElement?{src:n.src,allow:n.allow,allowfullsreen:""}:{srcdoc:e},o=el("div").clss("resizable-iframe");let l;const i=()=>{l||(l=el("iframe").attr(r).adto(o))};i();const s=L(o);return s.on("hide",()=>{l&&(l.remove(),l=void 0)}),s.on("show",()=>i()),s}catch(t){const n=t;console.log(n);const r=el("div");return r.adch(el("p").atxt("Error adding suggestedembed: "+n.toString()).clss("error")),r.adch(el("pre").adch(el("code").atxt(e))),L(r)}}async function ba(e){function t(a,d,f){return{extensions:{persistedQuery:{sha256Hash:d,version:1}},operationName:a,variables:f}}const n=await fetch("https://gql.twitch.tv/gql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Client-Id":"kimne78kx3ncx6brgo4mv6wki5h1ko"},body:JSON.stringify([t("VideoAccessToken_Clip","36b89d2507fce29e5ca551df756d27c1cfe079e2609642b4390aa4c35796eb11",{slug:e}),t("ClipsChatCard","94c1c7d97d860722a5b7ef3c3b3de3783b37fc32d69bcccc8ea0cda372cf1f01",{slug:e}),t("ClipsBroadcasterInfo","ce258d9536360736605b42db697b3636e750fdb14ff0a7da8c7225bdc2c07e8a",{slug:e}),t("ClipsTitle","f6cca7f2fdfbfc2cecea0c88452500dae569191e58a265f97711f8f2a838f5b4",{slug:e}),t("ClipsCurator","769e99d9ac3f68e53c63dd902807cc9fbea63dace36c81643d776bcb120902e2",{slug:e}),t("ClipsFullVideoButton","d519a5a70419d97a3523be18fe6be81eeb93429e0a41c3baa9441fc3b1dffebf",{slug:e})])}).then(a=>a.json());console.log(n);const[r,o,l,i,s,c]=n;return r.data.clip?{kind:"video",source:{kind:"video",sources:r.data.clip.videoQualities.map(a=>({url:a.sourceURL+"?sig="+encodeURIComponent(r.data.clip.playbackAccessToken.signature)+"&token="+encodeURIComponent(r.data.clip.playbackAccessToken.value),quality:a.quality+"p"}))},caption:i.data.clip.title,gifv:!1}:{kind:"richtext",content:[I.p(I.txt("The clip could not be found."))]}}function ya(e,t,n){const r=new URLSearchParams(t),o=el("div"),l=da(e,{autoplay:n.autoplay},r);l.node.adto(o);const i=L(o);return i.on("hide",()=>l.onhide?.()),i.on("show",()=>l.onshow?.()),i}function wa(e,t){const n=el("div"),r=L(n),o=Fe().adto(n);return fetch("https://api.imgur.com/3/"+e+"/"+t,{headers:{Authorization:"Client-ID 6ccf617dc7a8830",Accept:"application/json"}}).then(l=>l.json()).then(l=>{const i=l;if(console.log("imgur result",i),i.success){const s={kind:"gallery",images:("images"in i.data?i.data.images:[i.data]).map(c=>{const a=c.animated&&c.mp4!=null?{kind:"video",source:{kind:"video",sources:[{url:c.mp4,quality:c.width+"\xD7"+c.height}]},aspect:c.width/c.height,gifv:c.looping,caption:c.description}:{kind:"captioned_image",caption:c.description,url:c.link,w:c.width,h:c.height};return{thumb:"https://i.imgur.com/"+c.id+"t.jpg",aspect:c.width/c.height,body:a}})};Z(s,{autoplay:!1}).defer(r).adto(n),o.remove()}else console.log(i),o.parentNode&&o.remove(),n.adch(el("div").clss("error").atxt("Error loading imgur: "+(location.hostname==="localhost"?"Imgur does not work on localhost. Follow the instructions in CONTRIBUTING.md to fix. Imgur said: "+i.data.error:i.data.error)))}).catch(l=>{console.log(l),o.parentNode&&o.remove(),n.adch(el("div").clss("error").atxt("Error loading imgur : "+l.toString()))}),r}function Cn(e){const t=el("button").clss("block").adch(e);return t.onclick=n=>{n.preventDefault(),n.stopPropagation(),t.disabled=!0,Y(()=>import("./gallery.647861f2.js"),["assets/gallery.647861f2.js","assets/gallery.ba89e886.css","assets/_commonjsHelpers.2cf1d77b.js"]).then(r=>{const o=e.naturalWidth/e.naturalHeight,l=L();t.style.opacity="0",r.showGallery([{thumb:e.src,aspect:o,body:{kind:"captioned_image",w:e.naturalWidth,h:e.naturalHeight,url:e.src}}],0,()=>{const i=t.getBoundingClientRect();return{x:i.left,y:i.top+(window.pageYOffset??document.documentElement.scrollTop),w:i.height*o}},{onclose:()=>{t.disabled=!1,t.style.opacity="1"},setIndex:()=>{}}).defer(l)}).catch(r=>{console.log(r),t.disabled=!1,alert(r.toString())})},t}function zr(e,t){const n=el("img").clss("image-loading").attr({src:e,width:t.w!=null?`${t.w}`:void 0,height:t.h!=null?`${t.h}`:void 0,alt:t.alt,title:t.alt});return n.onload=()=>n.classList.remove("image-loading"),n.onerror=()=>n.classList.remove("image-loading"),n}function xa(e,t){return Cn(zr(e,t).clss("preview-image"))}function ka(e,t){const n=L();Z(e.bio,{autoplay:!1}).defer(n).adto(t);const r=el("div").adto(t);for(const o of e.actions)r.atxt(" "),fe(o,r,{value_for_code_btn:e}).defer(n);return r.atxt(" "),O("code-button").adto(r).atxt("Code").onev("click",o=>{o.stopPropagation(),console.log(e)}),n}function $a(e){return e<1e4?""+e:e<1e5?(e/1e3).toFixed(2).match(/^-?\d+(?:\.\d{0,1})?/)?.[0]+"k":e<1e6?(e/1e3|0)+"k":e<1e8?(e/1e6).toFixed(2).match(/^-?\d+(?:\.\d{0,1})?/)?.[0]+"m":(e/1e6|0)+"m"}function Ca(e,t,n){{let r="none";const o=O("action-button").atxt(e.text).adto(t),l=L();let i;l.on("cleanup",()=>{i&&i.cleanup()}),l.on("hide",()=>{i&&i.setParentVisible(!1)}),l.on("show",()=>{i&&i.setParentVisible(!0)});const s=()=>{if(r==="none"){if(i){const c=i.associated_data;i.cleanup(),c.remove(),i=void 0}o.disabled=!1}else if(!i){const c=el("div").adto(t);i=L(c),ge(c,()=>u(sa,{action:e,onCancel:()=>{r="none",s()},onAddReply:a=>{console.log("Got response",a),r="none",s();const d=el("div").adto(t);ge(d,()=>(()=>{const f=aa.cloneNode(!0);return v(f,u(Hr,{get content(){return a.content},get opts(){return{clickable:!1,at_or_above_pivot:!1,is_pivot:!1,frame:a,client_id:a.client_id,replies:a.replies}}})),f})(),{color_level:1}).defer(l)}}),{color_level:1}).defer(i)}};return o.onev("click",c=>{c.stopPropagation(),r==="none"&&(r="some"),s()}),s(),l}}function fe(e,t,n){if(e.kind==="link")return U(e.client_id,e.url,"action-button").atxt(e.text).adto(t),L();if(e.kind==="reply"){const r=L();return Ca(e,t).defer(r),r}else if(e.kind==="counter"){const r=L();return Jr(e,t,{parens:!0}).defer(r),r}else if(e.kind==="delete"){const r=el("span").adto(t),o=el("span").adto(t),l=el("span").adto(t),i=el("span").adto(t),s=el("span").adto(t),c=O("action-button").atxt("Delete").adto(r);o.atxt("Are you sure? ");const a=O("unsafe-action-button").atxt("Delete").adto(o);o.atxt(" / ");const d=O("safe-action-button").atxt("Cancel").adto(o);s.atxt("Deleting\u2026"),l.atxt("Deleted!");const f=h=>{r.style.display=h==="none"?"":"none",o.style.display=h==="confirm"?"":"none",l.style.display=h==="deleted"?"":"none",s.style.display=h==="load"?"":"none",i.style.display=typeof h!="string"?"":"none",typeof h!="string"&&(r.style.display="",i.innerHTML="",i.adch(el("span").clss("error").atxt(h.error)))};return f("none"),c.onev("click",h=>{h.stopPropagation(),f("confirm")}),a.onev("click",h=>{h.stopPropagation(),f("load"),ae(e.client_id).act(e.data).then(m=>{f("deleted")}).catch(m=>{console.log("Got error:",m),f({error:m.toString()})})}),d.onev("click",h=>{h.stopPropagation(),f("none")}),L()}else if(e.kind==="report"){const r=ae(e.client_id),o=L();let l;const i=O("action-button").atxt("Report").adto(t).onev("click",s=>{if(s.stopPropagation(),!l)i.setAttribute("class",G["action-button-active"]),l=Na(r,e.data),l.associated_data.adto(t);else{i.setAttribute("class",G["action-button"]);const c=l.associated_data;l.cleanup(),c.remove(),l=void 0}});return o}else if(e.kind==="login"){const r=ae(e.client_id),o=el("span").adto(t),l=L(),i=e.data,s=O("action-button").atxt("Log In").adto(o).onev("click",c=>{c.stopPropagation(),s.textContent="\u2026",s.disabled=!0,r.getLoginURL(i).then(a=>{o.innerHTML="",U(r.id,a,"pill-filled").atxt("Log In").adto(o)}).catch(a=>{s.textContent="Retry",o.atxt("Error:"+a),console.log(a),s.disabled=!1})});return l}else if(e.kind==="act"){const r=ae(e.client_id),o=el("span").adto(t),l=O("action-button").atxt(e.text).adto(o).onev("click",i=>{i.stopPropagation(),l.disabled=!0,l.textContent="\u2026",r.act(e.action).then(()=>{l.remove(),txt("\u2713").adto(o)}).catch(s=>{console.log("got error: "+s),l.disabled=!1,o.adch(el("span").clss("error").atxt(s.toString()))})});return L()}else{if(e.kind==="flair")return L();if(e.kind==="code"){const r=L();let o;const l=O("action-button").atxt("Code").adto(t).onev("click",i=>{if(i.stopPropagation(),console.log(n.value_for_code_btn),!o)l.setAttribute("class",G["action-button-active"]),o=Z(e.body,{autoplay:!0}),o.associated_data.adto(t);else{l.setAttribute("class",G["action-button"]);const s=o.associated_data;o.cleanup(),s.remove(),o=void 0}});return r}else ee(e)}}function Gr(e,t,n){const r=el("details").clss("report-item"),o=L(r);r.adch(el("summary").attr({draggable:"true"}).atxt(t.title));const l=el("div").clss("report-content").adto(r);switch(t.description&&Z(t.description,{autoplay:!1}).defer(o).adto(l),t.report.kind){case"submit":case"textarea":{const i=t.report.kind==="textarea"?el("textarea").adto(el("div").adto(l)):void 0;let s="none";const c=O("pill-filled").adto(l),a=txt("\u2026").adto(c),d=el("div").adto(l),f=()=>{s==="none"?(a.nodeValue="Send Report",c.disabled=!1):s==="load"?(a.nodeValue="\u2026",c.disabled=!0):(a.nodeValue="Retry",c.disabled=!1,d.adch(el("div").clss("error").atxt("Error: "+s.error)))};f();const h=t.report.data;c.onev("click",m=>{m.stopPropagation(),s="load",f(),e.sendReport(h,i?.value).then(g=>{n(g)}).catch(g=>{console.log(g),s={error:g.toString()},f()})})}break;case"link":U(e.id,t.report.url,"normal").atxt(t.report.text).adto(l);break;case"more":{const i=el("div").adto(l);for(const s of t.report.screens)Gr(e,s,n).defer(o).adto(i)}break;default:ee(t.report)}return o}function Na(e,t){const n=el("div").clss("report-screen text-sm"),r=L(n);if(!e.fetchReportScreen)return n.atxt("Missing fetchreportscreen?"),n.clss("error"),console.log(e),r;const o=Fe().adto(n);return e.fetchReportScreen(t).then(l=>{o.remove();const i=L(),s=r.addChild(i);for(const c of l)Gr(e,c,a=>{s.cleanup(),n.innerHTML="",n.atxt("Report sent!"),console.log("Completed report",a);const d=Nn().adto(n);d.adch(el("div").atxt(a.title)),Z(a.body,{autoplay:!1}).defer(r).adto(d),console.log(d,n,n.childNodes)}).defer(i).adto(n)}).catch(l=>{console.log("error loading report screen",l),n.adch(el("div").clss("error").atxt("Error loading: "+l.toString())),o.remove()}),r}function Kr(e,t){const n=e??`${Math.random()}`,r=Qe.get(n)??{state:{loading:!1,pt_count:t.count,your_vote:t.you},handlers:new Set,users:0,update_time:t.time};Qe.has(n)||Qe.set(n,r),r.update_time<t.time&&(r.state.pt_count=t.count,r.state.your_vote=t.you);const o={state:r.state,emit(){[...r.handlers].forEach(i=>{i()})},onupdate(i){const s=()=>{i()};r.handlers.add(s),l.on("cleanup",()=>{r.handlers.delete(s)})}},l=L(o);return r.users++,l.on("cleanup",()=>{r.users--,r.users===0&&Qe.delete(n)}),l}function Yr(e){if(e.pt_count==="hidden"||e.pt_count==="none")return{text:"\u2014",raw:"[score hidden]"};const t=e.pt_count+(e.your_vote==="increment"?1:e.your_vote==="decrement"?-1:0);return{text:$a(t),raw:t.toLocaleString()}}function Jr(e,t,n){const r=e.count_excl_you!=="none",o=el("span").clss("counter").adto(t),l=O("action-button").adto(o).clss("counter-increment-btn").attr({"aria-label":"Up"}),i=el("span").adto(l),s=txt("").adto(i),c=txt("\u2026").adto(i),a=el("span").adto(o.atxt(" ")).clss("counter-count"),d=txt("\u2026").adto(a),f=e.percent==null?txt("\u2014% upvoted"):txt(e.percent.toLocaleString(void 0,{style:"percent"})+" upvoted");let h;const m=L({percent_voted_txt:f,votecount:a}),{state:g,emit:b,onupdate:$}=Kr(e.unique_id,{count:e.count_excl_you,you:e.you,time:e.time}).defer(m);$(()=>{const{text:w,raw:S}=Yr(g);c.nodeValue={increment:e.increment.undo_label,decrement:e.decrement?.undo_label??"ERR",none:e.increment.label}[g.your_vote??"none"],d.nodeValue=n.parens?"("+w+")":w,r||(d.nodeValue=""),a.title=S,o.classList.remove("counted-increment","counted-decrement","counted-reset"),o.classList.add("counted-"+(g.your_vote??"reset")),o.classList.toggle("counted-loading",g.loading),l.disabled=g.loading,h&&(h.disabled=g.loading),l.setAttribute("class","counter-increment-btn "+G[g.your_vote==="increment"?e.incremented_style??"action-button":e.style??"action-button"]),h&&h.setAttribute("class","counter-decrement-btn "+G[g.your_vote==="decrement"?e.decremented_style??"action-button":e.style??"action-button"]),l.setAttribute("aria-pressed",g.your_vote==="increment"?"true":"false"),h&&h.setAttribute("aria-pressed",g.your_vote==="decrement"?"true":"false")}),b();const N=w=>{if("error"in e.actions)return alert("Error: "+e.actions.error);const S=ae(e.client_id),x=g.your_vote;g.your_vote=w,g.loading=!0,b();const p=e.actions[w??"reset"];if(p==null)throw new Error("downvote label available but downvote action not provided");S.act(p).then(()=>{g.your_vote=w,g.loading=!1,b()}).catch(k=>{g.your_vote=x,g.loading=!1,b(),console.log(k),alert("Got error: "+k)})};return e.decrement!=null&&(s.nodeValue="\u2BC5 ",o.atxt(" "),h=O("action-button").adch(el("span").atxt("\u2BC6")).attr({"aria-label":"Down"}).adto(o).onev("click",w=>{w.stopPropagation(),g.your_vote==="decrement"?N(void 0):N("decrement")}).clss("counter-decrement-btn")),l.onev("click",w=>{w.stopPropagation(),g.your_vote==="increment"?N(void 0):N("increment")}),m}function mt(e,t,n){const[r,o]=Nr(Cr(n.toLowerCase()));return U(e,t,"userlink").styl({"--light-color":Ct(r),"--dark-color":Ct(o)})}function Sa(e){let t=e;const n=[];return{get value(){return t},set value(r){t=r,n.forEach(o=>o())},watch(r){const o=L(),l=()=>{r()};return n.push(l),o.on("cleanup",()=>n.splice(n.indexOf(l),1)),o}}}function zt(e,t,n){const r=L(t);for(const o of e)o.watch(()=>n(t)).defer(r);return n(t),r}function Et(e){const t=el("div"),n=L(t),r=el("div").adto(t),o=s=>{const c=el("div");for(const a of s)a.action.kind==="link"?U(a.action.client_id,a.action.url,"none").clss("text-gray-600 dark:text-gray-400 hover:text-gray-900").adto(c).atxt(a.text):a.action.kind==="menu"?O("none").adto(c).atxt(a.text+" \u25B8").onev("click",d=>{d.stopPropagation(),d.preventDefault(),alert("TODO submenus")}).adto(c):a.action.kind==="show-line-two"?O("none").adto(c).atxt(a.text).onev("click",d=>{d.stopPropagation(),d.preventDefault(),alert("TODO submenu show-line-two")}).adto(c):ee(a.action);return c};let l;n.on("cleanup",()=>{l&&(l.cleanup(),l=void 0)});const i=Sa(e.find(s=>s.selected));i.watch(()=>{l&&(l.cleanup(),l.associated_data.remove(),l=void 0)});for(const s of e){if(s.action.kind==="menu"){const c=txt("\u2026");let a=!1,d;const f=s.action.children;n.on("hide",()=>{console.log("open menu was asked to be hidden"),a=!1,h()});const h=()=>{if(c.nodeValue=a?"\u25B4":"\u25BE",b.attr({"aria-expanded":a?"true":"false"}),a){if(!d){d=o(f).clss("absolute z-10 flex flex-col shadow bg-gray-100 p-3 rounded w-max max-w-7xl").adto(oe);const $=m.getBoundingClientRect();d.styl({left:$.left+"px",top:$.bottom+(window.pageYOffset??document.documentElement.scrollTop)+"px"})}}else d&&(d.remove(),d=void 0)},m=el("span").adto(r),g=$=>{if(a){console.log("Got event: ",$.target);let N=$.target;for(;N;){if(N===m||d&&N===d)return;N=N.parentElement}a=!1,h()}};document.addEventListener("click",g,{capture:!0}),n.on("cleanup",()=>document.removeEventListener("click",g,{capture:!0}));const b=O("none").attr({"aria-haspopup":"true"}).atxt(s.text).atxt(" ").adch(c).adto(m).onev("click",$=>{$.preventDefault(),$.stopPropagation(),a=!a,h()});zt([i],0,()=>{b.setAttribute("class",Ft(s===i.value))}).defer(n),h()}else if(s.action.kind==="link"){const c=U(s.action.client_id,s.action.url,"none").atxt(s.text).adto(r);zt([i],0,()=>{c.setAttribute("class",Ft(s===i.value))}).defer(n)}else if(s.action.kind==="show-line-two"){const c=s.action,a=O("none").atxt(s.text).adto(r);zt([i],0,()=>{if(a.setAttribute("class",Ft(s===i.value)),s===i.value){if(l)throw new Error("already existing menu_l2");l=Et(c.children),l.defer(n),l.associated_data.clss("mt-2").adto(t)}}).defer(n),a.onev("click",d=>{d.stopPropagation(),i.value=s})}else ee(s.action);txt(" ").adto(r)}return n}function Ea(e,t){const n=L();if(t.clss("subreddit-banner"),e.banner){const c="absolute top-0 left-0 right-0 w-full max-h-full",a="w-full min-h-270px object-cover object-center sm:object-top",d="absolute left-0 right-0 bottom-0 header-gradient";e.banner.kind==="image"?(Cn(el("img").clss(a).attr({src:e.banner.desktop})).clss(c).adto(t).adch(el("div").clss(d+"top-150px")),el("div").clss("h-150px").adto(t)):e.banner.kind==="color"?el("div").adch(el("div").clss(a+" h-full").styl({"background-color":e.banner.color})).clss(c).adto(t).adch(el("div").clss(d+" top-0")):ee(e.banner)}const r=el("div").clss("subreddit-banner-content").adto(t);e.icon&&el("img").clss("sub-icon-img drop-shadow").attr({alt:"",src:e.icon.url}).adto(r);const o=el("div").clss("subreddit-title-area").adto(r);e.name.display!=null&&el("h1").atxt(e.name.display).clss("text-lg").adto(o),el("h2").atxt(e.name.link_name).clss("text-gray-500").adto(o);const l=el("div").clss("sub-subscribe-area").adto(r);if(e.subscribe){const c=el("div").adto(l);fe(e.subscribe,c,{value_for_code_btn:e}).defer(n)}e.body&&Z(e.body,{autoplay:!1}).defer(n).adto(l);const i=el("div").clss("relative").adto(t);e.menu&&Et(e.menu).defer(n).adto(el("div").clss("my-3").adto(i));const s=el("div").adto(i);if(e.more_actions)for(const c of e.more_actions)fe(c,s,{value_for_code_btn:e}).defer(n);return O("action-button").atxt("Code").adto(s).onev("click",c=>{c.stopPropagation(),console.log(e)}),n}function Pa(e,t,n){const r=L();n.clss("widget");const o=el("div").adto(n);txt(t.title).adto(el("div").adto(o).clss("widget-header font-bold text-base mb-2 text-gray-500"));const l=el("div").clss("widget-content").adto(o);if(t.actions_top){const s=el("div").clss("widget-actions-top").adto(l);for(const c of t.actions_top)fe(c,s,{value_for_code_btn:t}).defer(r)}const i=t.widget_content;if(i.kind==="list"){const s=el("ul").clss("widget-list list-disc").adto(l);for(const c of i.items){const a=el("li").adto(s);let d;if(c.click.kind==="body"){a.clss("list-none");const h=el("details").adto(a);d=el("summary").attr({draggable:"true"}).adto(h),Z(c.click.body,{autoplay:!1}).defer(r).adto(h)}else a.clss("ml-4"),d=a;c.icon!=null&&el("div").adto(d).clss("widget-list-icon").styl({"--background-image-url":"url("+c.icon+")"});let f;if(c.name.kind==="text"?f=txt(c.name.text):c.name.kind==="flair"?(f=el("span"),Me([c.name.flair]).adto(f)):c.name.kind==="username"?f=txt(c.name.username):c.name.kind==="image"?f=el("img").clss("w-fill h-auto").attr({src:c.name.src,alt:c.name.alt,width:`${c.name.w}`,height:`${c.name.h}`}):ee(c.name),c.click.kind==="link"?c.name.kind==="username"?mt(e.id,c.click.url,c.name.username).atxt(c.name.username).adto(d):U(e.id,c.click.url,"normal").adch(f).adto(d):el("span").adch(f).adto(d),c.action){const h=el("span").adto(d).atxt(" ");fe(c.action,h,{value_for_code_btn:c}).defer(r)}}}else if(i.kind==="community-details")el("p").atxt(i.description).adto(l);else if(i.kind==="body")Z(i.body,{autoplay:!1}).defer(r).adto(l);else if(i.kind==="iframe"){const s=el("div");n.replaceChild(s,o),n.clss("widget-fullscreen-content");const c=el("iframe").adto(s).styl({width:"312px"}).attr({width:"312",height:i.height,srcdoc:i.srcdoc});c.onload=()=>{if(!c.contentWindow)return console.log("no content window");c.style.height=c.contentWindow.document.body.scrollHeight+20+"px"}}else if(i.kind==="image"){const s=el("div");n.clss("widget-fullscreen-content"),n.replaceChild(s,o);const c=zr(i.src,{w:i.width,h:i.height}).clss("w-full h-auto");i.link_url!=null?U(e.id,i.link_url,"none").adch(c).adto(s):Cn(c).adto(s)}else ee(i);if(t.actions_bottom){const s=el("div").clss("widget-actions-bottom").adto(l);for(const c of t.actions_bottom)fe(c,s,{value_for_code_btn:t}).defer(r)}return el("div").adto(l).adch(O("code-button").atxt("Code").onev("click",s=>{s.stopPropagation(),console.log(t)})),r}function Se(e,t,n){const r=Nn(),o=L(r);try{if(t.kind==="user-profile")return ka(t,r).defer(o),o;if(t.kind==="bio")return Ea(t,r).defer(o),o;if(t.kind==="widget")return Pa(e,t,r).defer(o),o;if(t.kind==="thread")return Sn(e,t,r,n).defer(o),o;ee(t)}catch(l){return o.cleanup(),console.log("Got error",l),r.innerHTML="",r.adch(el("pre").adch(el("code").atxt(l.toString()+`

`+l.stack))),r.adch(O("code-button").atxt("Code").onev("click",i=>{i.stopPropagation(),console.log(t)})),L(r)}}function Nn(){return el("div").clss("post text-sm")}function Sn(e,t,n,r){let o,l,i,s,c,a,d;r.clickable&&t.link.startsWith("/")&&n.clss("hover-outline").attr({tabindex:"0"}).onev("click",p=>{if(!gr(p.target,n))return;p.stopPropagation();const k="/"+e.id+t.link;p.ctrlKey||p.metaKey||p.altKey?window.open(k):ze({path:k})});const h=L({addChildren:void 0});if(t.layout==="reddit-post"){o=el("div").adto(n).clss("post-voting"),l=el("button").adto(n).clss("post-thumbnail");const p=el("div").adto(n).clss("post-titles");i=el("div").adto(n).clss("post-preview"),s=el("div").adto(n).clss("post-replies"),c=el("div").adto(p).clss("post-content-title text-base"),a=el("div").adto(p).clss("post-content-subminfo"),d=el("div").adto(p).clss("post-content-buttons")}else t.layout==="reddit-comment"||t.layout==="mastodon-post"?(o=el("div").adto(n).clss("post-voting"),c=el("div").adto(n).clss("post-content-title"),l=el("button").adto(n).clss("post-thumbnail"),a=el("div").adto(n).clss("post-content-subminfo text-xs"),i=el("div").adto(n).clss("post-preview"),d=el("div").adto(n).clss("post-content-buttons text-xs"),s=el("div").adto(n).clss("post-replies")):t.layout==="error"?(o=el("div").adto(n).clss("post-voting"),c=el("div").adto(n).clss("post-content-title"),l=el("button").adto(n).clss("post-thumbnail"),a=el("div").adto(n).clss("post-content-subminfo"),i=el("div").adto(n).clss("post-preview"),d=el("div").adto(n).clss("post-content-buttons"),s=el("div").adto(n).clss("post-replies")):ee(t.layout);if(t.thumbnail||l.clss("no-thumbnail"),t.layout==="reddit-comment"||t.layout==="mastodon-post"){let p=t.default_collapsed;const k=()=>{h.setVisible(!p),p?(n.classList.add("comment-collapsed"),C.setAttribute("aria-label","Uncollapse"),C.setAttribute("aria-pressed","true")):(n.classList.remove("comment-collapsed"),C.setAttribute("aria-label","Collapse"),C.setAttribute("aria-pressed","false"))},C=el("button").clss("collapse-btn outline-default").attr({draggable:"true","aria-label":"Collapse"}).adch(el("div").clss("collapse-btn-inner")).onev("click",T=>{T.stopPropagation();const D=n.getBoundingClientRect(),K=Pt.getBoundingClientRect(),me=()=>5+Math.max(0,K.bottom,window.visualViewport.offsetTop),ie=window.visualViewport.offsetTop+window.visualViewport.height;console.log(me(),ie,D.top),D.top<me()&&D.bottom>me()&&(n.scrollIntoView(),document.documentElement.scrollTop-=me()),p=!p,k()});n.insertBefore(C,n.childNodes[0]??null),k()}n.clss("layout-"+t.layout),(t.layout==="reddit-comment"||t.layout==="mastodon-post")&&n.clss("layout-commentlike"),t.flair&&(c.adch(Me(t.flair.filter(p=>p.content_warning))),c.atxt(" ")),t.title&&(r.clickable?c.adch(U(e.id,t.link,"none").clss("hover:underline").atxt(t.title.text)):c.adch(txt(t.title.text))),t.flair&&(c.atxt(" "),c.adch(Me(t.flair.filter(p=>!p.content_warning))));let m=(t.flair??[]).filter(p=>p.content_warning),g=null;if(t.layout==="reddit-post"&&t.info)t.info.time!==!1&&(a.adch(Ye(t.info.time).defer(h)),a.atxt(" ")),t.info.author&&a.atxt("by ").adch(mt(e.id,t.info.author.link,t.info.author.color_hash).atxt(t.info.author.name)),t.info.author?.flair&&a.adch(Me(t.info.author.flair)),t.info.in&&a.atxt(" in ").adch(U(e.id,t.info.in.link,"normal").atxt(t.info.in.name)),t.info.edited!==!1&&(a.hasChildNodes()&&a.atxt(", "),a.atxt("Edited ").adch(Ye(t.info.edited).defer(h))),t.info.pinned&&(a.hasChildNodes()&&a.atxt(", "),a.adch(el("span").clss("text-green-600 dark:text-green-500").atxt("Pinned")));else if((t.layout==="reddit-comment"||t.layout==="mastodon-post")&&t.info){if(t.layout==="reddit-comment"&&t.info.author?.pfp){const p=el("img").attr({src:t.info.author.pfp.url}).adto(a).clss("w-8 h-8 object-center inline-block rounded-full cfg-reddit-pfp");p.title="Disable in settings (thread.pfg.pw/settings)",a.atxt(" ")}if(t.info.author&&a.adch(mt(e.id,t.info.author.link,t.info.author.color_hash).atxt(t.info.author.name)),t.info.author?.flair&&a.adch(Me(t.info.author.flair)),t.layout==="mastodon-post"&&t.info.author?.pfp&&(n.clss("spacefiller-pfp"),el("div").clss("pfp").styl({"--url":"url("+JSON.stringify(t.info.author.pfp.url)+")","--url-hover":"url("+JSON.stringify(t.info.author.pfp.hover)+")"}).adto(o)),g=document.createComment("").adto(a),t.info.time!==!1){const p=el("span").adch(Ye(t.info.time).defer(h));a.atxt(" ").adch(p)}t.info.edited!==!1&&a.atxt(", Edited ").adch(Ye(t.info.edited).defer(h)),t.info.pinned&&a.atxt(", ").adch(el("span").clss("text-green-600 dark:text-green-500").atxt("Pinned")),t.info.reblogged_by&&(a.atxt(" \u2190 Boosted by "),t.info.reblogged_by.author&&a.adch(mt(e.id,t.info.reblogged_by.author.link,t.info.reblogged_by.author.color_hash).atxt(t.info.reblogged_by.author.name)),t.info.reblogged_by.time!==!1&&a.atxt(" at ").adch(Ye(t.info.reblogged_by.time).defer(h)),t.layout==="mastodon-post"&&t.info.reblogged_by.author?.pfp&&(n.clss("spacefiller-pfp"),el("div").clss("pfp","pfp-reblog").styl({"--url":"url("+JSON.stringify(t.info.reblogged_by.author.pfp.url)+")","--url-hover":"url("+JSON.stringify(t.info.reblogged_by.author.pfp.hover)+")"}).adto(o)))}{if(t.thumbnail)if(t.thumbnail.kind==="image")l.adch(el("img").attr({src:t.thumbnail.url,alt:""})),m.length&&l.clss("thumbnail-content-warning");else if(t.thumbnail.kind==="default"){const C={self:"self",default:"default",image:"image",spoiler:"spoiler",nsfw:"nsfw",account:"account",error:"error"}[t.thumbnail.thumb];l.adch(el("div").clss("thumbnail-builtin","thumbnail-"+C))}else ee(t.thumbnail);const p=(C,T)=>{const D=el("div").clss("post-body"),K=L(D);if(m.length){const me=m,ie=el("div").adto(D);return ie.atxt("Content Warning"+(me.length===1?"":"s")+": "),ie.adch(Me(me)),ie.atxt(" "),O("pill-filled").adto(ie).atxt("Show Content").onev("click",Ge=>{Ge.stopPropagation(),ie.remove(),m=[],l.classList.remove("thumbnail-content-warning"),Z(C,{...T}).defer(K).adto(D)}),K}return Z(C,{...T}).defer(K).adto(D),K},k=C=>C.kind==="none"?!0:C.kind==="array"?C.body.every(T=>T==null?!0:k(T)):!1;if(k(t.body))i.remove();else if(t.display_mode.body==="collapsed"){const C=O("outlined-button").adto(d),T=txt("\u2026").adto(C);let D;h.on("cleanup",()=>{D&&D.cleanup()}),h.on("hide",()=>{D&&D.setVisible(!1)}),h.on("show",()=>{D&&D.setVisible(!0)});let K=t.display_mode.body_default==="open";const me=!K,ie=()=>{K&&!D?(D=p(t.body,{autoplay:me}),D.associated_data.adto(i)):!K&&D&&(D.cleanup(),D.associated_data.remove(),D=void 0),T.nodeValue=K?"Hide":"Show"};ie(),C.onev("click",Ge=>{Ge.stopPropagation(),K=!K,ie()}),l.onev("click",Ge=>{Ge.stopPropagation(),K=!K,ie()})}else p(t.body,{autoplay:!1}).defer(h).adto(i)}let b=!1;for(const p of t.actions)if(p.kind==="counter"&&p.special==="reddit-points"){n.clss("spacefiller-redditpoints");const k=Jr(p,o,{parens:!1}).defer(h);if(t.layout==="reddit-comment")a.insertBefore(txt(" "),g),a.insertBefore(k.votecount,g),a.insertBefore(txt(" points"),g);else if(t.layout==="reddit-post"){a.atxt(", "),k.percent_voted_txt.adto(a),o.clss("desktop-only"),d.atxt(" ");const C=el("div").clss("mobile-only").adto(d);fe(p,C,{value_for_code_btn:t}).defer(h)}}else p.kind==="code"&&(b=!0),d.atxt(" "),fe(p,d,{value_for_code_btn:t}).defer(h);o.childNodes.length===0&&o.remove(),t.actions.length===0&&(d.atxt(" "),U(e.id,t.link,"action-button").atxt("View").adto(d)),b||(d.atxt(" "),O("code-button").onev("click",p=>{p.stopPropagation(),console.log(t)}).atxt("Code").adto(d));const $=el("ul").clss("replies").styl({margin:"0"}).adto(s),N=t.replies?.length===1&&t.replies[0].replies?.length===1;let w;const S=p=>{if(N&&p.length>1){if(!w)throw new Error("threaded comment has no lastElemAddChildren");w(p);return}p.forEach(k=>x(k))},x=p=>{const k=el("li").adto($);if(N&&k.clss("relative threaded"),p.kind==="load_more"){sn(e,p,S,()=>k.remove()).adto(k);return}let C;N&&p.replies?.length===1&&(C=p.replies[0],p.replies=[]),k.clss("comment");const T=Nn();w=Sn(e,p,T,{clickable:r.clickable}).defer(h).addChildren,T.adto(k),C&&x(C)};return t.replies&&(t.display_mode.comments==="collapsed"||S(t.replies)),h.associated_data.addChildren=S,h}const G={none:"",normal:"text-blue-600 dark:text-blue-500 underline",previewable:"text-blue-600 dark:text-blue-500 hover:underline","action-button":"p-1 rounded hover:bg-gray-200","action-button-active":"p-1 rounded bg-gray-200 hover:bg-gray-300","save-button-saved":"text-green-600 dark:text-green-500 hover:underline","safe-action-button":"text-blue-600 dark:text-blue-500 hover:underline","unsafe-action-button":"text-red-600 dark:text-red-500 hover:underline","code-button":"text-gray-600 dark:text-gray-500 hover:underline","load-more":"text-blue-600 dark:text-blue-500 hover:underline text-base",userlink:"text-$light-color dark:text-$dark-color hover:underline","pill-empty":"text-sm border-2 border-black text-black hover:text-white hover:bg-black p-1 px-3 rounded-full transition-colors","pill-transparent":"text-sm border-2 border-transparent text-black hover:text-white hover:bg-black p-1 px-3 rounded-full transition-colors","pill-filled":"text-sm border-2 border-black bg-black text-white hover:text-black hover:bg-transparent p-1 px-3 rounded-full transition-colors","outlined-button":"border border-gray-600 dark:border-gray-500 px-2",error:"text-red-600 dark:text-red-500 hover:underline"},ln=e=>[G[e]];function O(e){return el("button").clss(...ln(e)).attr({draggable:"true"})}function Fe(){return el("div").clss("lds-ripple").adch(el("div")).adch(el("div"))}function sn(e,t,n,r){const o=el("div"),l=()=>U(e.id,t.url,"load-more",{onclick:()=>{const s=el("div").adto(o);s.adch(el("span").atxt("Loading\u2026")),s.adch(Fe()),i.remove(),i=s;const c=i;e.loadMore(t.load_more).then(a=>{c.remove(),n(a),r()}).catch(a=>{console.log("error loading more:",a),c.parentNode&&c.remove(),i=el("span").atxt("Error. ").adch(l().atxt("\u{1F5D8} Retry")).adto(o)})}});let i=l().atxt(t.count!=null?"Load "+t.count+" More\u2026":"Load More\u2026").adto(o).clss("load-more");return o.atxt(" "),O("code-button").onev("click",s=>{s.stopPropagation(),console.log(t)}).atxt("Code").adto(o),o}function La(e,t,n,r){const o=el("div"),l=c=>U(e.id,c.url,"load-more",{onclick:()=>{const a=el("div").adto(o);a.adch(el("span").atxt("Loading\u2026")),a.adch(Fe()),s&&s.remove(),s=a,e.loadMoreUnmounted(c.load_more_unmounted).then(d=>{s&&s.remove(),n(d.children),d.next?i(d.next):r()}).catch(d=>{console.log("error loading more:",d),s&&s.parentNode!=null&&s.remove(),s=el("span").atxt("Error. ").adch(l(c).atxt("\u{1F5D8} Retry")).adto(o)})}}),i=c=>{s=el("div").adch(l(c).atxt(c.count!=null?"Load "+c.count+" More\u2026":"Load More\u2026").adto(o).clss("load-more")).atxt(" ").adch(O("code-button").onev("click",a=>{a.stopPropagation(),console.log(c)}).atxt("Code")).adto(o)};let s;return i(t),o}function Xr(e,t){let n=e.visible;e.on("hide",()=>n=!1),e.on("show",()=>{n=!0,document.title=r(o)});const r=i=>i+" | "+t+" | ThreadClient";let o="\u2026";const l={setTitle(i){o=i,n&&(document.title=r(i))}};return l.setTitle("\u2026"),l}function Aa(e,t){const n=U(e.id,t.url,"action-button"),r=L(n),o=el("span").adto(n),l=txt("\u2026 ").adto(o);return o.atxt(t.name),e.hydrateInbox(t.hydrate).then(i=>{i.messages.kind==="zero"?l.nodeValue="":i.messages.kind==="exact"?l.nodeValue=i.messages.value+" ":i.messages.kind==="minimum"&&(l.nodeValue=i.messages.min+"+ "),i.messages.kind!=="zero"&&o.classList.add({green:"text-green-500",orange:"text-orange-500"}[t.active_color])}).catch(i=>{l.nodeValue="\uFFFD "}),r}const be=()=>el("div").clss("top-level-wrapper","object-wrapper","bg-postcolor-100");function Qr(e,t,n,r){const o=L();r.setTitle(t.title),n.classList.add("display-"+t.display_style);const l=el("div").adto(n).clss("navbar-area");for(const a of t.navbar.actions)fe(a,l,{value_for_code_btn:t}).defer(o),txt(" ").adto(l);const i=[{kind:"link",client_id:"n/a",url:"https://github.com/pfgithub/threadclient/issues/new",text:"Report Issue"},{kind:"link",client_id:"n/a",url:"https://github.com/pfgithub/threadclient/issues/new",text:"Feature Request"}];for(const a of i)fe(a,l,{value_for_code_btn:t}).defer(o),l.atxt(" ");O("code-button").atxt("Code").adto(l).onev("click",()=>console.log(t)),txt(" ").adto(l);for(const a of t.navbar.inboxes)Aa(e,a).defer(o).adto(l),txt(" ").adto(l);const s=el("div").adto(n).clss("header-area"),c=el("div").adto(n).clss("content-area");if(t.sidebar){O("pill-filled").adto(n).clss("sidebar-toggle-mobile","my-1").atxt("Toggle Sidebar").onev("click",d=>{d.stopPropagation(),a.classList.toggle("sidebar-visible-mobile")});const a=el("div").adto(n).clss("sidebar-area");for(const d of t.sidebar)Se(e,d,{clickable:!1}).defer(o).adto(be().adto(a))}if(t.body.kind==="listing"){Se(e,t.body.header,{clickable:!1}).defer(o).adto(be().adto(s)),t.body.menu&&Et(t.body.menu).defer(o).adto(be().adto(c));const a=el("div").adto(c),d=h=>{for(const m of h)f(m)},f=h=>{if(h.parents.length===0){el("div").clss("error").atxt("unmounted.parents.length === 0").adto(be().adto(a));return}const m=be().adto(a);for(const g of h.parents)if(g.kind==="load_more"){const b=el("div").adto(m);U(e.id,g.url,"load-more").atxt("Load More").adto(b),b.adch(txt(" ")).adch(el("span").clss("error text-sm").atxt("TODO load more here"))}else Se(e,g,{clickable:!0}).defer(o).adto(m);if(h.replies.length>0){let g;const b=O("previewable").adto(m).atxt("Replies \u25B8").onev("click",$=>{if($.stopPropagation(),g)g.cleanup(),g.associated_data.remove(),g=void 0,b.textContent="Replies \u25B8";else{b.textContent="Replies \u25BE";const N=el("div").adto(m),w=L(N);g=w;const S=p=>{for(const k of p)x(k)},x=p=>{if(p.kind==="load_more"){const k=sn(e,p,S,()=>k.remove());k.adto(N);return}Se(e,p,{clickable:!1}).defer(w).adto(N)};S(h.replies)}})}};if(d(t.body.items),t.body.next){const h=La(e,t.body.next,d,()=>h.remove());h.adto(c)}}else if(t.body.kind==="one"){const a=be().adto(s);for(const h of t.body.item.parents){if(h.kind==="load_more"){const g=a;U(e.id,h.url,"load-more").atxt("Load More").adto(g),g.adch(txt(" ")).adch(el("span").clss("error text-sm").atxt("TODO load more here"));continue}const m=h===t.body.item.parents[t.body.item.parents.length-1];Se(e,h,{clickable:!m}).defer(o).adto(a)}t.body.item.menu&&Et(t.body.item.menu).defer(o).adto(be().adto(c));const d=h=>{for(const m of h)f(m)},f=h=>{if(h.kind==="load_more"){const m=sn(e,h,d,()=>m.remove());m.adto(c).clss("top-level-load-more");return}Se(e,h,{clickable:!1}).defer(o).adto(be().adto(c))};d(t.body.item.replies),t.body.item.replies.length===0&&el("div").atxt("*There are no replies*").adto(c)}else ee(t.body);return o}function Ta(e,t){const n=el("div").clss("client-wrapper"),r=L(n),o=el("div").adto(n);o.classList.add("client-main-frame");const l=el("div").adto(o);l.classList.add("display-loading"),l.adch(Fe());const i=Xr(r,e.id);return i.setTitle("Loading "+e.id+"\u2026"),(async()=>{if(!e.getThread||e.getPage&&le().pageVersion()==="2"){const c={page:await e.getPage(t)};l.remove(),r.visible&&lt(c),r.on("hide",()=>En()),r.on("show",()=>lt(c))}else{const s=await e.getThread(t);l.remove(),Qr(e,s,o,i).defer(r)}})().catch(s=>{console.log(s,s.stack??"*no stack*"),l.parentNode&&l.remove(),el("div").atxt("Error! "+s+", check console.").clss("error").adto(o)}),r}let lt,En;{const[e,t]=A(null,{equals:(o,l)=>!1});let n=!1;const r=()=>{n||(n=!0,ge(_t,()=>u(vl,{get pgin(){return e()},addContent:(o,l)=>{o.page={...o.page,content:{...o.page.content,...l}},e()===o&&t(e())},get children(){return u(na,{get pivot(){return e().page.pivot}})}}),{color_level:0}))};lt=o=>{console.log("showing page2",o.page),_t.style.display="",t(o),console.log("SHOWPAGE2 CALLED ON",o),r()},En=()=>{_t.style.display="none"}}function an(e){const t=document.createElement("div"),n=L(t);return t.appendChild(document.createTextNode(e)),n}function Ra(e,t,n){const r=document.createElement("div"),o=L(r);return r.atxt("\u2026"),(async()=>{r.innerHTML="",r.atxt("Logging In\u2026");try{await e.login(t,n)}catch(l){console.log(l),r.innerHTML="",r.adch(el("div").clss("error").atxt("Login error! "+l.toString()));return}r.innerHTML="",r.atxt("Logged In! You may now close this page.")})().catch(l=>{console.log(l),alert("Unexpected error "+l.toString())}),o}const Oa={reddit:()=>Y(()=>import("./reddit.3f84da05.js"),["assets/reddit.3f84da05.js","assets/base.50b98d34.js"]).then(e=>e.client),mastodon:()=>Y(()=>import("./mastodon.7730be3c.js"),["assets/mastodon.7730be3c.js","assets/base.50b98d34.js"]).then(e=>e.client),hackernews:()=>Y(()=>import("./hackernews.e70538ff.js"),[]).then(e=>e.client),test:()=>Y(()=>import("./test.55894206.js"),["assets/test.55894206.js","assets/_commonjsHelpers.2cf1d77b.js","assets/base.50b98d34.js"]).then(e=>e.client)};async function Pn(e){const t=e.toLowerCase(),n=Oa[t];if(!!n){if(je[t]||(je[t]=await n()),je[t].id!==t)throw new Error("client has incorrect id");return je[t]}}function ae(e){return je[e]??void 0}function ze({path:e,page:t}){e.startsWith("/")&&(e=e.replace("/","#")||"#/"),console.log("Appending history state index",ot+1,e),history.pushState({index:ot+1,session_name:pt},"ThreadClient",e),vt(ot+1,location,t)}function Ia(){const e=el("div"),t=L(e);return ge(e,()=>u(Ds,{}),{color_level:0}).defer(t),t}function Da(){return Dt(Y(()=>import("./settings.2209195b.js"),[]),({default:e})=>{const t=el("div"),n=L(t);return ge(t,()=>u(e,{}),{color_level:0}).defer(n),n})}function Ma(){return Dt(Y(()=>import("./ui_testing.16e5b8e5.js"),["assets/ui_testing.16e5b8e5.js","assets/index.d9a19671.js","assets/settings.2209195b.js"]),({default:e})=>{const t=el("div"),n=L(t);return ge(t,()=>u(e,{}),{color_level:0}).defer(n),n})}function ja(){const e=el("div"),t=L(e);return U("","/reddit","normal").atxt("Reddit").adto(e),e.atxt(" \xB7 "),U("","/mastodon","normal").atxt("Mastodon").adto(e),e.atxt(" \xB7 "),U("","/settings","normal").atxt("Settings").adto(e),e.atxt(" \xB7 "),U("","/","normal").atxt("Home").adto(e),t}function L(e){const t=e,n={};let r=!0,o=!0,l=!0;const i=()=>{const f=r&&o;f!==l&&(l=f,a(f?"show":"hide"),c.forEach(h=>h.setParentVisible(f)))};let s=!0;const c=new Set,a=f=>{const h=n[f];!h||h.forEach(m=>m())},d={on(f,h){n[f]??=[],n[f].push(h)},setVisible(f){if(!s)return console.log("hideshow called on a deleted object");r!==f&&(r=f,i())},setParentVisible(f){if(!s)return console.log("hideshow called on a deleted object");o!==f&&(o=f,i())},get visible(){return r},cleanup(){s=!1,c.forEach(f=>f.cleanup()),a("cleanup")},emit:a,addChild(f){return c.add(f),{cleanup:()=>{f.cleanup(),c.delete(f)}}},get associated_data(){return t},defer(f){return f.addChild(d),t}};return d}function Gt(e,t){const n=ae(e);return n?t(n):Dt(Pn(e),r=>r?t(r):an("404. Client "+e+" not found."))}function Dt(e,t){const n=el("div").adto(oe),r=L(n),o=el("div").adto(n);return el("span").atxt("Fetching client\u2026").adto(o),e.then(l=>{t(l).defer(r).adto(n),o.remove()}).catch(l=>{console.log("error rendering",l),n.adch(el("span").clss("error").atxt("Got error! Check console! "+l.toString()))}),r}function cn(e,t){console.log("RENDERPATH",e,t);const n=(e+t).substring(1);if(n.toLowerCase().startsWith("http://")||n.toLowerCase().startsWith("https://")){let i;try{i=new URL(n)}catch{return an("Invalid URL: "+n)}if(i.hostname==="thread.pfg.pw")return cn(i.pathname,i.search);const s=It("null",i.toString());if(s.kind==="link"&&!s.external){const[a,...d]=s.url.split("?");return cn(a.replace("#",""),"?"+d.join("?"))}const c=Tt(n,{});if(c){const a=el("div"),d=L(a);return ge(a,()=>u(Q,{body:c,autoplay:!1}),{color_level:0}).defer(d),d}return an("Unsupported Link: "+n)}const r=e.split("/").filter(i=>i),o=r.shift();if(console.log(r),o==null)return Ia();if(o==="pwa_start")return ja();if(o==="settings")return Da();if(o==="ui_testing")return Ma();function l(){const[i,s]=A("loading\u2026");return(async()=>{const{client:c}=await Y(()=>import("./reddit.3f84da05.js"),["assets/reddit.3f84da05.js","assets/base.50b98d34.js"]),{stringify:a}=await Y(()=>import("./main.724a0124.js").then(function(f){return f.m}),["assets/main.724a0124.js","assets/_commonjsHelpers.2cf1d77b.js"]),d=await c.getPage("/"+r.join("/")+t);s(a(d))})().catch(c=>{console.log("err;",c),s(c.toString()+`
`+c.stack)}),(()=>{const c=ca.cloneNode(!0),a=c.firstChild;return v(a,u(Nt,{get content(){return[I.pre(i(),"json")]}})),c})()}if(o==="temp0"){const i=el("div"),s=L(i);return ge(i,()=>u(l,{}),{color_level:0}).defer(s),s}return o==="login"?Gt(r[0]??"ENOCLIENT",i=>Ra(i,r,new URLSearchParams(t))):o==="saved"?Gt("reddit",i=>{const s=el("div").clss("client-wrapper"),c=L(s),a=el("div").adto(s);a.classList.add("client-main-frame");const d=Xr(c,i.id);return d.setTitle("Loading "+i.id+"\u2026"),Qr(i,JSON.parse(localStorage.getItem("saved-post")??"{}"),a,d),c}):Gt(o,i=>Ta(i,"/"+r.join("/")+t))}function vt(e,t,n){const r=t.pathname==="/"&&t.search===""&&t.hash.length>2?(()=>{try{return new URL("https://thread.pfg.pw/"+t.hash.substring(1))}catch{return t}})():t;console.log("Navigating",e,r,ye,n),document.title="ThreadClient",dn.forEach(a=>a(r));const o=r.pathname+r.search;Wa(e),En(),ye.forEach(a=>{a.node.kind==="t1"&&a.node.hide()});const l=ye[e];if(l)if(l.url!==o){console.log("URLS differ. \xAB",l.url,"\xBB \xAB",o,"\xBB");for(let a=ye.length-1;a>=e;a--){const d=ye.pop();if(!d)throw new Error("bad logic");d.node.kind==="t1"&&d.node.removeSelf()}}else{l.node.kind==="t1"?l.node.show():lt(l.node.page2);return}if(n){const d={page:n};lt(d),ye[e]={node:{kind:"t2",page2:d},url:o};return}const i=L(),s=cn(r.pathname,r.search).defer(i).adto(oe);i.on("cleanup",()=>s.remove()),i.on("hide",()=>s.style.display="none"),i.on("show",()=>s.style.display="");const c={kind:"t1",removeSelf:()=>i.cleanup(),hide:()=>i.setVisible(!1),show:()=>i.setVisible(!0)};ye[e]={node:c,url:o}}function Va(e){const t=document.createElement("div");document.body.appendChild(t);const n=le();At(()=>u(P,{get if(){return n.highlightRerenders()==="on"},get children(){return u(tl,{observe_root:e})}}),t)}console.log("APP.TSX WAS RELOADED.");localStorage.setItem("seen-page1","true");let oe,Qe,Zr,Pt,ye,pt,je,dn,ot,_t;function Wa(e){ot=e}function nr(){if(location.hash===""){const e=new URL(location.origin+"/#"+(location.pathname.replace("/","")+location.search+location.hash||"/"));history.replaceState(history.state,"",e)}}function Ba(){if(oe=document.createElement("threadclient"),document.body.appendChild(oe),Qe=new Map,nr(),window.onpopstate=n=>{nr(),console.log("onpopstate. ev:",n.state);const r=n.state;if(r?.session_name!==pt){console.log("Going to history item from different session"),vt(0,location,void 0);return}vt(r?.index??0,location,void 0)},je={},ye=[],pt=""+Math.random(),dn=[],ot=0,el("div").adto(oe),navigator.standalone||window.matchMedia("(display-mode: standalone)").matches){const n=el("nav").clss("navbar","bg-postcolor-100","transition-opacity").adto(oe);Pt=n;const r=["px-2"];el("button").adto(n).attr({"aria-label":"Back"}).atxt("\u2190").clss(...r).onev("click",d=>{d.stopPropagation(),history.back()}),el("button").adto(n).attr({"aria-label":"Forward"}).atxt("\u2192").clss(...r).onev("click",d=>{d.stopPropagation(),history.forward()});const o=el("input").attr({"aria-label":"URL"}).adto(n).clss("bg-transparent text-center border border-gray-600 dark:border-gray-500"),l=el("button").attr({"aria-label":"Go"}).clss(...r).atxt("\u23CE").adto(n),i=el("button").attr({"aria-label":"Reload"}).clss(...r).atxt("\u{1F5D8}").adto(n),s=()=>ze({path:"/"+o.value.replace(/^\//,"")});l.onclick=()=>s(),o.onkeydown=d=>d.key==="Enter"?s():0,i.onclick=()=>alert("TODO refresh"),dn.push(d=>{d.pathname.toLowerCase().startsWith("/http://")||d.pathname.toLowerCase().startsWith("/https://")?o.value=(d.pathname+d.search).substr(1):o.value=d.pathname+d.search});let c=window.scrollY,a=0;document.addEventListener("scroll",d=>{const f=window.scrollY,h=f-c;c=f;const m=Math.max(0,Math.min(100,f));a+=h,a>m&&(a=m),a<0&&(a=0);let g=a;f<0&&(g=-f),n.style.setProperty("--mobile-transform","translateY("+-g+"px)")},{passive:!1})}else Pt=el("nav").adto(oe);console.log("ThreadClient built on "+Co.build_time),_t=el("div").adto(oe),history.replaceState({index:0,session_name:pt},"ThreadClient",location.pathname+location.search+location.hash),vt(0,location,void 0);let e=100;const t=()=>{document.head.querySelector(".darkreader")?.remove(),e*=2,setTimeout(()=>t(),e)};setTimeout(()=>t(),0),Zr=el("div").adto(oe).clss("alert-area"),Va(oe)}const[Ka,eo]=A(!1),[Ya,Ua]=A(!1),to=$o({onNeedRefresh(){if(console.log("An update to ThreadClient is available"),Ua(!0),le().updateNotifications()==="on"){const t=el("div").clss("alert").adto(Zr);el("div").clss("alert-body").adto(t).atxt("An update to ThreadClient is available."),O("pill-empty").atxt("Ignore").adto(t).onev("click",n=>{n.stopPropagation(),t.remove()}),t.atxt(" "),O("pill-empty").atxt("Update (Refresh)").adto(t).onev("click",n=>{n.stopPropagation(),to(!0)})}},onOfflineReady(){console.log("Ready for offline use."),eo(!0)}});console.log("updateSW",to);navigator.serviceWorker!=null&&navigator.serviceWorker.getRegistrations().then(e=>{e.every(t=>t.active)&&e.length!==0&&eo(!0)}).catch(e=>console.log("Error checking sw registrations",e));console.log("ROUTER.TS WAS RELOADED.",!1);Ba();export{q as $,te as A,ge as B,kn as C,ce as D,Ol as E,z as F,Or as G,V as H,Ml as I,_n as J,Ct as K,Nr as L,Cr as M,xa as N,X as O,br as P,R as Q,Nt as R,Er as S,$n as T,yn as U,F as V,yl as W,Ha as X,lo as Y,lr as Z,Y as _,oe as a,Ga as a0,ur as b,za as c,Jo as d,Fa as e,A as f,Go as g,L as h,v as i,u as j,P as k,B as l,qa as m,E as n,sl as o,Ft as p,G as q,I as r,at as s,y as t,Ka as u,Co as v,Ya as w,to as x,M as y,le as z};
