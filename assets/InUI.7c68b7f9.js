import{c as $,g as C,m as y,a as d,i as o,d as v,t as s,J as T,f as E,D as S,E as g,F as U,p as N}from"./index.cddea1b7.js";const G=s("<div> </div>"),K=s('<button class="border rounded border-hex-fff px-2"></button>'),M=s('<div class="max-w-lg mx-auto p-4 space-y-4"><div></div><label class="block"><div>Key</div><input type="password" class="block w-full border border-hex-fff"></label><label class="block"><div>Value</div><textarea class="block w-full border border-hex-fff"></textarea></label><div class="space-x-2"><button class="border rounded border-hex-fff px-2">Decrypt</button></div></div>'),D=s("<div></div>"),R=s('<div class="bg-hex-000 h-screen py-2"><div><div class="max-w-lg mx-auto p-4 flex flex-col gap-2"></div></div></div>'),F=s('<div><div class="bg-zinc-700 inline-block p-2 px-4 rounded-3xl whitespace-pre-wrap max-w-md"></div></div>'),V=s('<div class="text-right"><div class="bg-blue-700 inline-block p-2 px-4 rounded-3xl whitespace-pre-wrap max-w-md"></div></div>'),W=s('<div class="text-red-500">ERROR: </div>');function x(e){return btoa(String.fromCharCode(...e))}function u(e){return Uint8Array.from(atob(e),r=>r.charCodeAt(0))}async function j(){const e=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return new Uint8Array(await crypto.subtle.exportKey("raw",e))}async function B(e,r){const n=window.crypto.getRandomValues(new Uint8Array(12)),i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},await crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!1,["encrypt","decrypt"]),new TextEncoder().encode(r));return new Uint8Array([...n,...new Uint8Array(i)])}async function A(e,r){const n=[...r];if(n.length<12)throw new Error("EBADENCRYPTEDMESSAGE");const i=new Uint8Array(n.slice(0,12)),a=new Uint8Array(n.slice(12)),t=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:i},await crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!1,["encrypt","decrypt"]),a);return new TextDecoder().decode(t)}function P(e,r){window[e]=r}function Q(e,r){return window[e]??=r}const Y="tiYwBcc+TbgrF3a/ZjZcgg0pldlm3whn7xUAEUqASe0/F+hl2qYhM/kpex5hWSjL4AQAJ+j4ivQstkjHy+/z7aG6UBZQENGixHnbCrf+80QtkURFWDc=",[m,k]=T("--inui-compressor-key");function H(e){let r=null;const[n,i]=$(Q("--term-app-sel",null));C(()=>P("--term-app-sel",n()));const a=()=>{const t=m()??prompt("Passcode?");if(t==null)return alert("Passcode required.");k(t),A(u(t),u(Y)).then(c=>{r=c,i("term")}).catch(c=>{alert("decrypt error: "+c)})};return n()==="term"&&(i(null),a()),y((()=>{const t=y(()=>n()==="term",!0);return()=>t()?d(Z,{get reloadSelf(){return e.reloadSelf},content:r}):(()=>{const c=y(()=>n()==="encr",!0);return()=>c()?d(q,{}):(()=>{const l=G.cloneNode(!0),p=l.firstChild;return o(l,d(v,{class:"underline",action:()=>a(),children:"term"}),p),o(l,d(v,{class:"underline",action:()=>i("encr"),children:"encr"}),null),l})()})()})())}function _(e){const[r,n]=$(0);return C(()=>{if(r()===2){const i=setTimeout(()=>{n(0)},1e3);S(()=>clearTimeout(i))}}),(()=>{const i=K.cloneNode(!0);return i.$$click=()=>{setTimeout(()=>{r()===0&&n(1)},100),e.getValue().then(a=>{navigator.clipboard.writeText(a).then(()=>{n(2)}).catch(t=>{n(0),alert("copy error: "+t)})}).catch(a=>{n(0),alert("copy error: "+a)})},o(i,(()=>{const a=y(()=>r()===0,!0);return()=>a()?e.children:r()===1?"Generating\u2026":"\u2713 Copied"})()),E(()=>i.disabled=r()!==0),i})()}function q(){let e;return(()=>{const r=M.cloneNode(!0),n=r.firstChild,i=n.nextSibling,a=i.firstChild,t=a.nextSibling,c=i.nextSibling,l=c.firstChild,p=l.nextSibling,b=c.nextSibling,h=b.firstChild;o(n,d(_,{getValue:async()=>x(await j()),children:"Keygen"})),t.addEventListener("change",f=>void k(f.currentTarget.value));const w=e;return typeof w=="function"?w(p):e=p,o(b,d(_,{getValue:async()=>x(await B(u(m()??""),e.value)),children:"Copy Encrypted"}),h),h.$$click=()=>{(async()=>{e.value=await A(u(m()??""),u(e.value))})().catch(f=>{alert("EDECRYPT:"+f)})},E(()=>t.value=m()??""),r})()}function Z(e){const r=document.createElement("style");return r.textContent=`
        html, body {
            margin-bottom: 0 !important;
            background-color: #000 !important;
        }
    `,S(()=>{r.remove()}),document.body.appendChild(r),(()=>{const n=R.cloneNode(!0),i=n.firstChild,a=i.firstChild;return(t=>{g(()=>{t.animate([{backgroundColor:"#222"},{}],{duration:200,iterations:1})})})(n),(t=>{g(()=>{t.animate([{opacity:0},{opacity:1}],{duration:200,iterations:1})})})(i),o(a,d(U,{get each(){return e.content.split(`
`).filter(t=>t)},children:t=>t.startsWith("[")?(()=>{const c=D.cloneNode(!0);return o(c,t),c})():t.startsWith("<")?(()=>{const c=F.cloneNode(!0),l=c.firstChild;return o(l,()=>t.substring(1)),c})():t.startsWith(">")?(()=>{const c=V.cloneNode(!0),l=c.firstChild;return o(l,()=>t.substring(1)),c})():(()=>{const c=W.cloneNode(!0);return c.firstChild,o(c,t,null),c})()})),n})()}N(["click"]);export{H as default};
