import{c as hT}from"./_commonjsHelpers.2cf1d77b.js";function pT(cr,fi){return fi.forEach(function(gt){gt&&typeof gt!="string"&&!Array.isArray(gt)&&Object.keys(gt).forEach(function(Ht){if(Ht!=="default"&&!(Ht in cr)){var R=Object.getOwnPropertyDescriptor(gt,Ht);Object.defineProperty(cr,Ht,R.get?R:{enumerable:!0,get:function(){return gt[Ht]}})}})}),Object.freeze(cr)}var Na={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(cr){(function(){var fi=typeof window<"u"?window:hT,gt={};(function(R,Pa,Xo){var p;function ba(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var di=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function Sg(e){e=[typeof globalThis=="object"&&globalThis,e,typeof R=="object"&&R,typeof self=="object"&&self,typeof Pa=="object"&&Pa];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var qt=Sg(this);function Te(e,t){if(t)e:{for(var n=qt,r=e.split("."),i=0;i<r.length-1;i++){var o=r[i];if(!(o in n))break e;n=n[o]}r=r[r.length-1],i=n[r],o=t(i),o!=i&&o!=null&&di(n,r,{configurable:!0,writable:!0,value:o})}}Te("Symbol",function(e){function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(o||"")+"_"+i++,o)}function n(o,s){this.g=o,di(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return t}),Te("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=qt[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&di(r.prototype,e,{configurable:!0,writable:!0,value:function(){return La(ba(this))}})}return e});function La(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function h(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:ba(e)}}function fe(e){if(!(e instanceof Array)){e=h(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var Eg=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},Wo;if(typeof Object.setPrototypeOf=="function")Wo=Object.setPrototypeOf;else{var Yo;e:{var Ig={a:!0},ja={};try{ja.__proto__=Ig,Yo=ja.a;break e}catch{}Yo=!1}Wo=Yo?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var hi=Wo;function Ne(e,t){if(e.prototype=Eg(t.prototype),e.prototype.constructor=e,hi)hi(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Zg=t.prototype}function pi(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.o=0,this.F=this.i=null}function $o(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}pi.prototype.u=function(e){this.h=e};function Jo(e,t){e.i={me:t,se:!0},e.g=e.o||e.j}pi.prototype.return=function(e){this.i={return:e},this.g=this.j};function m(e,t,n){return e.g=n,{value:t}}pi.prototype.A=function(e){this.g=e};function b(e){e.g=0}function q(e,t,n){e.o=t,n!=null&&(e.j=n)}function Nn(e){e.o=0,e.j=2}function ee(e,t){e.g=t,e.o=0}function K(e){e.o=0;var t=e.i.me;return e.i=null,t}function It(e){e.F=[e.i],e.o=0,e.j=0}function At(e,t){var n=e.F.splice(0)[0];(n=e.i=e.i||n)?n.se?e.g=e.o||e.j:n.A!=null&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function Oa(e){this.g=new pi,this.h=e}function Ag(e,t){$o(e.g);var n=e.g.l;return n?Qo(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),fr(e))}function Qo(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.s=!1,i;var o=i.value}catch(s){return e.g.l=null,Jo(e.g,s),fr(e)}return e.g.l=null,r.call(e.g,o),fr(e)}function fr(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.s=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Jo(e.g,n)}if(e.g.s=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.se)throw t.me;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function _a(e){this.next=function(t){return $o(e.g),e.g.l?t=Qo(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=fr(e)),t},this.throw=function(t){return $o(e.g),e.g.l?t=Qo(e,e.g.l.throw,t,e.g.u):(Jo(e.g,t),t=fr(e)),t},this.return=function(t){return Ag(e,t)},this[Symbol.iterator]=function(){return this}}function gi(e,t){var n=new _a(new Oa(t));return hi&&e.prototype&&hi(n,e.prototype),n}function Mg(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,i){function o(s){s.done?r(s.value):Promise.resolve(s.value).then(t,n).then(o,i)}o(e.next())})}function E(e){return Mg(new _a(new Oa(e)))}Te("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.s=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function r(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(this.g==null){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var i=qt.setTimeout;n.prototype.i=function(s){i(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(c){a||(a=!0,l.call(u,c))}}var u=this,a=!1;return{resolve:s(this.J),reject:s(this.l)}},t.prototype.J=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.P(s);else{e:switch(typeof s){case"object":var u=s!=null;break e;case"function":u=!0;break e;default:u=!1}u?this.I(s):this.o(s)}},t.prototype.I=function(s){var u=void 0;try{u=s.then}catch(a){this.l(a);return}typeof u=="function"?this.S(u,s):this.o(s)},t.prototype.l=function(s){this.u(2,s)},t.prototype.o=function(s){this.u(1,s)},t.prototype.u=function(s,u){if(this.h!=0)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,this.h===2&&this.M(),this.F()},t.prototype.M=function(){var s=this;i(function(){if(s.G()){var u=qt.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.G=function(){if(this.s)return!1;var s=qt.CustomEvent,u=qt.Event,a=qt.dispatchEvent;return typeof a>"u"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof u=="function"?s=new u("unhandledrejection",{cancelable:!0}):(s=qt.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,a(s))},t.prototype.F=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.P=function(s){var u=this.j();s.Ic(u.resolve,u.reject)},t.prototype.S=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(d,g){return typeof d=="function"?function(v){try{l(d(v))}catch(y){c(y)}}:g}var l,c,f=new t(function(d,g){l=d,c=g});return this.Ic(a(s,l),a(u,c)),f},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.Ic=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?o.h(a):this.g.push(a),this.s=!0},t.resolve=r,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=h(s),c=l.next();!c.done;c=l.next())r(c.value).Ic(u,a)})},t.all=function(s){var u=h(s),a=u.next();return a.done?r([]):new t(function(l,c){function f(v){return function(y){d[v]=y,g--,g==0&&l(d)}}var d=[],g=0;do d.push(void 0),g++,r(a.value).Ic(f(d.length-1),c),a=u.next();while(!a.done)})},t});function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Te("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=h(a);for(var l;!(l=a.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function r(a){var l=typeof a;return l==="object"&&a!==null||l==="function"}function i(a){if(!ot(a,s)){var l=new n;di(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&i(c),l(c))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),c=new e([[a,2],[l,3]]);return c.get(a)!=2||c.get(l)!=3?!1:(c.delete(a),c.set(l,4),!c.has(a)&&c.get(l)==4)}catch{return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!r(a))throw Error("Invalid WeakMap key");if(i(a),!ot(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return r(a)&&ot(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return r(a)&&ot(a,s)&&ot(a[s],this.g)},t.prototype.delete=function(a){return r(a)&&ot(a,s)&&ot(a[s],this.g)?delete a[s][this.g]:!1},t}),Te("Map",function(e){function t(){var u={};return u.Ya=u.next=u.head=u}function n(u,a){var l=u.g;return La(function(){if(l){for(;l.head!=u.g;)l=l.Ya;for(;l.next!=l.head;)return l=l.next,{done:!1,value:a(l)};l=null}return{done:!0,value:void 0}})}function r(u,a){var l=a&&typeof a;l=="object"||l=="function"?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var c=u.h[l];if(c&&ot(u.h,l))for(var f=0;f<c.length;f++){var d=c[f];if(a!==a&&d.key!==d.key||a===d.key)return{id:l,list:c,index:f,ka:d}}return{id:l,list:c,index:-1,ka:void 0}}function i(u){if(this.h={},this.g=t(),this.size=0,u){u=h(u);for(var a;!(a=u.next()).done;)a=a.value,this.set(a[0],a[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var u=Object.seal({x:4}),a=new e(h([[u,"s"]]));if(a.get(u)!="s"||a.size!=1||a.get({x:4})||a.set({x:4},"t")!=a||a.size!=2)return!1;var l=a.entries(),c=l.next();return c.done||c.value[0]!=u||c.value[1]!="s"?!1:(c=l.next(),!(c.done||c.value[0].x!=4||c.value[1]!="t"||!l.next().done))}catch{return!1}}())return e;var o=new WeakMap;i.prototype.set=function(u,a){u=u===0?0:u;var l=r(this,u);return l.list||(l.list=this.h[l.id]=[]),l.ka?l.ka.value=a:(l.ka={next:this.g,Ya:this.g.Ya,head:this.g,key:u,value:a},l.list.push(l.ka),this.g.Ya.next=l.ka,this.g.Ya=l.ka,this.size++),this},i.prototype.delete=function(u){return u=r(this,u),u.ka&&u.list?(u.list.splice(u.index,1),u.list.length||delete this.h[u.id],u.ka.Ya.next=u.ka.next,u.ka.next.Ya=u.ka.Ya,u.ka.head=null,this.size--,!0):!1},i.prototype.clear=function(){this.h={},this.g=this.g.Ya=t(),this.size=0},i.prototype.has=function(u){return!!r(this,u).ka},i.prototype.get=function(u){return(u=r(this,u).ka)&&u.value},i.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},i.prototype.keys=function(){return n(this,function(u){return u.key})},i.prototype.values=function(){return n(this,function(u){return u.value})},i.prototype.forEach=function(u,a){for(var l=this.entries(),c;!(c=l.next()).done;)c=c.value,u.call(a,c[1],c[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i}),Te("Set",function(e){function t(n){if(this.g=new Map,n){n=h(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(h([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var i=r.entries(),o=i.next();return o.done||o.value[0]!=n||o.value[1]!=n?!1:(o=i.next(),o.done||o.value[0]==n||o.value[0].x!=4||o.value[1]!=o.value[0]?!1:i.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var i=this;this.g.forEach(function(o){return n.call(r,o,o,i)})},t)});function Ua(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{ga:i,v:o}}return{ga:-1,v:void 0}}Te("Array.prototype.findIndex",function(e){return e||function(t,n){return Ua(this,t,n).ga}}),Te("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),Te("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var i=r.length,o=n||0;for(0>o&&(o=Math.max(o+i,0));o<i;o++){var s=r[o];if(s===t||Object.is(s,t))return!0}return!1}});function Zo(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}Te("String.prototype.includes",function(e){return e||function(t,n){return Zo(this,t,"includes").indexOf(t,n||0)!==-1}}),Te("Array.prototype.find",function(e){return e||function(t,n){return Ua(this,t,n).v}}),Te("String.prototype.startsWith",function(e){return e||function(t,n){for(var r=Zo(this,t,"startsWith"),i=r.length,o=t.length,s=Math.max(0,Math.min(n|0,r.length)),u=0;u<o&&s<i;)if(r[s++]!=t[u++])return!1;return u>=o}});function es(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}Te("Array.prototype.keys",function(e){return e||function(){return es(this,function(t){return t})}});var Cg=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)ot(r,i)&&(e[i]=r[i])}return e};Te("Object.assign",function(e){return e||Cg}),Te("Array.from",function(e){return e||function(t,n,r){n=n??function(u){return u};var i=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof o=="function"){t=o.call(t);for(var s=0;!(o=t.next()).done;)i.push(n.call(r,o.value,s++))}else for(o=t.length,s=0;s<o;s++)i.push(n.call(r,t[s],s));return i}}),Te("Array.prototype.values",function(e){return e||function(){return es(this,function(t,n){return n})}}),Te("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),Te("Array.prototype.entries",function(e){return e||function(){return es(this,function(t,n){return[t,n]})}}),Te("String.prototype.repeat",function(e){return e||function(t){var n=Zo(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),Te("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),Te("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)ot(t,r)&&n.push(t[r]);return n}}),Te("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),Te("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)ot(t,r)&&n.push([r,t[r]]);return n}});var kg=this||self;function O(e,t){var n=e.split("."),r=kg;n[0]in r||typeof r.execScript>"u"||r.execScript("var "+n[0]);for(var i;n.length&&(i=n.shift());)n.length||t===void 0?r[i]&&r[i]!==Object.prototype[i]?r=r[i]:r=r[i]={}:r[i]=t}function ts(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function ns(e,t,n){var r=Math.pow(e.g,t);n=n*(1-r)+r*e.h,isNaN(n)||(e.h=n,e.i+=t)}function rs(e){return e.h/(1-Math.pow(e.g,e.i))}function mi(){this.h=new ts(2),this.j=new ts(5),this.g=0,this.i=128e3,this.l=16e3}mi.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},mi.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(rs(this.h),rs(this.j))};function Rg(){}function dr(){}function me(){}function on(e,t){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];Ba.has(e)||(Ba.add(e),me.apply(Rg,fe(n)))}function Dg(){}function gT(){}function mT(){}function vT(){}var Ba=new Set;if(R.console&&R.console.log.bind){var sn={},Fa=(sn[1]=console.error.bind(console),sn[2]=console.warn.bind(console),sn[3]=console.info.bind(console),sn[4]=console.log.bind(console),sn[5]=console.debug.bind(console),sn[6]=console.debug.bind(console),sn);me=Fa[2],dr=Fa[1]}function Va(e,t){for(var n=[],r=h(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}function Ng(e,t){for(var n=h(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}var Qe=function e(t){var n;return gi(e,function(r){return r.g==1&&(n=0),r.g!=3?n<t?m(r,n,3):r.A(0):(n++,r.A(2))})},Be=function e(t){var n,r,i,o,s,u;return gi(e,function(a){return a.g==1&&(n=-1,i=r=void 0,o=h(t),s=o.next()),a.g!=5?s.done?n==-1?a.A(0):m(a,{ga:n,Sf:r,item:i,next:void 0},0):(u=s.value,0<=n?m(a,{ga:n,item:i,Sf:r,next:u},5):a.A(5)):(n++,r=i,i=u,s=o.next(),a.A(2))})};function Ha(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function st(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function hr(e,t,n){if(n||(n=Ha),e.length!=t.length)return!1;t=t.slice();var r={};e=h(e);for(var i=e.next();!i.done;r={ed:r.ed},i=e.next()){if(r.ed=i.value,i=t.findIndex(function(o){return function(s){return n(o.ed,s)}}(r)),i==-1)return!1;t[i]=t[t.length-1],t.pop()}return t.length==0}function is(e,t,n){if(n||(n=Ha),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function se(e,t,n){this.startTime=e,this.direction=ss,this.endTime=t,this.payload=n,this.region=new Pn,this.position=null,this.positionAlign=Ka,this.size=0,this.textAlign=Kt,this.writingMode=gr,this.lineInterpretation=us,this.line=null,this.lineHeight="",this.lineAlign=un,this.displayAlign=pr,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Wa,this.fontStyle=ls,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}se.prototype.clone=function(){var e=new se(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function qa(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!is(e.nestedCues,t.nestedCues,qa))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!is(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}O("shaka.text.Cue",se);var Ka="auto";se.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Ka};var Kt="center",os={LEFT:"left",RIGHT:"right",CENTER:Kt,START:"start",END:"end"};se.textAlign=os;var pr="after",Ga={BEFORE:"before",CENTER:"center",AFTER:pr};se.displayAlign=Ga;var ss="ltr";se.direction={HORIZONTAL_LEFT_TO_RIGHT:ss,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var gr="horizontal-tb";se.writingMode={HORIZONTAL_TOP_TO_BOTTOM:gr,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var us=0;se.lineInterpretation={LINE_NUMBER:us,PERCENTAGE:1};var un="start",as={CENTER:"center",START:un,END:"end"};se.lineAlign=as;var za={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};se.defaultTextColor=za;var Xa={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};se.defaultTextBackgroundColor=Xa;var Wa=400;se.fontWeight={NORMAL:Wa,BOLD:700};var ls="normal",Ya={NORMAL:ls,ITALIC:"italic",OBLIQUE:"oblique"};se.fontStyle=Ya,se.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Pn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Gt,this.scroll=$a}O("shaka.text.CueRegion",Pn);var Gt=1;Pn.units={PX:0,PERCENTAGE:Gt,LINES:2};var $a="";Pn.scrollMode={NONE:$a,UP:"up"};function mr(){}function mt(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(cs(e)==cs(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=Q(e),r=Q(t),i=h(Qe(e.byteLength)),o=i.next();!o.done;o=i.next())if(o=o.value,n[o]!=r[o])return!1;return!0}function cs(e){return e instanceof ArrayBuffer?e:e.buffer}function vt(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Q(e,t,n){return n=n===void 0?1/0:n,Ja(e,t===void 0?0:t,n,Uint8Array)}function Ve(e,t,n){return n=n===void 0?1/0:n,Ja(e,t===void 0?0:t,n,DataView)}function Ja(e,t,n,r){var i=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,i)),new r(cs(e),t,Math.min(t+Math.max(n,0),i)-t)}O("shaka.util.BufferUtils",mr),mr.toDataView=Ve,mr.toUint8=Q,mr.toArrayBuffer=vt,mr.equal=mt;function fs(e,t){this.g=e,this.h=t}fs.prototype.toString=function(){return"v"+this.g+"."+this.h};function He(e,t){var n=new fs(4,0),r=Qa,i=r.g,o=n.h-i.h;(0<(n.g-i.g||o)?r.i:r.h)(r.g,n,e,t)}function Pg(e,t,n,r){me([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function bg(e,t,n,r){dr([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}var Qa=null;function ds(e,t){return e.concat(t)}function Lg(){}function zt(e){return e!=null}function an(e){var t=Object.create(e.prototype||Object.prototype);try{var n=e.call(t);n||(He("Factories requiring new","Factories should be plain functions"),n=t)}catch{He("Factories requiring new","Factories should be plain functions"),n=new e}return n}function vi(){}O("shaka.dependencies",vi),vi.has=function(e){return vr.has(e)},vi.add=function(e,t){if(!Za[e])throw Error(e+" is not supported");vr.set(e,function(){return t})};var Za={muxjs:"muxjs"};vi.Allowed=Za;var vr=new Map([["muxjs",function(){return R.muxjs}]]);function x(e,t,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}x.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},O("shaka.util.Error",x),x.Severity={RECOVERABLE:1,CRITICAL:2},x.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},x.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var jg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Ze(e){var t;e instanceof Ze?(yi(this,e.Ia),this.xb=e.xb,this.Ka=e.Ka,hs(this,e.Ob),this.Aa=e.Aa,wi(this,e.g.clone()),this.lb=e.lb):e&&(t=String(e).match(jg))?(yi(this,t[1]||"",!0),this.xb=yr(t[2]||""),this.Ka=yr(t[3]||"",!0),hs(this,t[4]),this.Aa=yr(t[5]||"",!0),wi(this,t[6]||"",!0),this.lb=yr(t[7]||"")):this.g=new bn(null)}p=Ze.prototype,p.Ia="",p.xb="",p.Ka="",p.Ob=null,p.Aa="",p.lb="",p.toString=function(){var e=[],t=this.Ia;if(t&&e.push(wr(t,el,!0),":"),t=this.Ka){e.push("//");var n=this.xb;n&&e.push(wr(n,el,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ob,t!=null&&e.push(":",String(t))}return(t=this.Aa)&&(this.Ka&&t.charAt(0)!="/"&&e.push("/"),e.push(wr(t,t.charAt(0)=="/"?Ug:_g,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.lb)&&e.push("#",wr(t,Fg)),e.join("")},p.resolve=function(e){var t=this.clone();t.Ia==="data"&&(t=new Ze);var n=!!e.Ia;n?yi(t,e.Ia):n=!!e.xb,n?t.xb=e.xb:n=!!e.Ka,n?t.Ka=e.Ka:n=e.Ob!=null;var r=e.Aa;if(n)hs(t,e.Ob);else if(n=!!e.Aa){if(r.charAt(0)!="/")if(this.Ka&&!this.Aa)r="/"+r;else{var i=t.Aa.lastIndexOf("/");i!=-1&&(r=t.Aa.substr(0,i+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){i=r.lastIndexOf("/",0)==0,r=r.split("/");for(var o=[],s=0;s<r.length;){var u=r[s++];u=="."?i&&s==r.length&&o.push(""):u==".."?((1<o.length||o.length==1&&o[0]!="")&&o.pop(),i&&s==r.length&&o.push("")):(o.push(u),i=!0)}r=o.join("/")}}return n?t.Aa=r:n=e.g.toString()!=="",n?wi(t,e.g.clone()):n=!!e.lb,n&&(t.lb=e.lb),t},p.clone=function(){return new Ze(this)};function yi(e,t,n){e.Ia=n?yr(t,!0):t,e.Ia&&(e.Ia=e.Ia.replace(/:$/,""))}function hs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Ob=t}else e.Ob=null}function wi(e,t,n){t instanceof bn?e.g=t:(n||(t=wr(t,Bg)),e.g=new bn(t))}function yr(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function wr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Og),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Og(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var el=/[#\/\?@]/g,_g=/[#\?:]/g,Ug=/[#\?]/g,Bg=/[#\?@]/g,Fg=/#/g;function bn(e){this.g=e||null}function tl(e){if(!e.ra&&(e.ra={},e.Kc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),i=i||"",e.add(o,decodeURIComponent(i.replace(/\+/g," ")))}}p=bn.prototype,p.ra=null,p.Kc=null,p.add=function(e,t){tl(this),this.g=null;var n=this.ra.hasOwnProperty(e)&&this.ra[e];return n||(this.ra[e]=n=[]),n.push(t),this.Kc++,this},p.set=function(e,t){return tl(this),this.g=null,this.ra.hasOwnProperty(e)?this.ra[e]=[t]:this.add(e,t),this},p.toString=function(){if(this.g)return this.g;if(!this.ra)return"";var e=[],t;for(t in this.ra)for(var n=encodeURIComponent(t),r=this.ra[t],i=0;i<r.length;i++){var o=n;r[i]!==""&&(o+="="+encodeURIComponent(r[i])),e.push(o)}return this.g=e.join("&")},p.clone=function(){var e=new bn;if(e.g=this.g,this.ra){var t={},n;for(n in this.ra)t[n]=this.ra[n].concat();e.ra=t,e.Kc=this.Kc}return e};function Pe(e,t){if(t.length==0)return e;var n=t.map(function(r){return new Ze(r)});return e.map(function(r){return new Ze(r)}).map(function(r){return n.map(function(i){return r.resolve(i)})}).reduce(ds,[]).map(function(r){return r.toString()})}function Tr(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function ln(e,t){if(t.length==1)return t[0];var n=Ti(e,t);if(n!=null)return n;throw new x(2,4,4025,t)}function Ti(e,t){for(var n=h(Vg[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=h(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.test(o.trim()))return o.trim()}return e==re?"":null}var re="text",_e={Ta:"video",jb:"audio",ea:re,Xb:"image",pg:"application"},Vg={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function ae(){var e,t,n=new Promise(function(r,i){e=r,t=i});return n.resolve=e,n.reject=t,n}ae.prototype.resolve=function(){},ae.prototype.reject=function(){};function xr(e){this.h=e,this.g=void 0}xr.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function cn(){}function be(e){return e?(e=Q(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),e=new TextDecoder().decode(e),e.includes("\uFFFD")&&dr('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e):""}function Xt(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new x(2,2,2004);var r=Math.floor(e.byteLength/2);n=new Uint16Array(r),e=Ve(e),r=h(Qe(r));for(var i=r.next();!i.done;i=r.next())i=i.value,n[i]=e.getUint16(2*i,t);return gs.value()(n)}function xi(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Q(e);if(n[0]==239&&n[1]==187&&n[2]==191)return be(n);if(n[0]==254&&n[1]==255)return Xt(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Xt(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Xt(e,!1);if(n[1]==0&&n[3]==0)return Xt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return be(e);throw new x(2,2,2003)}function fn(e){var t=new TextEncoder;return vt(t.encode(e))}function ps(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=h(Be(e)),o=i.next();!o.done;o=i.next())o=o.value,r.setUint16(2*o.ga,o.item.charCodeAt(0),t);return n}O("shaka.util.StringUtils",cn),cn.resetFromCharCode=function(){gs.g=void 0},cn.toUTF16=ps,cn.toUTF8=fn,cn.fromBytesAutoDetect=xi,cn.fromUTF16=Xt,cn.fromUTF8=be;var gs=new xr(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch{return!1}}for(var t={bb:65536};0<t.bb;t={bb:t.bb},t.bb/=2)if(e(t.bb))return function(n){return function(r){for(var i="",o=0;o<r.length;o+=n.bb)i+=String.fromCharCode.apply(null,r.subarray(o,o+n.bb));return i}}(t);return null});function yt(){}function nl(e){return e=Q(e),e=gs.value()(e),btoa(e)}function Ln(e,t){t=t??!0;var n=nl(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function Wt(e){var t=R.atob(e.replace(/-/g,"+").replace(/_/g,"/"));e=new Uint8Array(t.length),t=h(Be(t));for(var n=t.next();!n.done;n=t.next())n=n.value,e[n.ga]=n.item.charCodeAt(0);return e}function ms(e){var t=e.length/2,n=new Uint8Array(t);t=h(Qe(t));for(var r=t.next();!r.done;r=t.next())r=r.value,n[r]=R.parseInt(e.substr(2*r,2),16);return n}function Sr(e){var t=Q(e);e="",t=h(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function Er(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];var r=0,i=h(t);for(n=i.next();!n.done;n=i.next())r+=n.value.byteLength;for(r=new Uint8Array(r),i=0,t=h(t),n=t.next();!n.done;n=t.next())n=n.value,r.set(Q(n),i),i+=n.byteLength;return r}O("shaka.util.Uint8ArrayUtils",yt),yt.concat=Er,yt.toHex=Sr,yt.fromHex=ms,yt.fromBase64=Wt,yt.toBase64=Ln,yt.toStandardBase64=nl,yt.equal=function(e,t){return He("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),mt(e,t)};function rl(){var e=this;this.s=vr.get("muxjs")(),this.g=new this.s.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.o=[],this.j=[],this.i=[],this.l=!1,this.g.on("data",function(t){e.j=t.captions,e.i=t.metadata,e.o.push(Er(t.initSegment,t.data))}),this.g.on("done",function(){var t={data:Er.apply(yt,fe(e.o)),captions:e.j,metadata:e.i};e.h.resolve(t),e.l=!1})}rl.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()};function il(e,t){if(!vr.get("muxjs")()||!ol(e))return!1;if(t)return MediaSource.isTypeSupported(Ir(t,e));var n=Ir("audio",e),r=Ir("video",e);return MediaSource.isTypeSupported(n)||MediaSource.isTypeSupported(r)}function ol(e){return e.toLowerCase().split(";")[0].split("/")[1]=="mp2t"}function Ir(e,t){var n=t.replace(/mp2t/i,"mp4");e=="audio"&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",o=r[1],s=Number(r[2]);i=(o=="66"?i+"4200":o=="77"?i+"4d00":i+"6400")+(s>>4).toString(16),i+=(s&15).toString(16),n=n.replace(r[0],i)}return n}function Hg(e,t){e.l=!0,e.h=new ae,e.o=[],e.j=[],e.i=[];var n=Q(t);return e.g.push(n),e.g.flush(),e.l&&e.h.reject(new x(2,3,3018)),e.h}function wt(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function jn(e,t,n){return e=wt(e,t),vr.get("muxjs")()&&ol(e)?Ir(n,e):e}function et(e){e=e.split(".");var t=e[0];return e.pop(),t}function qg(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Mt(e){this.u=null,this.i=e,this.j=this.F=0,this.l=1/0,this.h=this.g=null,this.s="",this.o=new Map}function Ar(e){return!!(Ce[e]||e=="application/cea-608"||e=="application/cea-708")}Mt.prototype.destroy=function(){return this.i=this.u=null,this.o.clear(),Promise.resolve()};function Kg(e,t,n,r){var i,o,s;return E(function(u){if(u.g==1)return m(u,Promise.resolve(),2);if(!e.u||!e.i)return u.return();if(n==null||r==null)return e.u.parseInit(Q(t)),u.return();i={periodStart:e.F,segmentStart:n,segmentEnd:r},o=e.u.parseMedia(Q(t),i),s=o.filter(function(a){return a.startTime>=e.j&&a.startTime<e.l}),e.i.append(s),e.g==null&&(e.g=Math.max(n,e.j)),e.h=Math.min(r,e.l),b(u)})}Mt.prototype.remove=function(e,t){var n=this;return E(function(r){if(r.g==1)return m(r,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),b(r)})};function Gg(e,t,n){e.j=t,e.l=n}function sl(e,t,n){if(e.s=t,t=e.o.get(t))for(var r=h(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter(function(o){return o.endTime<=n}))&&e.i.append(i)}function zg(e){var t=[];e=h(e);for(var n=e.next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new se(n.startTime,n.endTime,n.text)});return t}function ul(e,t,n){t.startTime+=n,t.endTime+=n,t=h(t.nestedCues);for(var r=t.next();!r.done;r=t.next())ul(e,r.value,n)}function al(e,t,n,r,i){var o=n+" "+r,s=new Map;t=h(t);for(var u=t.next();!u.done;u=t.next()){var a=u.value;u=a.stream,a=a.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),ul(e,a,i),a.startTime>=e.j&&a.startTime<e.l&&(s.get(u).get(o).push(a),u==e.s&&e.i.append([a]))}for(i=h(s.keys()),o=i.next();!o.done;o=i.next())for(o=o.value,e.o.has(o)||e.o.set(o,new Map),t=h(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,a=s.get(o).get(u),e.o.get(o).set(u,a);e.g=e.g==null?Math.max(n,e.j):Math.min(e.g,Math.max(n,e.j)),e.h=Math.max(e.h,Math.min(r,e.l))}O("shaka.text.TextEngine",Mt),Mt.prototype.destroy=Mt.prototype.destroy,Mt.findParser=function(e){return Ce[e]},Mt.unregisterParser=function(e){delete Ce[e]},Mt.registerParser=function(e,t){Ce[e]=t};var Ce={};function tt(){}function vs(e,t){return e=J(e),t=J(t),e.split("-")[0]==t.split("-")[0]}function Mr(e,t){e=J(e),t=J(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&n.length==1&&r.length==2}function ys(e,t){e=J(e),t=J(t);var n=e.split("-"),r=t.split("-");return n.length==2&&r.length==2&&n[0]==r[0]}function J(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=ll.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function dn(e,t){return e=J(e),t=J(t),t==e?4:Mr(t,e)?3:ys(t,e)?2:Mr(e,t)?1:0}function ws(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ll.get(e)||e}function Ts(e){return e.language?J(e.language):e.audio&&e.audio.language?J(e.audio.language):e.video&&e.video.language?J(e.video.language):"und"}function Si(e,t){for(var n=J(e),r=new Set,i=h(t),o=i.next();!o.done;o=i.next())r.add(J(o.value));for(i=h(r),o=i.next();!o.done;o=i.next())if(o=o.value,o==n)return o;for(i=h(r),o=i.next();!o.done;o=i.next())if(o=o.value,Mr(o,n))return o;for(i=h(r),o=i.next();!o.done;o=i.next())if(o=o.value,ys(o,n))return o;for(r=h(r),o=r.next();!o.done;o=r.next())if(o=o.value,Mr(n,o))return o;return null}O("shaka.util.LanguageUtils",tt),tt.findClosestLocale=Si,tt.getLocaleForVariant=Ts,tt.getLocaleForText=function(e){return J(e.language||"und")},tt.getBase=ws,tt.relatedness=dn,tt.areSiblings=function(e,t){var n=ws(e),r=ws(t);return e!=n&&t!=r&&n==r},tt.normalize=J,tt.isSiblingOf=ys,tt.isParentOf=Mr,tt.areLanguageCompatible=vs,tt.areLocaleCompatible=function(e,t){return e=J(e),t=J(t),e==t};var ll=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function On(){this.g={}}p=On.prototype,p.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},p.get=function(e){return(e=this.g[e])?e.slice():null},p.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])};function xs(e,t){for(var n in e.g)t(n,e.g[n])}p.size=function(){return Object.keys(this.g).length},p.keys=function(){return Object.keys(this.g)};function Cr(e){this.h=e,this.g=null}Cr.prototype.W=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){R.clearTimeout(r),n=!1},r=R.setTimeout(function(){n&&t.h()},1e3*e),this},Cr.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function G(e){this.h=e,this.g=null}G.prototype.Sb=function(){return this.stop(),this.h(),this},G.prototype.W=function(e){var t=this;return this.stop(),this.g=new Cr(function(){t.h()}).W(e),this},G.prototype.Fa=function(e){var t=this;return this.stop(),this.g=new Cr(function(){t.g.W(e),t.h()}).W(e),this},G.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},O("shaka.util.Timer",G),G.prototype.stop=G.prototype.stop,G.prototype.tickEvery=G.prototype.Fa,G.prototype.tickAfter=G.prototype.W,G.prototype.tickNow=G.prototype.Sb;function ut(){return!!(R.MediaSource&&MediaSource.isTypeSupported)}function _n(e){return fl().canPlayType(e)!=""}function hn(){return Ue("Tizen")}function kr(){return Ue("CrKey")}function Ei(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!hn()}function cl(){if(!Ei())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Ue(e){return(navigator.userAgent||"").includes(e)}function fl(){return Un||(Ss||(Ss=new G(function(){Un=null})),(Un=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Un=document.createElement("video")),Ss.W(1),Un)}var Ss=null,Un=null;function dl(e,t,n,r,i){var o=e.variants;(t.length||n.length)&&(o=Yg(o,t,n)),o=Sl(o,r),t=Xg(o),t=Wg(t);var s=$g(t,i);e.variants=e.variants.filter(function(u){return hl(u)==s})}function Xg(e){var t=new On;e=h(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=hl(n);t.push(r,n)}return t}function Wg(e){var t=0,n=new Map,r=e.size();return xs(e,function(i,o){for(var s=h(o),u=s.next();!u.done;u=s.next()){u=u.value;var a=u.video;if(a&&a.width&&a.height){a=a.width*a.height*(a.frameRate||1),n.has(a)||n.set(a,new On);var l=n.get(a);l.push(i,u),l.size()===r&&(t=Math.max(t,a))}}}),t?n.get(t):e}function Yg(e,t,n){var r={};t=h(t);for(var i=t.next();!i.done;r={qd:r.qd},i=t.next())if(r.qd=i.value,i=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.qd)}}(r)),i.length){e=i;break}for(r={},n=h(n),t=n.next();!t.done;r={bd:r.bd},t=n.next())if(r.bd=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.bd)}}(r)),t.length){e=t;break}return e}function $g(e,t){for(var n=h(t),r=n.next();!r.done;r=n.next())if(r=r.value,r==sm||r==um){if(e=Jg(e,r),e.size()==1)return e.keys()[0]}else if(r==am)break;return Qg(e)}function Jg(e,t){var n=0,r=new On;return xs(e,function(i,o){for(var s=0,u=0,a=h(o),l=a.next();!l.done;l=a.next())l=l.value,l.decodingInfos.length&&(s+=l.decodingInfos[0][t]?1:0,u++);s/=u,s>n?(r.g={},r.push(i,o),n=s):s==n&&r.push(i,o)}),r}function Qg(e){var t="",n=1/0;return xs(e,function(r,i){for(var o=0,s=0,u=h(i),a=u.next();!a.done;a=u.next())o+=a.value.bandwidth||0,++s;o/=s,o<n&&(t=r,n=o)}),t}function hl(e){var t="";e.video&&(t=et(e.video.codecs));var n="";return e.audio&&(n=et(e.audio.codecs)),t+"-"+n}function Zg(e,t,n){e.variants=e.variants.filter(function(r){return Es(r,t,n)})}function Es(e,t,n){function r(o,s,u){return o>=s&&o<=u}var i=e.video;return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function em(e,t){return E(function(n){if(n.g==1)return m(n,pl(t,0<t.offlineSessionIds.length),2);vl(e,t),nm(t),rm(t),b(n)})}function pl(e,t){return E(function(n){if(n.g==1)return m(n,gl(e.variants,t,!1),2);e.variants=e.variants.filter(function(r){var i=r.video;if(i){var o=Is(i.codecs);if(i.codecs.includes(",")){var s=i.codecs.split(",");if(o=ln("video",s),s=ln("audio",s),s=jn(i.mimeType,s,"audio"),!MediaSource.isTypeSupported(s))return!1}if(o=jn(i.mimeType,o,"video"),!MediaSource.isTypeSupported(o))return!1}return(o=r.audio)&&(s=ml(o.codecs),o=jn(o.mimeType,s,"audio"),!MediaSource.isTypeSupported(o))?!1:Ue("Xbox One")&&i&&(i.width&&1920<i.width||i.height&&1080<i.height)&&i.codecs.includes("avc1.")?(Il(r),!1):((i=r.decodingInfos.some(function(u){return u.supported}))||(Il(r),void 0),i)}),b(n)})}function gl(e,t,n){var r,i,o,s,u,a,l,c,f,d;return E(function(g){if(e.some(function(v){return v.decodingInfos.length}))return g.return();for(r=navigator.mediaCapabilities,i=[],o=function(v,y){var T;return E(function(w){if(w.g==1)return q(w,2),m(w,r.decodingInfo(y),4);if(w.g!=2)return T=w.h,v.decodingInfos.push(T),ee(w,0);K(w),JSON.stringify(y),b(w)})},s=h(e),u=s.next();!u.done;u=s.next())for(a=u.value,l=tm(a,t,n),c=h(l),f=c.next();!f.done;f=c.next())d=f.value,i.push(o(a,d));return m(g,Promise.all(i),0)})}function tm(e,t,n){var r=e.audio,i=e.video;if(n={type:n?"file":"media-source"},i){var o=i.codecs;if(i.codecs.includes(",")){var s=i.codecs.split(",");o=ln("video",s),o=Is(o),s=ln("audio",s),s=jn(i.mimeType,s,"audio"),n.audio={contentType:s,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(o=Is(o),o=jn(i.mimeType,o,"video"),n.video={contentType:o,width:i.width||1,height:i.height||1,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(r&&(o=ml(r.codecs),o=jn(r.mimeType,o,"audio"),n.audio={contentType:o,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio}),s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[n];e=[],o=new Map,s=h(s);for(var u=s.next();!u.done;u=s.next()){var a=u.value;o.get(a.keySystem)||o.set(a.keySystem,[]),o.get(a.keySystem).push(a)}s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],a=h(o.keys());for(var l=a.next();!l.done;l=a.next()){var c=l.value;l=Object.assign({},n);var f=o.get(c);for(c={keySystem:c,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},f=h(f),u=f.next();!u.done;u=f.next()){if(u=u.value,u.initData&&u.initData.length){for(var d=new Set,g=h(u.initData),v=g.next();!v.done;v=g.next())d.add(v.value.initDataType);c.initDataType=u.initData[0].initDataType}u.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),u.persistentStateRequired&&(c.persistentState="required"),u.sessionType&&(c.sessionTypes=[u.sessionType]),r&&(c.audio?c.audio.robustness=c.audio.robustness||u.audioRobustness:c.audio={robustness:u.audioRobustness}),i&&(c.video?c.video.robustness=c.video.robustness||u.videoRobustness:c.video={robustness:u.videoRobustness})}l.keySystemConfiguration=c,e.push(l)}return e}function ml(e){return hn()&&e.toLowerCase()=="ac-3"?"ec-3":e}function Is(e){return e=="vp9"?"vp09.00.10.08":e}function vl(e,t){t.variants=t.variants.filter(function(n){var r=n.audio;return n=n.video,!(r&&e&&e.audio&&!yl(r,e.audio)||n&&e&&e.video&&!yl(n,e.video))})}function nm(e){e.textStreams=e.textStreams.filter(function(t){return Ar(wt(t.mimeType,t.codecs))})}function rm(e){e.imageStreams=e.imageStreams.filter(function(t){var n=["image/svg+xml","image/png","image/jpeg"];return(Ue("Web0S")||hn()||kr())&&n.push("image/webp"),n.includes(t.mimeType)})}function yl(e,t){return!(e.mimeType!=t.mimeType||e.codecs.split(".")[0]!=t.codecs.split(".")[0])}function pn(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,o=[];i&&o.push(i),r&&o.push(r);var s=[];n&&s.push(n.mimeType),t&&s.push(t.mimeType),s=s[0]||null;var u=[];t&&u.push(t.kind),n&&u.push(n.kind),u=u[0]||null;var a=new Set;if(t)for(var l=h(t.roles),c=l.next();!c.done;c=l.next())a.add(c.value);if(n)for(l=h(n.roles),c=l.next();!c.done;c=l.next())a.add(c.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:u,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:s,codecs:o.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(a),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function Rr(e){return{id:e.id,active:!1,type:re,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function wl(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&t!=null&&(t/=Number(i.split("x")[0])),i&&n!=null&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function As(e){return e.__shaka_id||(e.__shaka_id=om++),e.__shaka_id}function Tl(e){var t=xl(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Ii(e){var t=xl(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function xl(e){return{id:As(e),active:!1,type:"",bandwidth:0,language:J(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Dr(e){return e.allowedByApplication&&e.allowedByKeySystem}function im(e){return e.filter(function(t){return Dr(t)})}function Sl(e,t){var n=e.filter(function(s){return s.audio&&s.audio.channelsCount}),r=new Map;n=h(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var o=i.audio.channelsCount;r.has(o)||r.set(o,[]),r.get(o).push(i)}return n=Array.from(r.keys()),n.length==0?e:(i=n.filter(function(s){return s<=t}),i.length?r.get(Math.max.apply(Math,fe(i))):r.get(Math.min.apply(Math,fe(n))))}function Ms(e,t,n,r){var i=e,o=e.filter(function(a){return a.primary});o.length&&(i=o);var s=i.length?i[0].language:"";if(i=i.filter(function(a){return a.language==s}),t){var u=Si(J(t),e.map(function(a){return a.language}));u&&(i=e.filter(function(a){return J(a.language)==u}))}if(i=i.filter(function(a){return a.forced==r}),n){if(e=El(i,n),e.length)return e}else if(e=i.filter(function(a){return a.roles.length==0}),e.length)return e;return e=i.map(function(a){return a.roles}).reduce(ds,[]),e.length?El(i,e[0]):i}function El(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Il(e){var t=[];return e.audio&&t.push(Al(e.audio)),e.video&&t.push(Al(e.video)),t.join(", ")}function Al(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}var om=0,sm="smooth",um="powerEfficient",am="bandwidth";function xe(){var e=this;this.j=null,this.i=!1,this.g=new mi,navigator.connection&&navigator.connection.addEventListener("change",function(){if(e.m.useNetworkInformation&&e.i){e.g=new mi,e.m&&e.g.configure(e.m.advanced);var t=e.chooseVariant();t&&e.j(t)}}),this.h=[],this.o=1,this.s=!1,this.m=this.l=null}p=xe.prototype,p.stop=function(){this.j=null,this.i=!1,this.h=[],this.o=1,this.l=null},p.init=function(e){this.j=e},p.chooseVariant=function(){var e=Cl(this.m.restrictions,this.h),t=this.g.getBandwidthEstimate(Ml(this));this.h.length&&!e.length&&(e=Cl(null,this.h),e=[e[0]]);var n=e[0]||null;e=h(Be(e));for(var r=e.next();!r.done;r=e.next()){var i=r.value;r=i.item;var o=isNaN(this.o)?1:Math.abs(this.o);i=o*(i.next||{bandwidth:1/0}).bandwidth/this.m.bandwidthUpgradeTarget,t>=o*r.bandwidth/this.m.bandwidthDowngradeTarget&&t<=i&&(n=r)}return this.l=Date.now(),n},p.enable=function(){this.i=!0},p.disable=function(){this.i=!1},p.segmentDownloaded=function(e,t){var n=this.g;if(!(t<n.l)){var r=8e3*t/e,i=e/1e3;n.g+=t,ns(n.h,i,r),ns(n.j,i,r)}if(this.l!=null&&this.i)e:{if(this.s){if(Date.now()-this.l<1e3*this.m.switchInterval)break e}else{if(n=this.g,!(n.g>=n.i))break e;this.s=!0}n=this.chooseVariant(),this.g.getBandwidthEstimate(Ml(this)),n&&this.j(n)}},p.getBandwidthEstimate=function(){return this.g.getBandwidthEstimate(this.m.defaultBandwidthEstimate)},p.setVariants=function(e){this.h=e},p.playbackRateChanged=function(e){this.o=e},p.configure=function(e){this.m=e,this.g&&this.m&&this.g.configure(this.m.advanced)};function Ml(e){var t=e.m.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.m.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function Cl(e,t){return e&&(t=t.filter(function(n){return Es(n,e,{width:1/0,height:1/0})})),t.sort(function(n,r){return n.bandwidth-r.bandwidth})}O("shaka.abr.SimpleAbrManager",xe),xe.prototype.configure=xe.prototype.configure,xe.prototype.playbackRateChanged=xe.prototype.playbackRateChanged,xe.prototype.setVariants=xe.prototype.setVariants,xe.prototype.getBandwidthEstimate=xe.prototype.getBandwidthEstimate,xe.prototype.segmentDownloaded=xe.prototype.segmentDownloaded,xe.prototype.disable=xe.prototype.disable,xe.prototype.enable=xe.prototype.enable,xe.prototype.chooseVariant=xe.prototype.chooseVariant,xe.prototype.init=xe.prototype.init,xe.prototype.stop=xe.prototype.stop;function Ai(e,t){this.h=e,this.g=new Set([e]),t=t||[];for(var n=h(t),r=n.next();!r.done;r=n.next())this.add(r.value)}Ai.prototype.add=function(e){return Cs(this.h,e)?(this.g.add(e),!0):!1};function Cs(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!((!(!n.channelsCount||!r.channelsCount||2<n.channelsCount||2<r.channelsCount)||n.channelsCount==r.channelsCount)&&kl(n,r)&&Rl(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=e.video,r=t.video,n=!(kl(n,r)&&Rl(n.roles,r.roles))),!n}Ai.prototype.values=function(){return this.g.values()};function kl(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map(function(s){return et(s)}),r=t.codecs.split(",").map(function(s){return et(s)});if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=h(Qe(n.length)),o=i.next();!o.done;o=i.next())if(o=o.value,n[o]!=r[o])return!1;return!0}function Rl(e,t){var n=new Set(e),r=new Set(t);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;n=h(n);for(var i=n.next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function Dl(e){this.g=e,this.h=new Bn(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}Dl.prototype.create=function(e){var t=this,n=e.filter(function(r){return Cs(t.g,r)});return n.length?new Ai(n[0],n):this.h.create(e)};function Bn(e,t,n,r){this.i=e,this.j=t,this.g=n,this.h=r===void 0?"":r}Bn.prototype.create=function(e){var t=[];t=lm(e,this.i);var n=e.filter(function(r){return r.primary});for(t=t.length?t:n.length?n:e,e=cm(t,this.j),e.length&&(t=e),this.g&&(e=Sl(t,this.g),e.length&&(t=e)),this.h&&(e=fm(t,this.h),e.length&&(t=e)),e=new Ai(t[0]),t=h(t),n=t.next();!n.done;n=t.next())n=n.value,Cs(e.h,n)&&e.add(n);return e};function lm(e,t){var n=J(t),r=Si(n,e.map(function(i){return Ts(i)}));return r?e.filter(function(i){return r==Ts(i)}):[]}function cm(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function fm(e,t){return e.filter(function(n){return n.audio?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function dm(){this.g=Mi,this.h=new Map().set(Mi,2).set(Fn,1)}function Nl(e,t,n){e.h.set(Mi,n).set(Fn,t)}var Fn=0,Mi=1;function Pl(e,t){var n=Vn();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.s=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.o=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function bl(e){var t,n;return E(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new x(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.s),m(r,new Promise(function(i){new G(i).W(n/1e3)}),2))}e.h*=e.o,b(r)})}function Vn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function de(e,t){this.promise=e,this.i=t,this.g=!1}function gn(e){return new de(Promise.reject(e),function(){return Promise.resolve()})}function ks(){var e=Promise.reject(new x(2,7,7001));return e.catch(function(){}),new de(e,function(){return Promise.resolve()})}function Hn(e){return new de(Promise.resolve(e),function(){return Promise.resolve()})}function Tt(e){return new de(e,function(){return e.catch(function(){})})}de.prototype.abort=function(){return this.g=!0,this.i()};function Ll(e){return new de(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}de.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},de.prototype.fa=function(e,t){function n(u){return function(a){if(i.g&&u)o.reject(s);else{var l=u?e:t;l?r=hm(l,a,o):(u?o.resolve:o.reject)(a)}}}function r(){return o.reject(s),i.abort()}var i=this,o=new ae,s=new x(2,7,7001);return this.promise.then(n(!0),n(!1)),new de(o,function(){return r()})};function hm(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}O("shaka.util.AbortableOperation",de),de.prototype.chain=de.prototype.fa,de.prototype.finally=de.prototype.finally,de.all=Ll,de.prototype.abort=de.prototype.abort,de.notAbortable=Tt,de.completed=Hn,de.aborted=ks,de.failed=gn;function U(e,t){if(t)if(t instanceof Map)for(var n=h(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=R.performance&&R.performance.now?R.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function jl(e){var t=new U(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}U.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},U.prototype.stopImmediatePropagation=function(){this.g=!0},U.prototype.stopPropagation=function(){},O("shaka.util.FakeEvent",U);function $(){this.$=new On,this.Ec=this}$.prototype.addEventListener=function(e,t){this.$&&this.$.push(e,t)},$.prototype.removeEventListener=function(e,t){this.$&&this.$.remove(e,t)},$.prototype.dispatchEvent=function(e){if(!this.$)return!0;var t=this.$.get(e.type)||[],n=this.$.get("All");for(n&&(t=t.concat(n)),t=h(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ec,e.currentTarget=this.Ec;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},$.prototype.release=function(){this.$=null};function qn(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer&&r.buffer.constructor==ArrayBuffer)return r;if(n.has(r))return null;var i=r.constructor==Array;if(r.constructor!=Object&&!i)return null;n.add(r);var o=i?[]:{},s;for(s in r)o[s]=t(r[s]);return i&&(o.length=r.length),o}}var n=new Set;return t(e)}function Ol(e){var t={},n;for(n in e)t[n]=e[n];return t}function Ci(){this.g=[]}function Kn(e,t){e.g.push(t.finally(function(){st(e.g,t)}))}Ci.prototype.destroy=function(){for(var e=[],t=h(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function ie(e,t,n){$.call(this),this.i=!1,this.o=new Ci,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.u=n||null,this.s=!1}Ne(ie,$),p=ie.prototype,p.Xd=function(e){this.s=e};function Ct(e,t,n,r){n=n||Bl;var i=Ri[e];(!i||n>=i.priority)&&(Ri[e]={priority:n,Rf:t,Tf:r===void 0?!1:r})}p.Uf=function(e){this.g.add(e)},p.kg=function(e){this.g.delete(e)},p.Xe=function(){this.g.clear()},p.Vf=function(e){this.h.add(e)},p.lg=function(e){this.h.delete(e)},p.Ye=function(){this.h.clear()};function at(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,streamDataCallback:n===void 0?null:n}}p.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),$.prototype.release.call(this),this.o.destroy()},p.request=function(e,t){var n=this,r=new Ul;if(this.i){var i=Promise.reject(new x(2,7,7001));return i.catch(function(){}),new ki(i,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?qn(t.retryParameters):Vn(),t.uris=qn(t.uris),i=pm(this,e,t);var o=i.fa(function(){return _l(n,e,t,new Pl(t.retryParameters,!1),0,null,r)}),s=o.fa(function(f){return gm(n,e,f)}),u=Date.now(),a=0;i.promise.then(function(){a=Date.now()-u},function(){});var l=0;o.promise.then(function(){l=Date.now()},function(){});var c=s.fa(function(f){var d=Date.now()-l,g=f.response;return g.timeMs+=a,g.timeMs+=d,f.Gf||!n.l||g.fromCache||e!=kt||n.l(g.timeMs,g.data.byteLength),g},function(f){throw f&&(f.severity=2),f});return i=new ki(c.promise,function(){return c.abort()},r),Kn(this.o,i),i};function pm(e,t,n){var r=Hn(void 0),i={};e=h(e.g);for(var o=e.next();!o.done;i={ld:i.ld},o=e.next())i.ld=o.value,r=r.fa(function(s){return function(){return n.body&&(n.body=vt(n.body)),s.ld(t,n)}}(i));return r.fa(void 0,function(s){throw s instanceof x&&s.code==7001?s:new x(2,1,1006,s)})}function _l(e,t,n,r,i,o,s){e.s&&(n.uris[i]=n.uris[i].replace("http://","https://"));var u=new Ze(n.uris[i]),a=u.Ia,l=!1;a||(a=location.protocol,a=a.slice(0,-1),yi(u,a),n.uris[i]=u.toString()),a=a.toLowerCase();var c=(a=Ri[a])?a.Rf:null;if(!c)return gn(new x(2,1,1e3,u));var f=a.Tf,d=null,g=null,v=!1,y=!1,T;return Tt(bl(r)).fa(function(){if(e.i)return ks();T=Date.now();var w=c(n.uris[i],n,t,function(S,C,k){d&&d.stop(),g&&g.W(I/1e3),e.l&&t==kt&&(e.l(S,C),l=!0,s.g=k)},function(S){e.j&&e.j(S,n,t),y=!0});if(!f)return w;var A=n.retryParameters.connectionTimeout;A&&(d=new G(function(){v=!0,w.abort()}),d.W(A/1e3));var I=n.retryParameters.stallTimeout;return I&&(g=new G(function(){v=!0,w.abort()})),w}).fa(function(w){d&&d.stop(),g&&g.stop(),w.timeMs==null&&(w.timeMs=Date.now()-T);var A={response:w,Gf:l};return!y&&e.j&&e.j(w.headers,n,t),A},function(w){if(d&&d.stop(),g&&g.stop(),e.u){var A=null,I=0;w instanceof x&&(A=w,w.code==1001&&(I=w.data[1])),e.u(n,A,I,v)}if(e.i)return ks();if(v&&(w=new x(1,1,1003,n.uris[i],t)),w instanceof x){if(w.code==7001)throw w;if(w.code==1010)throw o;if(w.severity==1)return A=new Map().set("error",w),A=new U("retry",A),e.dispatchEvent(A),i=(i+1)%n.uris.length,_l(e,t,n,r,i,w,s)}throw w})}function gm(e,t,n){var r=Hn(void 0),i={};e=h(e.h);for(var o=e.next();!o.done;i={md:i.md},o=e.next())i.md=o.value,r=r.fa(function(s){return function(){var u=n.response;return u.data&&(u.data=vt(u.data)),s.md(t,u)}}(i));return r.fa(function(){return n},function(s){var u=2;if(s instanceof x){if(s.code==7001)throw s;u=s.severity}throw new x(u,1,1007,s)})}O("shaka.net.NetworkingEngine",ie),ie.prototype.request=ie.prototype.request,ie.prototype.destroy=ie.prototype.destroy,ie.makeRequest=at,ie.defaultRetryParameters=function(){return Vn()},ie.prototype.clearAllResponseFilters=ie.prototype.Ye,ie.prototype.unregisterResponseFilter=ie.prototype.lg,ie.prototype.registerResponseFilter=ie.prototype.Vf,ie.prototype.clearAllRequestFilters=ie.prototype.Xe,ie.prototype.unregisterRequestFilter=ie.prototype.kg,ie.prototype.registerRequestFilter=ie.prototype.Uf,ie.unregisterScheme=function(e){delete Ri[e]},ie.registerScheme=Ct,ie.prototype.setForceHTTPS=ie.prototype.Xd;function Ul(){this.g=0}ie.NumBytesRemainingClass=Ul;function ki(e,t,n){de.call(this,e,t),this.h=n}Ne(ki,de),ie.PendingRequest=ki;var kt=1;ie.RequestType={MANIFEST:0,SEGMENT:kt,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5};var Bl=3;ie.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Bl};var Ri={};function mn(e){this.g=!1,this.h=new ae,this.i=e}mn.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function le(e,t){if(e.g)throw t instanceof x&&t.code==7003?t:new x(2,7,7003,t)}function ue(){this.g=new On}p=ue.prototype,p.release=function(){this.vb(),this.g=null},p.C=function(e,t,n,r){this.g&&(e=new Fl(e,t,n,r),this.g.push(t,e))},p.ya=function(e,t,n,r){function i(s){o.Ga(e,t,i),n(s)}var o=this;this.C(e,t,i,r)},p.Ga=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=h(r);for(var i=r.next();!i.done;i=r.next())i=i.value,i.target!=e||n!=i.listener&&n||(i.Ga(),this.g.remove(t,i))}},p.vb=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,fe(e.g[n]));for(e=h(t),t=e.next();!t.done;t=e.next())t.value.Ga();this.g.g={}}},O("shaka.util.EventManager",ue),ue.prototype.removeAll=ue.prototype.vb,ue.prototype.unlisten=ue.prototype.Ga,ue.prototype.listenOnce=ue.prototype.ya,ue.prototype.listen=ue.prototype.C,ue.prototype.release=ue.prototype.release;function Fl(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=mm(e,r),this.target.addEventListener(t,n,this.g)}Fl.prototype.Ga=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function mm(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),vm(e)?t:t.capture||!1}function vm(e){var t=Vl;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch{t=!1}Vl=t}return t||!1}var Vl=void 0;function Rs(){}function Hl(e){return e=xi(e),new Ze(e).Ka}function ql(e,t,n){function r(u){Ve(o).setUint32(s,u.byteLength,!0),s+=4,o.set(Q(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new x(2,6,6015);var i;typeof t=="string"?i=ps(t,!0):i=t,e=xi(e),e=ps(e,!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),s=0;return r(e),r(i),r(n),o}O("shaka.util.FairPlayUtils",Rs),Rs.initDataTransform=ql,Rs.defaultGetContentId=Hl;function Nr(e){for(var t=new Map,n=h(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Ds(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function ym(e,t){if(e||t){if(e&&!t||t&&!e)return!1}else return!0;if(e.size!=t.size)return!1;for(var n=h(e),r=n.next();!r.done;r=n.next()){var i=h(r.value);if(r=i.next().value,i=i.next().value,!t.has(r)||(r=t.get(r),r!=i||r==null))return!1}return!0}function Di(e,t){var n=this;t=t===void 0?1:t,this.B=e,this.F=new Set,this.g=this.o=null,this.na=this.$=!1,this.G=0,this.i=null,this.h=new ue,this.j=new Map,this.u=[],this.s=new ae,this.m=null,this.l=function(r){n.s.reject(r),e.onError(r)},this.oa=new Map,this.da=new Map,this.P=new G(function(){return Rm(n)}),this.J=!1,this.I=[],this.M=!1,this.ma=new G(function(){Pm(n)}).Fa(t),this.s.catch(function(){}),this.K=new mn(function(){return wm(n)}),this.S=!1}p=Di.prototype,p.destroy=function(){return this.K.destroy()};function wm(e){return E(function(t){switch(t.g){case 1:return e.h.release(),e.h=null,e.s.reject(),e.ma.stop(),e.ma=null,e.P.stop(),e.P=null,m(t,Ql(e),2);case 2:if(!e.g){t.A(3);break}return q(t,4),m(t,e.g.setMediaKeys(null),6);case 6:ee(t,5);break;case 4:K(t);case 5:e.g=null;case 3:e.i=null,e.F.clear(),e.o=null,e.u=[],e.m=null,e.l=function(){},e.B=null,e.S=!1,b(t)}})}p.configure=function(e){this.m=e};function Tm(e,t,n){return e.na=!0,e.u=[],e.J=n,Gl(e,t)}function Kl(e,t,n){return e.u=n,e.J=0<n.length,Gl(e,t)}function xm(e,t,n,r,i,o){var s=new Map;return i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},i.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,i),Yl(e,s,[])}function Gl(e,t){var n,r,i,o,s,u,a,l,c,f,d,g,v,y;return E(function(T){if(T.g==1){if(n=Am(e))for(r=h(t),i=r.next();!i.done;i=r.next())o=i.value,o.video&&(o.video.drmInfos=[n]),o.audio&&(o.audio.drmInfos=[n]);for(s=t.some(function(w){return!!(w.video&&w.video.drmInfos.length||w.audio&&w.audio.drmInfos.length)}),s||(u=Nr(e.m.servers),bm(t,u)),a=h(t),i=a.next();!i.done;i=a.next())for(l=i.value,c=Zl(l),f=h(c),d=f.next();!d.done;d=f.next())g=d.value,Lm(g,Nr(e.m.servers),Nr(e.m.advanced||{}));return m(T,gl(t,e.J,e.S),2)}return v=s||Object.keys(e.m.servers).length,v?(y=Yl(e,void 0,t),T.return(s?y:y.catch(function(){}))):(e.$=!0,T.return(Promise.resolve()))})}p.bc=function(e){var t=this,n,r;return E(function(i){if(i.g==1)return t.o?(t.g=e,t.h.ya(t.g,"play",function(){for(var o=h(t.I),s=o.next();!s.done;s=o.next())Ps(t,s.value);t.M=!0,t.I=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.g&&t.h.C(t.g,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Ql(t)}),n=t.g.setMediaKeys(t.o),n=n.catch(function(o){return Promise.reject(new x(2,6,6003,o.message))}),m(i,n,2)):(t.h.ya(e,"encrypted",function(){t.l(new x(2,6,6010))}),i.return());le(t.K),zl(t),t.i.initData.length||t.u.length||(r=function(o){return Ni(t,o.initDataType,Q(o.initData))},t.h.C(t.g,"encrypted",r)),b(i)})};function Ns(e){var t,n,r,i,o;return E(function(s){switch(s.g){case 1:if(!e.o||!e.i)return s.return();if(!e.i.serverCertificateUri||e.i.serverCertificate&&e.i.serverCertificate.length){s.A(2);break}return t=at([e.i.serverCertificateUri],e.m.retryParameters),q(s,3),n=e.B.sb.request(5,t),m(s,n.promise,5);case 5:r=s.h,e.i.serverCertificate=Q(r.data),ee(s,4);break;case 3:throw i=K(s),new x(2,6,6017,i);case 4:if(e.K.g)return s.return();case 2:return!e.i.serverCertificate||!e.i.serverCertificate.length?s.return():(q(s,6),m(s,e.o.setServerCertificate(e.i.serverCertificate),8));case 8:ee(s,0);break;case 6:throw o=K(s),new x(2,6,6004,o.message)}})}function Sm(e,t){var n,r,i;return E(function(o){if(o.g==1)return m(o,$l(e,t),2);if(o.g!=3)return n=o.h,n?(r=[],(i=e.j.get(n))&&(i.Oa=new ae,r.push(i.Oa)),r.push(n.remove()),m(o,Promise.all(r),3)):o.return();e.j.delete(n),b(o)})}function zl(e){for(var t=(e.i?e.i.initData:[])||[],n=h(t),r=n.next();!r.done;r=n.next())r=r.value,Ni(e,r.initDataType,r.initData);for(n=h(e.u),r=n.next();!r.done;r=n.next())$l(e,r.value);return t.length||e.u.length||e.s.resolve(),e.s}function Ni(e,t,n){var r=e.j.values();r=h(r);for(var i=r.next();!i.done;i=r.next())if(mt(n,i.value.initData)&&!Ue("Tizen 2"))return;Mm(e,t,n,e.i.sessionType)}function Xl(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Wl(e){return e=e.j.keys(),e=Va(e,function(t){return t.sessionId}),Array.from(e)}p.fc=function(){var e=1/0,t=this.j.keys();t=h(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},p.Mc=function(){return Ds(this.da)};function Yl(e,t,n){var r,i,o,s,u,a,l,c,f,d,g,v,y;return E(function(T){switch(T.g){case 1:if(r=new Map,n.length){i=Em(e,n,r),T.A(2);break}return m(T,Im(e,t),3);case 3:i=T.h;case 2:if(o=i,!o)throw new x(2,6,6001);for(le(e.K),q(T,4),e.F.clear(),s=o.getConfiguration(),u=s.audioCapabilities||[],a=s.videoCapabilities||[],l=h(u),c=l.next();!c.done;c=l.next())f=c.value,e.F.add(f.contentType.toLowerCase());for(d=h(a),c=d.next();!c.done;c=d.next())g=c.value,e.F.add(g.contentType.toLowerCase());if(n.length){var w=o.keySystem,A=r.get(o.keySystem),I=[],S=[],C=[],k=[],D=new Set;ec(A,I,C,S,k,D);var P=e.J?"persistent-license":"temporary";for(w={keySystem:w,licenseServerUri:I[0],distinctiveIdentifierRequired:A[0].distinctiveIdentifierRequired,persistentStateRequired:A[0].persistentStateRequired,sessionType:A[0].sessionType||P,audioRobustness:A[0].audioRobustness||"",videoRobustness:A[0].videoRobustness||"",serverCertificate:C[0],serverCertificateUri:S[0],initData:k,keyIds:D},A=h(A),I=A.next();!I.done;I=A.next())I=I.value,I.distinctiveIdentifierRequired&&(w.distinctiveIdentifierRequired=I.distinctiveIdentifierRequired),I.persistentStateRequired&&(w.persistentStateRequired=I.persistentStateRequired);A=w}else A=o.keySystem,w=t.get(o.keySystem),I=[],S=[],C=[],k=[],D=new Set,ec(w.drmInfos,I,C,S,k,D),A={keySystem:A,licenseServerUri:I[0],distinctiveIdentifierRequired:w.distinctiveIdentifier=="required",persistentStateRequired:w.persistentState=="required",sessionType:w.sessionTypes[0]||"temporary",audioRobustness:(w.audioCapabilities?w.audioCapabilities[0].robustness:"")||"",videoRobustness:(w.videoCapabilities?w.videoCapabilities[0].robustness:"")||"",serverCertificate:C[0],serverCertificateUri:S[0],initData:k,keyIds:D};if(e.i=A,!e.i.licenseServerUri)throw new x(2,6,6012,e.i.keySystem);return m(T,o.createMediaKeys(),6);case 6:return v=T.h,le(e.K),e.o=v,e.$=!0,m(T,Ns(e),7);case 7:le(e.K),ee(T,0);break;case 4:throw y=K(T),le(e.K,y),e.i=null,e.F.clear(),y instanceof x?y:new x(2,6,6002,y.message)}})}function Em(e,t,n){for(var r=h(t),i=r.next();!i.done;i=r.next()){var o=h(Zl(i.value));for(i=o.next();!i.done;i=o.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i)}if(n.size==1&&n.has(""))throw new x(2,6,6e3);for(r={},e=h(e.m.preferredKeySystems),i=e.next();!i.done;r={jd:r.jd},i=e.next())for(r.jd=i.value,o=h(t),i=o.next();!i.done;i=o.next())if(i=i.value.decodingInfos.find(function(l){return function(c){return c.supported&&c.keySystemAccess!=null&&c.keySystemAccess.keySystem==l.jd}}(r)))return i.keySystemAccess;for(e=h([!0,!1]),i=e.next();!i.done;i=e.next())for(r=i.value,o=h(t),i=o.next();!i.done;i=o.next()){var s=h(i.value.decodingInfos);for(i=s.next();!i.done;i=s.next()){var u=i.value;if(u.supported&&u.keySystemAccess){i=n.get(u.keySystemAccess.keySystem);var a=h(i);for(i=a.next();!i.done;i=a.next())if(!!i.value.licenseServerUri==r)return u.keySystemAccess}}}return null}function Im(e,t){var n,r,i,o,s,u,a,l,c,f,d,g,v,y,T;return E(function(w){switch(w.g){case 1:if(t.size==1&&t.has(""))throw new x(2,6,6e3);for(r=h(t.values()),i=r.next();!i.done;i=r.next())o=i.value,o.audioCapabilities.length==0&&delete o.audioCapabilities,o.videoCapabilities.length==0&&delete o.videoCapabilities;s=h(e.m.preferredKeySystems),u=s.next();case 2:if(u.done){w.A(4);break}if(a=u.value,!t.has(a)){w.A(3);break}return l=t.get(a),q(w,6),m(w,navigator.requestMediaKeySystemAccess(a,[l]),8);case 8:return n=w.h,w.return(n);case 6:K(w);case 7:le(e.K);case 3:u=s.next(),w.A(2);break;case 4:c=h([!0,!1]),f=c.next();case 9:if(f.done){w.A(11);break}d=f.value,g=h(t.keys()),u=g.next();case 12:if(u.done){f=c.next(),w.A(9);break}if(v=u.value,y=t.get(v),T=y.drmInfos.some(function(A){return!!A.licenseServerUri}),T!=d){w.A(13);break}return q(w,15),m(w,navigator.requestMediaKeySystemAccess(v,[y]),17);case 17:return n=w.h,w.return(n);case 15:K(w);case 16:le(e.K);case 13:u=g.next(),w.A(12);break;case 11:return w.return(n)}})}function Am(e){if(e=Nr(e.m.clearKeys),e.size==0)return null;var t=[],n=[];e.forEach(function(i,o){var s=ms(o),u=ms(i);s={kty:"oct",kid:Ln(s,!1),k:Ln(u,!1)},t.push(s),n.push(s.kid)}),e=JSON.stringify({keys:t});var r=JSON.stringify({kids:n});return r=[{initData:Q(fn(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+R.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(n)}}function $l(e,t){var n,r,i,o,s;return E(function(u){switch(u.g){case 1:try{n=e.o.createSession("persistent-license")}catch(a){return r=new x(2,6,6005,a.message),e.l(r),u.return(Promise.reject(r))}return e.h.C(n,"message",function(a){e.g&&e.m.delayLicenseRequestUntilPlayed&&e.g.paused&&!e.M?e.I.push(a):Ps(e,a)}),e.h.C(n,"keystatuseschange",function(a){return Jl(e,a)}),i={initData:null,loaded:!1,Nd:1/0,Oa:null,type:"persistent-license"},e.j.set(n,i),q(u,2),m(u,n.load(t),4);case 4:return o=u.h,le(e.K),o?(i.loaded=!0,bs(e)&&e.s.resolve(),u.return(n)):(e.j.delete(n),e.l(new x(2,6,6013)),u.return(Promise.resolve()));case 2:s=K(u),le(e.K,s),e.j.delete(n),e.l(new x(2,6,6005,s.message));case 3:return u.return(Promise.resolve())}})}function Mm(e,t,n,r){try{var i=e.o.createSession(r)}catch(o){e.l(new x(2,6,6005,o.message));return}e.h.C(i,"message",function(o){e.g&&e.m.delayLicenseRequestUntilPlayed&&e.g.paused&&!e.M?e.I.push(o):Ps(e,o)}),e.h.C(i,"keystatuseschange",function(o){return Jl(e,o)}),e.j.set(i,{initData:n,loaded:!1,Nd:1/0,Oa:null,type:r});try{n=e.m.initDataTransform(n,t,e.i)}catch(o){t=o,o instanceof x||(t=new x(2,6,6016,o)),e.l(t);return}e.m.logLicenseExchange&&Ln(n),i.generateRequest(t,n).catch(function(o){if(!e.K.g){e.j.delete(i);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;0>u&&(u+=Math.pow(2,32)),u="0x"+u.toString(16)}e.l(new x(2,6,6006,o.message,o,u))}})}function Cm(e,t,n){return t=="skd"&&(t=n.serverCertificate,n=Hl(e),e=ql(e,n,t)),e}function Ps(e,t){var n,r,i,o,s,u,a,l,c,f,d,g,v,y;E(function(T){switch(T.g){case 1:return n=t.target,e.m.logLicenseExchange&&Ln(t.message),r=e.j.get(n),i=e.i.licenseServerUri,o=e.m.advanced[e.i.keySystem],t.messageType=="individualization-request"&&o&&o.individualizationServer&&(i=o.individualizationServer),s=at([i],e.m.retryParameters),s.body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,Xl(e.i.keySystem)&&km(s),u=Date.now(),q(T,2),l=e.B.sb.request(2,s),m(T,l.promise,4);case 4:a=T.h,ee(T,3);break;case 2:return c=K(T),f=new x(2,6,6007,c),e.l(f),r&&r.Oa&&r.Oa.reject(f),T.return();case 3:return e.K.g?T.return():(e.G+=(Date.now()-u)/1e3,e.m.logLicenseExchange&&Ln(a.data),q(T,5),m(T,n.update(a.data),7));case 7:ee(T,6);break;case 5:return d=K(T),g=new x(2,6,6008,d.message),e.l(g),r&&r.Oa&&r.Oa.reject(g),T.return();case 6:v=new U("drmsessionupdate"),e.B.onEvent(v),r&&(r.Oa&&r.Oa.resolve(),y=new G(function(){r.loaded=!0,bs(e)&&e.s.resolve()}),y.W(Om)),b(T)}})}function km(e){var t=Xt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){t=new DOMParser().parseFromString(t,"application/xml");for(var n=h(t.getElementsByTagName("HttpHeader")),r=n.next();!r.done;r=n.next())r=r.value,e.headers[r.getElementsByTagName("name")[0].textContent]=r.getElementsByTagName("value")[0].textContent;e.body=Wt(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}function Jl(e,t){var n=t.target,r=e.j.get(n),i=!1;n.keyStatuses.forEach(function(s,u){if(typeof u=="string"){var a=u;u=s,s=a}if(Xl(e.i.keySystem)&&u.byteLength==16&&navigator.userAgent.match(/Edge?\//)){a=Ve(u);var l=a.getUint32(0,!0),c=a.getUint16(4,!0),f=a.getUint16(6,!0);a.setUint32(0,l,!1),a.setUint16(4,c,!1),a.setUint16(6,f,!1)}s!="status-pending"&&(r.loaded=!0),s=="expired"&&(i=!0),a=Sr(u),e.oa.set(a,s)});var o=n.expiration-Date.now();(0>o||i&&1e3>o)&&r&&!r.Oa&&(e.j.delete(n),n.close().catch(function(){})),bs(e)&&(e.s.resolve(),e.P.W(_m))}function Rm(e){var t=e.oa,n=e.da;n.clear(),t.forEach(function(r,i){return n.set(i,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.l(new x(2,6,6014)),e.B.Tc(Ds(n))}function Dm(){var e,t,n,r,i,o,s,u;return E(function(a){return a.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},i=[r,n],o=new Map,s=function(l){var c,f,d;return E(function(g){switch(g.g){case 1:return q(g,2),m(g,navigator.requestMediaKeySystemAccess(l,i),4);case 4:return c=g.h,d=(f=c.getConfiguration().sessionTypes)?f.includes("persistent-license"):!1,Ue("Tizen 3")&&(d=!1),o.set(l,{persistentState:d}),m(g,c.createMediaKeys(),5);case 5:ee(g,0);break;case 2:K(g),o.set(l,null),b(g)}})},u=e.map(function(l){return s(l)}),m(a,Promise.all(u),2)):a.return(Ds(o))})}function Nm(e){var t;return E(function(n){if(n.g==1)return t=new Promise(function(r,i){new G(i).W(jm)}),q(n,2),m(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return ee(n,0);K(n),b(n)})}function Ql(e){var t;return E(function(n){return t=Array.from(e.j.entries()),e.j.clear(),m(n,Promise.all(t.map(function(r){r=h(r);var i=r.next().value,o=r.next().value;return E(function(s){if(s.g==1)return q(s,2),e.na||e.u.includes(i.sessionId)||o.type!=="persistent-license"?m(s,Nm(i),5):m(s,i.remove(),5);if(s.g!=2)return ee(s,0);K(s),b(s)})})),0)})}function Pi(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=h(e),i=r.next();!i.done;i=r.next()){i=i.value;for(var o={},s=h(t),u=s.next();!u.done;o={Ha:o.Ha},u=s.next())if(u=u.value,i.keySystem==u.keySystem){o.Ha=[],o.Ha=o.Ha.concat(i.initData||[]),o.Ha=o.Ha.concat(u.initData||[]),o.Ha=o.Ha.filter(function(a){return function(l,c){return l.keyId===void 0||c===a.Ha.findIndex(function(f){return f.keyId===l.keyId})}}(o)),s=i.keyIds&&u.keyIds?new Set([].concat(fe(i.keyIds),fe(u.keyIds))):i.keyIds||u.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||u.persistentStateRequired,videoRobustness:i.videoRobustness||u.videoRobustness,audioRobustness:i.audioRobustness||u.audioRobustness,serverCertificate:i.serverCertificate||u.serverCertificate,serverCertificateUri:i.serverCertificateUri||u.serverCertificateUri,initData:o.Ha,keyIds:s});break}}return n}function Zl(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Pm(e){e.j.forEach(function(t,n){var r=t.Nd,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.B.onExpirationUpdated(n.sessionId,i),t.Nd=i)})}function bs(e){return e=e.j.values(),Ng(e,function(t){return t.loaded})}function bm(e,t){var n=[];t.forEach(function(o,s){n.push({keySystem:s,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})});for(var r=h(e),i=r.next();!i.done;i=r.next())i=i.value,i.video&&(i.video.drmInfos=n),i.audio&&(i.audio.drmInfos=n)}function ec(e,t,n,r,i,o){var s={};e=h(e);for(var u=e.next();!u.done;s={ta:s.ta},u=e.next()){if(s.ta=u.value,t.includes(s.ta.licenseServerUri)||t.push(s.ta.licenseServerUri),r.includes(s.ta.serverCertificateUri)||r.push(s.ta.serverCertificateUri),s.ta.serverCertificate&&(n.some(function(c){return function(f){return mt(f,c.ta.serverCertificate)}}(s))||n.push(s.ta.serverCertificate)),s.ta.initData){u={};for(var a=h(s.ta.initData),l=a.next();!l.done;u={zc:u.zc},l=a.next())u.zc=l.value,i.some(function(c){return function(f){var d=c.zc;return f.keyId&&f.keyId==d.keyId?!0:f.initDataType==d.initDataType&&mt(f.initData,d.initData)}}(u))||i.push(u.zc)}if(s.ta.keyIds)for(u=h(s.ta.keyIds),a=u.next();!a.done;a=u.next())o.add(a.value)}}function Lm(e,t,n){e.keySystem&&(e.keySystem!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(e.keySystem)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(e.keySystem))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),R.cast&&R.cast.__platform__&&e.keySystem=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var jm=1,Om=5,_m=.5,Gn=new xr(function(){return vt(new Uint8Array([0]))});function bi(){}function tc(e,t,n,r){var i,o,s,u;return E(function(a){if(a.g==1)return r&&(i=nt[r.toLowerCase()])?a.return(i):(o=vn(e))&&(s=yn[o])?a.return(s):r?a.A(2):m(a,nc(e,t,n),3);if(a.g!=2&&(r=a.h)&&(u=nt[r]))return a.return(u);throw new x(2,4,4e3,e)})}function nc(e,t,n){var r,i,o;return E(function(s){return s.g==1?(r=at([e],n),r.method="HEAD",m(s,t.request(0,r).promise,2)):(i=s.h,o=i.headers["content-type"],s.return(o?o.toLowerCase().split(";").shift():""))})}function vn(e){return e=new Ze(e).Aa.split("/").pop().split("."),e.length==1?"":e.pop().toLowerCase()}O("shaka.media.ManifestParser",bi),bi.unregisterParserByMime=function(e){delete nt[e]},bi.registerParserByMime=function(e,t){nt[e]=t},bi.registerParserByExtension=function(e,t){yn[e]=t};var nt={},yn={};function Z(e,t){this.T=Ve(e),this.h=t==rc,this.g=0}p=Z.prototype,p.qa=function(){return this.g<this.T.byteLength},p.ba=function(){return this.g},p.lf=function(){return this.T.byteLength},p.ca=function(){try{var e=this.T.getUint8(this.g);return this.g+=1,e}catch{throw Rt()}},p.Pb=function(){try{var e=this.T.getUint16(this.g,this.h);return this.g+=2,e}catch{throw Rt()}},p.O=function(){try{var e=this.T.getUint32(this.g,this.h);return this.g+=4,e}catch{throw Rt()}},p.ze=function(){try{var e=this.T.getInt32(this.g,this.h);return this.g+=4,e}catch{throw Rt()}},p.Qb=function(){try{if(this.h)var e=this.T.getUint32(this.g,!0),t=this.T.getUint32(this.g+4,!0);else t=this.T.getUint32(this.g,!1),e=this.T.getUint32(this.g+4,!1)}catch{throw Rt()}if(2097151<t)throw new x(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},p.hb=function(e){if(this.g+e>this.T.byteLength)throw Rt();var t=Q(this.T,this.g,e);return this.g+=e,t},p.skip=function(e){if(this.g+e>this.T.byteLength)throw Rt();this.g+=e},p.Be=function(e){if(this.g<e)throw Rt();this.g-=e},p.seek=function(e){if(0>e||e>this.T.byteLength)throw Rt();this.g=e},p.qc=function(){for(var e=this.g;this.qa()&&this.T.getUint8(this.g)!=0;)this.g+=1;return e=Q(this.T,e,this.g-e),this.g+=1,be(e)};function Rt(){return new x(2,3,3e3)}O("shaka.util.DataViewReader",Z),Z.prototype.readTerminatedString=Z.prototype.qc,Z.prototype.seek=Z.prototype.seek,Z.prototype.rewind=Z.prototype.Be,Z.prototype.skip=Z.prototype.skip,Z.prototype.readBytes=Z.prototype.hb,Z.prototype.readUint64=Z.prototype.Qb,Z.prototype.readInt32=Z.prototype.ze,Z.prototype.readUint32=Z.prototype.O,Z.prototype.readUint16=Z.prototype.Pb,Z.prototype.readUint8=Z.prototype.ca,Z.prototype.getLength=Z.prototype.lf,Z.prototype.getPosition=Z.prototype.ba,Z.prototype.hasMoreData=Z.prototype.qa;var rc=1;Z.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:rc};function oe(){this.i=[],this.h=[],this.g=!1}p=oe.prototype,p.box=function(e,t){var n=ic(e);return this.i[n]=Um,this.h[n]=t,this},p.V=function(e,t){var n=ic(e);return this.i[n]=sc,this.h[n]=t,this},p.stop=function(){this.g=!0},p.parse=function(e,t,n){for(e=new Z(e,0),this.g=!1;e.qa()&&!this.g;)this.Vc(0,e,t,n)},p.Vc=function(e,t,n,r){var i=t.ba();if(r&&i+8>t.T.byteLength)this.g=!0;else{var o=t.O(),s=t.O(),u=!1;switch(o){case 0:o=t.T.byteLength-i;break;case 1:if(r&&t.ba()+8>t.T.byteLength){this.g=!0;return}o=t.Qb(),u=!0}var a=this.h[s];if(a){var l=null,c=null;if(this.i[s]==sc){if(r&&t.ba()+4>t.T.byteLength){this.g=!0;return}c=t.O(),l=c>>>24,c&=16777215}s=i+o,n&&s>t.T.byteLength&&(s=t.T.byteLength),r&&s>t.T.byteLength?this.g=!0:(r=s-t.ba(),t=0<r?t.hb(r):new Uint8Array(0),t=new Z(t,0),a({parser:this,partialOkay:n||!1,version:l,flags:c,reader:t,size:o,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+o-t.ba(),t.T.byteLength-t.ba()))}};function pe(e){for(var t=ji(e);e.reader.qa()&&!e.parser.g;)e.parser.Vc(e.start+t,e.reader,e.partialOkay)}function Li(e){var t=ji(e),n=e.reader.O();n=h(Qe(n));for(var r=n.next();!r.done&&(e.parser.Vc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r=n.next());}function zn(e){return function(t){e(t.reader.hb(t.reader.T.byteLength-t.reader.ba()))}}function ic(e){var t=0;e=h(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function oc(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ji(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}O("shaka.util.Mp4Parser",oe),oe.headerSize=ji,oe.typeToString=oc,oe.allData=zn,oe.sampleDescription=Li,oe.children=pe,oe.prototype.parseNext=oe.prototype.Vc,oe.prototype.parse=oe.prototype.parse,oe.prototype.stop=oe.prototype.stop,oe.prototype.fullBox=oe.prototype.V,oe.prototype.box=oe.prototype.box;var Um=0,sc=1;function Bm(e){function t(){r=!0}function n(l){o.push(l),pe(l)}e=Q(e);var r=!1,i,o=[],s=[];if(new oe().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).V("stsd",function(l){i=l,o.push(l),Li(l)}).V("encv",t).V("enca",t).V("avc1",function(l){s.push({box:l,mc:1701733238})}).V("avc3",function(l){s.push({box:l,mc:1701733238})}).V("ac-3",function(l){s.push({box:l,mc:1701733217})}).V("ec-3",function(l){s.push({box:l,mc:1701733217})}).V("mp4a",function(l){s.push({box:l,mc:1701733217})}).parse(e),r)return e;if(s.length==0||!i)throw Sr(e),new x(2,3,3019);s.reverse();for(var u=h(s),a=u.next();!a.done;a=u.next())a=a.value,e=Fm(e,i,a.box,o,a.mc);return e}function Fm(e,t,n,r,i){var o=Vm.value(),s=e.subarray(n.start,n.start+n.size),u=Ve(s),a=new Uint8Array(n.size+o.byteLength);for(a.set(s,0),s=Ve(a),s.setUint32(4,i),a.set(o,n.size),i=u.getUint32(4),s.setUint32(n.size+16,i),uc(a,0,a.byteLength),i=new Uint8Array(e.byteLength+a.byteLength),n=Ue("Xbox One")?n.start:n.start+n.size,o=e.subarray(n),i.set(e.subarray(0,n)),i.set(a,n),i.set(o,n+a.byteLength),e=h(r),r=e.next();!r.done;r=e.next())r=r.value,uc(i,r.start,r.size+a.byteLength);return a=Ve(i,t.start),t=ji(t),e=a.getUint32(t),a.setUint32(t,e+1),i}function uc(e,t,n){e=Ve(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Vm=new xr(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function ac(e,t,n,r,i){if(r>=i)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(S){return S!=null&&S.g.trim()!=""})){o=u;break}for(u=n.length-1;0<=u;u--)if(n[u].some(function(S){return S!=null&&S.g.trim()!=""})){s=u;break}if(o===-1||s===-1)return null;for(var a=u=!1,l="white",c="black",f=Ls(r,i,u,a,l,c);o<=s;o++){for(var d=n[o],g=-1,v=-1,y=0;y<d.length;y++)if(d[y]!=null&&d[y].g.trim()!==""){g=y;break}for(y=d.length-1;0<=y;y--)if(d[y]!=null&&d[y].g.trim()!==""){v=y;break}if(g===-1||v===-1)d=lc(r,i),e.nestedCues.push(d);else{for(;g<=v;g++)if(y=d[g]){var T=y.l,w=y.i,A=y.j,I=y.h;(T!=u||w!=a||A!=l||I!=c)&&(f.payload&&e.nestedCues.push(f),f=Ls(r,i,T,w,A,I),u=T,a=w,l=A,c=I),f.payload+=y.g}else f.payload+=" ";f.payload&&e.nestedCues.push(f),o!==s&&(f=lc(r,i),e.nestedCues.push(f)),f=Ls(r,i,u,a,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Ls(e,t,n,r,i,o){return e=new se(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=i,e.backgroundColor=o,e}function lc(e,t){var n=new se(e,t,"");return n.lineBreak=!0,n}function cc(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function js(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.u=t,this.j=this.o=!1,this.l="white",this.s="black",Pr(this)}function Oi(e,t,n){return ac(new se(t,n,""),"CC"+(e.F<<1|e.u+1),e.i,t,n)}function Pr(e){Dt(e,0,15),e.g=1}function Xn(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case br:r=gc.has(n)?gc.get(n):String.fromCharCode(n);break;case dc:r=Hm.get(n);break;case hc:e.i[e.g].pop(),r=qm.get(n);break;case pc:e.i[e.g].pop(),r=Km.get(n)}r&&e.i[e.g].push(new cc(r,e.o,e.j,e.s,e.l))}}function fc(e,t,n,r){if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(o){return o});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(o){return o})}function Dt(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var br=0,dc=1,hc=2,pc=3,gc=new Map([[39,"\u2019"],[42,"\xE1"],[92,"\xE9"],[92,"\xE9"],[94,"\xED"],[95,"\xF3"],[96,"\xFA"],[123,"\xE7"],[124,"\xF7"],[125,"\xD1"],[126,"\xF1"],[127,"\u2588"]]),Hm=new Map([[48,"\xAE"],[49,"\xB0"],[50,"\xBD"],[51,"\xBF"],[52,"\u2122"],[53,"\xA2"],[54,"\xA3"],[55,"\u266A"],[56,"\xE0"],[57,"\u2800"],[58,"\xE8"],[59,"\xE2"],[60,"\xEA"],[61,"\xEE"],[62,"\xF4"],[63,"\xFB"]]),qm=new Map([[32,"\xC1"],[33,"\xC9"],[34,"\xD3"],[35,"\xDA"],[36,"\xDC"],[37,"\xFC"],[38,"\u2018"],[39,"\xA1"],[40,"*"],[41,"'"],[42,"\u2500"],[43,"\xA9"],[44,"\u2120"],[45,"\xB7"],[46,"\u201C"],[47,"\u201D"],[48,"\xC0"],[49,"\xC2"],[50,"\xC7"],[51,"\xC8"],[52,"\xCA"],[53,"\xCB"],[54,"\xEB"],[55,"\xCE"],[56,"\xCF"],[57,"\xEF"],[58,"\xD4"],[59,"\xD9"],[60,"\xF9"],[61,"\xDB"],[62,"\xAB"],[63,"\xBB"]]),Km=new Map([[32,"\xC3"],[33,"\xE3"],[34,"\xCD"],[35,"\xCC"],[36,"\xEC"],[37,"\xD2"],[38,"\xF2"],[39,"\xD5"],[40,"\xF5"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"\xC4"],[49,"\xE4"],[50,"\xD6"],[51,"\xF6"],[52,"\xDF"],[53,"\xA5"],[54,"\xA4"],[55,"\u2502"],[56,"\xC5"],[57,"\xE5"],[58,"\xD8"],[59,"\xF8"],[60,"\u250C"],[61,"\u2510"],[62,"\u2514"],[63,"\u2518"]]);function _i(e,t){this.h=Gm,this.s=new js(e,t),this.i=new js(e,t),this.l=new js(e,t),this.g=this.i,this.j=0,this.o=null}function Os(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==Ui&&e.h!==Lr&&(i=Oi(r,e.j,n),n=e.i,n.g=0<n.h?n.h:0,Dt(n,0,15),n=e.l,n.g=0<n.h?n.h:0,Dt(n,0,15),r.g=15),e.h=Ui,r.h=t,i}function mc(e){e.h=zm,e.g=e.l,e.g.h=0}function vc(e){on("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.s,e.h=Lr}var Gm=0,zm=1,Ui=3,Lr=4,Xm="black green blue cyan red yellow magenta black".split(" "),yc="white green blue cyan red yellow magenta white_italics".split(" ");function wc(){this.l=!1,this.G=this.J=0,this.I=$m,this.i=[],this.g=this.h=this.j=0,this.F=this.s=!1,this.u="white",this.o="black",_s(this)}function _s(e){e.i=[];for(var t=0;15>t;t++)e.i.push(Us())}function Us(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function wn(e,t){Tc(e)&&(e.i[e.h][e.g]=new cc(t,e.F,e.s,e.o,e.u),e.g++)}function Tc(e){var t=e.g<e.G&&0<=e.g;return e.h<e.J&&0<=e.h&&t}wc.prototype.isVisible=function(){return this.l};function Tn(e,t,n){var r=new se(e.j,t,"");return r.textAlign=e.I===Wm?"left":e.I===Ym?"right":Kt,(n=ac(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var Wm=0,Ym=1,$m=2;function Jm(){this.i=[],this.h=null,this.g=0}function Qm(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Bi(e.h)),e.h=null,e.g=0))}function Bi(e){this.g=0,this.h=e}Bi.prototype.qa=function(){return this.g<this.h.length},Bi.prototype.ba=function(){return this.g};function Ie(e){if(!e.qa())throw new x(2,2,3e3);return e.h[e.g++]}Bi.prototype.skip=function(e){if(this.g+e>this.h.length)throw new x(2,2,3e3);this.g+=e};function Zm(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function ev(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=Ie(t).value,t=null,n=h(jr(e,n));for(var i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=Tn(i,r,e.i)),_s(i);return t}if(n===137)for(t=Ie(t).value,t=h(jr(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=Ie(t).value,t=null,n=h(jr(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=Tn(i,r,e.i)),i.l=!1;return t}if(n===139){for(n=Ie(t).value,t=null,n=h(jr(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()?t=Tn(i,r,e.i):i.j=r,i.l=!i.l;return t}if(n===140)return t=Ie(t).value,xc(e,t,r);if(n===143)return r=xc(e,255,r),Sc(e),r;if(n===144)t.skip(1),r=Ie(t).value,e.g&&(e.g.s=0<(r&128),e.g.F=0<(r&64));else if(n===145)r=Ie(t).value,n=Ie(t).value,t.skip(1),e.g&&(t=Ec((n&48)>>4,(n&12)>>2,n&3),e.g.u=Ec((r&48)>>4,(r&12)>>2,r&3),e.g.o=t);else if(n===146)r=Ie(t).value,t=Ie(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=Ie(t).value,t.skip(1),e.g&&(e.g.I=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,i=e.h[n]!==null,!i){var o=new wc;o.j=r,e.h[n]=o}r=Ie(t).value,Ie(t),Ie(t),o=Ie(t).value;var s=Ie(t).value;t=Ie(t).value,i&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.F=!1,t.s=!1,t.u="white",t.o="black"),t=e.h[n],t.l=0<(r&32),t.J=(o&15)+1,t.G=(s&63)+1,e.g=e.h[n]}}}return null}var jr=function e(t,n){var r;return gi(e,function(i){return i.g==1&&(r=0),i.g!=5?8>r?(n&1)===1&&t.h[r]?m(i,r,5):i.A(5):i.A(0):(n>>=1,r++,i.A(2))})};function xc(e,t,n){var r=null;t=h(jr(e,t));for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=e.h[i];o.isVisible()&&(r=Tn(o,n,e.i)),e.h[i]=null}return r}function Sc(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Ec(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],tv[e<<2|t<<1|n]}var Ic=new Map([[32," "],[33,"\xA0"],[37,"\u2026"],[42,"\u0160"],[44,"\u0152"],[48,"\u2588"],[49,"\u2018"],[50,"\u2019"],[51,"\u201C"],[52,"\u201D"],[53,"\u2022"],[57,"\u2122"],[58,"\u0161"],[60,"\u0153"],[61,"\u2120"],[63,"\u0178"],[118,"\u215B"],[119,"\u215C"],[120,"\u215D"],[121,"\u215E"],[122,"\u2502"],[123,"\u2510"],[124,"\u2514"],[125,"\u2500"],[126,"\u2518"],[127,"\u250C"]]),tv="black blue green cyan red magenta yellow white".split(" ");function nv(){this.h=[],this.g=[],this.i=new Jm,this.l=0,this.u=new Map([["CC1",new _i(0,0)],["CC2",new _i(0,1)],["CC3",new _i(1,0)],["CC4",new _i(1,1)]]),this.s=this.o=0,this.j=new Map,Bs(this)}function Bs(e){e.o=0,e.s=0,e=h(e.u.values());for(var t=e.next();!t.done;t=e.next())t=t.value,t.h=2,t.g=t.i,t.o=null,Pr(t.i),Pr(t.l),Pr(t.s)}function rv(e){function t(o,s){return o.pts-s.pts||o.order-s.order}var n=[];e.h.sort(t),e.g.sort(t);for(var r=h(e.h),i=r.next();!i.done;i=r.next())(i=iv(e,i.value))&&n.push(i);for(r=h(e.g),i=r.next();!i.done;i=r.next())Qm(e.i,i.value);for(r=h(e.i.i),i=r.next();!i.done;i=r.next())i=ov(e,i.value),n.push.apply(n,fe(i));return e.i.i=[],e.h=[],e.g=[],n}function iv(e,t){var n=t.type;if((t.Ca&112)===16){var r=t.Ca>>3&1;n===0?e.o=r:e.s=r}if(n=e.u.get("CC"+(n<<1|(n?e.s:e.o)+1)),t.Ca===255&&t.Va===255||!t.Ca&&!t.Va||!Ac(t.Ca)||!Ac(t.Va))return 45<=++e.l&&Bs(e),null;if(e.l=0,t.Ca&=127,t.Va&=127,!t.Ca&&!t.Va)return null;if(r=null,(t.Ca&112)===16)e:{var i=t.Ca;if(r=t.Va,n.o===(i<<8|r))n.o=null;else if(n.o=i<<8|r,(i&240)===16&&(r&192)===64){i=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|r>>5&1];var o=(r&30)>>1,s="white",u=!1;if(7>o?s=yc[o]:o===7&&(u=!0),r=(r&1)===1,n.h!==Lr){if(o=n.g,n.h===Ui&&i!==o.g){var a=1+i-o.h;fc(o,a,1+o.g-o.h,o.h),Dt(o,0,a-1),Dt(o,i+1,15-i)}o.g=i,n.g.o=r,n.g.j=u,n.g.l=s,n.g.s="black"}}else if((i&247)===17&&(r&240)===32)n.g.o=!1,n.g.j=!1,n.g.l="white",Xn(n.g,br,32),s=!1,i=yc[(r&14)>>1],i==="white_italics"&&(i="white",s=!0),n.g.o=(r&1)===1,n.g.j=s,n.g.l=i;else if((i&247)===16&&(r&240)===32||(i&247)===23&&(r&255)===45)s="black",(i&7)===0&&(s=Xm[(r&14)>>1]),n.g.s=s;else if((i&247)===17&&(r&240)===48)Xn(n.g,dc,r);else if((i&246)===18&&(r&224)===32)Xn(n.g,i&1?pc:hc,r);else if((i&246)===20&&(r&240)===32){switch(r=t.pts,i=null,t.Va){case 32:mc(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=Os(n,2,r);break;case 38:i=Os(n,3,r);break;case 39:i=Os(n,4,r);break;case 40:Xn(n.g,br,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=r;break;case 42:Pr(n.s),vc(n);break;case 43:vc(n);break;case 44:i=n.i,s=null,n.h!==Lr&&(s=Oi(i,n.j,r)),Dt(i,0,15),i=s;break;case 45:i=n.g,n.h!==Ui?i=null:(s=Oi(i,n.j,r),u=i.g-i.h+1,fc(i,u-1,u,i.h),Dt(i,0,u-1),Dt(i,i.g,15-i.g),n.j=r,i=s);break;case 46:Dt(n.l,0,15);break;case 47:i=null,n.h!==Lr&&(i=Oi(n.i,n.j,r)),s=n.l,n.l=n.i,n.i=s,mc(n),n.j=r}r=i;break e}r=null}else i=t.Va,Xn(n.g,br,t.Ca),Xn(n.g,br,i);return r}function ov(e,t){var n=[];try{for(;t.qa();){var r=Ie(t).value,i=(r&224)>>5,o=r&31;if(i===7&&o!=0&&(i=Ie(t).value&63),i!=0){e.j.has(i)||e.j.set(i,new Zm(i));for(var s=e.j.get(i),u=t.ba();t.ba()-u<o;){i=t;var a=Ie(i),l=a.value,c=a.pts;if(l===16){var f=Ie(i);l=l<<16|f.value}if(0<=l&&31>=l){var d=c;if(s.g){var g=s.g;switch(i=null,l){case 8:!Tc(g)||0>=g.g&&0>=g.h||(0>=g.g?(g.g=g.G-1,g.h--):g.g--,g.i[g.h][g.g]=null);break;case 13:if(g.isVisible()&&(i=Tn(g,d,s.i)),g.h+1>=g.J){d=g;for(var v=0,y=1;15>y;y++,v++)d.i[v]=d.i[y];for(y=0;1>y;y++,v++)d.i[v]=Us()}else g.h++;g.g=0;break;case 14:g.isVisible()&&(i=Tn(g,d,s.i)),g.i[g.h]=Us(),g.g=0;break;case 12:g.isVisible()&&(i=Tn(g,d,s.i)),_s(g),d=g,d.h=0,d.g=0}var T=i}else T=null}else if(128<=l&&159>=l)T=ev(s,i,l,c);else{if(4096<=l&&4127>=l)d=l&255,8<=d&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=l&&4255>=l)d=l&255,128<=d&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=l&&127>=l)i=l,s.g&&(i===127?wn(s.g,"\u266A"):wn(s.g,String.fromCharCode(i)));else if(160<=l&&255>=l)s.g&&wn(s.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(i=l&255,s.g)if(Ic.has(i)){var w=Ic.get(i);wn(s.g,w)}else wn(s.g,"_")}else 4256<=l&&4351>=l&&s.g&&((l&255)!=160?wn(s.g,"_"):wn(s.g,"[CC]"));T=null}(i=T)&&n.push(i)}}}}catch(A){if(A instanceof x&&A.code===3e3)on("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw A}return n}function Ac(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}function sv(){}var uv=function e(t,n){var r,i,o,s;return gi(e,function(u){if(u.g==1){for(var a=n,l=0,c=0;c<a.length;)l==2&&a[c]==3?(l=0,a=[].concat(fe(a)),a.splice(c,1),a=new Uint8Array(a)):a[c]==0?l++:l=0,c++;r=a,i=0}if(u.g!=4){if(!(i<r.length))return u.A(0);for(o=0;r[i]==255;)o+=255,i++;for(o+=r[i++],s=0;r[i]==255;)s+=255,i++;return s+=r[i++],o!=4?u.A(4):m(u,r.subarray(i,i+s),4)}return i+=s,u.A(2)})};function Mc(e,t){var n=null,r=null,i=e.O();return t&1&&e.skip(8),t&2&&e.skip(4),t&8&&(n=e.O()),t&16&&(r=e.O()),{trackId:i,ke:n,$e:r}}function Fs(e,t){return{rd:t==1?e.Qb():e.O()}}function Vs(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.O()}}function Cc(e,t,n){var r=e.O(),i=[];n&1&&e.skip(4),n&4&&e.skip(4);for(var o=h(Qe(r)),s=o.next();!s.done;s=o.next())s={Td:null,sampleSize:null,Xc:null},n&256&&(s.Td=e.O()),n&512&&(s.sampleSize=e.O()),n&1024&&e.skip(4),n&2048&&(s.Xc=t==0?e.O():e.ze()),i.push(s);return{Yg:r,Ce:i}}function Hs(){this.j=new sv,this.i=new Map,this.h=this.g=0}Hs.prototype.init=function(e){var t=this,n=[],r=[];if(new oe().box("moov",pe).box("mvex",pe).V("trex",function(i){var o=i.reader;o.skip(4),o.skip(4),i=o.O(),o=o.O(),t.g=i,t.h=o}).box("trak",pe).V("tkhd",function(i){var o=i.reader;i.version==1?(o.skip(8),o.skip(8)):(o.skip(4),o.skip(4)),i=o.O(),n.push(i)}).box("mdia",pe).V("mdhd",function(i){i=Vs(i.reader,i.version),r.push(i.timescale)}).parse(e,!0),!n.length||!r.length||n.length!=r.length)throw new x(2,2,2010);n.forEach(function(i,o){t.i.set(i,r[o])})},Hs.prototype.parse=function(e){var t=this,n=[],r=this.g,i=this.h,o=[],s=null,u=9e4;return new oe().box("moof",pe).box("traf",pe).V("trun",function(a){o=Cc(a.reader,a.version,a.flags).Ce}).V("tfhd",function(a){a=Mc(a.reader,a.flags),r=a.ke||t.g,i=a.$e||t.h,a=a.trackId,t.i.has(a)&&(u=t.i.get(a))}).V("tfdt",function(a){s=Fs(a.reader,a.version).rd}).box("mdat",function(a){if(s===null)throw new x(2,2,2010);a=a.reader;var l=s,c=u,f=r,d=i,g=o,v=0,y=d;for(g.length&&(y=g[0].sampleSize||d);a.qa();){var T=a.O();if((a.ca()&31)==6){var w=0;g.length>v&&(w=g[v].Xc||0),w=(l+w)/c;for(var A=h(uv(t.j,a.hb(T-1))),I=A.next();!I.done;I=A.next())n.push({Qf:I.value,pts:w})}else a.skip(T-1);y-=T+4,y==0&&(l=g.length>v?l+(g[v].Td||f):l+f,v++,y=g.length>v&&g[v].sampleSize||d)}}).parse(e,!1),n};function kc(){this.h=new Hs,this.g=new nv}kc.prototype.init=function(e){this.h.init(e)};function av(e,t){var n=e.h.parse(t);n=h(n);for(var r=n.next();!r.done;r=n.next()){var i=r.value,o=Q(i.Qf);if(0<o.length&&(r=e.g,i=i.pts,o=new Z(o,0),o.ca()===181&&o.Pb()===49&&o.O()===1195456820&&o.ca()===3)){var s=o.ca();if((s&64)!==0){s&=31,o.skip(1);for(var u=0;u<s;u++){var a=o.ca(),l=(a&4)>>2,c=o.ca(),f=o.ca();l&&(a&=3,a===0||a===1?r.h.push({pts:i,type:a,Ca:c,Va:f,order:r.h.length}):(r.g.push({pts:i,type:a,value:c,order:r.g.length}),r.g.push({pts:i,type:2,value:f,order:r.g.length})))}}}}return rv(e.g)}function qs(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ks(e,t,n){return n=n===void 0?0:n,!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t+n>=e.start(0)}function Rc(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=h(Yt(e)),i=r.next();!i.done;i=r.next()){var o=i.value;i=o.start,o=o.end,o>t&&(n+=o-Math.max(i,t))}return n}function lv(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=Yt(e).findIndex(function(r,i,o){return r.start>t&&(i==0||o[i-1].end-t<=n)}),0<=e?e:null)}function Yt(e){if(!e)return[];for(var t=[],n=h(Qe(e.length)),r=n.next();!r.done;r=n.next())r=r.value,t.push({start:e.start(r),end:e.end(r)});return t}function Dc(e,t,n,r){var i=this;this.g=e,this.o=n,this.j={},this.J={},this.i=null,this.M=r||function(){},this.l={},this.h=new ue,this.u={},this.F=t,this.G=new ae,this.s=cv(this,this.G),this.K=new mn(function(){return fv(i)}),this.I=""}function cv(e,t){var n=new MediaSource;return e.h.ya(n,"sourceopen",function(){URL.revokeObjectURL(e.I),t.resolve()}),e.I=Xs(n),e.g.src=e.I,n}p=Dc.prototype,p.destroy=function(){return this.K.destroy()};function fv(e){var t,n,r,i,o,s,u,a;return E(function(l){if(l.g==1){t=[];for(n in e.l)for(r=e.l[n],i=r[0],e.l[n]=r.slice(0,1),i&&t.push(i.p.catch(Lg)),o=h(r.slice(1)),s=o.next();!s.done;s=o.next())u=s.value,u.p.reject(new x(2,7,7003,void 0));e.i&&t.push(e.i.destroy()),e.o&&t.push(e.o.destroy());for(a in e.u)t.push(e.u[a].destroy());return m(l,Promise.all(t),2)}e.h&&(e.h.release(),e.h=null),e.g&&(e.g.removeAttribute("src"),e.g.load(),e.g=null),e.s=null,e.i=null,e.o=null,e.j={},e.u={},e.F=null,e.l={},b(l)})}p.init=function(e,t){var n=this,r,i,o,s,u,a,l;return E(function(c){if(c.g==1)return r=_e,m(c,n.G,2);for(i={},o=h(e.keys()),s=o.next();!s.done;i={va:i.va},s=o.next())i.va=s.value,u=e.get(i.va),a=wt(u.mimeType,u.codecs),i.va==r.ea?Or(n,a):(!t&&MediaSource.isTypeSupported(a)||!il(a,i.va)||(n.u[i.va]=new rl,a=Ir(i.va,a)),l=n.s.addSourceBuffer(a),n.h.C(l,"error",function(f){return function(){n.l[f.va][0].p.reject(new x(2,3,3014,n.g.error?n.g.error.code:0))}}(i)),n.h.C(l,"updateend",function(f){return function(){return xn(n,f.va)}}(i)),n.j[i.va]=l,n.J[i.va]=a,n.l[i.va]=[]);b(c)})};function Or(e,t){e.i||(e.i=new Mt(e.o)),t!="application/cea-608"&&t!="application/cea-708"&&(e.i.u=an(Ce[t]))}function Nc(e){return e.s?e.s.readyState=="ended":!0}function Pc(e,t){if(t==re)var n=e.i.g;else n=Wn(e,t),n=!n||n.length==1&&1e-6>n.end(0)-n.start(0)?null:n.length==1&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Fi(e,t){return t==re?e.i.h:qs(Wn(e,t))}function dv(e,t,n){return t==re?(e=e.i,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Wn(e,t),Rc(e,n))}p.gb=function(){var e={total:Yt(this.g.buffered),audio:Yt(Wn(this,"audio")),video:Yt(Wn(this,"video")),text:[]};if(this.i){var t=this.i.g,n=this.i.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Wn(e,t){try{return e.j[t].buffered}catch{return null}}function bc(e,t,n,r,i,o){var s,u,a,l,c,f,d,g;return E(function(v){return v.g==1?(s=_e,t==s.ea?m(v,Kg(e.i,n,r,i),0):e.u[t]?m(v,Hg(e.u[t],n),10):o?(e.i||Or(e,"text/vtt"),r==null&&i==null?e.F.init(n):(u=av(e.F,n),u.length&&(a=e.j[s.Ta].timestampOffset,al(e.i,u,r,i,a))),n=zs(e,n,r,t),m(v,Nt(e,t,function(){e.j[t].appendBuffer(n)}),0)):(n=zs(e,n,r,t),m(v,Nt(e,t,function(){e.j[t].appendBuffer(n)}),0))):(l=v.h,e.i||Or(e,"text/vtt"),l.metadata&&(c=e.j[t].timestampOffset,e.M(l.metadata,c,i)),l.captions&&l.captions.length&&(f=e.j[s.Ta].timestampOffset,d=zg(l.captions),al(e.i,d,r,i,f)),g=l.data,g=zs(e,g,r,t),m(v,Nt(e,t,function(){e.j[t].appendBuffer(g)}),0))})}function hv(e,t){var n=Fi(e,"video")||0;sl(e.i,t,n)}function pv(e){e.i&&sl(e.i,"",0)}p.remove=function(e,t,n){var r=this,i;return E(function(o){return i=_e,e==i.ea?m(o,r.i.remove(t,n),0):m(o,Nt(r,e,function(){n<=t?xn(r,e):r.j[e].remove(t,n)}),0)})};function Lc(e,t){var n;return E(function(r){return n=_e,t==n.ea?e.i?m(r,e.i.remove(0,1/0),0):r.return():m(r,Nt(e,t,function(){var i=e.s.duration;0>=i?xn(e,t):e.j[t].remove(0,i)}),0)})}p.flush=function(e){var t=this,n;return E(function(r){return n=_e,e==n.ea?r.return():m(r,Nt(t,e,function(){t.g.currentTime-=.001,xn(t,e)}),0)})};function gv(e,t,n,r,i){var o;return E(function(s){return o=_e,t==o.ea?(e.i.F=n,Gg(e.i,r,i),s.return()):m(s,Promise.all([Nt(e,t,function(){var u=e.j[t].appendWindowStart,a=e.j[t].appendWindowEnd;e.j[t].abort(),e.j[t].appendWindowStart=u,e.j[t].appendWindowEnd=a,xn(e,t)}),Nt(e,t,function(){var u=n;0>u&&(u+=.001),e.j[t].timestampOffset=u,xn(e,t)}),Nt(e,t,function(){e.j[t].appendWindowStart=0,e.j[t].appendWindowEnd=i,e.j[t].appendWindowStart=r,xn(e,t)})]),0)})}p.endOfStream=function(e){var t=this;return E(function(n){return m(n,jc(t,function(){Nc(t)||(e?t.s.endOfStream(e):t.s.endOfStream())}),0)})},p.Na=function(e){var t=this;return E(function(n){return m(n,jc(t,function(){t.s.duration=e}),0)})},p.getDuration=function(){return this.s.duration};function xn(e,t){var n=e.l[t][0];n&&(n.p.resolve(),Gs(e,t))}function Nt(e,t,n){return le(e.K),n={start:n,p:new ae},e.l[t].push(n),e.l[t].length==1&&Oc(e,t),n.p}function jc(e,t){var n,r,i,o,s,u;return E(function(a){switch(a.g){case 1:le(e.K),n=[],r={};for(i in e.j)r.Vb=new ae,o={start:function(l){return function(){return l.Vb.resolve()}}(r),p:r.Vb},e.l[i].push(o),n.push(r.Vb),e.l[i].length==1&&o.start(),r={Vb:r.Vb};return q(a,2),m(a,Promise.all(n),4);case 4:ee(a,3);break;case 2:throw s=K(a),s;case 3:try{t()}catch(l){throw new x(2,3,3015,l)}finally{for(u in e.j)Gs(e,u)}b(a)}})}function Gs(e,t){e.l[t].shift(),Oc(e,t)}function Oc(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new x(2,3,3017,t)):n.p.reject(new x(2,3,3015,r)),Gs(e,t)}}function zs(e,t,n,r){var i=e.g.mediaKeys;return n==null&&i&&(hn()||Ue("Xbox One"))&&e.J[r].split(";")[0].split("/")[1]=="mp4"&&(t=Bm(t)),t}var Xs=R.URL.createObjectURL;function qe(e,t,n,r){this.ua=e,this.sa=t,this.ja=n,this.Id=r===void 0?null:r}qe.prototype.jc=function(){return this.sa},qe.prototype.ec=function(){return this.ja};function mv(e,t){return e&&t?e.jc()==t.jc()&&e.ec()==t.ec()&&is(e.ua(),t.ua()):e==t}O("shaka.media.InitSegmentReference",qe),qe.prototype.getEndByte=qe.prototype.ec,qe.prototype.getStartByte=qe.prototype.jc;function he(e,t,n,r,i,o,s,u,a,l,c,f){l=l===void 0?[]:l,this.startTime=e,this.l=this.endTime=t,this.j=n,this.sa=r,this.ja=i,this.g=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.h=l,this.tilesLayout=c===void 0?"":c,this.i=f===void 0?null:f}p=he.prototype,p.ua=function(){return this.j()},p.xf=function(){return this.startTime},p.jf=function(){return this.endTime},p.jc=function(){return this.sa},p.ec=function(){return this.ja},p.Df=function(){return this.tilesLayout},p.Cf=function(){return this.i},O("shaka.media.SegmentReference",he),he.prototype.getTileDuration=he.prototype.Cf,he.prototype.getTilesLayout=he.prototype.Df,he.prototype.getEndByte=he.prototype.ec,he.prototype.getStartByte=he.prototype.jc,he.prototype.getEndTime=he.prototype.jf,he.prototype.getStartTime=he.prototype.xf,he.prototype.getUris=he.prototype.ua;function _(e,t,n){this.j=e,this.Wc=t,this.o=this.l=1/0,this.g=1,this.h=this.i=null,this.s=0,this.u=!0,this.F=0,this.G=n===void 0?!0:n,this.I=0}p=_.prototype,p.getDuration=function(){return this.l},p.qf=function(){return this.g},p.Na=function(e){this.l=e},p.wf=function(){return this.j},p.He=function(e){this.s=e},p.uc=function(e){this.u=e},p.$d=function(e){this.o=e},p.fg=function(e){this.Wc=e},p.hf=function(){return this.Wc},p.Mb=function(e){if(e.length!=0){var t=e[e.length-1].endTime;this.Md(e[0].startTime),this.g=e.reduce(function(n,r){return Math.max(n,r.endTime-r.startTime)},this.g),this.h=Math.max(this.h,t),this.j!=null&&this.G&&(this.j=(Date.now()+this.s)/1e3-this.h-this.g)}},p.Md=function(e){this.i=this.i==null?e:Math.min(this.i,e)},p.Ld=function(e){this.g=Math.max(this.g,e)},p.offset=function(e){this.i!=null&&(this.i+=e),this.h!=null&&(this.h+=e)},p.Y=function(){return this.l==1/0&&!this.u},p.rb=function(){return this.l!=1/0&&!this.u},p.Xa=function(){return Math.max(this.F,this.mb()-this.o)},p.Ie=function(e){this.F=e},p.mb=function(){return this.Y()||this.rb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.j)+this.I,this.l):this.h||this.l},p.ic=function(e){var t=Math.max(this.i,this.F);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.mb()-this.o+e,this.Wa()))},p.Ib=function(){return this.ic(0)},p.Wa=function(){return Math.max(0,this.mb()-(this.Y()||this.rb()?this.Wc:0))},p.Le=function(){return!(this.j==null||this.h!=null&&this.G)},p.Ge=function(e){this.I=e},O("shaka.media.PresentationTimeline",_),_.prototype.setAvailabilityTimeOffset=_.prototype.Ge,_.prototype.usingPresentationStartTime=_.prototype.Le,_.prototype.getSeekRangeEnd=_.prototype.Wa,_.prototype.getSeekRangeStart=_.prototype.Ib,_.prototype.getSafeSeekRangeStart=_.prototype.ic,_.prototype.getSegmentAvailabilityEnd=_.prototype.mb,_.prototype.setUserSeekStart=_.prototype.Ie,_.prototype.getSegmentAvailabilityStart=_.prototype.Xa,_.prototype.isInProgress=_.prototype.rb,_.prototype.isLive=_.prototype.Y,_.prototype.offset=_.prototype.offset,_.prototype.notifyMaxSegmentDuration=_.prototype.Ld,_.prototype.notifyMinSegmentStartTime=_.prototype.Md,_.prototype.notifySegments=_.prototype.Mb,_.prototype.getDelay=_.prototype.hf,_.prototype.setDelay=_.prototype.fg,_.prototype.setSegmentAvailabilityDuration=_.prototype.$d,_.prototype.setStatic=_.prototype.uc,_.prototype.setClockOffset=_.prototype.He,_.prototype.getPresentationStartTime=_.prototype.wf,_.prototype.setDuration=_.prototype.Na,_.prototype.getMaxSegmentDuration=_.prototype.qf,_.prototype.getDuration=_.prototype.getDuration;function _c(e,t){this.j=e,this.o=Uc(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.s=t,this.i=function(){}}_c.prototype.release=function(){this.j=null,this.i=function(){}};function vv(e,t){e.i=t}function yv(e){this.g=e}function Uc(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=h(Yt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Ws(e,t,n,r,i){var o=this;this.g=e,this.F=t,this.m=n,this.u=i,this.h=new ue,this.s=!1,this.G=e.readyState,this.j=!1,this.i=r,this.o=!1,this.h.C(e,"waiting",function(){return Ys(o)}),this.l=new G(function(){Ys(o)}).Fa(.25)}Ws.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.l!=null&&(this.l.stop(),this.l=null),this.i&&(this.i.release(),this.i=null),this.g=this.F=this.u=null},Ws.prototype.Od=function(){this.o=!0,Ys(this)};function Ys(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.s)return}else e.s=!1;if(!e.g.paused||e.g.currentTime==0&&(e.g.autoplay||e.g.currentTime!=0)){e.g.readyState!=e.G&&(e.j=!1,e.G=e.g.readyState);var t;if(!(t=!e.i)){t=e.i;var n=t.j,r=Uc(n),i=n.g.currentTime,o=Date.now()/1e3;(t.g!=i||t.o!=r)&&(t.l=o,t.g=i,t.o=r,t.h=!1),i=o-t.l,(r=i>=t.s&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime),t=!r}if(t){i=e.m.smallGapLimit;var s=e.g.currentTime;if(t=e.g.buffered,n=lv(t,s,e.m.gapDetectionThreshold),!(n==null||n==0&&!e.o||(r=t.start(n),r>=e.F.Wa()))){var u=r-s;i=u<=i,o=!1,.001>u||(i||e.j||(e.j=!0,s=new Map().set("currentTime",s).set("gapSize",u),s=new U("largegap",s),s.cancelable=!0,e.u(s),e.m.jumpLargeGaps&&!s.defaultPrevented&&(o=!0)),!i&&!o)||(n!=0&&t.end(n-1),e.g.currentTime=r)}}}}}function Sn(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=wv.value().get(t),n.ya(e,t,r))}var wv=new xr(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Bc(e,t,n){var r=this;this.g=e,this.l=t,this.j=n,this.o=!1,this.h=new ue,this.i=new qc(e),Sn(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Vc(r,r.j)})}Bc.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.l=function(){},this.g=null};function $s(e){return e.o?e.g.currentTime:e.j}function Fc(e,t){0<e.g.readyState?Kc(e.i,t):Sn(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Vc(e,e.j)})}function Vc(e,t){.001>Math.abs(e.g.currentTime-t)?Hc(e):(e.h.ya(e.g,"seeking",function(){Hc(e)}),Kc(e.i,e.g.currentTime==0?t:e.g.currentTime))}function Hc(e){e.o=!0,e.h.C(e.g,"seeking",function(){return e.l()})}function qc(e){var t=this;this.h=e,this.o=10,this.l=this.j=this.i=0,this.g=new G(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}qc.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function Kc(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.o,e.h.currentTime=t,e.g.Fa(.1)}function _r(e){function t(){n.i==null||n.i==0?n.j=!0:(n.h.ya(n.g,"seeking",function(){n.j=!0}),n.g.currentTime=Math.max(0,n.g.currentTime+n.i))}var n=this;this.g=e,this.j=!1,this.i=null,this.h=new ue,Sn(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.h,function(){t()})}_r.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.g=null},_r.prototype.o=function(e){this.i=this.j?this.i:e},_r.prototype.l=function(){return(this.j?this.g.currentTime:this.i)||0},_r.prototype.G=function(){};function Ur(e,t,n,r,i,o){var s=this;this.i=e,this.g=t.presentationTimeline,this.I=t.minBufferTime||0,this.m=n,this.F=i,this.u=null,this.j=new Ws(e,t.presentationTimeline,n,xv(e,n),o),this.h=new Bc(e,function(){e:{var u=s.j;u.s=!0,u.o=!1,u.j=!1;var a=$s(s.h);if(u=zc(s,a),.001<Math.abs(u-a)&&(a=Date.now()/1e3,!s.u||s.u<a-1)){s.u=a,Fc(s.h,u),u=void 0;break e}s.F(),u=void 0}return u},Tv(this,r)),this.s=new G(function(){if(s.i.readyState!=0&&!s.i.paused){var u=$s(s.h),a=s.g.Ib(),l=s.g.Wa();3>l-a&&(a=l-3),u<a&&(u=zc(s,u),s.i.currentTime=u)}}).Fa(.25)}Ur.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.s&&(this.s.stop(),this.s=null),this.i=this.h=this.g=this.m=null,this.F=function(){}},Ur.prototype.o=function(e){Fc(this.h,e)},Ur.prototype.l=function(){var e=$s(this.h);return 0<this.i.readyState&&!this.i.paused?Xc(this,e):e};function Tv(e,t){return t==null?t=1/0>e.g.getDuration()?e.g.Ib():e.g.Wa():0>t&&(t=e.g.Wa()+t),Gc(e,Xc(e,t))}Ur.prototype.G=function(){this.j.Od()};function Gc(e,t){var n=e.g.getDuration();return t>=n?n-e.m.durationBackoff:t}function zc(e,t){var n=Math.max(e.I,e.m.rebufferingGoal),r=e.m.safeSeekOffset,i=e.g.Ib(),o=e.g.Wa(),s=e.g.getDuration();3>o-i&&(i=o-3);var u=e.g.ic(n),a=e.g.ic(r);return n=e.g.ic(n+r),t>=s?Gc(e,t):t>o?o:t<i?Ks(e.i.buffered,a)?a:n:t>=u||Ks(e.i.buffered,t)?t:n}function Xc(e,t){var n=e.g.Ib();return t<n?n:(n=e.g.Wa(),t>n?n:t)}function xv(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new _c(new yv(e),t.stallThreshold);return vv(r,function(){n?e.currentTime+=n:(e.pause(),e.play())}),r}function Y(e){this.N=e,this.g=null,this.h=0,this.i=!1}p=Y.prototype,p.destroy=function(){return He("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},p.release=function(){this.i||(this.N=[],this.g&&this.g.stop(),this.g=null)},p.Kf=function(){this.i=!0},p.find=function(e){for(var t=this.N.length-1,n=t;0<=n;--n){var r=this.N[n],i=n<t?this.N[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.h}return this.N.length&&e<this.N[0].startTime?this.h:null},p.get=function(e){return this.N.length==0?null:(e-=this.h,0>e||e>=this.N.length?null:this.N[e])},p.offset=function(e){if(!this.i)for(var t=h(this.N),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.timestampOffset+=e},p.Kb=function(e){!this.i&&e.length&&(this.N=this.N.filter(function(t){return t.startTime<e[0].startTime}),this.N.push.apply(this.N,fe(e)))},p.Lb=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.N.length==0||r.endTime>n.N[0].startTime)}),this.Kb(e),this.kb(t)},p.kb=function(e){if(!this.i){var t=this.N.length;this.N=this.N.filter(function(n){return n.endTime>e}),this.h+=t-this.N.length}},p.fb=function(e,t,n){if(n=n===void 0?!1:n,!this.i){for(;this.N.length&&this.N[this.N.length-1].startTime>=t;)this.N.pop();for(;this.N.length&&this.N[0].endTime<=e;)this.N.shift(),n||this.h++;this.N.length!=0&&(e=this.N[this.N.length-1],this.N[this.N.length-1]=new he(e.startTime,t,e.j,e.sa,e.ja,e.g,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.h,e.tilesLayout,e.i))}},p.Yc=function(e,t){var n=this;this.i||(this.g&&this.g.stop(),this.g=new G(function(){var r=t();r?n.N.push.apply(n.N,fe(r)):(n.g.stop(),n.g=null)}),this.g.Fa(e))},Y.prototype[Symbol.iterator]=function(){return this.Hb(0)},Y.prototype.Hb=function(e){var t=this.find(e);if(t==null)return null;t--;var n=this.get(t+1),r=-1;if(n&&0<n.h.length)for(var i=n.h.length-1;0<=i;--i){var o=n.h[i];if(e>=o.startTime&&e<o.endTime){t++,r=i-1;break}}return new lt(this,t,r)};function Vi(e,t,n){return new Y([new he(e,e+t,function(){return n},0,null,null,e,e,e+t)])}O("shaka.media.SegmentIndex",Y),Y.forSingleSegment=Vi,Y.prototype.getIteratorForTime=Y.prototype.Hb,Y.prototype.updateEvery=Y.prototype.Yc,Y.prototype.fit=Y.prototype.fb,Y.prototype.evict=Y.prototype.kb,Y.prototype.mergeAndEvict=Y.prototype.Lb,Y.prototype.merge=Y.prototype.Kb,Y.prototype.offset=Y.prototype.offset,Y.prototype.get=Y.prototype.get,Y.prototype.find=Y.prototype.find,Y.prototype.markImmutable=Y.prototype.Kf,Y.prototype.release=Y.prototype.release,Y.prototype.destroy=Y.prototype.destroy;function lt(e,t,n){this.i=e,this.h=t,this.g=n}lt.prototype.seek=function(e){return He("shaka.media.SegmentIterator","Please use SegmentIndex.getIteratorForTime instead of seek()."),(e=this.i.Hb(e))?(this.h=e.h,this.g=e.g):(this.h=Number.MAX_VALUE,this.g=0),this.next().value},lt.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.h.length&&e.ua().length&&this.g>=e.h.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.h.length?e.h[this.g]:e},lt.prototype.next=function(){var e=this.i.get(this.h);return e&&0<e.h.length?(this.g++,e.ua().length&&this.g==e.h.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},O("shaka.media.SegmentIterator",lt),lt.prototype.next=lt.prototype.next,lt.prototype.current=lt.prototype.current,lt.prototype.seek=lt.prototype.seek;function ve(){Y.call(this,[]),this.j=[]}Ne(ve,Y),p=ve.prototype,p.clone=function(){var e=new ve;return e.j=this.j.slice(),e},p.release=function(){for(var e=h(this.j),t=e.next();!t.done;t=e.next())t.value.release();this.j=[]},p.find=function(e){for(var t=0,n=h(this.j),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.find(e);if(i!=null)return i+t;t+=r.h+r.N.length}return null},p.get=function(e){for(var t=0,n=h(this.j),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.get(e-t);if(i)return i;t+=r.h+r.N.length}return null},p.offset=function(){},p.Kb=function(){},p.kb=function(){},p.Lb=function(){},p.fb=function(){},p.Yc=function(){},O("shaka.media.MetaSegmentIndex",ve),ve.prototype.updateEvery=ve.prototype.Yc,ve.prototype.fit=ve.prototype.fb,ve.prototype.mergeAndEvict=ve.prototype.Lb,ve.prototype.evict=ve.prototype.kb,ve.prototype.merge=ve.prototype.Kb,ve.prototype.offset=ve.prototype.offset,ve.prototype.get=ve.prototype.get,ve.prototype.find=ve.prototype.find,ve.prototype.release=ve.prototype.release;function Br(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Pc(),this.h=new G(function(){t.g.we(.25*t.i)})}Br.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},Br.prototype.set=function(e){this.i=e,Wc(this)},Br.prototype.Lc=function(){return this.g.Lc()};function Wc(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Pc()!=t&&e.g.Zd(t);return}catch{}e.h.Fa(.25),e.g.Pc()!=0&&e.g.Zd(0)}function Yc(e){var t=this;this.h=e,this.g=new Set,this.i=new G(function(){$c(t,!1)}).Fa(.25)}Yc.prototype.release=function(){this.i.stop();for(var e=h(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function $c(e,t){for(var n=h(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function Hi(e){$.call(this),this.g=new Map,this.h=e}Ne(Hi,$),Hi.prototype.release=function(){this.g.clear(),$.prototype.release.call(this)};function Sv(e,t){var n=e.g.get(t);return n||(n={pc:[],ie:null,contentType:t},e.g.set(t,n)),n}function Ev(e,t,n){var r=Sv(e,t.contentType);Iv(e,r),e={Id:t,position:n},r=r.pc,t=r.findIndex(function(i){return i.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Hi.prototype.j=function(e){for(var t=h(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.pc,i=r.length-1;0<=i;i--){var o=r[i];if(o.position<=e){r=o.Id;break e}}r=null}if((i=r)&&(i=n.ie,i=!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width)),i)e:{if(i=e,o=r.contentType,(o=this.h()[o])&&0<o.length){var s=o[o.length-1].end;if(i>=o[0].start&&i<s){i=!0;break e}}i=!1}i&&(n.ie=r,JSON.stringify(r),n=new U("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function Iv(e,t){var n=e.h()[t.contentType];if(n&&0<n.length){var r=n[0].start,i=n[n.length-1].end,o=t.pc;t.pc=o.filter(function(s,u){return!(s.position<=r&&u+1<o.length&&o[u+1].position<=r||s.position>=i)})}else t.pc=[]}function Js(e){$.call(this);var t=this;this.g=new Set,this.i=e,this.h=new G(function(){for(var n=t.i(),r=h(t.g),i=r.next();!i.done;i=r.next())i=i.value,i.endTime<n.start&&(t.g.delete(i),i=new U("regionremove",new Map([["region",i]])),t.dispatchEvent(i))}).Fa(2)}Ne(Js,$),Js.prototype.release=function(){this.g.clear(),this.h.stop(),$.prototype.release.call(this)};function qi(e){$.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{Ab:null,zb:Yn,qb:function(n,r){return En(t,"enter",n,r)}},{Ab:Fr,zb:Yn,qb:function(n,r){return En(t,"enter",n,r)}},{Ab:Vr,zb:Yn,qb:function(n,r){return En(t,"enter",n,r)}},{Ab:Yn,zb:Fr,qb:function(n,r){return En(t,"exit",n,r)}},{Ab:Yn,zb:Vr,qb:function(n,r){return En(t,"exit",n,r)}},{Ab:Fr,zb:Vr,qb:function(n,r){return En(t,"skip",n,r)}},{Ab:Vr,zb:Fr,qb:function(n,r){return En(t,"skip",n,r)}}],this.h=new ue,this.h.C(this.i,"regionremove",function(n){t.g.delete(n.region)})}Ne(qi,$),qi.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,$.prototype.release.call(this)},qi.prototype.j=function(e,t){for(var n=h(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),o=e<r.startTime?Fr:e>r.endTime?Vr:Yn;this.g.set(r,o);for(var s=h(this.l),u=s.next();!u.done;u=s.next())u=u.value,u.Ab==i&&u.zb==o&&u.qb(r,t)}};function En(e,t,n,r){t=new U(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var Fr=1,Yn=2,Vr=3;function Hr(e,t,n,r,i){return e=at(e,r,i),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function qr(e,t){var n=this;this.B=t,this.D=e,this.m=null,this.l=1,this.i=this.h=null,this.g=new Map,this.o=!1,this.s=null,this.j=!1,this.K=new mn(function(){return Av(n)})}qr.prototype.destroy=function(){return this.K.destroy()};function Av(e){var t,n,r,i;return E(function(o){if(o.g==1){for(t=[],n=h(e.g.values()),r=n.next();!r.done;r=n.next())i=r.value,Gi(i),t.push(tf(i));return m(o,Promise.all(t),2)}e.g.clear(),e.B=null,e.D=null,e.m=null,b(o)})}qr.prototype.configure=function(e){this.m=e,this.s=new Pl({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},qr.prototype.start=function(){var e=this;return E(function(t){if(t.g==1)return m(t,Dv(e),2);le(e.K),e.o=!0,b(t)})};function Mv(e,t){var n,r,i,o,s;E(function(u){switch(u.g){case 1:return n=_e,q(u,2),m(u,Lc(e.B.U,n.ea),4);case 4:ee(u,3);break;case 2:r=K(u),e.B&&e.B.onError(r);case 3:i=wt(t.mimeType,t.codecs),Or(e.B.U,i),o=e.B.U.o,(o.isTextVisible()||e.m.alwaysStreamText)&&(s=Zc(t),e.g.set(n.ea,s),rt(e,s,0)),b(u)}})}function Cv(e){var t=e.g.get(re);t&&(Gi(t),tf(t).catch(function(){}),e.g.delete(re)),e.i=null}function Jc(e,t){var n=e.g.get("video");if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;i&&!n.wb&&($n(e,i,!1,0,!1),n.wb=r)}else(r=n.wb)&&(n.wb=null,$n(e,r,!0,0,!1))}}function Qc(e,t,n,r,i){n=n===void 0?!1:n,r=r===void 0?0:r,i=i===void 0?!1:i,e.h=t,e.o&&(t.video&&$n(e,t.video,n,r,i),t.audio&&$n(e,t.audio,n,r,i))}function Ki(e,t){e.i=t,e.o&&$n(e,t,!0,0,!1)}function $n(e,t,n,r,i){var o=e.g.get(t.type);o||t.type!=re?o&&(o.wb&&(t.trickModeVideo?(o.wb=t,t=t.trickModeVideo):o.wb=null),o.stream!=t||i)&&(t.type==re&&Or(e.B.U,wt(t.mimeType,t.codecs)),o.stream.closeSegmentIndex&&o.stream.closeSegmentIndex(),o.stream=t,o.ia=null,n&&(o.cc?o.ad=!0:o.Ma?(o.yb=!0,o.Jc=r,o.ad=!0):(Gi(o),eu(e,o,!0,r).catch(function(s){e.B&&e.B.onError(s)}))),kv(e,o).catch(function(s){e.B&&e.B.onError(s)})):Mv(e,t)}function kv(e,t){var n,r;return E(function(i){if(i.g==1)return t.za?(n=t.stream,r=t.za,n.segmentIndex?i.A(2):m(i,n.createSegmentIndex(),2)):i.return();if(t.za!=r||t.stream!=n)return i.return();var o=e.B.Oc(),s=Fi(e.B.U,t.type),u=t.stream.segmentIndex.find(t.Da?t.Da.endTime:o),a=u==null?null:t.stream.segmentIndex.get(u);u=a&&a.ja?a.ja-a.sa:null,a&&!u&&(u=(a.endTime-a.startTime)*(t.stream.bandwidth||0)/8),u?((a=a.g)&&(u+=(a.ja?a.ja-a.sa:null)||0),a=e.B.getBandwidthEstimate(),o=8*u/a<(s||0)-o-Math.max(e.D.minBufferTime||0,e.m.rebufferingGoal)||t.za.h.g>u):o=!1,o&&t.za.abort(),b(i)})}function Rv(e,t){t.cc||t.yb||(t.Ma?(t.yb=!0,t.Jc=0):Pc(e.B.U,t.type)==null?t.Pa==null&&rt(e,t,0):(Gi(t),eu(e,t,!1,0).catch(function(n){e.B&&e.B.onError(n)})))}function Dv(e){var t,n,r,i,o,s,u,a,l,c;return E(function(f){if(f.g==1){if(t=_e,!e.h)throw new x(2,5,5006);return n=new Map,r=new Set,e.h.audio&&(n.set(t.jb,e.h.audio),r.add(e.h.audio)),e.h.video&&(n.set(t.Ta,e.h.video),r.add(e.h.video)),e.i&&(n.set(t.ea,e.i),r.add(e.i)),i=e.B.U,o=e.m.forceTransmuxTS,m(f,i.init(n,o),2)}le(e.K);var d=e.D.presentationTimeline.getDuration();for(1/0>d?e.B.U.Na(d):e.B.U.Na(Math.pow(2,32)),s=h(n.keys()),u=s.next();!u.done;u=s.next())a=u.value,l=n.get(a),e.g.has(a)||(c=Zc(l),e.g.set(a,c),rt(e,c,0));b(f)})}function Zc(e){return{stream:e,type:e.type,ia:null,Da:null,Qc:null,Hd:null,Gd:null,Fd:null,wb:null,endOfStream:!1,Ma:!1,Pa:null,yb:!1,Jc:0,ad:!1,cc:!1,Rd:!1,kc:!1,za:null}}qr.prototype.nc=function(e){var t=this,n,r,i,o,s;return E(function(u){switch(u.g){case 1:if(le(t.K),e.Ma||e.Pa==null||e.cc)return u.return();if(e.Pa=null,!e.yb){u.A(2);break}return m(u,eu(t,e,e.ad,e.Jc),3);case 3:return u.return();case 2:if(e.stream.segmentIndex){u.A(4);break}return n=e.stream,m(u,e.stream.createSegmentIndex(),5);case 5:if(n!=e.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),e.Pa==null&&rt(t,e,0),u.return();case 4:q(u,6),r=Nv(t,e),r!=null&&(rt(t,e,r),e.kc=!1),ee(u,7);break;case 6:return i=K(u),m(u,nf(t,i),8);case 8:return u.return();case 7:if(o=Array.from(t.g.values()),!t.o||!o.every(function(a){return a.endOfStream})){u.A(0);break}return m(u,t.B.U.endOfStream(),10);case 10:le(t.K),s=t.B.U.getDuration(),s!=0&&s<t.D.presentationTimeline.getDuration()&&t.D.presentationTimeline.Na(s),b(u)}})};function Nv(e,t){if(Qs(t))return hv(e.B.U,t.stream.originalId||""),null;t.type==re&&pv(e.B.U);var n=e.B.Oc(),r=t.Da?t.Da.endTime:n,i=dv(e.B.U,t.type,n),o=Math.max(e.D.minBufferTime||0,e.m.rebufferingGoal,e.m.bufferingGoal)*e.l;if(1e-6>e.D.presentationTimeline.getDuration()-r)return t.endOfStream=!0,t.type=="video"&&(n=e.g.get(re))&&Qs(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,i>=o)return e.m.updateIntervalSeconds/2;if(i=Fi(e.B.U,t.type),i=Pv(e,t,n,i),!i)return e.m.updateIntervalSeconds;o=1/0;var s=Array.from(e.g.values());s=h(s);for(var u=s.next();!u.done;u=s.next())u=u.value,Qs(u)||u.ia&&!u.ia.current()||(o=Math.min(o,u.Da?u.Da.endTime:n));return r>=o+e.D.presentationTimeline.g?e.m.updateIntervalSeconds:(bv(e,t,n,i).catch(function(){}),null)}function Pv(e,t,n,r){if(t.ia)return t.ia.current();if(t.Da||r)return t.ia=t.stream.segmentIndex.Hb(t.Da?t.Da.endTime:r),t.ia&&t.ia.next().value;e=e.m.inaccurateManifestTolerance,r=Math.max(n-e,0);var i=null;return e&&(t.ia=t.stream.segmentIndex.Hb(r),i=t.ia&&t.ia.next().value),i||(t.ia=t.stream.segmentIndex.Hb(n),i=t.ia&&t.ia.next().value),i}function bv(e,t,n,r){var i,o,s,u,a,l,c,f,d,g,v,y;return E(function(T){switch(T.g){case 1:return i=_e,o=t.stream,s=t.ia,t.Ma=!0,q(T,2),m(T,Ov(e,t,r),4);case 4:return le(e.K),e.j?T.return():(u=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",a=R.ReadableStream,e.m.lowLatencyMode&&a&&u?(f=new Uint8Array(0),d=function(w){var A,I,S;return E(function(C){return le(e.K),e.j?C.return():(f=Lv(f,w),A=!1,I=0,new oe().box("mdat",function(k){I=k.size+k.start,A=!0}).parse(f,!1,!0),A?(S=f.subarray(0,I),f=f.subarray(I),m(C,ef(e,t,n,o,r,S),0)):C.A(0))})},m(T,Zs(e,t,r,d),6)):(l=Zs(e,t,r),m(T,l,7)));case 7:return c=T.h,le(e.K),e.j?T.return():t.yb?(t.Ma=!1,rt(e,t,0),T.return()):m(T,ef(e,t,n,o,r,c),6);case 6:if(le(e.K),e.j)return T.return();t.Da=r,s.next(),t.Ma=!1,t.Rd=!1,g=e.B.U.gb(),v=g[t.type],JSON.stringify(v),t.yb||e.B.Od(),rt(e,t,0),ee(T,0);break;case 2:if(y=K(T),le(e.K,y),e.j)return T.return();if(t.Ma=!1,y.code==7001)t.Ma=!1,t.Pa=null,rt(e,t,0),T.A(0);else if(t.type==i.ea&&e.m.ignoreTextStreamFailures)e.g.delete(i.ea),T.A(0);else if(y.code==3017)jv(e,t,y),T.A(0);else if(y.code==1001&&y.data&&y.data[1]==404)t.Ma=!1,t.Pa=null,rt(e,t,1),T.A(0);else return t.kc=!0,y.severity=2,m(T,nf(e,y),0)}})}function Lv(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function jv(e,t,n){if(!Array.from(e.g.values()).some(function(i){return i!=t&&i.Rd})){var r=Math.round(100*e.l);if(20<r)e.l-=.2;else if(4<r)e.l-=.04;else{t.kc=!0,e.j=!0,e.B.onError(n);return}t.Rd=!0}rt(e,t,4)}function Ov(e,t,n){var r,i,o,s,u,a,l;return E(function(c){return r=[],i=Math.max(0,n.appendWindowStart-.1),o=n.appendWindowEnd+.01,s=n.timestampOffset,(s!=t.Hd||i!=t.Gd||o!=t.Fd)&&(u=function(){var f;return E(function(d){if(d.g==1)return q(d,2),t.Gd=i,t.Fd=o,t.Hd=s,m(d,gv(e.B.U,t.type,s,i,o),4);if(d.g!=2)return ee(d,0);throw f=K(d),t.Gd=null,t.Fd=null,t.Hd=null,f})},r.push(u())),!mv(n.g,t.Qc)&&(t.Qc=n.g)&&(a=Zs(e,t,n.g),l=function(){var f,d,g;return E(function(v){switch(v.g){case 1:return q(v,2),m(v,a,4);case 4:return f=v.h,le(e.K),d=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,m(v,bc(e.B.U,t.type,f,null,null,d),5);case 5:ee(v,0);break;case 2:throw g=K(v),t.Qc=null,g}})},e.B.Of(n.startTime,n.g),r.push(l())),m(c,Promise.all(r),0)})}function ef(e,t,n,r,i,o){var s;return E(function(u){if(u.g==1)return s=r.closedCaptions&&0<r.closedCaptions.size,(r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.m.dispatchAllEmsgBoxes)&&new oe().V("emsg",function(a){var l=r.emsgSchemeIdUris;if(a.version===0)var c=a.reader.qc(),f=a.reader.qc(),d=a.reader.O(),g=a.reader.O(),v=a.reader.O(),y=a.reader.O(),T=i.startTime+g/d;else d=a.reader.O(),T=a.reader.Qb()/d+i.timestampOffset,g=T-i.startTime,v=a.reader.O(),y=a.reader.O(),c=a.reader.qc(),f=a.reader.qc();a=a.reader.hb(a.reader.T.byteLength-a.reader.ba()),(l&&l.includes(c)||e.m.dispatchAllEmsgBoxes)&&(c=="urn:mpeg:dash:event:2012"?e.B.Pf():(l=new Map().set("detail",{startTime:T,endTime:T+v/d,schemeIdUri:c,value:f,timescale:d,presentationTimeDelta:g,eventDuration:v,id:y,messageData:a}),l=new U(qf,l),e.B.onEvent(l)))}).parse(o),m(u,_v(e,t,n),2);if(u.g!=3)return le(e.K),m(u,bc(e.B.U,t.type,o,i.startTime,i.endTime,s),3);le(e.K),b(u)})}function _v(e,t,n){var r,i,o,s;return E(function(u){if(u.g==1)return r=Math.max(e.m.bufferBehind,e.D.presentationTimeline.g),i=Pc(e.B.U,t.type),i==null?u.return():(o=n-i,s=o-r,.01>=s?u.return():m(u,e.B.U.remove(t.type,i,i+s),2));le(e.K),b(u)})}function Qs(e){return e&&e.type==re&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Zs(e,t,n,r){var i,o,s,u,a;return E(function(l){return l.g==1?(i=kt,o=Hr(n.ua(),n.sa,n.ja,e.m.retryParameters,r),s=t.stream,e.B.modifySegmentRequest(o,{type:s.type,init:n instanceof qe,duration:n.endTime-n.startTime,mimeType:s.mimeType,codecs:s.codecs,bandwidth:s.bandwidth}),u=e.B.sb.request(i,o),t.za=u,m(l,u.promise,2)):(a=l.h,t.za=null,l.return(a.data))})}function eu(e,t,n,r){var i,o;return E(function(s){if(s.g==1)return t.yb=!1,t.ad=!1,t.Jc=0,t.cc=!0,t.Da=null,t.Qc=null,t.ia=null,r?(i=e.B.Oc(),o=e.B.U.getDuration(),m(s,e.B.U.remove(t.type,i+r,o),3)):m(s,Lc(e.B.U,t.type),4);if(s.g!=3)return le(e.K),n?m(s,e.B.U.flush(t.type),3):s.A(3);le(e.K),t.cc=!1,t.endOfStream=!1,rt(e,t,0),b(s)})}function rt(e,t,n){var r=t.type;(r!=re||e.g.has(r))&&(t.Pa=new Cr(function(){var i;return E(function(o){if(o.g==1)return q(o,2),m(o,e.nc(t),4);if(o.g!=2)return ee(o,0);i=K(o),e.B&&e.B.onError(i),b(o)})}).W(n))}function Gi(e){e.Pa!=null&&(e.Pa.stop(),e.Pa=null)}function tf(e){return E(function(t){return e.za?m(t,e.za.abort(),0):t.A(0)})}function nf(e,t){return E(function(n){if(n.g==1)return m(n,bl(e.s),2);le(e.K),e.B.onError(t),t.handled||e.m.failureCallback(t),b(n)})}function rf(e,t){var n=tr(),r=this;this.j=t,this.i=e,this.l=n,this.s=null,this.o=[],this.h=this.g=null,this.u=Promise.resolve().then(function(){return Bv(r)}),this.K=new mn(function(){return Uv(r)})}rf.prototype.destroy=function(){return this.K.destroy()};function Uv(e){var t,n,r;return E(function(i){if(i.g==1)return e.h&&e.h.abort(),of(e),m(i,e.u,2);for(e.g&&e.g.La.ub(),t=h(e.o),n=t.next();!n.done;n=t.next())r=n.value,r.La.ub();e.g=null,e.o=[],e.j=null,b(i)})}function Kr(e,t){var n={Nb:function(){},Sc:function(){},ub:function(){},onError:function(){},Uc:function(){},Xg:function(){}};return e.o.push({create:t,La:n}),e.h&&e.h.abort(),of(e),n}function Bv(e){return E(function(t){if(e.K.g)t=t.A(0);else{if(e.o.length==0||e.g&&!e.g.pb)var n=!1;else{e.g&&(e.g.La.ub(),e.g=null),n=e.o.shift();var r=n.create(e.l);r?(n.La.Nb(),e.g={node:r.node,payload:r.payload,pb:r.pb,La:n.La}):n.La.Uc(),n=!0}n?n=Promise.resolve():e.g?n=Fv(e):(e.j.Nf(e.i),e.s=new ae,n=e.s),t=m(t,n,1)}return t})}function Fv(e){var t,n;return E(function(r){switch(r.g){case 1:return e.i=e.j.tf(e.i,e.l,e.g.node,e.g.payload),q(r,2),e.h=e.j.bf(e.i,e.l,e.g.payload),m(r,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.La.Sc(),e.g=null),ee(r,0);break;case 2:return t=K(r),t.code==7001?e.g.La.ub():e.g.La.onError(t),e.g=null,e.h=null,n=e,m(r,e.j.handleError(e.l,t),5);case 5:n.i=r.h,b(r)}})}function of(e){e.s&&(e.s.resolve(),e.s=null)}function Xe(e){this.g=null;for(var t=h(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())n=n.value,n.mode="disabled",n.label=="Shaka Player TextTrack"&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}p=Xe.prototype,p.remove=function(e,t){return this.g?(sf(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},p.append=function(e){function t(s){var u=[],a=700<=s.fontWeight,l=s.fontStyle=="italic",c=s.textDecoration.includes("underline");return a&&u.push("b"),l&&u.push("i"),c&&u.push("u"),a=u.reduce(function(f,d){return f+"<"+d+">"},""),u=u.reduceRight(function(f,d){return f+"</"+d+">"},""),s.lineBreak||s.spacer?(s.spacer&&He("shaka.extern.Cue","Please use lineBreak instead of spacer."),`
`):s.nestedCues.length?s.nestedCues.map(t).join(""):a+s.payload+u}var n=e.map(function(s){if(s.nestedCues.length){var u=s.clone();return u.nestedCues=[],u.payload=t(s),u}return s}),r=[];e=this.g.cues?Array.from(this.g.cues):[];var i={};n=h(n);for(var o=n.next();!o.done;i={Bb:i.Bb},o=n.next())i.Bb=o.value,e.some(function(s){return function(u){return u.startTime==s.Bb.startTime&&u.endTime==s.Bb.endTime&&u.text==s.Bb.payload}}(i))||(o=Vv(i.Bb))&&r.push(o);for(e=r.slice().sort(function(s,u){return s.startTime!=u.startTime?s.startTime-u.startTime:s.endTime!=u.endTime?s.endTime-u.startTime:"line"in VTTCue.prototype?r.indexOf(u)-r.indexOf(s):r.indexOf(s)-r.indexOf(u)}),e=h(e),i=e.next();!i.done;i=e.next())this.g.addCue(i.value)},p.destroy=function(){return this.g&&(sf(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},p.isTextVisible=function(){return this.g.mode=="showing"},p.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function Vv(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch{}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function sf(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=h(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}O("shaka.text.SimpleTextDisplayer",Xe),Xe.prototype.setTextVisibility=Xe.prototype.setTextVisibility,Xe.prototype.isTextVisible=Xe.prototype.isTextVisible,Xe.prototype.destroy=Xe.prototype.destroy,Xe.prototype.append=Xe.prototype.append,Xe.prototype.remove=Xe.prototype.remove;function uf(){}function tu(e){for(;e.firstChild;)e.removeChild(e.firstChild)}O("shaka.util.Dom",uf),uf.removeAllChildren=tu;function We(e,t){var n=this;this.o=!1,this.l=[],this.g=e,this.u=t,this.i=document.createElement("div"),this.i.classList.add("shaka-text-container"),this.i.style.textAlign="center",this.i.style.display="flex",this.i.style.flexDirection="column",this.i.style.alignItems="center",this.i.style.justifyContent="flex-end",this.u.appendChild(this.i),this.F=new G(function(){Gr(n)}).Fa(.25),this.j=new Map,this.h=new ue,this.h.C(document,"fullscreenchange",function(){Gr(n,!0)}),this.s=null,"ResizeObserver"in R&&(this.s=new ResizeObserver(function(){Gr(n,!0)}),this.s.observe(this.i))}p=We.prototype,p.append=function(e){var t=[].concat(fe(this.l)),n={};e=h(e);for(var r=e.next();!r.done;n={wc:n.wc},r=e.next())n.wc=r.value,t.some(function(i){return function(o){return qa(o,i.wc)}}(n))||this.l.push(n.wc);Gr(this)},p.destroy=function(){this.u.removeChild(this.i),this.i=null,this.o=!1,this.l=[],this.F&&this.F.stop(),this.j.clear(),this.h&&(this.h.release(),this.h=null),this.s&&(this.s.disconnect(),this.s=null)},p.remove=function(e,t){if(!this.i)return!1;var n=this.l.length;return this.l=this.l.filter(function(r){return r.startTime<e||r.endTime>=t}),Gr(this,n>this.l.length),!0},p.isTextVisible=function(){return this.o},p.setTextVisibility=function(e){this.o=e};function af(e,t,n,r,i){var o=!1,s=[],u=[];t=h(t);for(var a=t.next();!a.done;a=t.next()){a=a.value,i.push(a);var l=e.j.get(a),c=a.startTime<=r&&a.endTime>r,f=l?l.Me:null;l&&(s.push(l.he),c||(o=!0,e.j.delete(a),l=null)),c&&(u.push(a),l||(Hv(e,a,i),l=e.j.get(a),f=l.Me,o=!0)),0<a.nestedCues.length&&f&&af(e,a.nestedCues,f,r,i),i.pop()}if(o){for(r=h(s),i=r.next();!i.done;i=r.next())n.removeChild(i.value);for(u.sort(function(d,g){return d.startTime!=g.startTime?d.startTime-g.startTime:d.endTime-g.endTime}),u=h(u),a=u.next();!a.done;a=u.next())r=e.j.get(a.value),n.appendChild(r.he)}}function Gr(e,t){if(e.i){var n=e.g.currentTime;if((!e.o||(t===void 0?0:t))&&0<e.j.size&&(tu(e.i),e.j.clear()),e.o){for(var r=new Map,i=h(e.j.keys()),o=i.next();!o.done;o=i.next())o=o.value,r.set(o,e.j.get(o));af(e,e.l,e.i,n,[])}}}function Hv(e,t,n){var r=1<n.length,i=r?"span":"div";(t.lineBreak||t.spacer)&&(t.spacer&&He("shaka.extern.Cue","Please use lineBreak instead of spacer."),i="br"),r=!r&&0<t.nestedCues.length;var o=document.createElement(i);i!="br"&&qv(e,o,t,n,r),n=o,r&&(n=document.createElement("span"),n.classList.add("shaka-text-wrapper"),n.style.backgroundColor=t.backgroundColor,o.appendChild(n)),e.j.set(t,{he:o,Me:n})}function qv(e,t,n,r,i){var o=t.style,s=n.nestedCues.length==0,u=1<r.length;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(c){return"\xA0".repeat(c.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=nu(n.linePadding,n,e.u),o.paddingRight=nu(n.linePadding,n,e.u),n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),i||((t=Kv(r,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),a&&(l.textContent=a)}u&&!r[r.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=nu(n.fontSize,n,e.u),n.line?n.lineInterpretation==1&&(o.position="absolute",o.left="0",o.top="0",n.writingMode==gr?(o.width="100%",n.lineAlign==un?o.top=n.line+"%":n.lineAlign=="end"&&(o.bottom=n.line+"%")):n.writingMode=="vertical-lr"?(o.height="100%",n.lineAlign==un?o.left=n.line+"%":n.lineAlign=="end"&&(o.right=n.line+"%")):(o.height="100%",n.lineAlign==un?o.right=n.line+"%":n.lineAlign=="end"&&(o.left=n.line+"%"))):n.region&&n.region.id&&(e=n.region.widthUnits==Gt?"%":"px",r=n.region.viewportAnchorUnits==Gt?"%":"px",o.height=n.region.height+(n.region.heightUnits==Gt?"%":"px"),o.width=n.region.width+e,o.position="absolute",o.top=n.region.viewportAnchorY+r,o.left=n.region.viewportAnchorX+r),o.lineHeight=n.lineHeight,n.position&&(n.writingMode==gr?o.paddingLeft=n.position:o.paddingTop=n.position),n.positionAlign=="line-left"?o.cssFloat="left":n.positionAlign=="line-right"&&(o.cssFloat="right"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==gr?o.width=n.size+"%":o.height=n.size+"%")}function nu(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),jg:r[2]}:null;if(!r)return e;var i=r.value;switch(r.jg){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function Kv(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}O("shaka.text.UITextDisplayer",We),We.prototype.setTextVisibility=We.prototype.setTextVisibility,We.prototype.isTextVisible=We.prototype.isTextVisible,We.prototype.remove=We.prototype.remove,We.prototype.destroy=We.prototype.destroy,We.prototype.append=We.prototype.append;function Gv(e,t){function n(u){for(var a=u,l=h(t),c=l.next();!c.done;c=l.next())c=c.value,c.end&&c.start<u&&(a+=c.end-c.start);return u=Math.floor(a/3600),l=Math.floor(a/60%60),c=Math.floor(a%60),a=Math.floor(1e3*a%1e3),(10>u?"0":"")+u+":"+(10>l?"0":"")+l+":"+(10>c?"0":"")+c+"."+(100>a?10>a?"00":"0":"")+a}function r(u){var a=[],l=700<=u.fontWeight,c=u.fontStyle=="italic",f=u.textDecoration.includes("underline");return l&&a.push("b"),c&&a.push("i"),f&&a.push("u"),l=a.reduce(function(d,g){return d+"<"+g+">"},""),a=a.reduceRight(function(d,g){return d+"</"+g+">"},""),u.lineBreak||u.spacer?(u.spacer&&He("shaka.text.Cue","Please use lineBreak instead of spacer."),`
`):u.nestedCues.length?u.nestedCues.map(r).join(""):l+u.payload+a}var i=e.map(function(u){if(u.nestedCues.length){var a=u.clone();return a.nestedCues=[],a.payload=r(u),a}return u}),o=`WEBVTT

`;i=h(i);for(var s=i.next();!s.done;s=i.next())s=s.value,o+=n(s.startTime)+" --> "+n(s.endTime)+function(u){var a=[];switch(u.textAlign){case"left":a.push("align:left");break;case"right":a.push("align:right");break;case Kt:a.push("align:middle");break;case"start":a.push("align:start");break;case"end":a.push("align:end")}switch(u.writingMode){case"vertical-lr":a.push("vertical:lr");break;case"vertical-rl":a.push("vertical:rl")}return a.length?" "+a.join(" "):""}(s)+`
`,o+=s.payload+`

`;return o}O("shaka.text.WebVttGenerator",function(){});function zv(e,t){this.B=e,this.m=t,this.h="",this.l=void 0,this.g=!1,this.j=!0,this.i=!1}function lf(e,t,n){try{if(e.m.enabled){var r={d:1e3*n.duration,st:e.B.Y()?ey:Zv};r.ot=Wv(n);var i=r.ot===Xi||r.ot===su||r.ot===Wi||r.ot===au;i&&(r.bl=Yv(e,n.type)),n.bandwidth&&(r.br=n.bandwidth/1e3),i&&r.ot!==au&&(r.tb=$v(e,r.ot)/1e3),iu(e,t,r)}}catch(o){on("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",o)}}function Xv(e,t,n){try{if(!e.m.enabled)return t;var r=ru(e);e:{switch(n){case"video/webm":case"video/mp4":var i=Wi;break e;case"application/x-mpegurl":i=ff;break e}i=void 0}r.ot=i,r.su=!0;var o=zi(r);return ou(t,o)}catch(s){return on("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}function cf(e,t){try{if(!e.m.enabled)return t;var n=ru(e);n.ot=uu,n.su=!0;var r=zi(n);return ou(t,r)}catch(i){return on("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",i),t}}function ru(e){return e.h||(e.h=e.m.sessionId||R.crypto.randomUUID()),{v:1,sf:e.l,sid:e.h,cid:e.m.contentId,mtp:e.B.getBandwidthEstimate()/1e3}}function iu(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.m.useHeaders:r;if(e.m.enabled){Object.assign(n,ru(e)),n.pr=e.B.Nc();var i=n.ot===Xi||n.ot===Wi;if(e.i&&i&&(n.bs=!0,n.su=!0,e.i=!1),n.su==null&&(n.su=e.j),r)e=Jv(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=zi(n);o&&(t.uris=t.uris.map(function(s){return ou(s,o)}))}}}function Wv(e){var t=e.type;if(e.init)return Qv;if(t=="video")return e.codecs.includes(",")?Wi:Xi;if(t=="audio")return su;if(t=="text")return e.mimeType==="application/mp4"?au:uu}function Yv(e,t){var n=e.B.gb()[t];if(!n.length)return NaN;var r=e.B.gf();return(n=n.find(function(i){return i.start<=r&&i.end>=r}))?1e3*(n.end-r):NaN}function $v(e,t){var n=e.B.ob();if(!n.length)return NaN;var r=n[0];n=h(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>r.bandwidth&&(r=i);switch(t){case Xi:return r.videoBandwidth||NaN;case su:return r.audioBandwidth||NaN;default:return r.bandwidth}}function zi(e){function t(f){return 100*n(f/100)}function n(f){return Math.round(f)}function r(f){return!Number.isNaN(f)&&f!=null&&f!==""&&f!==!1}var i=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(f){return encodeURIComponent(f)},rtp:t,tb:n},s=Object.keys(e||{}).sort();s=h(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=e[u];if(r(a)&&(u!=="v"||a!==1)&&(u!="pr"||a!==1)){var l=o[u];l&&(a=l(a)),l=typeof a;var c=void 0;c=l==="string"&&u!=="ot"&&u!=="sf"&&u!=="st"?u+"="+JSON.stringify(a):l==="boolean"?u:l==="symbol"?u+"="+a.description:u+"="+a,i.push(c)}}return i.join(",")}function Jv(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=h(t);for(var s=t.next();!s.done;s=t.next())s=s.value,i[o[s]!=null?o[s]:1][s]=e[s];for(e=0;e<i.length;e++)(o=zi(i[e]))&&(n["CMCD-"+r[e]]=o);return n}function ou(e,t){if(!t||e.includes("offline:"))return e;var n=new Ze(e);return n.g.set("CMCD",t),n.toString()}var ff="m",su="a",Xi="v",Wi="av",Qv="i",uu="c",au="tt",Zv="v",ey="l";O("shaka.util.CmcdManager.StreamingFormat",{tg:"d",Ag:"h",Kg:"s",Gg:"o"});function lu(){}function cu(e,t,n,r,i){var o=i in r,s=!0,u;for(u in t){var a=i+"."+u,l=o?r[i]:n[u];o||u in n?t[u]===void 0?l===void 0||o?delete e[u]:e[u]=qn(l):l.constructor==Object&&t[u]&&t[u].constructor==Object?(e[u]||(e[u]=qn(l)),a=cu(e[u],t[u],l,r,a),s=s&&a):typeof t[u]!=typeof l||t[u]==null||typeof t[u]!="function"&&t[u].constructor!=l.constructor?(dr("Invalid config, wrong type for "+a),s=!1):(typeof n[u]=="function"&&n[u].length!=t[u].length&&me("Unexpected number of arguments for "+a),e[u]=t[u]):(dr("Invalid config, unrecognized key "+a),s=!1)}return s}function fu(e,t){for(var n={},r=n,i=0,o=0;i=e.indexOf(".",i),!(0>i);)(i==0||e[i-1]!="\\")&&(o=e.substring(o,i).replace(/\\\./g,"."),r[o]={},r=r[o],o=i+1),i+=1;return r[e.substring(o).replace(/\\\./g,".")]=t,n}O("shaka.util.ConfigUtils",lu),lu.convertToConfigObject=fu,lu.mergeConfigObjects=cu;function df(){}function zr(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:Vn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Cm,logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[]},n={retryParameters:Vn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(s){return s}},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,useFullSegmentsForStartTime:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E"}},r={retryParameters:Vn(),failureCallback:function(s){return[s]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1};(navigator.userAgent.match(/Edge\//)||hn()||kr())&&(r.gapDetectionThreshold=.5),(Ue("Web0S")||hn()||kr())&&(r.stallSkip=0);var i={trackSelectionCallback:function(s){return E(function(u){return u.return(s)})},downloadSizeCallback:function(s){var u;return E(function(a){return a.g==1?navigator.storage&&navigator.storage.estimate?m(a,navigator.storage.estimate(),3):a.return(!0):(u=a.h,a.return(u.usage+s<.95*u.quota))})},progressCallback:function(s,u){return[s,u]},usePersistentLicense:!0},o={drm:t,manifest:n,streaming:r,offline:i,abrFactory:function(){return new xe},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1}};return i.trackSelectionCallback=function(s){return E(function(u){return u.return(ty(s,o.preferredAudioLanguage))})},o}function Jn(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return cu(e,t,n||zr(),r,"")}function ty(e,t){var n=e.filter(function(u){return u.type=="variant"}),r=[],i=Si(t,n.map(function(u){return u.language}));i&&(r=n.filter(function(u){return J(u.language)==i})),r.length==0&&(r=n.filter(function(u){return u.primary})),r.length==0&&(n.map(function(u){return u.language}),r=n);var o=r.filter(function(u){return u.height&&480>=u.height});if(o.length&&(o.sort(function(u,a){return a.height-u.height}),r=o.filter(function(u){return u.height==o[0].height})),n=[],r.length){var s=Math.floor(r.length/2);r.sort(function(u,a){return u.bandwidth-a.bandwidth}),n.push(r[s])}for(r=h(e),s=r.next();!s.done;s=r.next())s=s.value,s.type!=re&&s.type!="image"||n.push(s);return n}O("shaka.util.PlayerConfiguration",df),df.mergeConfigObjects=Jn;function ny(){this.g=null,this.h=[]}function Yi(e,t){if(e.g==null)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function du(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=h(e.h),i=r.next();!i.done;i=r.next())i=i.value,n+=i.state==t?i.duration:0;return n}function ry(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],r=h(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}function iy(){this.i=this.h=null,this.g=[]}function hu(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function hf(){this.s=this.u=this.J=this.G=this.o=this.j=this.I=this.l=this.i=this.M=this.P=this.S=this.F=this.$=NaN,this.g=new ny,this.h=new iy}function M(e,t){$.call(this);var n=this;this.l=Iu,this.Dc=this.g=null,this.ma=!1,this.h=new ue,this.sd=this.s=this.Yb=this.D=this.Gc=this.u=this.i=this.na=this.P=this.Hc=this.J=this.vc=this.I=this.Sa=this.G=this.M=this.o=this.R=null,this.Cd=1e9,this.m=Qn(this),this.yd={width:1/0,height:1/0},this.j=null,this.Ja=new Bn(this.m.preferredAudioLanguage,this.m.preferredVariantRole,this.m.preferredAudioChannelCount),this.Qa=this.m.preferredTextLanguage,this.$b=this.m.preferredTextRole,this.Zb=this.m.preferForcedSubs,this.td=[],this.ac=null,t&&t(this),this.R=yy(this),this.R.Xd(this.m.streaming.forceHTTPS),this.F=null,ro&&(this.F=an(ro)),this.h.C(R,"online",function(){n.Sd()}),this.wa={name:"detach"},this.Ua={name:"attach"},this.da={name:"unload"},this.Dd={name:"manifest-parser"},this.xd={name:"manifest"},this.Ra={name:"media-source"},this.ud={name:"drm-engine"},this.S={name:"load"},this.Ed={name:"src-equals-drm-engine"},this.Db={name:"src-equals"};var r=new Map;r.set(this.Ua,function(i,o){return Tt(sy(n,i,o))}),r.set(this.wa,function(i){return i.H&&(n.h.Ga(i.H,"error"),i.H=null),n.F&&n.F.release(),n.g=null,i=Promise.resolve(),Tt(i)}),r.set(this.da,function(i){return Tt(pf(n,i))}),r.set(this.Ra,function(i){return i=uy(n,i),Tt(i)}),r.set(this.Dd,function(i,o){var s=ay(n,i,o);return Tt(s)}),r.set(this.xd,function(i){return ly(n,i)}),r.set(this.ud,function(i){return i=cy(n,i),Tt(i)}),r.set(this.S,function(i,o){return Tt(fy(n,i,o))}),r.set(this.Ed,function(i,o){var s=dy(n,i,o);return Tt(s)}),r.set(this.Db,function(i,o){return hy(n,i,o)}),this.oa=new rf(this.wa,{tf:function(i,o,s,u){var a=null;return i==n.wa&&(a=s==n.wa?n.wa:n.Ua),i==n.Ua&&(a=s==n.wa||o.H!=u.H?n.wa:s==n.Ua?n.Ua:s==n.Ra||s==n.S?n.Ra:s==n.Db?n.Ed:null),i==n.Ra&&(a=s==n.S&&o.H==u.H?n.Dd:n.da),i==n.Dd&&(a=yu(n.S,n.xd,n.da,s,o,u)),i==n.xd&&(a=yu(n.S,n.ud,n.da,s,o,u)),i==n.ud&&(a=yu(n.S,n.S,n.da,s,o,u)),i==n.Ed&&(a=s==n.Db&&o.H==u.H?n.Db:n.da),(i==n.S||i==n.Db)&&(a=n.da),i==n.da&&(a=u.H&&o.H==u.H?n.Ua:n.wa),a},bf:function(i,o,s){return n.dispatchEvent(Se($f,new Map().set("state",i.name))),r.get(i)(o,s)},handleError:function(i){return E(function(o){return o.g==1?m(o,pf(n,i),2):o.return(i.H?n.Ua:n.wa)})},Nf:function(i){n.dispatchEvent(Se(Jf,new Map().set("state",i.name)))}}),e&&this.bc(e,!0)}Ne(M,$);function Se(e,t){return new U(e,t)}p=M.prototype,p.destroy=function(){var e=this,t;return E(function(n){switch(n.g){case 1:return e.l==ct?n.return():(e.l=ct,t=Kr(e.oa,function(){return{node:e.wa,payload:tr(),pb:!1}}),m(n,new Promise(function(r){t.Nb=function(){},t.Sc=function(){r()},t.ub=function(){r()},t.onError=function(){r()},t.Uc=function(){r()}}),2));case 2:return m(n,e.oa.destroy(),3);case 3:if(e.h&&(e.h.release(),e.h=null),e.sd=null,e.s=null,e.m=null,e.j=null,e.Dc=null,e.P=null,!e.R){n.A(4);break}return m(n,e.R.destroy(),5);case 5:e.R=null;case 4:$.prototype.release.call(e),b(n)}})},p.bc=function(e,t){if(t=t===void 0?!0:t,this.l==ct)return Promise.reject(An());var n=tr();n.H=e,ut()||(t=!1);var r=t?this.Ra:this.Ua,i=Kr(this.oa,function(){return{node:r,payload:n,pb:!1}});return i.Nb=function(){},wu(i)},p.detach=function(){var e=this;if(this.l==ct)return Promise.reject(An());var t=Kr(this.oa,function(){return{node:e.wa,payload:tr(),pb:!1}});return t.Nb=function(){},wu(t)},p.de=function(e){var t=this;if(e=e===void 0?!0:e,this.l==ct)return Promise.reject(An());ut()||(e=!1);var n=tr(),r=Kr(this.oa,function(i){var o=i.H&&e?t.Ra:i.H?t.Ua:t.wa;return n.H=i.H,{node:o,payload:n,pb:!1}});return r.Nb=function(){},wu(r)},p.og=function(e){this.ac=e},p.load=function(e,t,n){var r=this;if(this.ac=null,this.l==ct)return Promise.reject(An());this.dispatchEvent(Se(zf));var i=tr();i.uri=e,i.ae=Date.now()/1e3,n&&(i.mimeType=n),t!==void 0&&(i.startTime=t);var o=oy(this,i)?this.Db:this.S,s=Kr(this.oa,function(u){return u.H==null?null:(i.H=u.H,{node:o,payload:i,pb:!0})});return this.j=new hf,this.P=Sy(this),s.Nb=function(){},new Promise(function(u,a){s.Uc=function(){return a(new x(2,7,7002))},s.Sc=function(){u(),r.dispatchEvent(Se(Gf))},s.ub=function(){return a(An())},s.onError=function(l){return a(l)}})};function oy(e,t){if(!ut())return!0;var n=t.mimeType,r=t.uri||"";if(n||(n=vn(r),n=Mu[n]),n){if((t.H||fl()).canPlayType(n)=="")return!1;if(!ut()||!(n in nt||vn(r)in yn)||e.m.streaming.preferNativeHls)return!0;if(Ei())return e.m.streaming.useNativeHlsOnSafari}return!1}function sy(e,t,n){return t.H==null&&(t.H=n.H,e.h.C(t.H,"error",function(){var r=vu(e);r&&In(e,r)})),e.g=t.H,Promise.resolve()}function pf(e,t){var n,r,i,o,s,u,a,l,c;return E(function(f){switch(f.g){case 1:return e.l!=ct&&(e.l=Iu),n=e.td.map(function(d){return d()}),e.td=[],m(f,Promise.all(n),2);case 2:if(e.dispatchEvent(Se(rd)),t.mimeType=null,t.startTime=null,t.uri=null,t.H&&(e.h.Ga(t.H,"loadedmetadata"),e.h.Ga(t.H,"playing"),e.h.Ga(t.H,"pause"),e.h.Ga(t.H,"ended"),e.h.Ga(t.H,"ratechange")),e.Sa&&(e.Sa.release(),e.Sa=null),e.vc&&(e.vc.stop(),e.vc=null),!e.u){f.A(3);break}return m(f,e.u.stop(),4);case 4:e.u=null,e.Gc=null;case 3:if(!e.s){f.A(5);break}return m(f,e.s.stop(),5);case 5:if(!e.i){f.A(7);break}return m(f,e.i.destroy(),8);case 8:e.i=null;case 7:if(e.I&&(e.I.release(),e.I=null),e.G&&(e.G.release(),e.G=null),!e.M){f.A(9);break}return m(f,e.M.destroy(),10);case 10:e.M=null;case 9:if(e.F&&e.F.onAssetUnload(),!t.H||!t.H.src){f.A(11);break}return m(f,new Promise(function(d){return new G(d).W(.1)}),12);case 12:for(t.H.removeAttribute("src"),t.H.load();t.H.lastChild;)t.H.removeChild(t.H.firstChild);case 11:if(!e.o){f.A(13);break}return m(f,e.o.destroy(),14);case 14:e.o=null;case 13:if(e.Yb=null,e.J=null,e.D){for(r=h(e.D.variants),i=r.next();!i.done;i=r.next())for(o=i.value,s=h([o.audio,o.video]),u=s.next();!u.done;u=s.next())(a=u.value)&&a.segmentIndex&&a.segmentIndex.release();for(l=h(e.D.textStreams),u=l.next();!u.done;u=l.next())c=u.value,c.segmentIndex&&c.segmentIndex.release()}e.D=null,e.j=new hf,e.vd=null,gu(e),b(f)}})}function uy(e,t){var n,r,i,o;return E(function(s){if(s.g==1)return n=new kc,r=e.m.textDisplayFactory,i=an(r),e.vd=r,o=xy(t.H,n,i,function(u,a,l){u=h(u);for(var c=u.next();!c.done;c=u.next())if(c=c.value,c.data&&c.cueTime&&c.frames){for(var f=c.cueTime+a,d=l,g=h(c.frames),v=g.next();!v.done;v=g.next())gf(e,f,d,"ID3",v.value);e.F&&e.F.onHlsTimedMetadata(c,f)}}),m(s,o.G,2);e.M=o,b(s)})}function ay(e,t,n){var r,i,o,s;return E(function(u){if(u.g==1)return t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,i=e.R,e.Yb=r,o=e,m(u,tc(r,i,e.m.manifest.retryParameters,t.mimeType),2);o.Gc=u.h,e.u=an(e.Gc),s=qn(e.m.manifest),n.H&&n.H.nodeName==="AUDIO"&&(s.disableVideo=!0),e.u.configure(s),b(u)})}function ly(e,t){var n=t.uri,r=e.R;e.Hc=new Js(function(){return e.rc()}),e.Hc.addEventListener("regionadd",function(s){s=s.region,Wr(e,td,s),e.F&&e.F.onDashTimedMetadata(s)}),e.na=null,e.m.streaming.observeQualityChanges&&(e.na=new Hi(function(){return e.gb()}),e.na.addEventListener("qualitychange",function(s){var u=s.quality;s=s.position,u=new Map().set("mediaQuality",{bandwidth:u.bandwidth,audioSamplingRate:u.audioSamplingRate,codecs:u.codecs,contentType:u.contentType,frameRate:u.frameRate,height:u.height,mimeType:u.mimeType,channelsCount:u.channelsCount,pixelAspectRatio:u.pixelAspectRatio,width:u.width}).set("position",s),e.dispatchEvent(Se(Wf,u))}));var i={networkingEngine:r,modifyManifestRequest:function(s,u){var a=e.P;try{a.m.enabled&&(a.l=u.format,iu(a,s,{ot:ff,su:!a.g}))}catch(l){on("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",l)}},modifySegmentRequest:function(s,u){lf(e.P,s,u)},filter:function(s){return If(e,s)},makeTextStreamsForClosedCaptions:function(s){return Ay(e,s)},onTimelineRegionAdded:function(s){var u=e.Hc;e:{for(var a=h(u.g),l=a.next();!l.done;l=a.next())if(l=l.value,l.schemeIdUri==s.schemeIdUri&&l.id==s.id&&l.startTime==s.startTime&&l.endTime==s.endTime){a=l;break e}a=null}a==null&&(u.g.add(s),s=new U("regionadd",new Map([["region",s]])),u.dispatchEvent(s))},onEvent:function(s){return e.dispatchEvent(s)},onError:function(s){return In(e,s)},isLowLatencyMode:function(){return e.m.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.m.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)}},o=Date.now()/1e3;return new de(function(){var s,u,a,l;return E(function(c){if(c.g==1)return s=e,m(c,e.u.start(n,i),2);if(s.D=c.h,u=Se(Xf),e.dispatchEvent(u),e.D.variants.length==0)throw new x(2,4,4036);vy(e.D),a=Date.now()/1e3,l=a-o,e.j.I=l,b(c)})}(),function(){return e.u.stop()})}function cy(e,t){var n,r;return E(function(i){return i.g==1?(n=Date.now()/1e3,r=!0,e.o=vf(e,{sb:e.R,onError:function(o){In(e,o)},Tc:function(o){Nf(e,o)},onExpirationUpdated:function(o,s){Pf(e,o,s)},onEvent:function(o){e.dispatchEvent(o),o.type==Tu&&r&&(r=!1,e.j.j=Date.now()/1e3-n)}}),e.o.configure(e.m.drm),m(i,Kl(e.o,e.D.variants,e.D.offlineSessionIds),2)):i.g!=3?m(i,e.o.bc(t.H),3):m(i,If(e,e.D),0)})}function fy(e,t,n){var r,i,o,s,u,a,l,c,f,d,g;return E(function(v){switch(v.g){case 1:if(t.startTime=n.startTime,e.ac!=null&&(t.startTime=e.ac,e.ac=null),r=t.H,i=t.uri,e.Yb=i,e.I=new Br({Pc:function(){return t.H.playbackRate},Lc:function(){return t.H.defaultPlaybackRate},Zd:function(y){t.H.playbackRate=y},we:function(y){t.H.currentTime+=y}}),o=function(){return Ji(e)},s=function(){return Mf(e)},e.h.C(r,"playing",o),e.h.C(r,"pause",o),e.h.C(r,"ended",o),e.h.C(r,"ratechange",s),u=e.m.abrFactory,e.s&&e.sd==u||(e.sd=u,e.s=an(u),typeof e.s.playbackRateChanged!="function"&&(He("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.s.playbackRateChanged=function(){}),e.s.configure(e.m.abr)),e.Ja=new Bn(e.m.preferredAudioLanguage,e.m.preferredVariantRole,e.m.preferredAudioChannelCount),e.Qa=e.m.preferredTextLanguage,e.$b=e.m.preferredTextRole,e.Zb=e.m.preferForcedSubs,bf(e.D.presentationTimeline,e.m.playRangeStart,e.m.playRangeEnd),e.s.init(function(y,T,w){e.i&&y!=e.i.h&&Zi(e,y,!0,T===void 0?!1:T,w===void 0?0:w)}),e.G=wy(e,t.startTime),e.Sa=Ty(e),a=Math.max(e.D.minBufferTime,e.m.streaming.rebufferingGoal),yf(e,a),dl(e.D,e.m.preferredVideoCodecs,e.m.preferredAudioCodecs,e.m.preferredAudioChannelCount,e.m.preferredDecodingAttributes),e.i=Ey(e),e.i.configure(e.m.streaming),e.l=$e,e.dispatchEvent(Se(xu)),l=null,e.ob().find(function(y){return y.active})){v.A(2);break}if(l=Zn(e)?e.s.chooseVariant():null,Zi(e,l,!0,!1,0),!e.m.streaming.startAtSegmentBoundary){v.A(3);break}return c=e.G.l(),m(v,Cy(l,c),4);case 4:f=v.h,e.G.o(f);case 3:Cf(e,null,pn(l));case 2:return d=e.nb().find(function(y){return y.active}),d||((g=Ms(e.D.textStreams,e.Qa,e.$b,e.Zb)[0]||null)&&hu(e.j.h,g,!0),l&&(g?(l.audio&&ky(e,l.audio,g)&&(e.ma=!0),e.ma&&e.M.o.setTextVisibility(!0),Rf(e)):e.ma=!1),g&&(e.m.streaming.alwaysStreamText||e.Bd())&&Ki(e.i,g)),m(v,e.i.start(),5);case 5:e.m.abr.enabled&&(e.s.enable(),Df(e)),vl(e.i?e.i.h:null,e.D),jf(e.D),Ye(e),Zn(e),e.D.variants.some(function(y){return y.primary}),e.h.ya(r,"loadedmetadata",function(){e.j.l=Date.now()/1e3-n.ae}),b(v)}})}function dy(e,t,n){var r,i,o,s,u,a,l;return E(function(c){return c.g==1?(r=_e,i=Date.now()/1e3,o=!0,e.o=vf(e,{sb:e.R,onError:function(f){In(e,f)},Tc:function(f){Nf(e,f)},onExpirationUpdated:function(f,d){Pf(e,f,d)},onEvent:function(f){e.dispatchEvent(f),f.type==Tu&&o&&(o=!1,e.j.j=Date.now()/1e3-i)}}),e.o.configure(e.m.drm),s=n.uri||"",u=vn(s),a=Mu[u],a=="application/x-mpegurl"&&Ei()&&(a="application/vnd.apple.mpegurl"),a||(a="video/mp4"),l={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:a,codecs:n.mimeType?qg(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:r.Ta,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.o.S=!0,m(c,Kl(e.o,[l],[]),2)):m(c,e.o.bc(t.H),0)})}function hy(e,t,n){function r(){return Ji(e)}t.uri=n.uri,t.startTime=n.startTime,e.Yb=t.uri,e.G=new _r(t.H),t.startTime!=null&&e.G.o(t.startTime),e.I=new Br({Pc:function(){return t.H.playbackRate},Lc:function(){return t.H.defaultPlaybackRate},Zd:function(u){t.H.playbackRate=u},we:function(u){t.H.currentTime+=u}}),yf(e,e.m.streaming.rebufferingGoal),e.h.C(t.H,"playing",r),e.h.C(t.H,"pause",r),e.h.C(t.H,"ended",r),e.h.C(t.H,"ratechange",function(){return Mf(e)}),e.g.preload!="none"&&e.h.ya(e.g,"loadedmetadata",function(){e.j.l=Date.now()/1e3-n.ae}),e.g.audioTracks&&(e.h.C(e.g.audioTracks,"addtrack",function(){return Ye(e)}),e.h.C(e.g.audioTracks,"removetrack",function(){return Ye(e)}),e.h.C(e.g.audioTracks,"change",function(){return Ye(e)})),e.g.textTracks&&(e.h.C(e.g.textTracks,"addtrack",function(u){if(u.track)switch(u=u.track,u.kind){case"metadata":my(e,u);break;case"chapters":mf(e,u);break;default:Ye(e)}}),e.h.C(e.g.textTracks,"removetrack",function(){return Ye(e)}),e.h.C(e.g.textTracks,"change",function(){return Ye(e)}));var i=vn(t.uri);t.H.src=Xv(e.P,t.uri,Mu[i]),(hn()||Ue("Web0S"))&&t.H.load(),e.l=ft,e.dispatchEvent(Se(xu));var o=new ae;Sn(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){o.resolve()});var s=!1;return e.td.push(function(){s=!0}),Sn(e.g,HTMLMediaElement.HAVE_CURRENT_DATA,e.h,function(){var u;return E(function(a){if(a.g==1)return s?a.return():(py(e),u=Xr(e),u.find(function(l){return l.mode!="disabled"})?a.A(2):m(a,new Promise(function(l){e.h.ya(e.g.textTracks,"change",l),new G(l).W(1)}),2));if(s)return a.return();gy(e),b(a)})}),e.g.error?o.reject(vu(e)):e.g.preload=="none"&&(me('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),o.resolve()),e.h.ya(e.g,"error",function(){o.reject(vu(e))}),new de(o,function(){return o.reject(new x(2,7,7001)),Promise.resolve()})}function py(e){var t=e.m.preferredAudioLanguage;if(t!=""){e.Ud(t);var n=e.m.preferredVariantRole;n!=""&&e.Ud(t,n)}}function gy(e){var t=e.m.preferredTextLanguage,n=e.m.preferForcedSubs;if(t!=""){e.Vd(t,"",n);var r=e.m.preferredTextRole;r!=""&&e.Vd(t,r,n)}}function my(e,t){t.kind=="metadata"&&(t.mode="hidden",e.h.C(t,"cuechange",function(){if(t.activeCues)for(var n=h(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,gf(e,r.startTime,r.endTime,r.type,r.value),e.F&&e.F.onCueMetadataChange(r.value)}),new G(function(){var n=Iy(e);n=h(n);for(var r=n.next();!r.done;r=n.next())r.value.mode="hidden"}).Sb().W(.5))}function gf(e,t,n,r,i){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",i),e.dispatchEvent(Se(Yf,t))}function mf(e,t){t&&t.kind=="chapters"&&(t.mode="hidden",new G(function(){var n=$i(e);n=h(n);for(var r=n.next();!r.done;r=n.next())r.value.mode="hidden"}).Sb().W(.5))}function vy(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function vf(e,t){return new Di(t,e.m.drm.updateExpirationTime)}function yy(e){return new ie(function(t,n){e.s&&e.s.segmentDownloaded(t,n)},function(t,n,r){t=new Map().set("headers",t).set("request",n).set("requestType",r),e.dispatchEvent(Se(Hf,t))},function(t,n,r,i){t=new Map().set("request",t).set("error",n).set("httpResponseCode",r).set("aborted",i),e.dispatchEvent(Se(Vf,t))})}function wy(e,t){return new Ur(e.g,e.D,e.m.streaming,t,function(){if(e.Sa&&$c(e.Sa,!0),e.i)for(var n=e.i,r=n.B.Oc(),i=n.m.smallGapLimit,o=h(n.g.keys()),s=o.next();!s.done;s=o.next()){s=s.value;var u=n.g.get(s);u.ia=null;var a=n.B.U;if(s==re?(a=a.i,a=a.g==null||a.h==null?!1:r>=a.g&&r<a.h):(a=Wn(a,s),a=Ks(a,r,i)),!a&&((Fi(n.B.U,s)!=null||u.Ma)&&Rv(n,u),u.za&&(u.za.abort(),u.za=null),s===re))for(s=n.B.U.F.g,s.l=0,s.h=[],s.g=[],u=s.i,u.i=[],u.h=[],u.g=0,Bs(s),s=h(s.j.values()),u=s.next();!u.done;u=s.next())Sc(u.value)}e.J&&pu(e)},function(n){return e.dispatchEvent(n)})}function Ty(e){var t=new qi(e.Hc);t.addEventListener("enter",function(r){Wr(e,Su,r.region)}),t.addEventListener("exit",function(r){Wr(e,Eu,r.region)}),t.addEventListener("skip",function(r){var i=r.region;r.seeking||(Wr(e,Su,i),Wr(e,Eu,i))});var n=new Yc(e.g);return n.g.add(t),e.na&&n.g.add(e.na),n}function yf(e,t){e.J=new dm,e.J.g=Fn,Nl(e.J,t,Math.min(.5,t/2)),gu(e),e.vc=new G(function(){pu(e)}).Fa(.25)}function pu(e){switch(e.l){case ft:if(e.g.ended)var t=!0;else{var n=qs(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case $e:e:if(e.g.ended||Nc(e.M))t=!0;else{if(e.D.presentationTimeline.Y()){n=e.D.presentationTimeline.mb();var r=qs(e.g.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=Rc(e.g.buffered,e.g.currentTime),n=e.J;var i=t,o=n.h.get(n.g);t=n.g,r=i||r>=o?Mi:Fn,n.g=r,t!=r&&gu(e)}function xy(e,t,n,r){return new Dc(e,t,n,r)}function Sy(e){return new zv({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},gb:function(){return e.gb()},gf:function(){return e.g?e.g.currentTime:0},ob:function(){return e.ob()},Nc:function(){return e.Nc()},Y:function(){return e.Y()}},e.m.cmcd)}function Ey(e){return new qr(e.D,{Oc:function(){return e.G.l()},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},modifySegmentRequest:function(t,n){lf(e.P,t,n)},U:e.M,sb:e.R,onError:function(t){return In(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Pf:function(){e.u&&e.u.update&&e.u.update()},Od:function(){e.G&&e.G.G(),pu(e)},Of:function(t,n){var r=n.Id;r&&e.na&&Ev(e.na,r,t)}})}p.configure=function(e,t){arguments.length==2&&typeof e=="string"&&(e=fu(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(He("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01));var n=Jn(this.m,e,Qn(this));return wf(this),n};function wf(e){if(e.u){var t=qn(e.m.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.u.configure(t)}if(e.o&&e.o.configure(e.m.drm),e.i){e.i.configure(e.m.streaming);try{Af(e,e.D)}catch(o){In(e,o)}e.s&&Zn(e),t=e.i.h,!t||t.allowedByApplication&&t.allowedByKeySystem||Qi(e)}if(e.R&&e.R.Xd(e.m.streaming.forceHTTPS),e.M&&(t=e.m.textDisplayFactory,e.vd!=t)){var n=an(t),r=e.M,i=r.o;r.o=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.i&&(r.i.i=n),e.vd=t,e.i&&(t=e.i,(n=t.g.get(re))&&$n(t,n.stream,!0,0,!0))}e.s&&(e.s.configure(e.m.abr),e.m.abr.enabled?e.s.enable():e.s.disable(),Df(e)),e.J&&(t=e.m.streaming.rebufferingGoal,e.D&&(t=Math.max(t,e.D.minBufferTime)),Nl(e.J,t,Math.min(.5,t/2))),e.D&&bf(e.D.presentationTimeline,e.m.playRangeStart,e.m.playRangeEnd)}p.getConfiguration=function(){var e=Qn(this);return Jn(e,this.m,Qn(this)),e},p.ef=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.rc().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},p.$f=function(){for(var e in this.m)delete this.m[e];Jn(this.m,Qn(this),Qn(this)),wf(this)},p.mf=function(){return this.l},p.rf=function(){return this.g},p.hc=function(){return this.R},p.wd=function(){return this.Yb},p.oe=function(){return this.F?this.F:null},p.Y=function(){return this.D?this.D.presentationTimeline.Y():this.g&&this.g.src?this.g.duration==1/0:!1},p.rb=function(){return this.D?this.D.presentationTimeline.rb():!1},p.Hf=function(){if(this.D){var e=this.D.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},p.rc=function(){if(this.D){var e=this.D.presentationTimeline;return{start:e.Ib(),end:e.Wa()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},p.Ff=function(){this.Y()&&(this.g.currentTime=this.rc().end)},p.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},p.drmInfo=function(){return this.o?this.o.i:null},p.fc=function(){return this.o?this.o.fc():1/0},p.Mc=function(){return this.o?this.o.Mc():{}},p.zd=function(){return this.J?this.J.g==Fn:!1},p.Nc=function(){return this.g?this.I?this.I.i:1:0},p.ig=function(e){e==0?me("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.I.set(e),this.l==$e&&(this.s.playbackRateChanged(e),Jc(this.i,1<Math.abs(e))))},p.Ve=function(){var e=this.I.Lc();this.l==ft&&this.I.set(e),this.l==$e&&(this.I.set(e),this.s.playbackRateChanged(e),Jc(this.i,!1))},p.ob=function(){if(this.D){for(var e=this.i?this.i.h:null,t=[],n=0,r=h(this.D.variants),i=r.next();!i.done;i=r.next())if(i=i.value,Dr(i)){var o=pn(i);o.active=i==e,o.active||n==1||e==null||i.video!=e.video||i.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(s){return Ii(s)}):[]},p.nb=function(){if(this.D){for(var e=this.i?this.i.i:null,t=[],n=h(this.D.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var i=Rr(r);i.active=r==e,t.push(i)}return t}return this.g&&this.g.src&&this.g.textTracks?Xr(this).map(function(o){return Tl(o)}):[]},p.kf=function(){return this.D?this.D.imageStreams.map(function(e){return wl(e)}):[]},p.Bf=function(e,t){var n=this,r,i,o,s,u,a,l,c,f,d,g,v,y,T,w,A,I,S;return E(function(C){return C.g==1?n.D?(r=n.D.imageStreams.find(function(k){return k.id==e}))?r.segmentIndex?C.A(3):m(C,r.createSegmentIndex(),3):C.return(null):C.A(2):C.g!=2?(i=r.segmentIndex.find(t),i==null||(o=r.segmentIndex.get(i),s=o.tilesLayout||r.tilesLayout,u=/(\d+)x(\d+)/.exec(s),!u)?C.return(null):(a=r.width||0,l=r.height||0,c=parseInt(u[1],10),f=parseInt(u[2],10),d=a/c,g=l/f,v=c*f,y=o.l-o.startTime,T=o.i||y/v,w=o.startTime,I=A=0,1<v&&(S=Math.floor((t-o.startTime)/T),w=o.startTime+S*T,A=S%c*d,I=Math.floor(S/c)*g),C.return({imageHeight:l,imageWidth:a,height:g,positionX:A,positionY:I,startTime:w,duration:T,uris:o.ua(),width:d}))):C.return(null)})},p.Ee=function(e){if(this.D&&this.i){var t=this.D.textStreams.find(function(r){return r.id==e.id});t&&t!=this.i.i&&(hu(this.j.h,t,!1),Ki(this.i,t),eo(this),this.Qa=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=Xr(this),t=h(t);for(var n=t.next();!n.done;n=t.next())n=n.value,As(n)==e.id?n.mode=this.ma?"showing":"hidden":n.mode="disabled";eo(this)}},p.Fe=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.D&&this.i){this.m.abr.enabled&&me("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.D.variants.find(function(i){return i.id==e.id});r&&Dr(r)&&(Zi(this,r,!1,t,n),this.Ja=new Dl(r),Zn(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=h(t),n=t.next();!n.done;n=t.next())if(n=n.value,As(n)==e.id){mu(this,n);break}}},p.df=function(){return _f(this.ob())},p.Af=function(){return _f(this.nb())},p.cf=function(){return Array.from(Of(this.ob()))},p.zf=function(){return Array.from(Of(this.nb()))},p.Ud=function(e,t){if(this.D&&this.G){this.Ja=new Bn(e,t||"",0,"");var n=function(a,l){return a.video||l.video?a.video&&l.video?Math.abs((a.video.height||0)-(l.video.height||0))+Math.abs((a.video.width||0)-(l.video.width||0)):1/0:0},r=this.i.h,i=this.Ja.create(this.D.variants),o=null;i=h(i.values());for(var s=i.next();!s.done;s=i.next())s=s.value,(!o||n(o,r)>n(s,r))&&(o=s);o?(n=pn(o),this.Fe(n,!0)):Qi(this)}else if(this.g&&this.g.audioTracks){for(i=Array.from(this.g.audioTracks),n=J(e),o=r=null,i=h(i),s=i.next();!s.done;s=i.next()){s=s.value;var u=Ii(s);J(u.language)==n&&(r=s,t?u.roles.includes(t)&&(o=s):u.roles.length==0&&(o=s))}o?mu(this,o):r&&mu(this,r)}},p.Vd=function(e,t,n){if(n=n===void 0?!1:n,this.D&&this.G)this.Qa=e,this.$b=t||"",this.Zb=n,(e=Ms(this.D.textStreams,this.Qa,this.$b,this.Zb)[0]||null)&&e!=this.i.i&&(hu(this.j.h,e,!1),this.m.streaming.alwaysStreamText||this.Bd())&&(Ki(this.i,e),eo(this));else{var r=J(e);(e=this.nb().find(function(i){return J(i.language)==r&&(!t||i.roles.includes(t))&&i.forced==n}))&&this.Ee(e)}},p.ag=function(e){if(this.D&&this.G){for(var t=null,n=h(this.D.variants),r=n.next();!r.done;r=n.next())if(r=r.value,r.audio.label==e){t=r;break}t!=null&&(this.Ja=new Bn(t.language,"",0,e),Qi(this))}},p.Bd=function(){var e=this.ma;return this.M?this.M.o.isTextVisible():this.g&&this.g.src&&this.g.textTracks?Xr(this).some(function(t){return t.mode=="showing"}):e},p.pe=function(){return this.g&&this.g.src&&this.g.textTracks?$i(this).map(function(e){return Tl(e)}):[]},p.ff=function(e){var t=J(e),n=$i(this).filter(function(o){return J(o.language)==t});if(!n||!n.length)return[];e=[],n=h(n);for(var r=n.next();!r.done;r=n.next())if((r=r.value)&&r.cues){r=h(r.cues);for(var i=r.next();!i.done;i=r.next())i=i.value,e.push({title:i.text,startTime:i.startTime,endTime:i.endTime})}return e};function Xr(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function Iy(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function $i(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}p.gg=function(e){if(e=!!e,this.ma!=e){if(this.ma=e,this.l==$e)this.M.o.setTextVisibility(e),this.m.streaming.alwaysStreamText||(e?this.i.i||(e=Ms(this.D.textStreams,this.Qa,this.$b,this.Zb),0<e.length&&(Ki(this.i,e[0]),eo(this))):Cv(this.i));else if(this.g&&this.g.src&&this.g.textTracks){var t=Xr(this);t=h(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}Rf(this)}},p.vf=function(){if(!this.Y())return null;var e=this.oa.l,t=0;if(this.G)t=this.G.l();else if(e){if(e.startTime==null)return new Date;t=e.startTime}return this.D?new Date(1e3*(this.D.presentationTimeline.j+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},p.qe=function(){if(!this.Y())return null;if(this.D)return new Date(1e3*this.D.presentationTimeline.j);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},p.gb=function(){if(this.l==$e)return this.M.gb();var e={total:[],audio:[],video:[],text:[]};return this.l==ft&&(e.total=Yt(this.g.buffered)),e},p.getStats=function(){if(this.l!=$e&&this.l!=ft)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Ji(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.j;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}e.getVideoPlaybackQuality&&(e=e.getVideoPlaybackQuality(),n=this.j,t=Number(e.totalVideoFrames),n.S=Number(e.droppedVideoFrames),n.P=t,this.j.M=Number(e.corruptedVideoFrames)),this.o?(e=this.o,e=e.G?e.G:NaN):e=NaN,this.j.o=e,this.l==$e&&((e=this.i.h)&&(this.j.u=(this.I?this.I.i:1)*e.bandwidth),e&&e.video&&(n=this.j,t=e.video.height||NaN,n.$=e.video.width||NaN,n.F=t),this.Y()&&(e=this.qe().valueOf()+1e3*this.rc().end,this.j.G=(Date.now()-e)/1e3),this.D&&this.D.presentationTimeline&&(this.j.J=this.D.presentationTimeline.g),e=this.s.getBandwidthEstimate(),this.j.s=e);var r=this.j;e=r.$,n=r.F,t=r.u;var i=r.P,o=r.S,s=r.M,u=r.s,a=r.i,l=r.l,c=r.I,f=r.j,d=du(r.g,"playing"),g=du(r.g,"paused"),v=du(r.g,"buffering"),y=r.o,T=r.G,w=r.J,A=ry(r.g),I=[];r=h(r.h.g);for(var S=r.next();!S.done;S=r.next())S=S.value,I.push({timestamp:S.timestamp,id:S.id,type:S.type,fromAdaptation:S.fromAdaptation,bandwidth:S.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:o,corruptedFrames:s,estimatedBandwidth:u,completionPercent:a,loadLatency:l,manifestTimeSeconds:c,drmTimeSeconds:f,playTime:d,pauseTime:g,bufferingTime:v,licenseTime:y,liveLatency:T,maxSegmentDuration:w,stateHistory:A,switchHistory:I}},p.addTextTrack=function(e,t,n,r,i,o,s){if(s=s===void 0?!1:s,He("addTextTrack","Please use an addTextTrackAsync."),this.l!=$e&&this.l!=ft)throw new x(1,7,7004);if(!r){var u=vn(e);if(r=ud[u],!r)throw new x(1,2,2011,u)}if(this.l==ft){if(r!="text/vtt")throw new x(1,2,2013,r);if(s&&(n="forced"),r=document.createElement("track"),r.src=cf(this.P,e),r.label=o||"",r.kind=n,r.srclang=t,this.g.getAttribute("crossorigin")||this.g.setAttribute("crossorigin","anonymous"),this.g.appendChild(r),e=this.nb().find(function(a){return a.language==t&&a.label==(o||"")&&a.kind==n}))return Ye(this),e;throw new x(1,2,2012)}if(u=this.D.presentationTimeline.getDuration(),u==1/0)throw new x(1,4,4033);if(e={id:this.Cd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Vi(0,u,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:o||null,type:re,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},!Ar(wt(e.mimeType,e.codecs)))throw new x(2,2,2014,r);return this.D.textStreams.push(e),Ye(this),Rr(e)},p.Re=function(e,t,n,r,i,o,s){s=s===void 0?!1:s;var u=this,a,l,c,f,d,g,v,y,T,w,A;return E(function(I){switch(I.g){case 1:if(u.l!=$e&&u.l!=ft)throw new x(1,7,7004);if(r){I.A(2);break}return m(I,Tf(u,e),3);case 3:r=I.h;case 2:if(a=[],u.F)try{a=u.F.getServerSideCuePoints()}catch{}if(u.l!=ft){I.A(4);break}return s&&(n="forced"),m(I,xf(u,e,t,n,r,o||"",a),5);case 5:if(l=u.nb(),c=l.find(function(S){return S.language==t&&S.label==(o||"")&&S.kind==n}))return Ye(u),I.return(c);throw new x(1,2,2012);case 4:if(f=_e,d=u.D.presentationTimeline.getDuration(),d==1/0)throw new x(1,4,4033);if(!a.length){I.A(6);break}return m(I,Sf(u,e,u.R,u.m.streaming.retryParameters),7);case 7:g=I.h,v=Ef(u,g,r,a),y=new Blob([v],{type:"text/vtt"}),e=Xs(y),r="text/vtt";case 6:if(T={id:u.Cd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Vi(0,d,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:o||null,type:f.ea,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},w=wt(T.mimeType,T.codecs),A=Ar(w),!A)throw new x(2,2,2014,r);return u.D.textStreams.push(T),Ye(u),I.return(Rr(T))}})},p.Qe=function(e,t,n){var r=this,i,o,s,u,a,l,c;return E(function(f){switch(f.g){case 1:if(r.l!=$e&&r.l!=ft)throw new x(1,7,7004);if(n){f.A(2);break}return m(f,Tf(r,e),3);case 3:n=f.h;case 2:if(i=[],r.F)try{i=r.F.getServerSideCuePoints()}catch{}return m(f,xf(r,e,t,"chapters",n,"",i),4);case 4:if(o=r.pe(),s=o.find(function(d){return d.language==t})){for(u=$i(r),a=h(u),l=a.next();!l.done;l=a.next())c=l.value,mf(r,c);return f.return(s)}throw new x(1,2,2012)}})};function Tf(e,t){var n,r;return E(function(i){switch(i.g){case 1:return n=vn(t),(r=ud[n])?i.return(r):(q(i,2),m(i,nc(t,e.R,e.m.streaming.retryParameters),4));case 4:r=i.h,ee(i,3);break;case 2:K(i);case 3:if(r)return i.return(r);throw new x(1,2,2011,n)}})}function xf(e,t,n,r,i,o,s){var u,a,l,c;return E(function(f){if(f.g==1)return i!="text/vtt"||s.length?m(f,Sf(e,t,e.R,e.m.streaming.retryParameters),3):f.A(2);f.g!=2&&(u=f.h,a=Ef(e,u,i,s),l=new Blob([a],{type:"text/vtt"}),t=Xs(l),i="text/vtt"),c=document.createElement("track"),c.src=cf(e.P,t),c.label=o,c.kind=r,c.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(c),b(f)})}function Sf(e,t,n,r){var i,o,s;return E(function(u){if(u.g==1){i=kt,o=at([t],r),o.method="GET";var a=e.P;try{a.m.enabled&&iu(a,o,{ot:uu,su:!0})}catch(l){on("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return m(u,n.request(i,o).promise,2)}return s=u.h,u.return(s.data)})}function Ef(e,t,n,r){var i=Ce[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration},t=Q(t),t=n.parseMedia(t,e),Gv(t,r);throw new x(2,2,2014,n)}p.Yd=function(e,t){this.yd.width=e,this.yd.height=t},p.Sd=function(){if(this.l==$e){var e=this.i;if(e.K.g)e=!1;else if(e.j)e=!1;else{for(var t=h(e.g.values()),n=t.next();!n.done;n=t.next())n=n.value,n.kc&&(n.kc=!1,rt(e,n,.1));e=!0}}else e=!1;return e},p.nf=function(){return me("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.D},p.pf=function(){return this.Gc};function Qn(e){var t=zr();return t.streaming.failureCallback=function(n){var r=[1001,1002,1003];e.Y()&&r.includes(n.code)&&(n.severity=1,e.Sd())},t.textDisplayFactory=function(){return e.Dc?new We(e.g,e.Dc):new Xe(e.g)},t}p.Je=function(e){this.Dc=e};function Ay(e,t){for(var n=new Set,r=h(t.textStreams),i=r.next();!i.done;i=r.next())i=i.value,i.mimeType!="application/cea-608"&&i.mimeType!="application/cea-708"||n.add(i.originalId);for(r=h(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions){for(var o=h(i.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new ve;u={id:e.Cd++,originalId:s,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:i.closedCaptions.get(s),label:null,type:re,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(u),n.add(s)}}}function If(e,t){return E(function(n){if(n.g==1)return m(n,My(e,t),2);Af(e,t),b(n)})}function My(e,t){var n;return E(function(r){if(r.g==1)return n=e.i?e.i.h:null,m(r,em(n,t),2);jf(t),b(r)})}function Af(e,t){if(e.l!=ct){for(var n=e.m.restrictions,r=e.yd,i=!1,o=h(t.variants),s=o.next();!s.done;s=o.next()){s=s.value;var u=s.allowedByApplication;s.allowedByApplication=Es(s,n,r),u!=s.allowedByApplication&&(i=!0)}if(i&&e.i&&Ye(e),(n=e.o?e.o.i:null)&&e.o.o){for(r=h(t.variants),i=r.next();!i.done;i=r.next())for(i=i.value,i=h((i.video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[])),o=i.next();!o.done;o=i.next())if(o=o.value,o.keySystem==n.keySystem)for(o=h(o.initData||[]),s=o.next();!s.done;s=o.next())s=s.value,Ni(e.o,s.initDataType,s.initData)}Lf(e,t)}}function Cy(e,t){var n,r,i,o,s;return E(function(u){return u.g==1?(n=e.audio,r=e.video,i=function(a,l){var c,f;return E(function(d){return d.g==1?a?m(d,a.createSegmentIndex(),2):d.return(null):(c=a.segmentIndex[Symbol.iterator]().seek(l),c?(f=c.startTime,d.return(f)):d.return(null))})},m(u,i(n,t),2)):u.g!=3?(o=u.h,m(u,i(r,t),3)):(s=u.h,s!=null&&o!=null?u.return(Math.max(s,o)):s!=null?u.return(s):o!=null?u.return(o):u.return(t))})}function gu(e){var t=e.zd();if(e.j&&e.J&&e.G){var n=e.I;n.j=t,Wc(n),e.P&&(n=e.P,t||n.g||(n.g=!0),n.g&&t&&(n.i=!0),n.j=t),Ji(e)}t=new Map().set("buffering",t),e.dispatchEvent(Se(Ff,t))}function Mf(e){var t=e.g.playbackRate;t!=0&&(e.I&&e.I.set(t),t=Se(Qf),e.dispatchEvent(t))}function Ji(e){if(e.j&&e.J){var t=e.j.g;e.J.g==Fn?Yi(t,"buffering"):e.g.paused?Yi(t,"paused"):e.g.ended?Yi(t,"ended"):Yi(t,"playing")}}function Zn(e){try{Lf(e,e.D)}catch(n){return In(e,n),!1}var t=e.D.variants.filter(function(n){return Dr(n)});return t=e.Ja.create(t),e.s.setVariants(Array.from(t.values())),!0}function Qi(e){var t;(t=Zn(e)?e.s.chooseVariant():null)&&Zi(e,t,!0,!0,0)}function Zi(e,t,n,r,i){var o=e.i.h;if(t==o)r&&Qc(e.i,t,r,i,!0);else{var s=e.j.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Qc(e.i,t,r,i),r=null,o&&(r=pn(o)),t=pn(t),n?Cf(e,r,t):kf(e,r,t)}}function mu(e,t){var n=Array.from(e.g.audioTracks).find(function(i){return i.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Ii(n);var r=Ii(t);kf(e,n,r)}function ky(e,t,n){return e=J(e.m.preferredTextLanguage),t=J(t.language),n=J(n.language),vs(n,e)&&!vs(t,n)}function Cf(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=Se(Bf,t),er(e,t)}function Ye(e){var t=Se(nd);er(e,t)}function kf(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=Se(id,t),er(e,t)}function eo(e){var t=Se(Zf);er(e,t)}function Rf(e){var t=Se(ed);er(e,t)}function Df(e){var t=new Map().set("newStatus",e.m.abr.enabled);er(e,Se(Uf,t))}function In(e,t){if(e.l!=ct){var n=Se(to,new Map().set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function Wr(e,t,n){n=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Se(t,n))}function vu(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new x(2,3,3016,t,n,e.g.error.message)}function Nf(e,t){if(e.i){var n=Object.keys(t),r=n.length==1&&n[0]=="00",i=!1;if(n.length){n=h(e.D.variants);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s=[];o.audio&&s.push(o.audio),o.video&&s.push(o.video),s=h(s);for(var u=s.next();!u.done;u=s.next()){var a=u.value;if(u=o.allowedByKeySystem,a.keyIds.size){o.allowedByKeySystem=!0,a=h(a.keyIds);for(var l=a.next();!l.done;l=a.next())l=l.value,l=t[r?"00":l],o.allowedByKeySystem=o.allowedByKeySystem&&!!l&&!sd.includes(l)}u!=o.allowedByKeySystem&&(i=!0)}}}i&&Zn(e),(r=e.i.h)&&!r.allowedByKeySystem&&Qi(e),i&&Ye(e)}}function Pf(e,t,n){e.u&&e.u.onExpirationUpdated&&e.u.onExpirationUpdated(t,n),t=Se(Kf),e.dispatchEvent(t)}function bf(e,t,n){0<t&&(e.Y()||e.Ie(t)),t=e.getDuration(),n<t&&(e.Y()||e.Na(n))}function Lf(e,t){var n=e.o?e.o.Mc():{},r=Object.keys(n);r=r.length&&r[0]=="00";for(var i=!1,o=!1,s=new Set,u=new Set,a=h(t.variants),l=a.next();!l.done;l=a.next()){l=l.value;var c=[];l.audio&&c.push(l.audio),l.video&&c.push(l.video),c=h(c);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.keyIds.size){f=h(f.keyIds);for(var d=f.next();!d.done;d=f.next()){d=d.value;var g=n[r?"00":d];g?sd.includes(g)&&u.add(g):s.add(d)}}l.allowedByApplication?l.allowedByKeySystem&&(i=!0):o=!0}if(!i)throw n={hasAppRestrictions:o,missingKeys:Array.from(s),restrictedKeyStatuses:Array.from(u)},new x(2,4,4012,n)}function jf(e){if(!e.variants.some(Dr))throw new x(2,4,4032)}function er(e,t){E(function(n){if(n.g==1)return m(n,Promise.resolve(),2);e.l!=ct&&e.dispatchEvent(t),b(n)})}function Of(e){var t=new Set;e=h(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(J(n.language)):t.add("und");return t}function _f(e){var t=new Map,n=new Map;e=h(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i="und",o=[];r.language&&(i=J(r.language)),r.type=="variant"?o=r.audioRoles:o=r.roles,o&&o.length||(o=[""]),t.has(i)||t.set(i,new Set),o=h(o);for(var s=o.next();!s.done;s=o.next())s=s.value,t.get(i).add(s),r.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(s,r.label))}var u=[];return t.forEach(function(a,l){for(var c=h(a),f=c.next();!f.done;f=c.next()){f=f.value;var d=null;n.has(l)&&n.get(l).has(f)&&(d=n.get(l).get(f)),u.push({language:l,role:f,label:d})}}),u}function An(){return new x(2,7,7e3)}function yu(e,t,n,r,i,o){return r==e&&i.H==o.H&&i.uri==o.uri&&i.mimeType==o.mimeType?t:n}function tr(){return{H:null,mimeType:null,startTime:null,ae:NaN,uri:null}}function wu(e){return new Promise(function(t,n){e.ub=function(){return n(An())},e.Sc=function(){return t()},e.onError=function(r){return n(r)},e.Uc=function(){return n(An())}})}O("shaka.Player",M),M.prototype.setVideoContainer=M.prototype.Je,M.prototype.getManifestParserFactory=M.prototype.pf,M.prototype.getManifest=M.prototype.nf,M.prototype.retryStreaming=M.prototype.Sd,M.prototype.setMaxHardwareResolution=M.prototype.Yd,M.prototype.addChaptersTrack=M.prototype.Qe,M.prototype.addTextTrackAsync=M.prototype.Re,M.prototype.addTextTrack=M.prototype.addTextTrack,M.prototype.getStats=M.prototype.getStats,M.prototype.getBufferedInfo=M.prototype.gb,M.prototype.getPresentationStartTimeAsDate=M.prototype.qe,M.prototype.getPlayheadTimeAsDate=M.prototype.vf,M.prototype.setTextTrackVisibility=M.prototype.gg,M.prototype.getChapters=M.prototype.ff,M.prototype.getChaptersTracks=M.prototype.pe,M.prototype.isTextTrackVisible=M.prototype.Bd,M.prototype.selectVariantsByLabel=M.prototype.ag,M.prototype.selectTextLanguage=M.prototype.Vd,M.prototype.selectAudioLanguage=M.prototype.Ud,M.prototype.getTextLanguages=M.prototype.zf,M.prototype.getAudioLanguages=M.prototype.cf,M.prototype.getTextLanguagesAndRoles=M.prototype.Af,M.prototype.getAudioLanguagesAndRoles=M.prototype.df,M.prototype.selectVariantTrack=M.prototype.Fe,M.prototype.selectTextTrack=M.prototype.Ee,M.prototype.getThumbnails=M.prototype.Bf,M.prototype.getImageTracks=M.prototype.kf,M.prototype.getTextTracks=M.prototype.nb,M.prototype.getVariantTracks=M.prototype.ob,M.prototype.cancelTrickPlay=M.prototype.Ve,M.prototype.trickPlay=M.prototype.ig,M.prototype.getPlaybackRate=M.prototype.Nc,M.prototype.isBuffering=M.prototype.zd,M.prototype.getKeyStatuses=M.prototype.Mc,M.prototype.getExpiration=M.prototype.fc,M.prototype.drmInfo=M.prototype.drmInfo,M.prototype.keySystem=M.prototype.keySystem,M.prototype.goToLive=M.prototype.Ff,M.prototype.seekRange=M.prototype.rc,M.prototype.isAudioOnly=M.prototype.Hf,M.prototype.isInProgress=M.prototype.rb,M.prototype.isLive=M.prototype.Y,M.prototype.getAdManager=M.prototype.oe,M.prototype.getAssetUri=M.prototype.wd,M.prototype.getNetworkingEngine=M.prototype.hc,M.prototype.getMediaElement=M.prototype.rf,M.prototype.getLoadMode=M.prototype.mf,M.prototype.resetConfiguration=M.prototype.$f,M.prototype.getBufferFullness=M.prototype.ef,M.prototype.getConfiguration=M.prototype.getConfiguration,M.prototype.configure=M.prototype.configure,M.prototype.load=M.prototype.load,M.prototype.updateStartTime=M.prototype.og,M.prototype.unload=M.prototype.de,M.prototype.detach=M.prototype.detach,M.prototype.attach=M.prototype.bc,M.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,i,o,s;return E(function(u){if(u.g==1)return t={},e?m(u,Dm(),3):u.A(2);u.g!=2&&(t=u.h);var a={};if(ut()){for(var l in nt)a[l]=!0;for(var c in yn)a[c]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},c=h(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var f=c.next();!f.done;f=c.next())f=f.value,a[f]=ut()?!!nt[f]:_n(f);for(var d in l)a[d]=ut()?!!yn[d]:_n(l[d]);for(n=a,a={},d=h('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),l=d.next();!l.done;l=d.next())l=l.value,a[l]=ut()?Ar(l)?!0:MediaSource.isTypeSupported(l)||il(l):_n(l),c=l.split(";")[0],a[c]=a[c]||a[l];r=a,i={manifest:n,media:r,drm:t},o=Au;for(s in o)i[s]=o[s]();return u.return(i)})},M.isBrowserSupported=function(){if(R.Promise||me("A Promise implementation or polyfill is required"),R.TextDecoder&&R.TextEncoder||me("A TextDecoder/TextEncoder implementation or polyfill is required"),!(R.Promise&&R.Uint8Array&&R.TextDecoder&&R.TextEncoder&&Array.prototype.forEach)||Ue("Trident/"))return!1;var e=cl();return e&&12>e||!(R.MediaKeys&&R.navigator&&R.navigator.requestMediaKeySystemAccess&&R.MediaKeySystemAccess&&R.MediaKeySystemAccess.prototype.getConfiguration)?!1:ut()?!0:_n("application/x-mpegurl")},M.setAdManagerFactory=function(e){ro=e},M.registerSupportPlugin=function(e,t){Au[e]=t},M.prototype.destroy=M.prototype.destroy;var Uf="abrstatuschanged",Bf="adaptation",Ff="buffering",Vf="downloadfailed",Hf="downloadheadersreceived",Tu="drmsessionupdate",qf="emsg",to="error",Kf="expirationupdated",Gf="loaded",zf="loading",Xf="manifestparsed",Wf="mediaqualitychanged",Yf="metadata",$f="onstatechange",Jf="onstateidle",Qf="ratechange",xu="streaming",Zf="textchanged",ed="texttrackvisibility",td="timelineregionadded",Su="timelineregionenter",Eu="timelineregionexit",nd="trackschanged",rd="unloading",id="variantchanged",no={qg:Uf,rg:Bf,sg:Ff,ug:Vf,vg:Hf,wg:Tu,yg:qf,Error:to,zg:Kf,Bg:"largegap",Cg:Gf,Dg:zf,Eg:Xf,Fg:Wf,Metadata:Yf,Hg:$f,Ig:Jf,Jg:Qf,Lg:"sessiondata",Mg:xu,Ng:Zf,Og:ed,Pg:td,Qg:Su,Rg:Eu,Sg:nd,Tg:rd,Ug:id},ct=0,Iu=1,$e=2,ft=3;M.LoadMode={DESTROYED:ct,NOT_LOADED:Iu,MEDIA_SOURCE:$e,SRC_EQUALS:ft},M.version="v3.3.2";var od=["3","3"];Qa=new function(e){this.g=e,this.i=Pg,this.h=bg}(new fs(Number(od[0]),Number(od[1])));var sd=["output-restricted","internal-error"],Au={},ro=null,Mu={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},ud={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function ad(){this.h=[],this.j=this.i=this.g=0}function z(e,t){var n=this;this.i=e,this.g=t,this.j=!1,this.l=this.g.getVolume(),this.h=new ue,this.h.C(this.g,google.ima.AdEvent.Type.PAUSED,function(){n.j=!0}),this.h.C(this.g,google.ima.AdEvent.Type.RESUMED,function(){n.j=!1})}p=z.prototype,p.getDuration=function(){return this.i.getDuration()},p.getMinSuggestedDuration=function(){return this.i.getMinSuggestedDuration()},p.getRemainingTime=function(){return this.g.getRemainingTime()},p.isPaused=function(){return this.j},p.isSkippable=function(){return 0<=this.i.getSkipTimeOffset()},p.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.g.getAdSkippableState()},p.skip=function(){return this.g.skip()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.resume()},p.getVolume=function(){return this.g.getVolume()},p.setVolume=function(e){return this.g.setVolume(e)},p.isMuted=function(){return this.g.getVolume()==0},p.isLinear=function(){return this.i.isLinear()},p.resize=function(e,t){this.g.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},p.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},p.getSequenceLength=function(){var e=this.i.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return e==null?1:e.getAdPosition()},p.release=function(){this.g=this.i=null},O("shaka.ads.ClientSideAd",z),z.prototype.release=z.prototype.release,z.prototype.getPositionInSequence=z.prototype.getPositionInSequence,z.prototype.getSequenceLength=z.prototype.getSequenceLength,z.prototype.setMuted=z.prototype.setMuted,z.prototype.resize=z.prototype.resize,z.prototype.isLinear=z.prototype.isLinear,z.prototype.isMuted=z.prototype.isMuted,z.prototype.setVolume=z.prototype.setVolume,z.prototype.getVolume=z.prototype.getVolume,z.prototype.play=z.prototype.play,z.prototype.pause=z.prototype.pause,z.prototype.skip=z.prototype.skip,z.prototype.canSkipNow=z.prototype.canSkipNow,z.prototype.getTimeUntilSkippable=z.prototype.getTimeUntilSkippable,z.prototype.isSkippable=z.prototype.isSkippable,z.prototype.isPaused=z.prototype.isPaused,z.prototype.getRemainingTime=z.prototype.getRemainingTime,z.prototype.getMinSuggestedDuration=z.prototype.getMinSuggestedDuration,z.prototype.getDuration=z.prototype.getDuration;function Cu(e,t,n,r){var i=this;this.s=e,this.g=t,this.u=null,this.F=NaN,this.j=r,this.o=null,this.h=new ue,google.ima.settings.setLocale(n),e=new google.ima.AdDisplayContainer(this.s,this.g),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v3.3.2"),this.i=null,this.h.ya(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(o){Ry(i,o)}),this.h.C(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(o){ld(i,o)}),this.g.onended=function(){i.l.contentComplete()}}Cu.prototype.stop=function(){this.i&&this.i.stop(),this.s&&tu(this.s)},Cu.prototype.release=function(){this.stop(),this.u&&this.u.disconnect(),this.h&&this.h.release(),this.i&&this.i.destroy(),this.l.destroy()};function ld(e,t){t.getError(),io(e,null),e.j(new U("ad-cue-points-changed",new Map().set("cuepoints",[])))}function Ry(e,t){e.j(new U("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.i=t.getAdsManager(e.g),e.j(new U("ima-ad-manager-loaded",new Map().set("imaAdManager",e.i)));var n=e.i.getCuePoints();if(n.length){var r=[];n=h(n);for(var i=n.next();!i.done;i=n.next())r.push({start:i.value,end:null});e.j(new U("ad-cue-points-changed",new Map().set("cuepoints",r)))}Dy(e);try{e.i.init(e.g.offsetWidth,e.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.C(e.g,"loadeddata",function(){e.i.resize(e.g.offsetWidth,e.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in R&&(e.u=new ResizeObserver(function(){e.i.resize(e.g.offsetWidth,e.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.u.observe(e.g)),e.i.start()}catch{io(e,null)}}function Dy(e){function t(n,r){var i=new Map().set("originalEvent",n);e.j(new U(r,i))}e.h.C(e.i,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){ld(e,n)}),e.h.C(e.i,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){cd(e,n)}),e.h.C(e.i,google.ima.AdEvent.Type.STARTED,function(n){cd(e,n)}),e.h.C(e.i,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.C(e.i,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.C(e.i,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.C(e.i,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.C(e.i,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){io(e,n)}),e.h.C(e.i,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){io(e,n)}),e.h.C(e.i,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.C(e.i,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.C(e.i,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.C(e.i,google.ima.AdEvent.Type.PAUSED,function(n){e.o.j=!0,t(n,"ad-paused")}),e.h.C(e.i,google.ima.AdEvent.Type.RESUMED,function(n){e.o.j=!1,t(n,"ad-resumed")}),e.h.C(e.i,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){t(n,"ad-skip-state-changed")}),e.h.C(e.i,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.C(e.i,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.C(e.i,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.C(e.i,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.C(e.i,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.C(e.i,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.C(e.i,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.C(e.i,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.C(e.i,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.C(e.i,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.C(e.i,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.C(e.i,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.C(e.i,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function cd(e,t){var n=t.getAd();e.o=new z(n,e.i),n=new Map().set("ad",e.o).set("sdkAdObject",n).set("originalEvent",t),e.j(new U("ad-started",n)),e.o.isLinear()&&(e.s.setAttribute("ad-active","true"),e.g.pause())}function io(e,t){e.j(new U("ad-stopped",new Map().set("originalEvent",t))),e.o.isLinear()&&(e.s.removeAttribute("ad-active"),e.g.play())}function X(e,t){this.i=e,this.h=null,this.g=t}p=X.prototype,p.getDuration=function(){return this.h?this.h.duration:-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return this.i.isSkippable()},p.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.g.currentTime+=this.getRemainingTime()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){var e=this.i.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return e==null?1:e.getAdPosition()},p.release=function(){this.g=this.h=this.i=null},O("shaka.ads.ServerSideAd",X),X.prototype.release=X.prototype.release,X.prototype.getPositionInSequence=X.prototype.getPositionInSequence,X.prototype.getSequenceLength=X.prototype.getSequenceLength,X.prototype.setMuted=X.prototype.setMuted,X.prototype.resize=X.prototype.resize,X.prototype.isLinear=X.prototype.isLinear,X.prototype.isMuted=X.prototype.isMuted,X.prototype.setVolume=X.prototype.setVolume,X.prototype.getVolume=X.prototype.getVolume,X.prototype.play=X.prototype.play,X.prototype.pause=X.prototype.pause,X.prototype.skip=X.prototype.skip,X.prototype.canSkipNow=X.prototype.canSkipNow,X.prototype.getTimeUntilSkippable=X.prototype.getTimeUntilSkippable,X.prototype.isSkippable=X.prototype.isSkippable,X.prototype.isPaused=X.prototype.isPaused,X.prototype.getRemainingTime=X.prototype.getRemainingTime,X.prototype.getMinSuggestedDuration=X.prototype.getMinSuggestedDuration,X.prototype.getDuration=X.prototype.getDuration;function oo(e,t,n,r){var i=this;this.u=e,this.g=t,this.l=null,this.M=NaN,this.j=r,this.J=!1,this.F=this.o=this.s=null,this.G="",this.I=[],this.h=new ue,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.i=new google.ima.dai.api.StreamManager(this.g,this.u,e),this.j(new U("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.i))),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){Ny(i,o)}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.ERROR,function(){i.G.length?i.l.resolve(i.G):i.l.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.l=null}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),i.o=new X(o,i.g),i.F&&(i.o.h=i.F),i.j(new U("ad-started",new Map().set("ad",i.o))),i.u.setAttribute("ad-active","true")}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){i.u.removeAttribute("ad-active");var o=i.g.currentTime;i.s&&i.s>o&&(i.g.currentTime=i.s,i.s=null)}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){i.F=o.getStreamData().adProgressData,i.o&&(i.o.h=i.F)}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){i.j(new U("ad-first-quartile"))}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){i.j(new U("ad-midpoint"))}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){i.j(new U("ad-third-quartile"))}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){i.j(new U("ad-complete")),i.j(new U("ad-stopped")),i.u.removeAttribute("ad-active"),i.o=null}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){i.j(new U("ad-skipped")),i.j(new U("ad-stopped"))}),this.h.C(this.i,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[],s=h(s.cuepoints);for(var u=s.next();!u.done;u=s.next())u=u.value,o.push({start:u.start,end:u.end});i.I=o,i.j(new U("ad-cue-points-changed",new Map().set("cuepoints",o)))})}oo.prototype.stop=function(){this.G="",this.s=null,this.I=[]},oo.prototype.release=function(){this.stop(),this.h&&this.h.release()},oo.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.i.onTimedMetadata(t)}};function Ny(e,t){e.j(new U("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.M)));var n=t.getStreamData().url;e.l.resolve(n),e.l=null,e.J||e.h.C(e.g,"seeked",function(){var r=e.g.currentTime;if(r!=0){e.i.streamTimeForContentTime(r);var i=e.i.previousCuePointForStreamTime(r);i&&!i.played&&(e.s=r,e.g.currentTime=i.start)}})}function j(){$.call(this),this.g=this.h=null,this.j=new ad,this.i=navigator.language}Ne(j,$),p=j.prototype,p.setLocale=function(e){this.i=e},p.initClientSide=function(e,t){var n=this;if(!R.google||!google.ima||!google.ima.AdsLoader)throw new x(2,10,1e4);this.h&&this.h.release(),this.h=new Cu(e,t,this.i,function(r){if(r&&r.type)switch(r.type){case"ads-loaded":n.j.h.push(r.loadTime);break;case"ad-started":n.j.g++;break;case"ad-complete":n.j.i++;break;case"ad-skipped":n.j.j++}n.dispatchEvent(r)})},p.release=function(){this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),$.prototype.release.call(this)},p.onAssetUnload=function(){this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new U("ad-stopped")),this.j=new ad},p.requestClientSideAds=function(e){if(!this.h)throw new x(1,10,10001);var t=this.h;t.F=Date.now()/1e3,t.l.requestAds(e)},p.initServerSide=function(e,t){var n=this;if(!R.google||!google.ima||!google.ima.dai)throw new x(2,10,10002);this.g&&this.g.release(),this.g=new oo(e,t,this.i,function(r){if(r&&r.type)switch(r.type){case"ads-loaded":n.j.h.push(r.loadTime);break;case"ad-started":n.j.g++;break;case"ad-complete":n.j.i++;break;case"ad-skipped":n.j.j++}n.dispatchEvent(r)})},p.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new x(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&me('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v3.3.2",n=this.g;var r=t;return n.l?n=Promise.reject(new x(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.J=!0),n.l=new ae,n.i.requestStream(e),n.G=r||"",n.M=Date.now()/1e3,n=n.l),n},p.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new x(1,10,10003);(e.mpt||e.mpv)&&me('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v3.3.2",this.g.i.replaceAdTagParameters(e)},p.getServerSideCuePoints=function(){if(!this.g)throw new x(1,10,10003);return this.g.I},p.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},p.onDashTimedMetadata=function(e){if(this.g&&e.schemeIdUri=="urn:google:dai:2018"){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.i.processMetadata(t,n,e.startTime)}},p.onHlsTimedMetadata=function(e,t){this.g&&this.g.i.processMetadata("ID3",e.data,t)},p.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},O("shaka.ads.AdManager",j),j.prototype.onCueMetadataChange=j.prototype.onCueMetadataChange,j.prototype.onHlsTimedMetadata=j.prototype.onHlsTimedMetadata,j.prototype.onDashTimedMetadata=j.prototype.onDashTimedMetadata,j.prototype.getStats=j.prototype.getStats,j.prototype.getServerSideCuePoints=j.prototype.getServerSideCuePoints,j.prototype.replaceServerSideAdTagParameters=j.prototype.replaceServerSideAdTagParameters,j.prototype.requestServerSideStream=j.prototype.requestServerSideStream,j.prototype.initServerSide=j.prototype.initServerSide,j.prototype.requestClientSideAds=j.prototype.requestClientSideAds,j.prototype.onAssetUnload=j.prototype.onAssetUnload,j.prototype.release=j.prototype.release,j.prototype.initClientSide=j.prototype.initClientSide,j.prototype.setLocale=j.prototype.setLocale,j.ADS_LOADED="ads-loaded",j.AD_STARTED="ad-started",j.AD_FIRST_QUARTILE="ad-first-quartile",j.AD_MIDPOINT="ad-midpoint",j.AD_THIRD_QUARTILE="ad-third-quartile",j.AD_COMPLETE="ad-complete",j.AD_STOPPED="ad-stopped",j.AD_SKIPPED="ad-skipped",j.AD_VOLUME_CHANGED="ad-volume-changed",j.AD_MUTED="ad-muted",j.AD_PAUSED="ad-paused",j.AD_RESUMED="ad-resumed",j.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",j.CUEPOINTS_CHANGED="ad-cue-points-changed",j.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",j.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",j.AD_CLICKED="ad-clicked",j.AD_PROGRESS="ad-progress",j.AD_BUFFERING="ad-buffering",j.AD_IMPRESSION="ad-impression",j.AD_DURATION_CHANGED="ad-duration-changed",j.AD_CLOSED="ad-closed",j.AD_LOADED="ad-loaded",j.ALL_ADS_COMPLETED="all-ads-completed",j.AD_LINEAR_CHANGED="ad-linear-changed",j.AD_METADATA="ad-metadata",j.AD_RECOVERABLE_ERROR="ad-recoverable-error",j.AD_BREAK_READY="ad-break-ready",j.AD_INTERACTION="ad-interaction",ro=function(){return new j};function fd(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof U){var r={};for(o in n){var i=n[o];i&&typeof i=="object"?o=="detail"&&(r[o]=i):o in Event||(r[o]=i)}return r}if(n instanceof Error){var o=new Set(["name","message","stack"]);for(r in n)o.add(r);for(i=h(Object.getOwnPropertyNames(n)),r=i.next();!r.done;r=i.next())o.add(r.value);for(i={},o=h(o),r=o.next();!r.done;r=o.next())r=r.value,i[r]=n[r];o={__type__:"Error",contents:i}}else if(n instanceof TimeRanges)for(o={__type__:"TimeRanges",length:n.length,start:[],end:[]},r=h(Yt(n)),i=r.next();!i.done;i=r.next()){i=i.value;var s=i.end;o.start.push(i.start),o.end.push(s)}else o=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return o}})}function ku(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=Py(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){r=n.contents;var i=Error(r.message),o;for(o in r)i[o]=r[o];r=i}else r=n;return r})}function Py(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var dd="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),by="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Ru=["loop","playbackRate"],Ly=["pause","play"],so={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getConfiguration:4,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},Du={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},hd=[["getConfiguration","configure"]],pd=[["isTextTrackVisible","setTextTrackVisibility"]],jy="addChaptersTrack addTextTrack addTextTrackAsync cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Oy=["attach","detach","load","unload"];function Nu(e,t,n,r,i,o){var s=this;this.M=e,this.j=new G(t),this.da=n,this.F=!1,this.u=r,this.J=i,this.S=o,this.h=this.o=!1,this.$="",this.s=null,this.G=function(){return bu(s)},this.I=function(u,a){var l=ku(a);switch(l.type){case"event":var c=l.targetName;l=jl(l.event),s.u(c,l);break;case"update":c=l.update;for(var f in c){l=s.g[f]||{};for(var d in c[f])l[d]=c[f][d]}s.F&&(s.da(),s.F=!1);break;case"asyncComplete":if(f=l.id,l=l.error,d=s.i[f],delete s.i[f],d)if(l){f=new x(l.severity,l.category,l.code);for(c in l)f[c]=l[c];d.reject(f)}else d.resolve()}},this.g={video:{},player:{}},this.P=0,this.i={},this.l=null,$r.add(this)}p=Nu.prototype,p.destroy=function(){return $r.delete(this),Lu(this),it&&vd(this),this.j&&(this.j.stop(),this.j=null),this.J=this.u=null,this.h=this.o=!1,this.I=this.G=this.l=this.i=this.g=this.s=null,Promise.resolve()},p.xa=function(){return this.h},p.Qd=function(){return this.$},p.init=function(){if(this.M.length)if(R.chrome&&chrome.cast&&chrome.cast.isAvailable){this.o=!0,this.j.Sb();var e=new chrome.cast.SessionRequest(this.M);e=new chrome.cast.ApiConfig(e,function(t){for(var n=h($r),r=n.next();!r.done;r=n.next())md(r.value,t)},function(t){for(var n=h($r),r=n.next();!r.done;r=n.next())r=r.value,uo=t=="available",r.j.Sb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),uo&&this.j.W(Uy),(e=it)&&e.status!=chrome.cast.SessionStatus.STOPPED?md(this,e):it=null}else R.__onGCastApiAvailable||(R.__onGCastApiAvailable=yd),R.__onGCastApiAvailable!=yd&&me("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")},p.Wd=function(e){this.s=e,this.h&&Yr(this,{type:"appData",appData:this.s})},p.cast=function(e){var t=this;return E(function(n){if(!t.o)throw new x(1,8,8e3);if(!uo)throw new x(1,8,8001);if(t.h)throw new x(1,8,8002);return t.l=new ae,chrome.cast.requestSession(function(r){return Pu(t,e,r)},function(r){return gd(t,r)}),m(n,t.l,0)})};function _y(e){if(e.h){var t=e.S();chrome.cast.requestSession(function(n){return Pu(e,t,n)},function(n){return gd(e,n)})}}p.Fb=function(){if(this.h){if(Lu(this),it){vd(this);try{it.stop(function(){},function(){})}catch{}it=null}bu(this)}},p.get=function(e,t){var n=this;if(e=="video"){if(Ly.includes(t))return function(r){for(var i=[],o=0;o<arguments.length;++o)i[o]=arguments[o];return n.Ae.apply(n,[e,t].concat(fe(i)))}}else if(e=="player"){if(Du[t]&&!this.get("player","isLive")())return function(){};if(jy.includes(t))return function(r){for(var i=[],o=0;o<arguments.length;++o)i[o]=arguments[o];return n.Ae.apply(n,[e,t].concat(fe(i)))};if(Oy.includes(t))return function(r){for(var i=[],o=0;o<arguments.length;++o)i[o]=arguments[o];return n.Xf.apply(n,[e,t].concat(fe(i)))};if(so[t])return function(){return n.g[e][t]}}return this.g[e][t]},p.set=function(e,t,n){this.g[e][t]=n,Yr(this,{type:"set",targetName:e,property:t,value:n})};function Pu(e,t,n){it=n,n.addUpdateListener(e.G),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.I),bu(e),Yr(e,{type:"init",initState:t,appData:e.s}),e.l.resolve()}function gd(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new x(2,8,n,t))}p.Ae=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];Yr(this,{type:"call",targetName:e,methodName:t,args:r})},p.Xf=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new ae;var o=this.P.toString();this.P++,this.i[o]=i;try{Yr(this,{type:"asyncCall",targetName:e,methodName:t,args:r,id:o})}catch(s){i.reject(s)}return i};function md(e,t){var n=e.S();e.l=new ae,e.F=!0,Pu(e,n,t)}function vd(e){var t=it;t.removeUpdateListener(e.G),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.I)}function bu(e){var t=it?it.status=="connected":!1;if(e.h&&!t){e.J();for(var n in e.g)e.g[n]={};Lu(e)}e.h=t,e.$=t?it.receiver.friendlyName:"",e.j.Sb()}function Lu(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new x(1,7,7e3))}}function Yr(e,t){var n=fd(t),r=it;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},Dg)}catch(i){throw n=new x(2,8,8005,i),r=new U("error",new Map().set("detail",n)),e.u("player",r),e.Fb(),n}}var Uy=.02,uo=!1,it=null,$r=new Set;function yd(e){if(e){e=h($r);for(var t=e.next();!t.done;t=e.next())t.value.init()}}function ye(e,t,n){$.call(this);var r=this;this.j=e,this.i=t,this.h=this.s=this.l=this.u=this.o=null,this.G=n,this.F=new Map,this.g=new Nu(n,function(){return Td(r)},function(){return xd(r)},function(i,o){return Ed(r,i,o)},function(){return Sd(r)},function(){return ju(r)}),By(this)}Ne(ye,$),p=ye.prototype,p.destroy=function(e){return e&&this.g.Fb(),this.h&&(this.h.release(),this.h=null),e=[],this.i&&(e.push(this.i.destroy()),this.i=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.o=this.j=null,$.prototype.release.call(this),Promise.all(e)},p.Ef=function(){return this.o},p.uf=function(){return this.u},p.Te=function(){return this.g.o&&uo},p.xa=function(){return this.g.xa()},p.Qd=function(){return this.g.Qd()},p.cast=function(){var e=this,t;return E(function(n){return n.g==1?(t=ju(e),m(n,e.g.cast(t),2)):e.i?m(n,e.i.de(),0):n.return()})},p.Wd=function(e){this.g.Wd(e)},p.hg=function(){_y(this.g)},p.Fb=function(){this.g.Fb()},p.We=function(e){var t=this;return E(function(n){if(n.g==1)return e==t.G?n.return():(t.G=e,t.g.Fb(),m(n,t.g.destroy(),2));t.g=null,t.g=new Nu(e,function(){return Td(t)},function(){return xd(t)},function(r,i){return Ed(t,r,i)},function(){return Sd(t)},function(){return ju(t)}),t.g.init(),b(n)})};function By(e){e.g.init(),e.h=new ue;for(var t=h(dd),n=t.next();!n.done;n=t.next())e.h.C(e.j,n.value,function(o){e.g.xa()||(o=jl(o),e.l.dispatchEvent(o))});for(var r in no)e.h.C(e.i,no[r],function(o){e.g.xa()||e.s.dispatchEvent(o)});e.o={},t={};for(var i in e.j)t.Tb=i,Object.defineProperty(e.o,t.Tb,{configurable:!1,enumerable:!0,get:function(o){return function(){return Vy(e,o.Tb)}}(t),set:function(o){return function(s){var u=o.Tb;e.g.xa()?e.g.set("video",u,s):e.j[u]=s}}(t)}),t={Tb:t.Tb};e.u={},wd(e,function(o){Object.defineProperty(e.u,o,{configurable:!1,enumerable:!0,get:function(){return Hy(e,o)}})}),Fy(e),e.l=new $,e.l.Ec=e.o,e.s=new $,e.s.Ec=e.u}function Fy(e){var t=new Map;wd(e,function(n,r){if(t.has(r)){var i=t.get(r);n.length<i.length?e.F.set(n,i):e.F.set(i,n)}else t.set(r,n)})}function wd(e,t){function n(l){return l=="constructor"||typeof r[l]!="function"?!1:!i.has(l)}var r=e.i,i=new Set;for(o in r)n(o)&&(i.add(o),t(o,r[o]));for(var o=Object.getPrototypeOf(r),s=Object.getPrototypeOf({});o&&o!=s;){for(var u=h(Object.getOwnPropertyNames(o)),a=u.next();!a.done;a=u.next())a=a.value,n(a)&&(i.add(a),t(a,r[a]));o=Object.getPrototypeOf(o)}}function ju(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.i.wd(),startTime:null};e.j.pause();for(var n=h(Ru),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.j[r];for(e.j.ended||(t.startTime=e.j.currentTime),n=h(hd),r=n.next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.i[i[0]](),t.player[r]=i}for(n=h(pd),r=n.next();!r.done;r=n.next())i=r.value,r=i[1],i=e.i[i[0]](),t.playerAfterLoad[r]=i;return t}function Td(e){var t=new U("caststatuschanged");e.dispatchEvent(t)}function xd(e){var t=new U(e.o.paused?"pause":"play");e.l.dispatchEvent(t)}function Sd(e){for(var t=h(hd),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.i[n](r)}var i=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var o=e.j.autoplay;r=null,n||(r=e.g.get("video","currentTime")),i&&(e.j.autoplay=!1,t=e.i.load(i,r));var s={};for(n=h(Ru),r=n.next();!r.done;r=n.next())r=r.value,s[r]=e.g.get("video",r);t.then(function(){if(e.j){for(var u=h(Ru),a=u.next();!a.done;a=u.next())a=a.value,e.j[a]=s[a];for(u=h(pd),a=u.next();!a.done;a=u.next()){var l=a.value;a=l[1],l=e.g.get("player",l[0])(),e.i[a](l)}e.j.autoplay=o,i&&e.j.play()}},function(u){u=new Map().set("detail",u),u=new U(to,u),e.i.dispatchEvent(u)})}function Vy(e,t){if(t=="addEventListener")return function(r,i,o){return e.l.addEventListener(r,i,o)};if(t=="removeEventListener")return function(r,i,o){return e.l.removeEventListener(r,i,o)};if(e.g.xa()&&Object.keys(e.g.g.video).length==0){var n=e.j[t];if(typeof n!="function")return n}return e.g.xa()?e.g.get("video",t):(n=e.j[t],typeof n=="function"&&(n=n.bind(e.j)),n)}function Hy(e,t){if(e.F.has(t)&&(t=e.F.get(t)),t=="addEventListener")return function(n,r,i){return e.s.addEventListener(n,r,i)};if(t=="removeEventListener")return function(n,r,i){return e.s.removeEventListener(n,r,i)};if(t=="getMediaElement")return function(){return e.o};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.i.hc()};if(t=="getDrmEngine")return function(){return e.i.o};if(t=="getAdManager")return function(){return e.i.oe()};if(t=="setVideoContainer")return function(n){return e.i.Je(n)};if(e.g.xa()){if(t=="getManifest"||t=="drmInfo")return function(){return me(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return me(t+"() does not work while casting!"),Promise.resolve()}}return e.g.xa()&&Object.keys(e.g.g.video).length==0&&so[t]||!e.g.xa()?e.i[t].bind(e.i):e.g.get("player",t)}function Ed(e,t,n){e.g.xa()&&(t=="video"?e.l.dispatchEvent(n):t=="player"&&e.s.dispatchEvent(n))}O("shaka.cast.CastProxy",ye),ye.prototype.changeReceiverId=ye.prototype.We,ye.prototype.forceDisconnect=ye.prototype.Fb,ye.prototype.suggestDisconnect=ye.prototype.hg,ye.prototype.setAppData=ye.prototype.Wd,ye.prototype.cast=ye.prototype.cast,ye.prototype.receiverName=ye.prototype.Qd,ye.prototype.isCasting=ye.prototype.xa,ye.prototype.canCast=ye.prototype.Te,ye.prototype.getPlayer=ye.prototype.uf,ye.prototype.getVideo=ye.prototype.Ef,ye.prototype.destroy=ye.prototype.destroy;function ke(e,t,n,r){$.call(this);var i=this;this.g=e,this.i=t,this.h=new ue,this.P={video:e,player:t},this.I=n||function(){},this.S=r||function(o){return o},this.j=null,this.J=!1,this.s=!0,this.o=0,this.G=!1,this.F=!0,this.u=this.l=null,this.M=new G(function(){Ou(i)}),qy(this)}Ne(ke,$),p=ke.prototype,p.isConnected=function(){return this.J},p.If=function(){return this.s},p.dg=function(e){this.j=e},p.Ze=function(){this.j=null},p.eg=function(e){this.j||(this.j={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.j.title=e},p.cg=function(e){this.j||(this.j={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.j.images=[{url:e}]},p.bg=function(e){this.j||(this.j={}),this.j.artist=e,this.j.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},p.destroy=function(){var e=this,t,n;return E(function(r){if(r.g==1)return e.h&&(e.h.release(),e.h=null),t=[],e.i&&(t.push(e.i.destroy()),e.i=null),e.M&&(e.M.stop(),e.M=null),e.g=null,e.P=null,e.I=null,e.J=!1,e.s=!0,e.l=null,e.u=null,$.prototype.release.call(e),m(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),b(r)})};function qy(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Id(e)},t.onSenderDisconnected=function(){return Id(e)},t.onSystemVolumeChanged=function(){var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&$t(e,{type:"update",update:{video:{volume:i.level,muted:i.muted}}},e.l),$t(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(i){return zy(e,i)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(i){return Gy(e,i)},t.start(),t=h(dd);for(var n=t.next();!n.done;n=t.next())e.h.C(e.g,n.value,function(i){return Ad(e,"video",i)});for(var r in no)e.h.C(e.i,no[r],function(i){return Ad(e,"player",i)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.i.Yd(3840,2160):e.i.Yd(1920,1080),e.h.C(e.g,"loadeddata",function(){e.G=!0}),e.h.C(e.i,"loading",function(){e.s=!1,nr(e)}),e.h.C(e.g,"playing",function(){e.s=!1,nr(e)}),e.h.C(e.g,"pause",function(){nr(e)}),e.h.C(e.i,"unloading",function(){e.s=!0,nr(e)}),e.h.C(e.g,"ended",function(){new G(function(){e.g&&e.g.ended&&(e.s=!0,nr(e))}).W(Wy)})}function Id(e){e.o=0,e.F=!0,e.J=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,nr(e)}function nr(e){var t;E(function(n){if(n.g==1)return m(n,Promise.resolve(),2);if(!e.i)return n.return();t=new U("caststatuschanged"),e.dispatchEvent(t),Md(e)||Pt(e),b(n)})}function Ky(e,t,n){var r,i,o,s,u,a,l,c,f,d,g;E(function(v){switch(v.g){case 1:for(r in t.player)i=t.player[r],e.i[r](i);return e.I(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,q(v,5),m(v,e.i.load(t.manifest,t.startTime),7)):m(v,Promise.resolve(),3);case 7:ee(v,3);break;case 5:return s=K(v),u=to,a=new Map().set("detail",s),l=new U(u,a),e.i&&e.i.dispatchEvent(l),v.return();case 3:if(!e.i)return v.return();for(c in t.video)f=t.video[c],e.g[c]=f;for(d in t.playerAfterLoad)g=t.playerAfterLoad[d],e.i[d](g);e.g.autoplay=o,t.manifest&&(e.g.play(),Pt(e)),b(v)}})}function Ad(e,t,n){e.i&&(Ou(e),$t(e,{type:"event",targetName:t,event:n},e.l))}function Ou(e){e.M.W(Xy);for(var t={video:{},player:{}},n=h(by),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.i.Y())for(var i in Du)e.o%Du[i]==0&&(t.player[i]=e.i[i]());for(var o in so)e.o%so[o]==0&&(t.player[o]=e.i[o]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.G&&(e.o+=1),$t(e,{type:"update",update:t},e.l),Md(e)}function Md(e){return e.F&&(e.g.duration||e.i.Y())?(_u(e),e.F=!1,!0):!1}function _u(e,t){var n={contentId:e.i.wd(),streamType:e.i.Y()?"LIVE":"BUFFERED",contentType:""};e.i.Y()||(n.duration=e.g.duration),e.j&&(n.metadata=e.j),Pt(e,t===void 0?0:t,n)}function Gy(e,t){var n=ku(t.data);switch(n.type){case"init":e.o=0,e.G=!1,e.F=!0,Ky(e,n.initState,n.appData),Ou(e);break;case"appData":e.I(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,r=="video"){var o=cast.receiver.CastReceiverManager.getInstance();if(i=="volume"){o.setSystemVolumeLevel(n);break}else if(i=="muted"){o.setSystemVolumeMuted(n);break}}e.P[r][i]=n;break;case"call":r=e.P[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,r=="player"&&i=="load"&&(e.o=0,e.G=!1);var s=n.id,u=t.senderId;o=e.P[r],n=o[i].apply(o,n.args),r=="player"&&i=="load"&&(n=n.then(function(){e.F=!0})),n.then(function(){return Cd(e,u,s,null)},function(a){return Cd(e,u,s,a)})}}function zy(e,t){var n=ku(t.data);switch(n.type){case"PLAY":e.g.play(),Pt(e);break;case"PAUSE":e.g.pause(),Pt(e);break;case"SEEK":var r=n.currentTime,i=n.resumeState;r!=null&&(e.g.currentTime=Number(r)),i&&i=="PLAYBACK_START"?(e.g.play(),Pt(e)):i&&i=="PLAYBACK_PAUSE"&&(e.g.pause(),Pt(e));break;case"STOP":e.i.de().then(function(){e.i&&Pt(e)});break;case"GET_STATUS":_u(e,Number(n.requestId));break;case"VOLUME":i=n.volume,r=i.level,i=i.muted;var o=e.g.volume,s=e.g.muted;r!=null&&(e.g.volume=Number(r)),i!=null&&(e.g.muted=i),o==e.g.volume&&s==e.g.muted||Pt(e);break;case"LOAD":e.o=0,e.G=!1,e.F=!1,r=n.media,i=n.currentTime,o=e.S(r.contentId),s=n.autoplay||!0,e.I(r.customData),s&&(e.g.autoplay=!0),e.i.load(o,i).then(function(){e.i&&_u(e)}).catch(function(u){var a="LOAD_FAILED";u.category==7&&u.code==7e3&&(a="LOAD_CANCELLED"),$t(e,{requestId:Number(n.requestId),type:a},e.u)});break;default:$t(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function Cd(e,t,n,r){e.i&&$t(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function $t(e,t,n,r){e.J&&(e=fd(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Pt(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.s?Yy:e.i.zd()?Jy:e.g.paused?Qy:$y,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),$t(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.u)}O("shaka.cast.CastReceiver",ke),ke.prototype.destroy=ke.prototype.destroy,ke.prototype.setContentArtist=ke.prototype.bg,ke.prototype.setContentImage=ke.prototype.cg,ke.prototype.setContentTitle=ke.prototype.eg,ke.prototype.clearContentMetadata=ke.prototype.Ze,ke.prototype.setContentMetadata=ke.prototype.dg,ke.prototype.isIdle=ke.prototype.If,ke.prototype.isConnected=ke.prototype.isConnected;var Xy=.5,Wy=5,Yy="IDLE",$y="PLAYING",Jy="BUFFERING",Qy="PAUSED";function kd(e){var t=this;this.g=[],this.h=[],this.data=[],new oe().box("moov",pe).V("pssh",function(n){if(!(1<n.version)){var r=Q(n.reader.T,-12,n.size);if(t.data.push(r),t.g.push(Sr(n.reader.hb(16))),0<n.version){r=n.reader.O(),r=h(Qe(r));for(var i=r.next();!i.done;i=r.next())i=Sr(n.reader.hb(16)),t.h.push(i)}}}).parse(e)}function Rd(e,t){var n=e.length,r=t.length+16+n,i=new Uint8Array(r),o=Ve(i),s=0;return o.setUint32(s,r),s+=4,o.setUint32(s,1886614376),s+=4,o.setUint32(s,0),s+=4,i.set(t,s),s+=t.length,o.setUint32(s,n),i.set(e,s+4),i}function Zy(e){if(!e)return e;var t=new kd(e);if(1>=t.data.length)return e;e=[];var n={};t=h(t.data);for(var r=t.next();!r.done;n={yc:n.yc},r=t.next())n.yc=r.value,e.some(function(i){return function(o){return mt(o,i.yc)}}(n))||e.push(n.yc);return Er.apply(yt,fe(e))}function ao(e,t){var n=ge(e,t);return n.length!=1?null:n[0]}function Uu(e,t,n){return e=Dd(e,t,n),e.length!=1?null:e[0]}function ge(e,t){return Array.from(e.childNodes).filter(function(n){return n instanceof Element&&n.tagName==t})}function e0(e){return Array.from(e.childNodes).filter(function(t){return t instanceof Element})}function Dd(e,t,n){return Array.from(e.childNodes).filter(function(r){return r instanceof Element&&r.localName==n&&r.namespaceURI==t})}function Mn(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function bt(e,t,n){t=h(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,e.hasAttributeNS(r,n))return e.getAttributeNS(r,n);return null}function lo(e){return Array.from(e.childNodes).every(Nd)?e.textContent.trim():null}function Nd(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function ce(e,t,n,r){r=r===void 0?null:r;var i=null;return e=e.getAttribute(t),e!=null&&(i=n(e)),i??r}function t0(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function Lt(e){return!e||(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function co(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function n0(e){return e=Number(e),e%1===0?e:null}function fo(e){return e=Number(e),e%1===0&&0<e?e:null}function xt(e){return e=Number(e),e%1===0&&0<=e?e:null}function Jr(e){return e=Number(e),isNaN(e)?null:e}function r0(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e}function Bu(e,t){var n=new DOMParser,r=null;try{r=n.parseFromString(e,"text/xml")}catch{return null}return n=r.documentElement,!n||n.getElementsByTagName("parsererror").length||r.documentElement.tagName!=t?null:n}function Pd(e,t){try{var n=be(e);return Bu(n,t)}catch{return null}}function bd(e,t,n){var r=a0(e),i=null;e=[];var o=[],s=new Set(r.map(function(u){return u.keyId}));if(s.delete(null),1<s.size)throw new x(2,4,4010);if(t||(o=r.filter(function(u){return u.De=="urn:mpeg:dash:mp4protection:2011"?(i=u.init||i,!1):!0}),o.length&&(e=u0(i,o,n),e.length==0&&(e=[Tr("",i)]))),r.length&&(t||!o.length))for(e=[],t=h(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Tr(n,i));if(s=Array.from(s)[0]||null)for(t=h(e),n=t.next();!n.done;n=t.next())for(n=h(n.value.initData),r=n.next();!r.done;r=n.next())r.value.keyId=s;return{je:s,Vg:i,drmInfos:e,ne:!0}}function i0(e,t,n,r){var i=bd(e,n,r);if(t.ne)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=i.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=i.drmInfos),t.ne=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(o){return i.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),t.drmInfos.length==0))throw new x(2,4,4008);return i.je||t.je}function o0(e){var t=0,n=Ve(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,(i&1)!=0||i+e>n.byteLength){n=[];break e}var o=Q(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}function s0(e){e=h(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=h(t.value.childNodes);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n instanceof Element&&n.tagName=="LA_URL")return n.textContent}return""}function ho(e){return e=Uu(e.node,"urn:microsoft:playready","pro"),!e||(e=Wt(e.textContent),e=o0(e).filter(function(t){return t.type===c0})[0],!e)?"":(e=Xt(e.value,!0),(e=Bu(e,"WRMHEADER"))?s0(e):"")}function u0(e,t,n){var r=[];t=h(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=n[i.De];if(o){var s;if(s=Uu(i.node,"urn:microsoft:playready","pro")){s=Wt(s.textContent);var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:Rd(s,u),initDataType:"cenc",keyId:i.keyId}]}else s=null;s=Tr(o,i.init||e||s),(o=f0.get(o))&&(s.licenseServerUri=o(i)),r.push(s)}}return r}function a0(e){var t=[];e=h(e);for(var n=e.next();!n.done;n=e.next())(n=l0(n.value))&&t.push(n);return t}function l0(e){var t=e.getAttribute("schemeIdUri"),n=Mn(e,"urn:mpeg:cenc:2013","default_KID"),r=Dd(e,"urn:mpeg:cenc:2013","pssh").map(lo);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new x(2,4,4009);var i=[];try{i=r.map(function(o){return{initDataType:"cenc",initData:Wt(o),keyId:null}})}catch{throw new x(2,4,4007)}return{node:e,De:t,keyId:n,init:0<i.length?i:null}}var c0=1,f0=new Map().set("com.widevine.alpha",function(e){return(e=Uu(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",ho).set("com.microsoft.playready.recommendation",ho).set("com.microsoft.playready.software",ho).set("com.microsoft.playready.hardware",ho);function po(e,t,n,r,i){var o={RepresentationID:t,Number:n,Bandwidth:r,Time:i};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(s,u,a,l){if(s=="$$")return"$";var c=o[u];if(c==null)return s;switch(u=="RepresentationID"&&a&&(a=void 0),u=="Time"&&(c=Math.round(c)),l){case void 0:case"d":case"i":case"u":s=c.toString();break;case"o":s=c.toString(8);break;case"x":s=c.toString(16);break;case"X":s=c.toString(16).toUpperCase();break;default:s=c.toString()}return a=R.parseInt(a,10)||1,Array(Math.max(0,a-s.length)+1).join("0")+s})}function Ld(e,t){var n=St(e,t,"timescale"),r=1;n&&(r=fo(n)||1);var i=St(e,t,"duration");n=fo(i||""),e.L.contentType=="image"&&(n=Jr(i||"")),n&&(n/=r);var o=St(e,t,"startNumber");i=Number(St(e,t,"presentationTimeOffset"))||0;var s=xt(o||"");(o==null||s==null)&&(s=1);var u=go(e,t,"SegmentTimeline");if(o=null,u){o=r;var a=e.Z.duration||1/0,l=ge(u,"S");u=[];var c=-i;l=h(Be(l));for(var f=l.next();!f.done;f=l.next()){f=f.value;var d=f.item,g=f.next,v=ce(d,"t",xt);f=ce(d,"d",xt);var y=ce(d,"r",n0);if(v!=null&&(v-=i),!f)break;if(d=v??c,v=y||0,0>v)if(g){if(g=ce(g,"t",xt),g==null)break;if(d>=g)break;v=Math.ceil((g-d)/f)-1}else{if(a==1/0)break;if(d/o>=a)break;v=Math.ceil((a*o-d)/f)-1}for(0<u.length&&d!=c&&(u[u.length-1].end=d/o),g=h(Qe(v+1)),v=g.next();!v.done;v=g.next())c=d+f,u.push({start:d/o,end:c/o,mg:d}),d=c}o=u}return{timescale:r,la:n,Rb:s,Za:i/r||0,ee:i,timeline:o}}function St(e,t,n){return[t(e.L),t(e.pa),t(e.ha)].filter(zt).map(function(r){return r.getAttribute(n)}).reduce(function(r,i){return r||i})}function go(e,t,n){return[t(e.L),t(e.pa),t(e.ha)].filter(zt).map(function(r){return ao(r,n)}).reduce(function(r,i){return r||i})}function d0(e,t,n,r,i,o){for(var s=Mn(e,"http://www.w3.org/1999/xlink","href"),u=Mn(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=h(Array.from(e.attributes)),l=a.next();!l.done;l=a.next())l=l.value,l.namespaceURI=="http://www.w3.org/1999/xlink"&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=o)return gn(new x(2,4,4028));if(u!="onLoad")return gn(new x(2,4,4027));var c=Pe([r],[s]);return i.request(0,at(c,t)).fa(function(f){if(f=Pd(f.data,e.tagName),!f)return gn(new x(2,4,4001,s));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;f.childNodes.length;){var d=f.childNodes[0];f.removeChild(d),e.appendChild(d)}for(f=h(Array.from(f.attributes)),d=f.next();!d.done;d=f.next())e.setAttributeNode(d.value.cloneNode(!1));return mo(e,t,n,c[0],i,o+1)})}function mo(e,t,n,r,i,o){if(o=o===void 0?0:o,Mn(e,"http://www.w3.org/1999/xlink","href")){var s=d0(e,t,n,r,i,o);return n&&(s=s.fa(void 0,function(){return mo(e,t,n,r,i,o)})),s}s=[];for(var u=h(Array.from(e.childNodes)),a=u.next();!a.done;a=u.next())a=a.value,a instanceof Element&&(Mn(a,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.removeChild(a):a.tagName!="SegmentTimeline"&&s.push(mo(a,t,n,r,i,o)));return Ll(s).fa(function(){return e})}function h0(e,t,n,r,i,o,s){var u,a=new oe().V("sidx",function(l){u=p0(t,r,i,o,s,n,l)});if(e&&a.parse(e),u)return u;throw new x(2,3,3004)}function p0(e,t,n,r,i,o,s){var u=[];s.reader.skip(4);var a=s.reader.O();if(a==0)throw new x(2,3,3005);if(s.version==0)var l=s.reader.O(),c=s.reader.O();else l=s.reader.Qb(),c=s.reader.Qb();s.reader.skip(2);var f=s.reader.Pb();for(e=e+s.size+c,f=h(Qe(f)),c=f.next();!c.done;c=f.next()){var d=s.reader.O();c=(d&2147483648)>>>31,d&=2147483647;var g=s.reader.O();if(s.reader.skip(4),c==1)throw new x(2,3,3006);u.push(new he(l/a+n,(l+g)/a+n,function(){return o},e,e+d-1,t,n,r,i)),l+=g,e+=d}return s.parser.stop(),u}function Jt(e){this.h=Ve(e),this.g=new Z(this.h,0)}Jt.prototype.qa=function(){return this.g.qa()};function jt(e){var t=jd(e);if(7<t.length)throw new x(2,3,3002);var n=0;t=h(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=jd(e);e:{r=h(g0);for(var i=r.next();!i.done;i=r.next())if(mt(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.ba();else{if(t.length==8&&t[1]&224)throw new x(2,3,3001);r=0,i=h(Be(t));for(var o=i.next();!o.done;o=i.next()){o=o.value;var s=o.item;r=o.ga==0?s&(1<<8-t.length)-1:256*r+s}t=r}return t=e.g.ba()+t<=e.h.byteLength?t:e.h.byteLength-e.g.ba(),r=Ve(e.h,e.g.ba(),t),e.g.skip(t),new m0(n,r)}function jd(e){var t=e.g.ba(),n=e.g.ca();if(n==0)throw new x(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Q(e.h,t,n)}var g0=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function m0(e,t){this.id=e,this.g=t}function Fu(e){if(8<e.g.byteLength)throw new x(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new x(2,3,3001);for(var t=0,n=h(Qe(e.g.byteLength)),r=n.next();!r.done;r=n.next())r=e.g.getUint8(r.value),t=256*t+r;return t}function v0(e,t,n,r,i,o,s,u,a){function l(){return i}var c=[];e=new Jt(e.g);for(var f=null,d=null;e.qa();){var g=jt(e);if(g.id==187){var v=y0(g);v&&(g=n*v.ng,v=t+v.Wf,f!=null&&c.push(new he(f+s,g+s,l,d,v-1,o,s,u,a)),f=g,d=v)}}return f!=null&&c.push(new he(f+s,r+s,l,d,null,o,s,u,a)),c}function y0(e){var t=new Jt(e.g);if(e=jt(t),e.id!=179)throw new x(2,3,3013);if(e=Fu(e),t=jt(t),t.id!=183)throw new x(2,3,3012);t=new Jt(t.g);for(var n=0;t.qa();){var r=jt(t);if(r.id==241){n=Fu(r);break}}return{ng:e,Wf:n}}function Od(e,t){var n=go(e,t,"Initialization");if(!n)return null;var r=e.L.Ba,i=n.getAttribute("sourceURL");i&&(r=Pe(e.L.Ba,[i])),i=0;var o=null;return(n=ce(n,"range",co))&&(i=n.start,o=n.end),new qe(function(){return r},i,o,Fd(e))}function w0(e,t){var n=Number(St(e,rr,"presentationTimeOffset"))||0,r=St(e,rr,"timescale"),i=1;r&&(i=fo(r)||1);var o=n/i||0,s=Od(e,rr);T0(e,s);var u=Ol(e);return{Gb:function(){var a=go(u,rr,"RepresentationIndex"),l=u.L.Ba;return a&&(a=a.getAttribute("sourceURL"))&&(l=Pe(u.L.Ba,[a])),a=Ud(u),_d(u,t,s,l,a.start,a.end,o)}}}function _d(e,t,n,r,i,o,s){var u,a,l,c,f,d,g,v,y,T,w,A,I,S,C;return E(function(k){if(k.g==1)return u=e.presentationTimeline,a=!e.eb||!e.Z.te,l=e.Z.start,c=e.Z.duration,f=e.L.mimeType.split("/")[1],d=t,g=null,v=[d(r,i,o),f=="webm"?d(n.ua(),n.sa,n.ja):null],d=null,m(k,Promise.all(v),2);if(y=k.h,T=y[0],w=y[1]||null,A=null,I=l-s,S=l,C=c?l+c:1/0,f=="mp4")var D=h0(T,i,r,n,I,S,C);else{if(D=new Jt(w),jt(D).id!=440786851)throw new x(2,3,3008);var P=jt(D);if(P.id!=408125543)throw new x(2,3,3009);D=P.g.byteOffset,P=new Jt(P.g);for(var N=null;P.qa();){var L=jt(P);if(L.id==357149030){N=L;break}}if(!N)throw new x(2,3,3010);for(N=new Jt(N.g),L=1e6,P=null;N.qa();){var B=jt(N);if(B.id==2807729)L=Fu(B);else if(B.id==17545)if(B.g.byteLength==4)P=B.g.getFloat32(0);else if(B.g.byteLength==8)P=B.g.getFloat64(0);else throw new x(2,3,3003)}if(P==null)throw new x(2,3,3011);if(N=L/1e9,P*=N,L=jt(new Jt(T)),L.id!=475249515)throw new x(2,3,3007);D=v0(L,D,N,P,r,n,I,S,C)}return A=D,u.Mb(A),g=new Y(A),a&&g.fb(S,C,!0),k.return(g)})}function rr(e){return e.sc}function Ud(e){var t=go(e,rr,"RepresentationIndex");return e=St(e,rr,"indexRange"),e=co(e||""),t&&(e=ce(t,"range",co,e)),e}function T0(e,t){if(Bd(e,t),!Ud(e))throw new x(2,4,4002)}function Bd(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=re&&n!="mp4"&&n!="webm")throw new x(2,4,4006);if(n=="webm"&&!t)throw new x(2,4,4005)}function Fd(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Rc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function x0(e,t){var n=Od(e,Vd),r=S0(e);if(!r.la&&!r.timeline&&1<r.Jb.length)throw new x(2,4,4002);if(!r.la&&!e.Z.duration&&!r.timeline&&r.Jb.length==1)throw new x(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new x(2,4,4002);var i=null,o=null;e.ha.id&&e.L.id&&(o=t[e.ha.id+","+e.L.id])&&(i=o.segmentIndex);var s=E0(e.Z.start,e.Z.duration,e.L.Ba,r,n);return n=!i,i?i.Lb(s,e.presentationTimeline.Xa()):i=new Y(s),e.presentationTimeline.Mb(s),e.eb&&e.Z.te||i.fb(e.Z.start,e.Z.duration?e.Z.start+e.Z.duration:1/0,n),o&&(o.segmentIndex=i),{Gb:function(){return i&&i.N.length!=0||i.Kb(s),Promise.resolve(i)}}}function Vd(e){return e.ib}function S0(e){var t=I0(e);e=Ld(e,Vd);var n=e.Rb;n==0&&(n=1);var r=0;return e.la?r=e.la*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{la:e.la,startTime:r,Rb:n,Za:e.Za,timeline:e.timeline,Jb:t}}function E0(e,t,n,r,i){var o=r.Jb.length;r.timeline&&r.timeline.length!=r.Jb.length&&(o=Math.min(r.timeline.length,r.Jb.length));var s=e-r.Za,u=t?e+t:1/0,a=[],l=r.startTime,c={};o=h(Qe(o));for(var f=o.next();!f.done;c={gd:c.gd},f=o.next()){f=f.value;var d=r.Jb[f];c.gd=Pe(n,[d.Mf]);var g=void 0;g=r.la!=null?l+r.la:r.timeline?r.timeline[f].end:l+t,a.push(new he(e+l,e+g,function(v){return function(){return v.gd}}(c),d.start,d.end,i,s,e,u)),l=g}return a}function I0(e){return[e.L.ib,e.pa.ib,e.ha.ib].filter(zt).map(function(t){return ge(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.getAttribute("indexRange")&&!e.re&&(e.re=!0);var n=t.getAttribute("media");return t=ce(t,"mediaRange",co,{start:0,end:null}),{Mf:n,start:t.start,end:t.end}})}function A0(e,t,n,r,i,o){var s=D0(e),u=M0(e);C0(u);var a=Ol(e);if(u.lc)return Bd(e,s),{Gb:function(){var g=po(u.lc,a.L.id,null,a.bandwidth||null,null);return g=Pe(a.L.Ba,[g]),_d(a,t,s,g,0,null,u.Za)}};if(u.la)return r||(e.presentationTimeline.Ld(u.la),e.presentationTimeline.Md(e.Z.start)),{Gb:function(){return k0(a,u,i,s,o)}};var l=null;r=r=null,e.ha.id&&e.L.id&&(r=e.ha.id+","+e.L.id,r=n[r])&&(l=r.segmentIndex);var c=R0(a,u,s);n=e.Z.start;var f=e.Z.duration?e.Z.start+e.Z.duration:1/0,d=f!=1/0;return l?(d&&new Y(c).fb(n,f,!0),l.Lb(c,e.presentationTimeline.Xa())):l=new Y(c),e.presentationTimeline.Mb(c),d&&l.fb(n,f),r&&e.eb&&(r.segmentIndex=l),{Gb:function(){return l&&l.N.length!=0||l.Kb(c),Promise.resolve(l)}}}function vo(e){return e.tc}function M0(e){var t=Ld(e,vo),n=St(e,vo,"media");return e=St(e,vo,"index"),{la:t.la,timescale:t.timescale,Rb:t.Rb,Za:t.Za,ee:t.ee,timeline:t.timeline,Kd:n,lc:e}}function C0(e){var t=e.lc?1:0;if(t+=e.timeline?1:0,t+=e.la?1:0,t==0)throw new x(2,4,4002);if(t!=1&&(e.lc&&(e.timeline=null),e.la=null),!e.lc&&!e.Kd)throw new x(2,4,4002)}function k0(e,t,n,r,i){function o(N){var L=(N-g)*d,B=L+t.Za,F=L+l;L=F+d;var W=Math.min(L,u());return F=new he(F,W,function(){var H=po(y,w,N,T,B*v);return Pe(A,[H])},0,null,r,I,l,u()),F.l=L,F}function s(){var N=[Math.max(a.Xa(),l),Math.min(a.mb(),u())].map(function(L){return L-l});return[Math.ceil(N[0]/d),Math.ceil(N[1]/d)-1].map(function(L){return L+g})}function u(){var N=c!=null&&i[c]||f;return N?l+N:1/0}var a=e.presentationTimeline,l=e.Z.start,c=e.ha.id,f=e.Z.duration,d=t.la,g=t.Rb,v=t.timescale,y=t.Kd,T=e.bandwidth||null,w=e.L.id,A=e.L.Ba,I=l-t.Za,S=s();e=e.eb?Math.max(S[0],S[1]-n+1):S[0],S=S[1],n=[];for(var C=e;C<=S;++C){var k=o(C);n.push(k)}var D=new Y(n);if(n=a.mb()<u(),C=a.Y(),n||C){var P=Math.max(e,S+1);D.Yc(d,function(){var N=a.Xa();D.kb(N);var L=h(s());L.next(),L=L.next().value;for(var B=[];P<=L;){var F=o(P);B.push(F),P++}return N>u()&&!B.length?null:B})}return Promise.resolve(D)}function R0(e,t,n){var r=e.Z.start,i=e.Z.duration,o=r-t.Za;i=i?r+i:1/0;for(var s=[],u={},a=h(Be(t.timeline)),l=a.next();!l.done;u={fd:u.fd,kd:u.kd,nd:u.nd,cd:u.cd,pd:u.pd,dd:u.dd},l=a.next()){l=l.value;var c=l.item,f=c.start,d=c.mg;c=c.end,u.nd=l.ga+t.Rb,u.pd=d+t.ee,u.kd=e.L.id,u.cd=e.bandwidth||null,u.fd=t.Kd,u.dd=e.L.Ba,s.push(new he(r+f,r+c,function(g){return function(){var v=po(g.fd,g.kd,g.nd,g.cd||null,g.pd);return Pe(g.dd,[v]).map(function(y){return y.toString()})}}(u),0,null,n,o,r,i))}return s}function D0(e){var t=St(e,vo,"initialization");if(!t)return null;var n=e.L.id,r=e.bandwidth||null,i=e.L.Ba;return new qe(function(){var o=po(t,n,null,r,null);return Pe(i,[o])},0,null,Fd(e))}function Hd(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.o=new Set}Hd.prototype.release=function(){for(var e=h(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};function N0(e,t,n){var r,i,o,s,u,a,l,c,f,d,g,v,y,T,w,A,I,S,C,k,D,P,N,L,B,F,W,H,ne,we,te,Oe,Vt;return E(function(De){switch(De.g){case 1:if(r=_e,P0(t),L0(t),b0(t),j0(t),!n&&t.length==1){i=t[0],e.g=i.Fc,e.h=i.$c,e.j=i.textStreams,e.i=i.imageStreams,De.A(2);break}for(o=-1,s=h(Be(t)),u=s.next();!u.done;u=s.next())a=u.value,l=a.ga,c=a.item,e.o.has(c.id)||(e.o.add(c.id),o==-1&&(o=l));if(o==-1)return De.return();for(f=t.map(function(Ge){return Ge.Fc}),d=t.map(function(Ge){return Ge.$c}),g=t.map(function(Ge){return Ge.textStreams}),v=t.map(function(Ge){return Ge.imageStreams}),y=h(g),T=y.next();!T.done;T=y.next())w=T.value,w.push(Yd(r.ea));for(A=h(v),I=A.next();!I.done;I=A.next())S=I.value,S.push(Yd(r.Xb));return m(De,Qt(e.g,f,o,Qr,ir),3);case 3:return m(De,Qt(e.h,d,o,Qr,ir),4);case 4:return m(De,Qt(e.j,g,o,Qr,ir),5);case 5:return m(De,Qt(e.i,v,o,Qr,ir),2);case 2:if(C=0,k=[],e.h.length&&e.g.length)for(F=h(e.g),W=F.next();!W.done;W=F.next())for(H=W.value,ne=h(e.h),we=ne.next();!we.done;we=ne.next())te=we.value,Oe=Pi(H.drmInfos,te.drmInfos),H.drmInfos.length&&te.drmInfos.length&&!Oe.length||(Vt=C++,k.push({id:Vt,language:H.language,primary:H.primary,audio:H,video:te,bandwidth:(H.bandwidth||0)+(te.bandwidth||0),drmInfos:Oe,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(D=e.h.concat(e.g),P=h(D),N=P.next();!N.done;N=P.next())L=N.value,B=C++,k.push({id:B,language:L.language,primary:L.primary,audio:L.type==r.jb?L:null,video:L.type==r.Ta?L:null,bandwidth:L.bandwidth||0,drmInfos:L.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=k,b(De)}})}function P0(e){e=h(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],r=h(t.Fc),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=h(n),u=s.next();!u.done;u=s.next())u=u.value,i.id!=u.id&&i.channelsCount==u.channelsCount&&i.language==u.language&&i.bandwidth==u.bandwidth&&i.label==u.label&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&hr(i.roles,u.roles)&&i.audioSamplingRate==u.audioSamplingRate&&i.primary==u.primary&&(o=!0);o||n.push(i)}t.Fc=n}}function b0(e){e=h(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],r=h(t.textStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=h(n),u=s.next();!u.done;u=s.next())u=u.value,i.id!=u.id&&i.language==u.language&&i.label==u.label&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&hr(i.roles,u.roles)&&(o=!0);o||n.push(i)}t.textStreams=n}}function L0(e){e=h(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],r=h(t.$c),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=h(n),u=s.next();!u.done;u=s.next())u=u.value,i.id!=u.id&&i.width==u.width&&i.frameRate==u.frameRate&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&i.label==u.label&&hr(i.roles,u.roles)&&ym(i.closedCaptions,u.closedCaptions)&&i.bandwidth==u.bandwidth&&(o=!0);o||n.push(i)}t.$c=n}}function j0(e){e=h(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],r=h(t.imageStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=!1,s=h(n),u=s.next();!u.done;u=s.next())u=u.value,i.id!=u.id&&i.width==u.width&&i.codecs==u.codecs&&i.mimeType==u.mimeType&&(o=!0);o||n.push(i)}t.imageStreams=n}}function qd(e){var t,n,r,i,o,s,u,a,l,c,f,d,g,v,y,T,w,A,I,S,C,k,D,P,N,L,B;return E(function(F){switch(F.g){case 1:if(t=_e,e.length==1)return F.return(e[0]);for(n=e.map(function(W){return W.filter(function(H){return H.type==t.jb})}),r=e.map(function(W){return W.filter(function(H){return H.type==t.Ta})}),i=e.map(function(W){return W.filter(function(H){return H.type==t.ea})}),o=e.map(function(W){return W.filter(function(H){return H.type==t.Xb})}),s=h(i),u=s.next();!u.done;u=s.next())a=u.value,a.push(Wd(t.ea));for(l=h(o),c=l.next();!c.done;c=l.next())f=c.value,f.push(Wd(t.Xb));return m(F,Qt([],n,0,yo,wo),2);case 2:return d=F.h,m(F,Qt([],r,0,yo,wo),3);case 3:return g=F.h,m(F,Qt([],i,0,yo,wo),4);case 4:return v=F.h,m(F,Qt([],o,0,yo,wo),5);case 5:if(y=F.h,T=0,g.length&&d.length)for(C=h(d),k=C.next();!k.done;k=C.next())for(D=k.value,P=h(g),N=P.next();!N.done;N=P.next())L=N.value,B=T++,L.variantIds.push(B),D.variantIds.push(B);else for(w=g.concat(d),A=h(w),I=A.next();!I.done;I=A.next())S=I.value,S.variantIds=[T++];return F.return(g.concat(d).concat(v).concat(y))}})}function Qt(e,t,n,r,i){var o,s,u,a,l,c,f,d,g,v,y,T,w,A,I,S,C,k,D,P,N,L,B,F;return E(function(W){switch(W.g){case 1:for(o=_e,s=[],u=h(Be(t)),a=u.next();!a.done;a=u.next())l=a.value,c=l.ga,f=l.item,c>=n?s.push(new Set(f)):s.push(new Set);d=h(e),g=d.next();case 2:if(g.done){W.A(4);break}return v=g.value,m(W,O0(v,t,n,i,s),5);case 5:if(y=W.h,!y)throw new x(2,4,4037);g=d.next(),W.A(2);break;case 4:for(T=h(s),w=T.next();!w.done;w=T.next())for(A=w.value,I=h(A),S=I.next();!S.done;S=I.next())C=S.value,(k=_0(C,t,r,i,s))&&e.push(k);for(D=h(s),w=D.next();!w.done;w=D.next())for(P=w.value,N={},L=h(P),S=L.next();!S.done;N={cb:N.cb},S=L.next())if(N.cb=S.value,B=N.cb.type==o.ea&&!N.cb.language,F=N.cb.type==o.Xb&&!N.cb.tilesLayout,!B&&!F&&e.some(function(H){return function(ne){return ne.mimeType==H.cb.mimeType&&et(ne.codecs)==et(H.cb.codecs)}}(N)))throw new x(2,4,4037);return W.return(e)}})}function O0(e,t,n,r,i){return E(function(o){return o.g==1?(zd(t,e),e.matchedStreams?e.segmentIndex?m(o,Kd(e,n),2):o.A(2):o.return(!1)):(Gd(e,n,r,i),o.return(!0))})}function Kd(e,t){var n,r,i,o,s,u,a,l,c,f;return E(function(d){if(d.g==1){for(n=[],r=e.matchedStreams,i=h(r),o=i.next();!o.done;o=i.next())s=o.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return m(d,Promise.all(n),2)}if(e.segmentIndex instanceof ve)for(u=h(Be(r)),a=u.next();!a.done;a=u.next())l=a.value,c=l.ga,f=l.item,f.segmentIndex&&c>=t&&e.segmentIndex.j.push(f.segmentIndex);b(d)})}function _0(e,t,n,r,i){var o=n(e);return zd(t,o),o.createSegmentIndex&&(o.createSegmentIndex=function(){return E(function(s){return o.segmentIndex?s.A(0):(o.segmentIndex=new ve,m(s,Kd(o,0),0))})}),o.matchedStreams?(Gd(o,0,r,i),o):null}function Gd(e,t,n,r){for(var i=h(Be(e.matchedStreams)),o=i.next();!o.done;o=i.next()){var s=o.value;if(o=s.ga,s=s.item,o>=t){n(e,s);var u=!0;e.type=="audio"&&dn(e.language,s.language)==0&&(u=!1),u&&r[o].delete(s)}}}function Qr(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=h(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function yo(e){return e=Object.assign({},e),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function ir(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=function(o,s){return new Set([].concat(fe(o),fe(s)))}(e.keyIds,t.keyIds),e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var n=Pi(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new x(2,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map),n=h(t.closedCaptions);for(var r=n.next();!r.done;r=n.next()){var i=h(r.value);r=i.next().value,i=i.next().value,e.closedCaptions.set(r,i)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Qr(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),ir(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&ir(e.trickModeVideo,t)}function wo(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(fe(e.keyIds),fe(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,fe(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map),n=h(t.closedCaptions);for(var r=n.next();!r.done;r=n.next()){var i=h(r.value);r=i.next().value,i=i.next().value,e.closedCaptions.set(r,i)}}}function zd(e,t){for(var n=[],r=h(e),i=r.next();!i.done;i=r.next()){var o=t,s={audio:Xd,video:Xd,text:U0,image:B0}[o.type],u={audio:F0,video:V0,text:H0,image:q0}[o.type],a=null;i=h(i.value);for(var l=i.next();!l.done;l=i.next())l=l.value,!s(o,l)||a&&!u(o,a,l)||(a=l);if(o=a,!o)return;n.push(o)}t.matchedStreams=n}function Xd(e,t){var n;if(!(n=t.mimeType!=e.mimeType||et(t.codecs)!=et(e.codecs))&&(n=e.drmInfos)){n=e.drmInfos;var r=t.drmInfos;n=!(!(n.length&&r.length)||0<Pi(n,r).length)}return!n}function U0(e,t){return e.language?t.language?!(dn(e.language,t.language)==0||t.kind!=e.kind):!0:!1}function B0(e){return!!e.tilesLayout}function F0(e,t,n){if(e.id==n.id)return!0;var r=dn(e.language,t.language),i=dn(e.language,n.language);return i>r?!0:i<r?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:e.roles.length?(r=t.roles.filter(function(o){return e.roles.includes(o)}),i=n.roles.filter(function(o){return e.roles.includes(o)}),i.length>r.length?!0:i.length<r.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:(r=Zr(e.channelsCount,t.channelsCount,n.channelsCount),r==dt?!0:r==Ot?!1:(r=Zr(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==dt?!0:r==Ot?!1:!!(e.bandwidth&&$d(e.bandwidth,t.bandwidth,n.bandwidth)==dt)))}function V0(e,t,n){if(e.id==n.id)return!0;var r=Zr(e.width*e.height,t.width*t.height,n.width*n.height);if(r==dt)return!0;if(r==Ot)return!1;if(e.frameRate){if(r=Zr(e.frameRate,t.frameRate,n.frameRate),r==dt)return!0;if(r==Ot)return!1}return!!(e.bandwidth&&$d(e.bandwidth,t.bandwidth,n.bandwidth)==dt)}function H0(e,t,n){if(e.id==n.id)return!0;var r=dn(e.language,t.language),i=dn(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(r=t.roles.filter(function(o){return e.roles.includes(o)}),i=n.roles.filter(function(o){return e.roles.includes(o)}),i.length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function q0(e,t,n){return e.id==n.id?!0:Zr(e.width*e.height,t.width*t.height,n.width*n.height)==dt}function Wd(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Yd(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Y([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Zr(e,t,n){if(t==e&&e!=n)return Ot;if(n==e&&e!=t)return dt;if(t>e){if(n<=e||n-e<t-e)return dt;if(n-e>t-e)return Ot}else{if(n>e)return Ot;if(e-n<e-t)return dt;if(e-n>e-t)return Ot}return Jd}function $d(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?dt:t<e?Ot:Jd}var dt=1,Jd=0,Ot=-1;function ei(){var e=this;this.B=this.m=null,this.h=[],this.D=null,this.F=1,this.$a={},this.J={},this.g=new Hd,this.u=0,this.G=new ts(5),this.s=new G(function(){e.nc()}),this.i=new Ci,this.j=null,this.I=[],this.l=1/0,this.o=!1}p=ei.prototype,p.configure=function(e){this.m=e},p.start=function(e,t){var n=this,r;return E(function(i){if(i.g==1)return n.o=t.isLowLatencyMode(),n.h=[e],n.B=t,m(i,Vu(n),2);if(r=i.h,n.B&&Zd(n,r),!n.B)throw new x(2,7,7001);return i.return(n.D)})},p.stop=function(){for(var e=h(Object.values(this.$a)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.g&&this.g.release(),this.m=this.B=null,this.h=[],this.D=null,this.$a={},this.g=null,this.s!=null&&(this.s.stop(),this.s=null),this.i.destroy()},p.update=function(){var e=this,t;return E(function(n){if(n.g==1)return q(n,2),m(n,Vu(e),4);if(n.g!=2)return ee(n,0);if(t=K(n),!e.B||!t)return n.return();e.B.onError(t),b(n)})},p.onExpirationUpdated=function(){};function Vu(e){var t,n,r,i,o,s,u;return E(function(a){return a.g==1?(t=at(e.h,e.m.retryParameters),n=e.B.networkingEngine,e.B.modifyManifestRequest(t,{format:"d"}),r=Date.now(),i=n.request(0,t),Kn(e.i,i),m(a,i.promise,2)):a.g!=3?(o=a.h,e.B?(o.uri&&!e.h.includes(o.uri)&&e.h.unshift(o.uri),m(a,K0(e,o.data,o.uri),3)):a.return(0)):(s=Date.now(),u=(s-r)/1e3,ns(e.G,1,u),a.return(u))})}function K0(e,t,n){var r,i,o,s;return E(function(u){if(u.g==1){if(r=Pd(t,"MPD"),!r)throw new x(2,4,4001,n);return e.m.dash.disableXlinkProcessing?u.return(Qd(e,r,n)):(i=e.m.dash.xlinkFailGracefully,o=mo(r,e.m.retryParameters,i,n,e.B.networkingEngine),Kn(e.i,o),m(u,o.promise,2))}return s=u.h,u.return(Qd(e,s,n))})}function Qd(e,t,n){var r,i,o,s,u,a,l,c,f,d,g,v,y,T,w,A,I,S,C,k,D,P,N,L,B,F,W,H,ne,we;return E(function(te){switch(te.g){case 1:if((r=e.m.dash.manifestPreprocessor)&&r(t),i=[n],o=ge(t,"Location").map(lo).filter(zt),0<o.length&&(s=Pe(i,o),i=e.h=s),u=ge(t,"BaseURL"),a=u.map(lo),l=Pe(i,a),c=0,u&&u.length&&(c=ce(u[0],"availabilityTimeOffset",Jr)||0),f=e.m.dash.ignoreMinBufferTime,d=0,f||(d=ce(t,"minBufferTime",Lt)||0),e.u=ce(t,"minimumUpdatePeriod",Lt,-1),g=ce(t,"availabilityStartTime",t0),v=ce(t,"timeShiftBufferDepth",Lt),y=e.m.dash.ignoreSuggestedPresentationDelay,T=null,y||(T=ce(t,"suggestedPresentationDelay",Lt)),w=e.m.dash.ignoreMaxSegmentDuration,A=null,w||(A=ce(t,"maxSegmentDuration",Lt)),I=t.getAttribute("type")||"static",e.D)for(S=e.D.presentationTimeline,C=h(Object.values(e.$a)),k=C.next();!k.done;k=C.next())D=k.value,D.segmentIndex&&D.segmentIndex.kb(S.Xa());else P=e.m.defaultPresentationDelay||1.5*d,N=T??P,S=new _(g,N,e.m.dash.autoCorrectDrift);return S.uc(I=="static"),S.Y()&&!isNaN(e.m.availabilityWindowOverride)&&(v=e.m.availabilityWindowOverride),v==null&&(v=1/0),S.$d(v),L=t.getAttribute("profiles")||"",B={eb:I!="static",presentationTimeline:S,ha:null,Z:null,pa:null,L:null,bandwidth:0,re:!1,Eb:c,profiles:L.split(",")},F=G0(e,B,l,t),W=F.duration,H=F.periods,I!="static"&&F.le||S.Na(W||1/0),e.l&&!e.o&&e.B.isAutoLowLatencyMode()&&(e.B.enableLowLatencyMode(),e.o=e.B.isLowLatencyMode()),e.o?S.Ge(e.l):e.l&&me("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),S.Ld(A||1),m(te,N0(e.g,H,B.eb),2);case 2:if(e.D){e.D.variants=e.g.l,e.D.textStreams=e.g.j.slice(),e.D.imageStreams=e.g.i,e.B.filter(e.D),te.A(3);break}if(e.D={presentationTimeline:S,variants:e.g.l,textStreams:e.g.j.slice(),imageStreams:e.g.i,offlineSessionIds:[],minBufferTime:d||0},!S.Le()){te.A(3);break}return ne=ge(t,"UTCTiming"),m(te,J0(e,l,ne),5);case 5:if(we=te.h,!e.B)return te.return();S.He(we);case 3:e.B.makeTextStreamsForClosedCaptions(e.D),b(te)}})}function G0(e,t,n,r){var i=ce(r,"mediaPresentationDuration",Lt),o=[],s=0;r=ge(r,"Period");for(var u=h(Be(r)),a=u.next();!a.done;a=u.next()){var l=a.value;a=l.ga;var c=l.item,f=l.next;l=ce(c,"start",Lt,s);var d=c.id,g=ce(c,"duration",Lt),v=null;if(f){var y=ce(f,"start",Lt);y!=null&&(v=y-l)}else i!=null&&(v=i-l);if(v==null&&(v=g),!(e.j!==null&&d!==null&&l!==null&&l<e.j)||e.I.includes(d)||a+1==r.length){if(l!==null&&(e.j===null||l>e.j)&&(e.j=l),s=z0(e,t,n,{start:l,duration:v,node:c,te:v==null||!f}),o.push(s),t.ha.id&&v&&(e.J[t.ha.id]=v),v==null){s=null;break}s=l+v}}return e.I=o.map(function(T){return T.id}),i!=null?{periods:o,duration:i,le:!1}:{periods:o,duration:s,le:!0}}function z0(e,t,n,r){t.ha=Hu(r.node,null,n),t.Z=r,t.ha.Eb=t.Eb,t.ha.id||(t.ha.id="__shaka_period_"+r.start);var i=ge(r.node,"EventStream");n=t.presentationTimeline.Xa(),i=h(i);for(var o=i.next();!o.done;o=i.next())Q0(e,r.start,r.duration,o.value,n);if(n=ge(r.node,"AdaptationSet").map(function(c){return X0(e,t,c)}).filter(zt),t.eb){for(r=[],i=h(n),o=i.next();!o.done;o=i.next()){o=h(o.value.Zf);for(var s=o.next();!s.done;s=o.next())r.push(s.value)}if(r.length!=new Set(r).size)throw new x(2,4,4018)}for(r=n.filter(function(c){return!c.ce}),n=n.filter(function(c){return c.ce}),n=h(n),i=n.next();!i.done;i=n.next()){i=i.value,o=i.ce.split(" "),s=h(r);for(var u=s.next();!u.done;u=s.next()){var a=u.value;if(o.includes(a.id)){u={},a=h(a.streams);for(var l=a.next();!l.done;u={Cc:u.Cc},l=a.next())u.Cc=l.value,u.Cc.trickModeVideo=i.streams.find(function(c){return function(f){return et(c.Cc.codecs)==et(f.codecs)}}(u))}}}if(i=e.m.disableAudio?[]:To(r,"audio"),s=e.m.disableVideo?[]:To(r,"video"),o=e.m.disableText?[]:To(r,re),n=e.m.disableThumbnails?[]:To(r,"image"),!s.length&&!i.length)throw new x(2,4,4004);for(r=[],i=h(i),u=i.next();!u.done;u=i.next())r.push.apply(r,fe(u.value.streams));for(i=[],s=h(s),u=s.next();!u.done;u=s.next())i.push.apply(i,fe(u.value.streams));for(s=[],o=h(o),u=o.next();!u.done;u=o.next())s.push.apply(s,fe(u.value.streams));for(o=[],n=h(n),u=n.next();!u.done;u=n.next())o.push.apply(o,fe(u.value.streams));return{id:t.ha.id,Fc:r,$c:i,textStreams:s,imageStreams:o}}function To(e,t){return e.filter(function(n){return n.contentType==t})}function X0(e,t,n){function r(k){switch(k){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.pa=Hu(n,t.ha,null);var i=!1,o=ge(n,"Role"),s=o.map(function(k){return k.getAttribute("value")}).filter(zt),u=void 0,a=t.pa.contentType==re;a&&(u="subtitle"),o=h(o);for(var l=o.next();!l.done;l=o.next()){l=l.value;var c=l.getAttribute("schemeIdUri");if(c==null||c=="urn:mpeg:dash:role:2011")switch(l=l.getAttribute("value"),l){case"main":i=!0;break;case"caption":case"subtitle":u=l}}var f;c=ge(n,"EssentialProperty"),o=null,l=!1,c=h(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var g=d.getAttribute("schemeIdUri");g=="http://dashif.org/guidelines/trickmode"?o=d.getAttribute("value"):g=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?f=r(parseInt(d.getAttribute("value"),10)):l=!0}for(c=ge(n,"SupplementalProperty"),c=h(c),d=c.next();!d.done;d=c.next())d=d.value,d.getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(f=r(parseInt(d.getAttribute("value"),10)));c=ge(n,"Accessibility");var v=new Map;for(c=h(c),d=c.next();!d.done;d=c.next())if(g=d.value,d=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),d=="urn:scte:dash:cc:cea-608:2015")if(d=1,g!=null){g=g.split(";");for(var y=h(g),T=y.next();!T.done;T=y.next()){var w=T.value,A=T=void 0;w.includes("=")?(w=w.split("="),T=w[0].startsWith("CC")?w[0]:"CC"+w[0],A=w[1]||"und"):(T="CC"+d,g.length==2?d+=2:d++,A=w),v.set(T,J(A))}}else v.set("CC1","und");else if(d=="urn:scte:dash:cc:cea-708:2015")if(d=1,g!=null)for(g=h(g.split(";")),T=g.next();!T.done;T=g.next())T=T.value,w=y=void 0,T.includes("=")?(T=T.split("="),y="svc"+T[0],w=T[1].split(",")[0].split(":").pop()):(y="svc"+d,d++,w=T),v.set(y,J(w));else v.set("svc1","und");else d=="urn:mpeg:dash:role:2011"&&g!=null&&(s.push(g),g=="captions"&&(u="caption"));if(l)return null;l=ge(n,"ContentProtection");var I=bd(l,e.m.dash.ignoreDrmInfo,e.m.dash.keySystemsByURI),S=J(n.getAttribute("lang")||"und"),C=n.getAttribute("label");if((l=ge(n,"Label"))&&l.length&&(l=l[0],l.textContent&&(C=l.textContent)),l=ge(n,"Representation"),n=l.map(function(k){return(k=W0(e,t,I,u,S,C,i,s,v,k))&&(k.hdr=k.hdr||f),k}).filter(function(k){return!!k}),n.length==0){if(o=t.pa.contentType=="image",e.m.dash.ignoreEmptyAdaptationSet||a||o)return null;throw new x(2,4,4003)}if(!t.pa.contentType||t.pa.contentType=="application")for(t.pa.contentType=th(n[0].mimeType,n[0].codecs),a=h(n),c=a.next();!c.done;c=a.next())c.value.type=t.pa.contentType;for(a=h(n),c=a.next();!c.done;c=a.next())for(c=c.value,d=h(I.drmInfos),g=d.next();!g.done;g=d.next())g=g.value,g.keyIds=g.keyIds&&c.keyIds?new Set([].concat(fe(g.keyIds),fe(c.keyIds))):g.keyIds||c.keyIds;return a=l.map(function(k){return k.getAttribute("id")}).filter(zt),{id:t.pa.id||"__fake__"+e.F++,contentType:t.pa.contentType,language:S,Wg:i,streams:n,drmInfos:I.drmInfos,ce:o,Zf:a}}function W0(e,t,n,r,i,o,s,u,a,l){if(t.L=Hu(l,t.pa,null),e.l=Math.min(e.l,t.L.Eb),!$0(t.L))return null;var c=t.Z.start;t.bandwidth=ce(l,"bandwidth",fo)||0;var f=t.L.contentType,d=f==re||f=="application";f=f=="image";try{var g=function(D,P,N){return Z0(e,D,P,N)};if(t.L.sc)var v=w0(t,g);else if(t.L.ib)v=x0(t,e.$a);else if(t.L.tc)v=A0(t,g,e.$a,!!e.D,e.m.dash.initialSegmentLimit,e.J);else{var y=t.L.Ba,T=t.Z.duration||0;v={Gb:function(){return Promise.resolve(Vi(c,T,y))}}}}catch(D){if((d||f)&&D.code==4002)return null;throw D}g=ge(l,"ContentProtection"),g=i0(g,n,e.m.dash.ignoreDrmInfo,e.m.dash.keySystemsByURI),g=new Set(g?[g]:[]);var w=!1;ge(l,"SupplementalProperty").some(function(D){return D.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&D.getAttribute("value")=="JOC"})&&(t.L.mimeType="audio/eac3-joc",w=!0);var A=!1;d&&(A=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var I;if(f&&((l=ge(l,"EssentialProperty").find(function(D){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(D.getAttribute("schemeIdUri"))}))&&(I=l.getAttribute("value")),!I))return null;var S;l=t.L.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(S="PQ");var C=t.L.id?t.ha.id+","+t.L.id:"",k={id:e.F++,originalId:t.L.id,createSegmentIndex:function(){var D,P;return E(function(N){if(N.g==1)return D=C&&t.eb&&e.$a[C]?e.$a[C]:k,D.segmentIndex?N.A(0):(P=D,m(N,v.Gb(),3));P.segmentIndex=N.h,b(N)})},closeSegmentIndex:function(){k.segmentIndex&&(k.segmentIndex.release(),k.segmentIndex=null)},segmentIndex:null,mimeType:t.L.mimeType,codecs:t.L.codecs,frameRate:t.L.frameRate,pixelAspectRatio:t.L.pixelAspectRatio,bandwidth:t.bandwidth,width:t.L.width,height:t.L.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:g,language:i,label:o,type:t.pa.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:t.L.emsgSchemeIdUris,roles:u,forced:A,channelsCount:t.L.Rc,audioSamplingRate:t.L.audioSamplingRate,spatialAudio:w,closedCaptions:a,hdr:S,tilesLayout:I,matchedStreams:[]};return C&&t.eb&&!e.$a[C]&&(e.$a[C]=k),k}p.nc=function(){var e=this,t,n;return E(function(r){switch(r.g){case 1:return t=0,q(r,2),m(r,Vu(e),4);case 4:t=r.h,ee(r,3);break;case 2:n=K(r),e.B&&(n.severity=1,e.B.onError(n));case 3:if(!e.B)return r.return();Zd(e,t),b(r)}})};function Zd(e,t){0>e.u||e.s.W(Math.max(3,e.u-t,rs(e.G)))}function Hu(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Rc:null,audioSamplingRate:null,Eb:0},n=n||t.Ba;var r=ge(e,"BaseURL"),i=r.map(lo),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs,a=ce(e,"frameRate",r0)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,c=ge(e,"InbandEventStream"),f=t.emsgSchemeIdUris.slice();c=h(c);for(var d=c.next();!d.done;d=c.next())d=d.value.getAttribute("schemeIdUri"),f.includes(d)||f.push(d);c=ge(e,"AudioChannelConfiguration"),c=Y0(c)||t.Rc,d=ce(e,"audioSamplingRate",xt)||t.audioSamplingRate,o||(o=th(s,u));var g=ao(e,"SegmentBase"),v=ao(e,"SegmentTemplate"),y=g&&ce(g,"availabilityTimeOffset",Jr)||0,T=v&&ce(v,"availabilityTimeOffset",Jr)||0;return r=r&&r.length&&ce(r[0],"availabilityTimeOffset",Jr)||0,r=t.Eb+r+y+T,{Ba:Pe(n,i),sc:g||t.sc,ib:ao(e,"SegmentList")||t.ib,tc:v||t.tc,width:ce(e,"width",xt)||t.width,height:ce(e,"height",xt)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:a,pixelAspectRatio:l,emsgSchemeIdUris:f,id:e.getAttribute("id"),Rc:c,audioSamplingRate:d,Eb:r}}function Y0(e){e=h(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function $0(e){var t=e.sc?1:0;return t+=e.ib?1:0,t+=e.tc?1:0,t==0?e.contentType==re||e.contentType=="application":(t!=1&&(e.sc&&(e.ib=null),e.tc=null),!0)}function eh(e,t,n,r){var i,o,s,u,a,l;return E(function(c){if(c.g==1)return i=Pe(t,[n]),o=at(i,e.m.retryParameters),o.method=r,s=e.B.networkingEngine.request(4,o),Kn(e.i,s),m(c,s.promise,2);if(u=c.h,r=="HEAD"){if(!u.headers||!u.headers.date)return c.return(0);a=u.headers.date}else a=be(u.data);return l=Date.parse(a),isNaN(l)?c.return(0):c.return(l-Date.now())})}function J0(e,t,n){var r,i,o,s,u,a,l,c;return E(function(f){switch(f.g){case 1:r=n.map(function(d){return{scheme:d.getAttribute("schemeIdUri"),value:d.getAttribute("value")}}),i=e.m.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=h(r),s=o.next();case 2:if(s.done){f.A(4);break}switch(u=s.value,q(f,5),a=u.scheme,l=u.value,a){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return f.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return f.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),f.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":me("NTP UTCTiming scheme is not supported");break;default:me("Unrecognized scheme in UTCTiming element",a)}f.A(9);break;case 7:return m(f,eh(e,t,l,"HEAD"),10);case 10:return f.return(f.h);case 8:return m(f,eh(e,t,l,"GET"),11);case 11:return f.return(f.h);case 9:ee(f,3);break;case 5:K(f);case 3:s=o.next(),f.A(2);break;case 4:return me("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),f.return(0)}})}function Q0(e,t,n,r,i){var o=r.getAttribute("schemeIdUri")||"",s=r.getAttribute("value")||"",u=ce(r,"timescale",xt)||1;r=h(ge(r,"Event"));for(var a=r.next();!a.done;a=r.next()){a=a.value;var l=ce(a,"presentationTime",xt)||0,c=ce(a,"duration",xt)||0;l=l/u+t,c=l+c/u,n!=null&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),c<i||(a={schemeIdUri:o,value:s,startTime:l,endTime:c,id:a.getAttribute("id")||"",eventElement:a},e.B.onTimelineRegionAdded(a))}}function Z0(e,t,n,r){var i,o,s,u,a;return E(function(l){return l.g==1?(i=kt,o=Hr(t,n,r,e.m.retryParameters),s=e.B.networkingEngine,u=s.request(i,o),Kn(e.i,u),m(l,u.promise,2)):(a=l.h,l.return(a.data))})}function th(e,t){return Ar(wt(e,t))?re:e.split("/")[0]}O("shaka.dash.DashParser",ei),yn.mpd=function(){return new ei},nt["application/dash+xml"]=function(){return new ei},nt["video/vnd.mpeg.dash.mpd"]=function(){return new ei};function nh(e,t,n,r){this.g=e,this.type=t,this.X=n,this.segments=r||null}function qu(e,t,n,r){this.id=e,this.name=t,this.g=n,this.value=r===void 0?null:r}qu.prototype.toString=function(){function e(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var t="#"+this.name,n=this.g?this.g.map(e):[];return this.value&&n.unshift(this.value),0<n.length&&(t+=":"+n.join(",")),t},qu.prototype.getAttribute=function(e){var t=this.g.filter(function(n){return n.name==e});return t.length?t[0]:null};function V(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Ae(e,t){var n=e.getAttribute(t);if(!n)throw new x(2,4,4023,t);return n.value}function rh(e,t,n){n=n===void 0?[]:n,this.X=t,this.g=e,this.h=n}function ih(e,t){this.name=e,this.value=t}function _t(e,t){return e.filter(function(n){return n.name==t})}function oh(e,t){return e.filter(function(n){return Ae(n,"TYPE")==t})}function Fe(e,t){var n=_t(e,t);return n.length?n[0]:null}function Ku(e,t,n){return n=n===void 0?0:n,(e=Fe(e,t))?Number(e.value):n}function or(e){this.h=e,this.g=0}function sr(e){Zt(e,/[ \t]+/gm)}function Zt(e,t){t.lastIndex=e.g;var n=t.exec(e.h);return n=n==null?null:{position:n.index,length:n[0].length,results:n},e.g==e.h.length||n==null||n.position!=e.g?null:(e.g+=n.length,n.results)}function Cn(e){return e.g==e.h.length?null:(e=Zt(e,/[^ \t\n]*/gm))?e[0]:null}function e1(){this.g=0}function Gu(e,t,n){t=be(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var r=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new x(2,4,4015);t=0;for(var i=!0,o=h(r),s=o.next();!s.done;s=o.next())if(s=s.value,/^#(?!EXT)/m.test(s)||i)i=!1;else if(s=zu(e.g++,s),--e.g,sh.includes(s.name)){t=1;break}else s.name=="EXT-X-STREAM-INF"&&(i=!0);o=[],i=!0,s=h(Be(r));for(var u=s.next();!u.done;u=s.next()){var a=u.value;u=a.ga;var l=a.item;if(a=a.next,/^#(?!EXT)/m.test(l)||i)i=!1;else{if(l=zu(e.g++,l),t1.includes(l.name)){if(t!=1)throw new x(2,4,4017);a=r.splice(u,r.length-u),r=n,i=[],s=[],u=[],l=null,a=h(a);for(var c=a.next();!c.done;c=a.next())c=c.value,/^(#EXT)/.test(c)?(c=zu(e.g++,c),sh.includes(c.name)?o.push(c):c.name=="EXT-X-MAP"?l=c:c.name=="EXT-X-PART"?u.push(c):c.name=="EXT-X-PRELOAD-HINT"?V(c,"TYPE")=="PART"?u.push(c):V(c,"TYPE")=="MAP"&&(c.name="EXT-X-MAP",l=c):s.push(c)):/^#(?!EXT)/m.test(c)||(c=Pe([r],[c.trim()])[0],l&&s.push(l),i.push(new rh(c,s,u)),s=[],u=[]);return u.length&&(l&&s.push(l),i.push(new rh("",s,u))),new nh(n,t,o,i)}o.push(l),l.name=="EXT-X-STREAM-INF"&&(l.g.push(new ih("URI",a)),i=!0)}}return new nh(n,t,o)}function zu(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new x(2,4,4016,t);var r=n[1],i=n[2];n=[];var o;if(i){i=new or(i);var s;(s=Zt(i,/^([^,=]+)(?:,|$)/g))&&(o=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Zt(i,u);)n.push(new ih(s[1],s[2]||s[3])),sr(i)}return new qu(e,r,n,o)}var sh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),t1="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function uh(){}function ah(e){try{var t=Xu(e);return Hn({uri:e,ye:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return gn(n)}}function Xu(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new x(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new x(2,1,1004,e);var n=t[0];e=R.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var i;return r?i=Wt(e):i=fn(e),{data:i,contentType:n}}O("shaka.net.DataUriPlugin",uh),uh.parse=ah,Ct("data",ah);function ti(){var e=this;this.m=this.B=null,this.Qa=1,this.l=new Map,this.s=new Map,this.Ja=new Set,this.g=new Map,this.h=null,this.M="",this.da=new e1,this.oa=0,this.u=new G(function(){e.nc()}),this.j=Ut,this.D=null,this.na=0,this.G=1/0,this.$=this.Sa=0,this.F=new Ci,this.S=[],this.J=new Map,this.Ra=!1,this.o=new Map,this.P=null,this.ma=new Map,this.I=new Map,this.i=!1}p=ti.prototype,p.configure=function(e){this.m=e},p.start=function(e,t){var n=this,r,i;return E(function(o){return o.g==1?(n.B=t,n.i=t.isLowLatencyMode(),m(o,Qu(n,e),2)):o.g!=3?(r=o.h,n.M=r.uri,m(o,n1(n,r.data),3)):(i=n.oa,0<i&&n.u.W(i),o.return(n.D))})},p.stop=function(){this.u&&(this.u.stop(),this.u=null);var e=[];return this.F&&(e.push(this.F.destroy()),this.F=null),this.m=this.B=null,this.Ja.clear(),this.D=null,this.g.clear(),this.s.clear(),this.o.clear(),this.l.clear(),Promise.all(e)},p.update=function(){var e=this,t,n,r;return E(function(i){if(i.g==1)return e.j==Ut?i.return():(t=[],e.P=null,n=Array.from(e.g.values()),n.length?m(i,lh(e,n[0]),2):i.A(2));for(r=1;r<n.length;r++)t.push(lh(e,n[r]));return m(i,Promise.all(t),0)})};function lh(e,t){var n,r,i,o,s,u,a,l,c,f,d,g;return E(function(v){if(v.g==1)return n=xh,r=t.Pe,i=new Ze(r),e.i&&t.Ue&&wi(i,new bn("_HLS_skip=YES")),m(v,Qu(e,i.toString()),2);if(v.g!=3){if(o=v.h,s=Gu(e.da,o.data,o.uri),s.type!=1)throw new x(2,4,4017);return u=_t(s.X,"EXT-X-DEFINE"),a=ch(e,u),l=t.stream,m(v,mh(e,t.Zc,s,l.type,l.mimeType,t.Jd,a,t.af,l.codecs,l.bandwidth),3)}c=v.h,l.segmentIndex.Lb(c,e.h.Xa()),c.length&&(f=Ku(s.X,"EXT-X-MEDIA-SEQUENCE",0),d=t.Jd.get(f),l.segmentIndex.kb(d)),g=c[c.length-1],Fe(s.X,"EXT-X-ENDLIST")&&(xo(e,n.Oe),e.h.Na(g.endTime)),b(v)})}p.onExpirationUpdated=function(){};function n1(e,t){var n,r,i,o,s,u,a,l,c,f,d,g,v,y,T,w,A,I,S,C,k,D,P,N,L,B,F,W,H,ne,we,te,Oe,Vt,De,Ge;return E(function(ze){switch(ze.g){case 1:if(n=Gu(e.da,t,e.M),n.type!=0)throw new x(2,4,4022);for(r=_t(n.X,"EXT-X-DEFINE"),r1(e,r),i=_t(n.X,"EXT-X-MEDIA"),o=_t(n.X,"EXT-X-STREAM-INF"),s=_t(n.X,"EXT-X-IMAGE-STREAM-INF"),i1(e,o),u=_t(n.X,"EXT-X-SESSION-DATA"),a=h(u),l=a.next();!l.done;l=a.next())c=l.value,f=V(c,"DATA-ID"),d=V(c,"URI"),g=V(c,"LANGUAGE"),v=V(c,"VALUE"),y=new Map().set("id",f),d&&y.set("uri",Pe([e.M],[d])[0]),g&&y.set("language",g),v&&y.set("value",v),T=new U("sessiondata",y),e.B&&e.B.onEvent(T);return m(ze,u1(e,i),2);case 2:return f1(e,i),m(ze,a1(e,o),3);case 3:return w=ze.h,m(ze,o1(e,i),4);case 4:return A=ze.h,m(ze,s1(e,s),5);case 5:if(I=ze.h,!e.B)throw new x(2,7,7001);if(e.Ra&&w.length==0)throw new x(2,4,4034);for(C=S=1/0,k=h(e.g.values()),D=k.next();!D.done;D=k.next())P=D.value,S=Math.min(S,P.ve),P.stream.type!="text"&&(C=Math.min(C,P.Lf-P.ve));if(e.j!=Ut?(e.h=new _(0,e.m.defaultPresentationDelay?e.m.defaultPresentationDelay:e.$?e.$:3*e.na),e.h.uc(!1)):(e.h=new _(null,0),e.h.uc(!0)),gh(e),e.j!=Ut)e.oa=e.G,N=xh,e.j==N.Ne&&(L=e.h.Wc,isNaN(e.m.availabilityWindowOverride)||(L=e.m.availabilityWindowOverride),e.h.$d(L));else for(e.h.Na(C),e.h.offset(-S),B=h(e.g.values()),D=B.next();!D.done;D=B.next())F=D.value,F.stream.segmentIndex.offset(-S),F.stream.segmentIndex.fb(0,C);for(e.S=[],W=[],H=h(w),ne=H.next();!ne.done;ne=H.next())for(we=ne.value,te=h([we.video,we.audio]),Oe=te.next();!Oe.done;Oe=te.next())(Vt=Oe.value)&&W.push(Vt);return m(ze,Promise.all(W.map(function(Dn){return E(function(ci){return m(ci,Dn.createSegmentIndex(),0)})})),6);case 6:for(De=h(W),Oe=De.next();!Oe.done;Oe=De.next())Ge=Oe.value,e.S.push(Ge.segmentIndex.N);gh(e),e.D={presentationTimeline:e.h,variants:w,textStreams:A,imageStreams:I,offlineSessionIds:[],minBufferTime:0},e.B.makeTextStreamsForClosedCaptions(e.D),b(ze)}})}function r1(e,t){for(var n=h(t),r=n.next();!r.done;r=n.next()){var i=r.value;r=V(i,"NAME"),i=V(i,"VALUE"),r&&i&&(e.l.has(r)||e.l.set(r,i))}}function ch(e,t){for(var n=new Map,r=h(t),i=r.next();!i.done;i=r.next()){var o=i.value;i=V(o,"NAME");var s=V(o,"VALUE");o=V(o,"IMPORT"),i&&s&&n.set(i,s),o&&(i=e.l.get(o))&&n.set(o,i)}return n}function i1(e,t){for(var n=h(t),r=n.next();!r.done;r=n.next()){var i=r.value,o=V(i,"AUDIO");r=V(i,"VIDEO");var s=V(i,"SUBTITLES");if(i=fh(e,i),s){var u=Ti(re,i);e.o.set(s,u),st(i,u)}o&&(s=ln("audio",i),e.o.set(o,s)),r&&(o=ln("video",i),e.o.set(r,o))}}function o1(e,t){var n,r,i,o,s,u,a,l,c,f,d,g;return E(function(v){if(v.g==1)return n=oh(t,"SUBTITLES"),r=n.map(function(y){var T,w;return E(function(A){if(A.g==1)return e.m.disableText?A.return(null):(q(A,2),m(A,Yu(e,y),4));if(A.g!=2)return T=A.h,A.return(T.stream);if(w=K(A),e.m.hls.ignoreTextStreamFailures)return A.return(null);throw w})}),m(v,Promise.all(r),2);for(i=v.h,o=h(n),s=o.next();!s.done;s=o.next())if(u=s.value,a=Ae(u,"GROUP-ID"),(l=e.o.get(a))&&(c=e.s.get(a)))for(f=h(c),d=f.next();!d.done;d=f.next())g=d.value,g.stream.codecs=l;return v.return(i.filter(function(y){return y}))})}function s1(e,t){var n,r;return E(function(i){return i.g==1?(n=t.map(function(o){var s,u;return E(function(a){if(a.g==1)return e.m.disableThumbnails?a.return(null):(q(a,2),m(a,d1(e,o),4));if(a.g!=2)return s=a.h,a.return(s.stream);if(u=K(a),e.m.hls.ignoreImageStreamFailures)return a.return(null);throw u})}),m(i,Promise.all(n),2)):(r=i.h,i.return(r.filter(function(o){return o})))})}function u1(e,t){var n;return E(function(r){return r.g==1?(t=t.filter(function(i){var o=V(i,"URI")||"";return V(i,"TYPE")!="SUBTITLES"&&o!=""}),t.length?m(r,Yu(e,t[0]),2):r.A(2)):(n=t.slice(1).map(function(i){return Yu(e,i)}),m(r,Promise.all(n),0))})}function a1(e,t){var n,r,i;return E(function(o){return o.g==1?(n=t.map(function(s){var u,a,l,c,f,d,g,v;return E(function(y){if(y.g==1)return u=V(s,"FRAME-RATE"),a=Number(V(s,"AVERAGE-BANDWIDTH"))||Number(Ae(s,"BANDWIDTH")),l=V(s,"RESOLUTION"),c=h(l?l.split("x"):[null,null]),f=c.next().value,d=c.next().value,g=V(s,"VIDEO-RANGE"),m(y,l1(e,s,a),2);if(v=y.h){for(var T=y.return,w=v.audio,A=v.video,I=h(A),S=I.next();!S.done;S=I.next())(S=S.value.stream)&&(S.width=Number(f)||void 0,S.height=Number(d)||void 0,S.frameRate=Number(u)||void 0,S.hdr=g||void 0);for(I=e.m.disableAudio,(!w.length||I)&&(w=[null]),I=e.m.disableVideo,(!A.length||I)&&(A=[null]),I=[],w=h(w),S=w.next();!S.done;S=w.next()){S=S.value;for(var C=h(A),k=C.next();!k.done;k=C.next()){var D=k.value;k=S?S.stream:null;var P=D?D.stream:null,N=S?S.stream.drmInfos:null,L=D?D.stream.drmInfos:null;D=(D?D.Zc:"")+" - "+(S?S.Zc:""),k&&P&&N.length&&L.length&&!(0<Pi(N,L).length)||e.Ja.has(D)||(k={id:e.Qa++,language:k?k.language:"und",primary:!!k&&k.primary||!!P&&P.primary,audio:k,video:P,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},I.push(k),e.Ja.add(D))}}y=T.call(y,I)}else y=y.return([]);return y})}),m(o,Promise.all(n),2)):(r=o.h,i=r.reduce(ds,[]),i=i.filter(function(s){return s!=null}),o.return(i))})}function l1(e,t,n){var r,i,o,s,u,a,l,c,f,d,g,v,y,T;return E(function(w){if(w.g==1)return r=_e,i=fh(e,t),o=V(t,"AUDIO"),s=V(t,"VIDEO"),a=(u=o||s)&&e.s.has(u)?e.s.get(u):[],l={audio:o?a:[],video:s?a:[]},f=!1,d=Ae(t,"URI"),g=l.audio.find(function(A){return A&&A.Zc==d}),v=Ti(r.Ta,i),(y=Ti(r.jb,i))&&!v?c=r.jb:!a.length&&y&&v?(c=r.Ta,i=[[v,y].join()]):l.audio.length&&g?(c=r.jb,f=!0):c=l.video.length?r.jb:r.Ta,f?w.A(2):m(w,h1(e,t,i,c,n),3);if(w.g!=2&&(T=w.h),T)l[T.stream.type]=[T];else if(T===null)return w.return(null);return c1(l),w.return(l)})}function fh(e,t){var n=[];e.m.disableVideo||n.push(e.m.hls.defaultVideoCodec),e.m.disableAudio||n.push(e.m.hls.defaultAudioCodec);var r=V(t,"CODECS",n.join(",")).split(/\s*,\s*/);n=new Set;var i=[];r=h(r);for(var o=r.next();!o.done;o=r.next()){o=o.value;var s=et(o);n.has(s)||(i.push(o),n.add(s))}return i}function Wu(e){return e=V(e,"LANGUAGE")||"und",J(e)}function c1(e){e=h(e.audio.concat(e.video));for(var t=e.next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter(function(r){return r!="mp4a.40.34"}),t.stream.codecs=n.join(",")}}function f1(e,t){var n=oh(t,"CLOSED-CAPTIONS");n=h(n);for(var r=n.next();!r.done;r=n.next()){var i=r.value;r=Wu(i);var o=Ae(i,"GROUP-ID");i=Ae(i,"INSTREAM-ID"),e.J.get(o)||e.J.set(o,new Map),e.J.get(o).set(i,r)}}function Yu(e,t){var n,r,i,o,s,u,a,l,c,f,d,g,v,y;return E(function(T){if(T.g==1){n=Ae(t,"GROUP-ID"),r="";var w=Ae(t,"TYPE").toLowerCase();return w=="subtitles"&&(w=re),i=w,i!=re&&n&&e.o.has(n)&&(r=e.o.get(n)),o=ur(Ae(t,"URI"),e.l),e.g.has(o)?T.return(e.g.get(o)):(s=Wu(t),u=V(t,"NAME"),a=V(t,"DEFAULT"),l=a=="YES",i=="audio"?w=(w=V(t,"CHANNELS"))?parseInt(w.split("/")[0],10):null:w=null,c=w,i=="audio"?w=(w=V(t,"CHANNELS"))?w.includes("/JOC"):!1:w=!1,f=w,d=V(t,"CHARACTERISTICS"),g=V(t,"FORCED"),v=g=="YES",m(T,$u(e,o,r,i,s,l,u,c,null,d,v,f),2))}return y=T.h,e.s.has(n)?e.s.get(n).push(y):e.s.set(n,[y]),y==null?T.return(null):e.g.has(o)?T.return(e.g.get(o)):(e.g.set(o,y),T.return(y))})}function d1(e,t){var n,r,i,o,s,u,a,l,c,f;return E(function(d){return d.g==1?(n=ur(Ae(t,"URI"),e.l),r=V(t,"CODECS","jpeg")||"",e.g.has(n)?d.return(e.g.get(n)):(i=Wu(t),o=V(t,"NAME"),s=V(t,"CHARACTERISTICS"),m(d,$u(e,n,r,"image",i,!1,o,null,null,s,!1,!1),2))):(u=d.h,u==null?d.return(null):e.g.has(n)?d.return(e.g.get(n)):((a=V(t,"RESOLUTION"))&&(l=u.stream.segmentIndex.get(0),(c=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(c.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(c.split("x")[1]))),(f=V(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(f)),e.g.set(n,u),d.return(u)))})}function h1(e,t,n,r,i){var o,s,u,a;return E(function(l){if(l.g==1){if(o=ur(Ae(t,"URI"),e.l),e.g.has(o))return l.return(e.g.get(o));var c=V(t,"CLOSED-CAPTIONS");return s=r=="video"&&c&&c!="NONE"?e.J.get(c):null,u=ln(r,n),m(l,$u(e,o,u,r,"und",!1,null,null,s,null,!1,!1,i),2)}return a=l.h,a==null?l.return(null):e.g.has(o)?l.return(e.g.get(o)):(e.g.set(o,a),l.return(a))})}function $u(e,t,n,r,i,o,s,u,a,l,c,f,d){var g,v,y,T,w,A,I,S,C,k,D,P,N,L,B,F,W,H,ne,we,te,Oe,Vt,De,Ge,ze,Dn,ci,pg,gg,mg,vg,Ra,Da,zo,yg,wg,Tg,xg;return E(function(Je){switch(Je.g){case 1:return g=Pe([e.M],[t])[0],m(Je,Qu(e,g),2);case 2:if(v=Je.h,g=v.uri,y=Gu(e.da,v.data,g),y.type!=1)throw new x(2,4,4017);if(T=[],y.segments)for(w=h(y.segments),A=w.next();!A.done;A=w.next())I=A.value,S=_t(I.X,"EXT-X-KEY"),T.push.apply(T,fe(S));for(C=!1,k=[],D=new Set,P=h(T),N=P.next();!N.done;N=P.next())if(L=N.value,B=Ae(L,"METHOD"),B!="NONE"){if(C=!0,B=="AES-128")return e.Ra=!0,Je.return(null);if(F=Ae(L,"KEYFORMAT"),H=(W=x1[F])?W(L):null){if(H.keyIds)for(ne=h(H.keyIds),we=ne.next();!we.done;we=ne.next())te=we.value,D.add(te);k.push(H)}}if(C&&!k.length)throw new x(2,4,4026);return Oe=_t(y.X,"EXT-X-DEFINE"),Vt=ch(e,Oe),p1(e,y),m(Je,w1(e,r,n,y,Vt),3);case 3:return De=Je.h,yh.includes(De)&&(n=""),Ge=new Map,ze=new Map,q(Je,4),m(Je,mh(e,t,y,r,De,Ge,Vt,ze,n,d),6);case 6:Dn=Je.h,ee(Je,5);break;case 4:if(ci=K(Je),ci.code==4035)return me("Skipping unsupported HLS stream",De,t),Je.return(null);throw ci;case 5:if(pg=Dn[0].startTime,gg=Dn[Dn.length-1].endTime,mg=new Y(Dn),vg=r==re?"subtitle":void 0,Ra=[],l)for(Da=h(l.split(",")),zo=Da.next();!zo.done;zo=Da.next())yg=zo.value,Ra.push(yg);return Tg=(wg=Fe(y.X,"EXT-X-SERVER-CONTROL"))?wg.getAttribute("CAN-SKIP-UNTIL")!=null:!1,xg={id:e.Qa++,originalId:s,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:mg,mimeType:De,codecs:n,kind:vg,encrypted:C,drmInfos:k,keyIds:D,language:i,label:s,type:r,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Ra,forced:c,channelsCount:u,audioSamplingRate:null,spatialAudio:f,closedCaptions:a,hdr:void 0,tilesLayout:void 0},Je.return({stream:xg,Zc:t,Pe:g,ve:pg,Lf:gg,Jd:Ge,af:ze,Ue:Tg})}})}function p1(e,t){var n=Fe(t.X,"EXT-X-PLAYLIST-TYPE"),r=Fe(t.X,"EXT-X-ENDLIST");if(r=n&&n.value=="VOD"||r,n=n&&n.value=="EVENT"&&!r,n=!r&&!n,r)xo(e,Ut);else{if(n?xo(e,Th):xo(e,wh),r=Fe(t.X,"EXT-X-TARGETDURATION"),!r)throw new x(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),n=Fe(t.X,"EXT-X-PART-INF"),e.i&&n?(e.Sa=Number(Ae(n,"PART-TARGET")),e.G=Math.min(e.Sa,e.G),n=Fe(t.X,"EXT-X-SERVER-CONTROL"),e.$=n?Number(Ae(n,"PART-HOLD-BACK")):0):e.G=Math.min(r,e.G),e.na=Math.max(r,e.na)}}function dh(e,t,n,r){if(n=Fe(n,"EXT-X-MAP"),!n)return null;var i=Ae(n,"URI");return r=ur(Pe([t],[i])[0],r),t=[r,V(n,"BYTERANGE","")].join("-"),e.ma.has(t)||(n=g1(r,n),e.ma.set(t,n)),e.ma.get(t)}function g1(e,t){var n=0,r=null,i=V(t,"BYTERANGE");return i&&(n=i.split("@"),r=Number(n[0]),n=Number(n[1]),r=n+r-1),new qe(function(){return[e]},n,r)}function hh(e,t,n,r,i,o,s,u,a){var l=r.X,c=ur(r.g,s),f=Fe(l,"EXTINF"),d=s=0,g=null,v=[];if(e.i&&r.h.length){e={},r=h(Be(r.h));for(var y=r.next();!y.done;e={hd:e.hd},y=r.next()){y=y.value;var T=y.ga;y=y.item;var w=T==0?n:v[v.length-1];T=T==0?i:w.endTime;var A=Number(V(y,"DURATION"));A=T+A;var I=0,S=null;y.name=="EXT-X-PRELOAD-HINT"?I=(w=V(y,"BYTERANGE-START"))?Number(w):0:(I=V(y,"BYTERANGE"),w=h(ph(w,I)),I=w.next().value,S=w.next().value),y=V(y,"URI"),e.hd=Pe([u],[y])[0],v.push(new he(T,A,function(C){return function(){return[C.hd]}}(e),I,S,t,o,0,1/0))}}else if(!f)throw new x(2,4,4024,"EXTINF");return f?s=i+Number(f.value.split(",")[0]):s=v[v.length-1].endTime,(u=Fe(l,"EXT-X-BYTERANGE"))?(g=h(ph(n,u.value)),d=g.next().value,g=g.next().value):v.length&&(d=v[0].sa,g=v[v.length-1].ja),n="",u=null,a=="image"&&(n="1x1",a=Fe(l,"EXT-X-TILES"))&&(n=Ae(a,"LAYOUT"),(a=V(a,"DURATION"))&&(u=Number(a))),new he(i,s,function(){return c.length?[c]:[]},d,g,t,o,0,1/0,v,n,u)}function ph(e,t){var n=0,r=null;return t&&(n=t.split("@"),r=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,r=n+r-1),[n,r]}function gh(e){if(e.h){for(var t=h(e.S),n=t.next();!n.done;n=t.next())e.h.Mb(n.value);e.S=[]}}function mh(e,t,n,r,i,o,s,u,a,l){var c,f,d,g,v,y,T,w,A,I,S,C,k,D,P,N,L,B,F,W,H,ne,we;return E(function(te){switch(te.g){case 1:if(c=n.segments,d=Ku(n.X,"EXT-X-MEDIA-SEQUENCE",0),v=(g=Fe(n.X,"EXT-X-SKIP"))?Number(V(g,"SKIPPED-SEGMENTS")):0,y=d+v,e.j!=Ut&&o.has(y)){T=o.get(y),te.A(2);break}if(e.P!=null){te.A(3);break}return f=dh(e,n.g,c[0].X,s),w=e,m(te,vh(e,t,f,i,y,!1,c[0],s,r,a,l),4);case 4:w.P=te.h;case 3:T=e.P;case 2:if(A=c[0].g,A.split("/").pop(),I=Ku(n.X,"EXT-X-DISCONTINUITY-SEQUENCE"),e.i&&(u.has(I)||u.set(I,y),v))for(;u.has(I+1)&&u.get(I+1)<y;)I++;S=e.I.get(I)||0,C=[],k=function(Oe){return Be(Oe)},D=h(k(c)),P=D.next();case 5:if(P.done){te.A(7);break}if(N=P.value,L=N.ga,B=N.item,F=C[C.length-1],W=L==0?T:F.endTime,y=d+v+L,o.set(y,W),f=dh(e,n.g,B.X,s),H=Fe(B.X,"EXT-X-DISCONTINUITY"),!H){te.A(8);break}return I++,u.set(I,y),m(te,m1(e,I,t,f,i,y,B,s,W,r,a,l),9);case 9:S=te.h;case 8:!e.i&&e.B.isAutoLowLatencyMode()&&(e.B.enableLowLatencyMode(),e.i=e.B.isLowLatencyMode()),ne=Fe(B.X,"EXTINF"),e.i||ne?(we=hh(e,f,F,B,W,S,s,n.g,r),C.push(we)):e.i||me("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),P=D.next(),te.A(5);break;case 7:return te.return(C)}})}function m1(e,t,n,r,i,o,s,u,a,l,c,f){var d,g;return E(function(v){return v.g==1?(d=0,e.I.has(t)?(d=e.I.get(t),v.A(2)):m(v,vh(e,n,r,i,o,!0,s,u,l,c,f),3)):(v.g!=2&&(g=v.h,d=a-g,e.I.set(t,d)),v.return(d))})}function Ju(e,t,n,r,i,o){var s,u,a,l,c,f;return E(function(d){switch(d.g){case 1:return s=kt,u=Hr(t.ua(),t.sa,t.ja,e.m.retryParameters),e.B.modifySegmentRequest(u,{type:n,init:t instanceof qe,duration:t.endTime-t.startTime,mimeType:r,codecs:i,bandwidth:o}),e.m.hls.useFullSegmentsForStartTime?d.return(ni(e,u,s)):(a=Hr(t.ua(),t.sa,t.sa+2048-1,e.m.retryParameters),e.B.modifySegmentRequest(a,{type:n,init:t instanceof qe,duration:t.endTime-t.startTime,mimeType:r,codecs:i,bandwidth:o}),q(d,2),m(d,ni(e,a,s),4));case 4:return l=d.h,d.return(l);case 2:if(c=K(d),c.code==7001)throw c;return me("Unable to fetch the starting part of HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",a.uris[0]),m(d,ni(e,u,s),5);case 5:return f=d.h,d.return(f)}})}function vh(e,t,n,r,i,o,s,u,a,l,c){var f,d,g,v,y,T,w,A;return E(function(I){switch(I.g){case 1:if(f=hh(e,n,null,s,0,0,u,"",a),e.D&&!o&&(d=e.g.get(t),g=d.Jd.get(i),g!=null))return I.return(g);if(r=r.toLowerCase(),yh.includes(r))throw me("Raw formats are not yet supported.  Skipping "+r),new x(1,4,4035);if(r=="video/webm")throw me("WebM in HLS is not yet supported.  Skipping."),new x(1,4,4035);if(r!="video/mp4"&&r!="audio/mp4"){I.A(2);break}return v=[Ju(e,f,a,r,l,c)],n&&v.push(Ju(e,n,a,r,l,c)),m(I,Promise.all(v),3);case 3:return y=I.h,T=y[0],w=y[1]||y[0],I.return(v1(t,T.uri,T.data,w.data));case 2:if(r!="video/mp2t"){I.A(4);break}return m(I,Ju(e,f,a,r,l,c),5);case 5:return A=I.h,I.return(y1(t,A.uri,A.data));case 4:throw new x(2,4,4030,t)}})}function v1(e,t,n,r){var i=0;if(new oe().box("moov",pe).box("trak",pe).box("mdia",pe).V("mdhd",function(u){i=Vs(u.reader,u.version).timescale,u.parser.stop()}).parse(r,!0),!i)throw new x(2,4,4030,e,t);var o=0,s=!1;if(new oe().box("moof",pe).box("traf",pe).V("tfdt",function(u){o=Fs(u.reader,u.version).rd/i,s=!0,u.parser.stop()}).parse(n,!0),!s)throw new x(2,4,4030,e,t);return o}function y1(e,t,n){function r(){o.seek(s+188),u=o.ca(),u!=71&&(o.seek(s+192),u=o.ca()),u!=71&&(o.seek(s+204),u=o.ca()),u!=71&&i(),o.Be(1)}function i(){throw new x(2,4,4030,e,t)}var o=new Z(n,0),s=0,u=0;for(n=Math.min(o.T.byteLength-188,940);;){if(s=o.ba(),u=o.ca(),u!=71){if(0<n){--n;continue}i()}n=0;var a=o.Pb();if((a&8191)==8191)r();else if(a&16384)if(a=(o.ca()&48)>>4,a!=0&&a!=2||i(),a==3&&(a=o.ca(),o.skip(a)),o.O()>>8!=1)r();else{o.skip(3),n=o.ca()>>6,n!=0&&n!=1||i(),o.ca()==0&&i(),n=o.ca(),a=o.Pb();var l=o.Pb();return(1073741824*((n&14)>>1)+((a&65534)<<14|(l&65534)>>1))/9e4}else r()}}function ur(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),r=n.match(/{\$\w*}/g);if(r){r=h(r);for(var i=r.next();!i.done;i=r.next()){i=i.value;var o=i.slice(2,i.length-1),s=t.get(o);if(s)n=n.replace(i,s);else throw new x(2,4,4039,o)}}return n}function w1(e,t,n,r,i){var o,s,u,a,l,c,f,d,g,v,y;return E(function(T){return T.g==1?(o=_e,s=kt,u=ur(r.segments[0].g,i),a=new Ze(u),l=a.Aa.split(".").pop(),c=T1[t],(f=c[l])?T.return(f):t==o.ea?n&&n!="vtt"&&n!="wvtt"?T.return("application/mp4"):T.return("text/vtt"):t==o.Xb&&(!n||n=="jpeg")?T.return("image/jpeg"):(d=at([u],e.m.retryParameters),d.method="HEAD",m(T,ni(e,d,s),2))):(g=T.h,v=g.headers["content-type"],v?T.return(v.split(";")[0]):(y=c.mp4,T.return(y)))})}function Qu(e,t){var n=at([t],e.m.retryParameters);return e.B.modifyManifestRequest(n,{format:"h"}),ni(e,n,0)}p.nc=function(){var e=this,t,n;return E(function(r){if(r.g==1)return e.B?(q(r,2),m(r,e.update(),4)):r.return();if(r.g!=2)return t=e.oa,e.u.W(t),ee(r,0);if(n=K(r),!e.B)return r.return();n.severity=1,e.B.onError(n),e.u.W(.1),b(r)})};function xo(e,t){e.j=t,e.h&&e.h.uc(e.j==Ut),e.j!=Ut||e.u.stop()}function ni(e,t,n){if(!e.F)throw new x(2,7,7001);return t=e.B.networkingEngine.request(n,t),Kn(e.F,t),t.promise}O("shaka.hls.HlsParser",ti);var yh=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],T1={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},x1={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Ae(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Ae(e,"URI"),t=Xu(t),t=Q(t.data),t=Tr("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=V(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=Ae(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(e=Ae(e,"URI"),e=Xu(e),e=Q(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Rd(e,t),Tr("com.microsoft.playready",[{initDataType:"cenc",initData:e}])):null}},Ut="VOD",wh="EVENT",Th="LIVE",xh={Oe:Ut,xg:wh,Ne:Th};yn.m3u8=function(){return new ti},nt["application/x-mpegurl"]=function(){return new ti},nt["application/vnd.apple.mpegurl"]=function(){return new ti};function Sh(e,t,n,r,i,o){if(200<=n&&299>=n&&n!=202)return{uri:i||r,ye:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=xi(t)}catch{}throw new x(n==401||n==403?2:1,1,1001,r,n,i,e,o)}function Zu(){}function So(e,t,n,r,i){var o=new M1;Nr(t.headers).forEach(function(l,c){o.append(c,l)});var s=new I1,u={fe:!1,Ke:!1};if(e=S1(e,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,r,i,t.streamDataCallback),e=new de(e,function(){return u.fe=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var a=new G(function(){u.Ke=!0,s.abort()});a.W(t/1e3),e.finally(function(){a.stop()})}return e}function S1(e,t,n,r,i,o,s){var u,a,l,c,f,d,g,v,y,T,w,A,I;return E(function(S){switch(S.g){case 1:return u=E1,a=A1,d=f=0,g=Date.now(),q(S,2),m(S,u(e,n),4);case 4:return l=S.h,o(Eh(l.headers)),v=l.clone().body.getReader(),T=(y=l.headers.get("Content-Length"))?parseInt(y,10):0,w=function(C){function k(){var D,P;return E(function(N){switch(N.g){case 1:return q(N,2),m(N,v.read(),4);case 4:D=N.h,ee(N,3);break;case 2:return K(N),N.return();case 3:if(D.done){N.A(5);break}if(f+=D.value.byteLength,!s){N.A(5);break}return m(N,s(D.value),5);case 5:P=Date.now(),(100<P-g||D.done)&&(i(P-g,f-d,T-f),d=f,g=P),D.done?C.close():(C.enqueue(D.value),k()),b(N)}})}k()},new a({start:w}),m(S,l.arrayBuffer(),5);case 5:c=S.h,ee(S,3);break;case 2:throw A=K(S),r.fe?new x(1,1,7001,e,t):r.Ke?new x(1,1,1003,e,t):new x(1,1,1002,e,A,t);case 3:return I=Eh(l.headers),S.return(Sh(I,c,l.status,e,l.url,t))}})}function Eh(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function Ih(){if(R.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;return!(!R.fetch||!R.AbortController)}O("shaka.net.HttpFetchPlugin",Zu),Zu.isSupported=Ih,Zu.parse=So;var E1=R.fetch,I1=R.AbortController,A1=R.ReadableStream,M1=R.Headers;Ih()&&(Ct("http",So,2,!0),Ct("https",So,2,!0),Ct("blob",So,2,!0));function Ah(){}function Eo(e,t,n,r,i){var o=new C1,s=Date.now(),u=0,a=new Promise(function(l,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){c(new x(1,1,7001,e,n))};var f=!1;o.onreadystatechange=function(){if(o.readyState==2&&!f){var g=Mh(o);i(g),f=!0}},o.onload=function(){var g=Mh(o),v=o.response;try{var y=Sh(g,v,o.status,e,o.responseURL,n);l(y)}catch(T){c(T)}},o.onerror=function(g){c(new x(1,1,1002,e,g,n))},o.ontimeout=function(){c(new x(1,1,1003,e,n))},o.onprogress=function(g){var v=Date.now();(100<v-s||g.lengthComputable&&g.loaded==g.total)&&(r(v-s,g.loaded-u,g.total-g.loaded),u=g.loaded,s=v)};for(var d in t.headers)o.setRequestHeader(d.toLowerCase(),t.headers[d]);o.send(t.body)});return new de(a,function(){return o.abort(),Promise.resolve()})}function Mh(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=h(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}O("shaka.net.HttpXHRPlugin",Ah),Ah.parse=Eo;var C1=R.XMLHttpRequest;Ct("http",Eo,1,!0),Ct("https",Eo,1,!0),Ct("blob",Eo,1,!0);function Ch(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function ea(e){return e.ua().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.sa+":"+e.ja}function k1(e,t){return Hr(e.g.ua(),e.g.sa,e.g.ja,t.streaming.retryParameters)}function kh(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Rh(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}kh.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function Dh(e){var t=this;this.R=e,this.g=new Map,this.K=new mn(function(){return ta(t).catch(function(){})}),this.h=[],this.xe=function(){},this.ue=function(){},this.Cb=new kh}Dh.prototype.destroy=function(){return this.K.destroy()};function R1(e,t,n){e.xe=t,e.ue=n}function ta(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function D1(e,t,n,r,i,o){le(e.K);var s=(e.g.get(t)||Promise.resolve()).then(function(){var u,a,l,c,f,d,g;return E(function(v){if(v.g==1)return m(v,b1(e,n),2);if(u=v.h,e.K.g)throw new x(2,9,7001);if(i)for(c in a=Q(u),l=new kd(a),l.data)f=Number(c),d=l.data[f],g=l.g[f],e.ue(d,g);e.Cb.close(r,u.byteLength);var y=e.Cb;return e.xe(y.i==0?0:y.j/y.i,e.Cb.h),v.return(o(u))})});e.g.set(t,s)}function N1(e,t,n){le(e.K);var r=(e.g.get(t)||Promise.resolve()).then(function(){return E(function(i){return m(i,n(),0)})});e.g.set(t,r)}function P1(e){return E(function(t){return t.g==1?m(t,Promise.all(e.g.values()),2):t.return(e.Cb.h)})}function b1(e,t){var n,r,i,o;return E(function(s){return s.g==1?(n=kt,r=e.R.request(n,t),i=function(){return r.abort()},e.h.push(i),m(s,r.promise,2)):(o=s.h,st(e.h,i),s.return(o.data))})}function Io(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new ae,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Io.prototype.abort=function(){var e=this;return E(function(t){if(t.g==1){try{e.i.abort()}catch{}return q(t,2),m(t,e.g,4)}if(t.g!=2)return ee(t,0);K(t),b(t)})};function na(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var o;return E(function(s){if(s.g==1)return i.result==null?(n(),s.return()):(o=i.result,m(s,t(o.key,o.value,o),2));o.continue(),b(s)})}})}Io.prototype.store=function(){return this.h},Io.prototype.promise=function(){return this.g};function ra(e){this.h=e,this.g=[]}ra.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function kn(e,t){return Ao(e,t,"readwrite")}function Ao(e,t,n){n=e.h.transaction([t],n);var r=new Io(n,t);return e.g.push(r),r.promise().then(function(){st(e.g,r)},function(){st(e.g,r)}),r}function Rn(e,t,n){this.h=new ra(e),this.i=t,this.g=n}p=Rn.prototype,p.destroy=function(){return this.h.destroy()},p.hasFixedKeySpace=function(){return!0},p.addSegments=function(){return Nh(this.i)},p.removeSegments=function(e,t){return Ph(this,this.i,e,t)},p.getSegments=function(e){var t=this,n;return E(function(r){return r.g==1?m(r,bh(t,t.i,e),2):(n=r.h,r.return(n.map(function(i){return t.ge(i)})))})},p.addManifests=function(){return Nh(this.g)},p.updateManifest=function(){return Promise.reject(new x(2,9,9016,"Cannot modify values in "+this.g))};function L1(e,t,n){e=kn(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}p.updateManifestExpiration=function(e,t){var n=kn(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(i){(i=i.target.result)&&(i.expiration=t,r.put(i,e))},n.promise()},p.removeManifests=function(e,t){return Ph(this,this.g,e,t)},p.getManifests=function(e){var t=this,n;return E(function(r){return r.g==1?m(r,bh(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(i){return t.dc(i)}))))})},p.getAllManifests=function(){var e=this,t,n;return E(function(r){return r.g==1?(t=Ao(e.h,e.g,"readonly"),n=new Map,m(r,na(t,function(i,o){var s;return E(function(u){if(u.g==1)return m(u,e.dc(o),2);s=u.h,n.set(i,s),b(u)})}),2)):r.g!=3?m(r,t.promise(),3):r.return(n)})},p.ge=function(e){return e},p.dc=function(e){return Promise.resolve(e)};function Nh(e){return Promise.reject(new x(2,9,9011,"Cannot add new value to "+e))}p.add=function(e,t){var n=this,r,i,o,s,u,a,l;return E(function(c){if(c.g==1){for(r=kn(n.h,e),i=r.store(),o=[],s={},u=h(t),a=u.next();!a.done;s={Bc:s.Bc},a=u.next())l=a.value,s.Bc=i.add(l),s.Bc.onsuccess=function(f){return function(){o.push(f.Bc.result)}}(s);return m(c,r.promise(),2)}return c.return(o)})};function Ph(e,t,n,r){e=kn(e.h,t),t=e.store();var i={};n=h(n);for(var o=n.next();!o.done;i={Ac:i.Ac},o=n.next())i.Ac=o.value,t.delete(i.Ac).onsuccess=function(s){return function(){return r(s.Ac)}}(i);return e.promise()}function bh(e,t,n){var r,i,o,s,u,a,l;return E(function(c){if(c.g==1){for(r=Ao(e.h,t,"readonly"),i=r.store(),o={},s=[],u={},a=h(n),l=a.next();!l.done;u={Wb:u.Wb,Ub:u.Ub},l=a.next())u.Ub=l.value,u.Wb=i.get(u.Ub),u.Wb.onsuccess=function(f){return function(){f.Wb.result==null&&s.push(f.Ub),o[f.Ub]=f.Wb.result}}(u);return m(c,r.promise(),2)}if(s.length)throw new x(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(f){return o[f]}))})}function ri(e){this.g=new ra(e)}ri.prototype.destroy=function(){return this.g.destroy()},ri.prototype.getAll=function(){var e=this,t,n;return E(function(r){return r.g==1?(t=Ao(e.g,"session-ids","readonly"),n=[],m(r,na(t,function(i,o){n.push(o)}),2)):r.g!=3?m(r,t.promise(),3):r.return(n)})},ri.prototype.add=function(e){var t=kn(this.g,"session-ids"),n=t.store();e=h(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},ri.prototype.remove=function(e){var t=this,n;return E(function(r){return r.g==1?(n=kn(t.g,"session-ids"),m(r,na(n,function(i,o,s){e.includes(o.sessionId)&&s.delete()}),2)):m(r,n.promise(),0)})};function Le(){this.g=new Map}Le.prototype.destroy=function(){for(var e=[],t=h(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Le.prototype.init=function(){var e=this;ii.forEach(function(i,o){var s=i();s&&e.g.set(o,s)});for(var t=[],n=h(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function ia(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(i,o){i.hasFixedKeySpace()||t||(t={path:{Ea:r,aa:o},aa:i})})}),t)return t;throw new x(2,9,9013,"Could not find a cell that supports add-operations")}function j1(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(i,o){t({Ea:r,aa:o},i)})})}function Mo(e,t,n){if(e=e.g.get(t),!e)throw new x(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new x(2,9,9013,"Could not find cell with name "+n);return t}function O1(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function _1(e){var t=Array.from(e.g.keys());if(!t.length)throw new x(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function U1(e){var t,n,r;return E(function(i){return i.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=ii,r.forEach(function(o){(o=o())&&t.push(o)})),m(i,Promise.all(t.map(function(o){return o.erase()})),2)):n?i.A(0):m(i,Promise.all(t.map(function(o){return o.destroy()})),0)})}function Lh(e,t){ii.set(e,t)}O("shaka.offline.StorageMuxer",Le),Le.unregister=function(e){ii.delete(e)},Le.register=Lh,Le.prototype.destroy=Le.prototype.destroy;var ii=new Map;function oi(){Rn.apply(this,arguments)}Ne(oi,Rn),oi.prototype.updateManifestExpiration=function(e,t){var n=this,r,i,o;return E(function(s){return r=kn(n.h,n.g),i=r.store(),o=new ae,i.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,i.put(u),o.resolve()):o.reject(new x(2,9,9012,"Could not find values for "+e))},m(s,Promise.all([r.promise(),o]),0)})},oi.prototype.dc=function(e){var t,n,r,i,o,s;return E(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,o=B1(e.periods[n],i),t.push(o);return m(u,qd(t),2)}return s=u.h,u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})})};function B1(e,t){V1(e);for(var n=h(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(i){return F1(i,e.startTime,t)})}function F1(e,t,n){var r=e.initSegmentUri?jh(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=jh(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}oi.prototype.ge=function(e){return{data:e.data}};function jh(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new x(2,9,9004,"Could not parse uri "+e)}function V1(e){var t=e.streams.filter(function(u){return u.contentType=="audio"});if(e=e.streams.filter(function(u){return u.contentType=="video"}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=h(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=h(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var i=n++,o=h(e);for(r=o.next();!r.done;r=o.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,o=h(t),r=o.next();!r.done;r=o.next())r.value.variantIds.push(i);if(e.length&&t.length)for(t=h(t),r=t.next();!r.done;r=t.next())for(r=r.value,i=h(e),o=i.next();!o.done;o=i.next()){o=o.value;var s=n++;r.variantIds.push(s),o.variantIds.push(s)}}}function Co(){Rn.apply(this,arguments)}Ne(Co,Rn),Co.prototype.dc=function(e){var t,n,r,i,o,s;return E(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var a=e.periods[n],l=[],c=h(a.streams),f=c.next();!f.done;f=c.next())f=f.value,f.variantIds.length!=0&&l.push(H1(f,a.startTime,a.startTime+i));o=l,t.push(o)}return m(u,qd(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s})})};function H1(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function oa(){Rn.apply(this,arguments)}Ne(oa,Rn),p=oa.prototype,p.hasFixedKeySpace=function(){return!1},p.addSegments=function(e){return this.add(this.i,e)},p.addManifests=function(e){return this.add(this.g,e)},p.updateManifest=function(e,t){return L1(this,e,t)},p.dc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function Oh(){this.o=this.j=this.i=this.h=this.g=this.l=null}p=Oh.prototype,p.init=function(){var e=this,t=new ae,n=R.indexedDB.open("shaka_offline_db",5);return n.onsuccess=function(){var r=n.result;e.l=r;var i=r.objectStoreNames;i=i.contains("manifest")&&i.contains("segment")?new oi(r,"segment","manifest"):null,e.g=i,i=r.objectStoreNames,i=i.contains("manifest-v2")&&i.contains("segment-v2")?new Co(r,"segment-v2","manifest-v2"):null,e.h=i,i=r.objectStoreNames,i=i.contains("manifest-v3")&&i.contains("segment-v3")?new Co(r,"segment-v3","manifest-v3"):null,e.i=i,i=r.objectStoreNames,i=i.contains("manifest-v5")&&i.contains("segment-v5")?new oa(r,"segment-v5","manifest-v5"):null,e.j=i,r=r.objectStoreNames.contains("session-ids")?new ri(r):null,e.o=r,t.resolve()},n.onupgradeneeded=function(){for(var r=n.result,i=h(["segment-v5","manifest-v5","session-ids"]),o=i.next();!o.done;o=i.next())o=o.value,r.objectStoreNames.contains(o)||r.createObjectStore(o,{autoIncrement:!0})},n.onerror=function(r){t.reject(new x(2,9,9001,n.error)),r.preventDefault()},t},p.destroy=function(){var e=this;return E(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return m(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return m(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return m(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return m(t,e.j.destroy(),8);case 8:if(!e.o){t.A(10);break}return m(t,e.o.destroy(),10);case 10:e.l&&e.l.close(),b(t)}})},p.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},p.getEmeSessionCell=function(){return this.o},p.erase=function(){var e=this;return E(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return m(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return m(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return m(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return m(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),m(t,q1(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,m(t,e.init(),0)}})};function q1(){var e=new ae,t=R.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new x(2,9,9001,t.error)),n.preventDefault()},e}Lh("idb",function(){return kr()||!R.indexedDB?null:new Oh});function Et(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}Et.prototype.Ea=function(){return this.i},Et.prototype.aa=function(){return this.h},Et.prototype.key=function(){return this.l},Et.prototype.toString=function(){return this.j};function sa(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new Et(t,n,r,Number(e[4])):null}function _h(e,t){this.h=e,this.g=t}function Uh(e,t){var n=new _(null,0);n.Na(t.duration);var r=t.streams.filter(function(l){return l.type=="audio"}),i=t.streams.filter(function(l){return l.type=="video"});r=K1(e,r,i,n),i=t.streams.filter(function(l){return l.type==re}).map(function(l){return ko(e,l,n)});var o=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return ko(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=h(r.values()),a=u.next();!a.done;a=u.next())a=a.value,a.audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:o}}function K1(e,t,n,r){for(var i=new Set,o=h(t),s=o.next();!s.done;s=o.next()){var u=h(s.value.variantIds);for(s=u.next();!s.done;s=u.next())i.add(s.value)}for(o=h(n),s=o.next();!s.done;s=o.next())for(u=h(s.value.variantIds),s=u.next();!s.done;s=u.next())i.add(s.value);for(o=new Map,i=h(i),s=i.next();!s.done;s=i.next())s=s.value,o.set(s,{id:s,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=h(t),i=t.next();!i.done;i=t.next())for(i=i.value,s=ko(e,i,r),u=h(i.variantIds),i=u.next();!i.done;i=u.next())i=o.get(i.value),i.language=s.language,i.primary=i.primary||s.primary,i.audio=s;for(n=h(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=ko(e,i,r),s=h(i.variantIds),i=s.next();!i.done;i=s.next())i=o.get(i.value),i.primary=i.primary||t.primary,i.video=t;return o}function ko(e,t,n){var r=t.segments.map(function(i){return G1(e,i)});return n.Mb(r),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Y(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function G1(e,t){var n=new Et("segment",e.h,e.g,t.dataKey);return new he(t.startTime,t.endTime,function(){return[n.toString()]},0,null,t.initSegmentKey!=null?z1(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function z1(e,t){var n=new Et("segment",e.h,e.g,t);return new qe(function(){return[n.toString()]},0,null)}function Bh(){this.g=null}p=Bh.prototype,p.configure=function(){},p.start=function(e,t){var n=this,r,i,o,s,u,a,l;return E(function(c){switch(c.g){case 1:if(r=sa(e),n.g=r,r==null||r.g!="manifest")throw new x(2,1,9004,e);return i=new Le,Nn(c),m(c,i.init(),4);case 4:return m(c,Mo(i,r.Ea(),r.aa()),5);case 5:return o=c.h,m(c,o.getManifests([r.key()]),6);case 6:return s=c.h,u=s[0],a=new _h(r.Ea(),r.aa()),l=Uh(a,u),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return It(c),m(c,i.destroy(),7);case 7:At(c,0)}})},p.stop=function(){return Promise.resolve()},p.update=function(){},p.onExpirationUpdated=function(e,t){var n=this,r,i,o,s,u,a,l;return E(function(c){switch(c.g){case 1:return r=n.g,i=new Le,q(c,2,3),m(c,i.init(),5);case 5:return m(c,Mo(i,r.Ea(),r.aa()),6);case 6:return o=c.h,m(c,o.getManifests([r.key()]),7);case 7:if(s=c.h,u=s[0],a=u.sessionIds.includes(e),l=u.expiration==null||u.expiration>t,!a||!l){c.A(3);break}return m(c,o.updateManifestExpiration(r.key(),t),3);case 3:return It(c),m(c,i.destroy(),10);case 10:At(c,0);break;case 2:K(c),c.A(3)}})},nt["application/x-offline-manifest"]=function(){return new Bh};function Fh(){}function Vh(e){var t=sa(e);return t&&t.g=="manifest"?(e={uri:e,ye:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Hn(e)):e=t&&t.g=="segment"?X1(t.key(),t):gn(new x(2,1,9004,e)),e}function X1(e,t){var n=new Le;return Hn(void 0).fa(function(){return n.init()}).fa(function(){return Mo(n,t.Ea(),t.aa())}).fa(function(r){return r.getSegments([t.key()])}).fa(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}O("shaka.offline.OfflineScheme",Fh),Fh.plugin=Vh,Ct("offline",Vh);function Hh(e,t,n){var r,i,o,s,u,a;return E(function(l){switch(l.g){case 1:r=[];for(var c=[],f=h(n),d=f.next();!d.done;d=f.next()){d=d.value;for(var g=!1,v=h(c),y=v.next();!y.done;y=v.next())if(y=y.value,Y1(y.info,d)){y.sessionIds.push(d.sessionId),g=!0;break}g||c.push({info:d,sessionIds:[d.sessionId]})}i=h(c),o=i.next();case 2:if(o.done){l.A(4);break}return s=o.value,u=W1(e,t,s),m(l,u,5);case 5:a=l.h,r=r.concat(a),o=i.next(),l.A(2);break;case 4:return l.return(r)}})}function W1(e,t,n){var r,i;return E(function(o){switch(o.g){case 1:return r=new Di({sb:t,onError:function(){},Tc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),q(o,2),r.configure(e),m(o,xm(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ee(o,3);break;case 2:return K(o),m(o,r.destroy(),5);case 5:return o.return([]);case 3:return q(o,6),m(o,Ns(r),8);case 8:ee(o,7);break;case 6:return K(o),m(o,r.destroy(),9);case 9:return o.return([]);case 7:return i=[],m(o,Promise.all(n.sessionIds.map(function(s){return E(function(u){if(u.g==1)return q(u,2),m(u,Sm(r,s),4);if(u.g!=2)return i.push(s),ee(u,0);K(u),b(u)})})),10);case 10:return m(o,r.destroy(),11);case 11:return o.return(i)}})}function Y1(e,t){function n(r,i){return r.robustness==i.robustness&&r.contentType==i.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&hr(e.audioCapabilities,t.audioCapabilities,n)&&hr(e.videoCapabilities,t.videoCapabilities,n)}function $1(e,t,n){var r=t.presentationTimeline.getDuration();return t=qh(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function ua(e,t){var n=Uh(new _h(e.Ea(),e.aa()),t),r=t.appMetadata||{};return n=qh(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function qh(e){var t=[],n=im(e.variants);n=h(n);for(var r=n.next();!r.done;r=n.next())t.push(pn(r.value));for(e=h(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Rr(n.value));return t}function J1(){this.g={}}function Q1(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,o=r.bandwidth||t.bandwidth-i;0>=o&&(o=t.bandwidth),e.g[n.id]=i,e.g[r.id]=o}}function Z1(e,t){e.g[t.id]=t.bandwidth||2048}function Kh(e,t){var n=e.g[t];return n==null&&(n=0),n}function Gh(){this.h=[],this.g=this.i=0}function ew(){var e=$h,t;return E(function(n){return n.g==1?(t=++e.i,e.g?m(n,new Promise(function(r){e.h.push(function(){e.g=t,r()})}),2):(e.g=t,n.A(2))):n.return(t)})}Gh.prototype.release=function(e){e==this.g&&(this.g=0,0<this.h.length&&this.h.shift()())};function Ee(e){var t=this;if(e&&e.constructor!=M)throw new x(2,9,9008);this.R=this.m=null,e?(this.m=e.m,this.R=e.hc()):(this.m=zr(),this.R=new ie),this.oc=[],this.Pd=[];var n=!e;this.K=new mn(function(){var r,i,o,s,u;return E(function(a){switch(a.g){case 1:return m(a,Promise.all(t.Pd.map(function(l){return ta(l)})),2);case 2:for(r=function(){},i=[],o=h(t.oc),s=o.next();!s.done;s=o.next())u=s.value,i.push(u.then(r,r));return m(a,Promise.all(i),3);case 3:if(!n){a.A(4);break}return m(a,t.R.destroy(),4);case 4:t.m=null,t.R=null,b(a)}})})}function aa(){if(ut())e:{for(var e=h(ii.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}p=Ee.prototype,p.destroy=function(){return this.K.destroy()},p.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=fu(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(He("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),Jn(this.m,e)},p.getConfiguration=function(){var e=zr();return Jn(e,this.m,zr()),e},p.hc=function(){return this.R},p.store=function(e,t,n){var r=this,i=this.getConfiguration(),o=new Dh(this.R);this.Pd.push(o),t=tw(this,e,t||{},function(){var u;return E(function(a){return a.g==1?m(a,tc(e,r.R,i.manifest.retryParameters,n||null),2):(u=a.h,a.return(an(u)))})},i,o);var s=new de(t,function(){return ta(o)});return s.finally(function(){st(r.Pd,o)}),s.then=function(u){return He("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),s.promise.then(u)},vw(this,s)},p.yf=function(){return He("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1};function tw(e,t,n,r,i,o){var s,u,a,l,c,f,d,g,v,y,T,w,A,I;return E(function(S){switch(S.g){case 1:return Ro(),u=s=null,a=new Le,f=c=l=null,q(S,2,3),m(S,r(),5);case 5:return s=S.h,m(S,dw(e,t,s,i),6);case 6:if(d=S.h,Ke(e),g=!d.presentationTimeline.Y()&&!d.presentationTimeline.rb(),!g)throw new x(2,9,9005,t);return m(S,hw(e,d,function(C){f=f||C},i),7);case 7:if(u=S.h,Ke(e),f)throw f;return m(S,iw(d,i),8);case 8:return m(S,a.init(),9);case 9:return Ke(e),m(S,ia(a),10);case 10:return l=S.h,Ke(e),v=ow(u,d,t,n,i,o),y=v.Jf,T=v.be,m(S,l.aa.addManifests([y]),11);case 11:if(w=S.h,Ke(e),c=w[0],Ke(e),f)throw f;return m(S,nw(e,T,c,y,o,i,l.aa,d,u),12);case 12:return Ke(e),A=new Et("manifest",l.path.Ea,l.path.aa,c),S.return(ua(A,y));case 3:return It(S),m(S,a.destroy(),13);case 13:if(!s){S.A(14);break}return m(S,s.stop(),14);case 14:if(!u){S.A(16);break}return m(S,u.destroy(),16);case 16:At(S,0);break;case 2:if(I=K(S),c==null){S.A(18);break}return m(S,zh(c),18);case 18:throw f||I}})}function nw(e,t,n,r,i,o,s,u,a){var l,c;return E(function(f){switch(f.g){case 1:if(l=function(d,g){var v,y,T,w,A,I,S,C;return E(function(k){if(k.g==1){for(v=function(){Ke(e)},y={},T=h(d),w=T.next();!w.done;y={xc:y.xc,ab:y.ab},w=T.next())y.ab=w.value,y.xc=void 0,A=k1(y.ab,o),I=y.ab.i,S=y.ab.h,C=function(D){return function(P){return D.xc=P,Promise.resolve()}}(y),D1(i,y.ab.groupId,A,I,S,C),N1(i,y.ab.groupId,function(D){return function(){var P;return E(function(N){if(N.g==1)return P=D.ab.g,m(N,rw(n,P,{data:D.xc},v),2);r=N.h||r,b(N)})}}(y));return m(k,P1(i),2)}return g?(Ke(e),sw(u,r,a,o),m(k,s.updateManifest(n,r),0)):k.A(0)})},c=!1,!la(u)||!c||Xh(u)){f.A(2);break}return m(f,l(t.filter(function(d){return d.h}),!0),3);case 3:Ke(e),t=t.filter(function(d){return!d.h});case 2:if(c){f.A(0);break}return m(f,l(t,!1),5);case 5:Ke(e),b(f)}})}function zh(e){var t,n,r,i;return E(function(o){switch(o.g){case 1:return t=new Le,m(o,t.init(),2);case 2:return m(o,ia(t),3);case 3:return n=o.h,r=new Et("manifest",n.path.Ea,n.path.aa,e),m(o,t.destroy(),4);case 4:return i=new Ee,m(o,i.remove(r.toString()),0)}})}function rw(e,t,n,r){var i,o,s,u,a,l,c,f,d,g,v,y,T,w,A,I,S;return E(function(C){switch(C.g){case 1:return i=new Le,o=ea(t),s=!1,c=0,q(C,2,3),m(C,i.init(),5);case 5:return m(C,ia(i),6);case 6:return a=C.h,m(C,a.aa.addSegments([n]),7);case 7:return f=C.h,u=f[0],r(),m(C,ew(),8);case 8:return c=C.h,r(),m(C,a.aa.getManifests([e]),9);case 9:for(d=C.h,r(),l=d[0],g=!0,v=h(l.streams),y=v.next();!y.done;y=v.next())for(T=y.value,w=h(T.segments),A=w.next();!A.done;A=w.next())I=A.value,I.pendingSegmentRefId==o&&(I.dataKey=u,I.pendingSegmentRefId=void 0),I.pendingInitSegmentRefId==o&&(I.initSegmentKey=u,I.pendingInitSegmentRefId=void 0),I.pendingSegmentRefId&&(g=!1),I.pendingInitSegmentRefId&&(g=!1);return l.size+=n.data.byteLength,g&&(l.isIncomplete=!1),m(C,a.aa.updateManifest(e,l),10);case 10:s=!0,r();case 3:return It(C),m(C,i.destroy(),11);case 11:$h.release(c),At(C,4);break;case 2:return S=K(C),m(C,zh(e),12);case 12:if(!a||s||!u){C.A(13);break}return m(C,a.aa.removeSegments([u],function(){}),13);case 13:throw S;case 4:return C.return(l)}})}function iw(e,t){var n,r,i,o,s,u,a,l,c,f,d,g,v,y,T,w,A,I,S,C,k,D,P,N,L,B,F,W,H;return E(function(ne){switch(ne.g){case 1:return n={width:1/0,height:1/0},Zg(e,t.restrictions,n),m(ne,pl(e,t.offline.usePersistentLicense),2);case 2:for(r=[],i=t.preferredAudioChannelCount,o=t.preferredDecodingAttributes,s=t.preferredVideoCodecs,u=t.preferredAudioCodecs,dl(e,s,u,i,o),a=h(e.variants),l=a.next();!l.done;l=a.next())c=l.value,r.push(pn(c));for(f=h(e.textStreams),d=f.next();!d.done;d=f.next())g=d.value,r.push(Rr(g));for(v=h(e.imageStreams),y=v.next();!y.done;y=v.next())T=y.value,r.push(wl(T));return m(ne,t.offline.trackSelectionCallback(r),3);case 3:for(w=ne.h,A=e.presentationTimeline.getDuration(),I=0,S=h(w),C=S.next();!C.done;C=S.next())k=C.value,D=k.bandwidth*A/8,I+=D;return q(ne,4),m(ne,t.offline.downloadSizeCallback(I),6);case 6:if(P=ne.h,!P)throw new x(2,9,9014);ee(ne,5);break;case 4:throw N=K(ne),N instanceof x?N:new x(2,9,9015);case 5:for(L=new Set,B=new Set,F=new Set,W=h(w),C=W.next();!C.done;C=W.next())H=C.value,H.type=="variant"&&L.add(H.id),H.type=="text"&&B.add(H.id),H.type=="image"&&F.add(H.id);e.variants=e.variants.filter(function(we){return L.has(we.id)}),e.textStreams=e.textStreams.filter(function(we){return B.has(we.id)}),e.imageStreams=e.imageStreams.filter(function(we){return F.has(we.id)}),Tw(e),b(ne)}})}function ow(e,t,n,r,i,o){var s=$1(n,t,r),u=i.offline.progressCallback;R1(o,function(g,v){s.size=v,u(s,g)},function(g,v){a&&i.offline.usePersistentLicense&&l==v&&Ni(e,"cenc",g)});var a=la(t)&&!Xh(t),l=null;a&&(l=xw.get(e.i.keySystem));for(var c=new J1,f=h(t.textStreams),d=f.next();!d.done;d=f.next())c.g[d.value.id]=52;for(f=h(t.imageStreams),d=f.next();!d.done;d=f.next())Z1(c,d.value);for(d=h(t.variants),f=d.next();!f.done;f=d.next())Q1(c,f.value);return c=pw(o,c,t),o=c.streams,c=c.be,d=e.i,f=i.offline.usePersistentLicense,d&&f&&(d.initData=[]),{Jf:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.fc(),streams:o,sessionIds:f?Wl(e):[],drmInfo:d,appMetadata:r,isIncomplete:!0},be:c}}function la(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function Xh(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function sw(e,t,n,r){if(t.expiration=n.fc(),n=Wl(n),t.sessionIds=r.offline.usePersistentLicense?n:[],la(e)&&r.offline.usePersistentLicense&&!n.length)throw new x(2,9,9007)}p.remove=function(e){return ca(this,uw(this,e))};function uw(e,t){var n,r,i,o,s,u;return E(function(a){switch(a.g){case 1:if(Ro(),n=sa(t),n==null||n.g!="manifest")throw new x(2,9,9004,t);return r=n,i=new Le,Nn(a),m(a,i.init(),4);case 4:return m(a,Mo(i,r.Ea(),r.aa()),5);case 5:return o=a.h,m(a,o.getManifests([r.key()]),6);case 6:return s=a.h,u=s[0],m(a,Promise.all([aw(e,u,i),lw(o,r,u)]),2);case 2:return It(a),m(a,i.destroy(),8);case 8:At(a,0)}})}function Wh(e,t){for(var n=[],r=h(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&i.type=="video"?n.push({contentType:wt(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||i.type!="audio"||n.push({contentType:wt(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function aw(e,t,n){return E(function(r){return m(r,ww(e.R,e.m.drm,n,t),0)})}function lw(e,t,n){function r(){}var i=yw(n);return ua(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}p.Yf=function(){return ca(this,cw(this))};function cw(e){var t,n,r,i,o,s,u,a,l,c;return E(function(f){switch(f.g){case 1:return Ro(),t=e.R,n=e.m.drm,r=new Le,i=!1,Nn(f),m(f,r.init(),4);case 4:o=[],O1(r,function(d){return o.push(d)}),s=h(o),u=s.next();case 5:if(u.done){f.A(2);break}return a=u.value,m(f,a.getAll(),8);case 8:return l=f.h,m(f,Hh(n,t,l),9);case 9:return c=f.h,m(f,a.remove(c),10);case 10:c.length!=l.length&&(i=!0),u=s.next(),f.A(5);break;case 2:return It(f),m(f,r.destroy(),11);case 11:At(f,3);break;case 3:return f.return(!i)}})}p.list=function(){return ca(this,fw())};function fw(){var e,t,n;return E(function(r){switch(r.g){case 1:return Ro(),e=[],t=new Le,Nn(r),m(r,t.init(),4);case 4:return n=Promise.resolve(),j1(t,function(i,o){n=n.then(function(){var s;return E(function(u){if(u.g==1)return m(u,o.getAllManifests(),2);s=u.h,s.forEach(function(a,l){var c=ua(new Et("manifest",i.Ea,i.aa,l),a);e.push(c)}),b(u)})})}),m(r,n,2);case 2:return It(r),m(r,t.destroy(),6);case 6:At(r,3);break;case 3:return r.return(e)}})}function dw(e,t,n,r){var i,o,s,u,a;return E(function(l){if(l.g==1)return i=null,o=e.R,s={networkingEngine:o,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){i=c},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){}},n.configure(r.manifest),Ke(e),m(l,n.start(t,s),2);if(l.g!=3)return u=l.h,Ke(e),a=Yh(u),m(l,Promise.all(Va(a,function(c){return c.createSegmentIndex()})),3);if(Ke(e),i)throw i;return l.return(u)})}function hw(e,t,n,r){var i;return E(function(o){switch(o.g){case 1:return i=new Di({sb:e.R,onError:n,Tc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),i.configure(r.drm),m(o,Tm(i,t.variants,r.offline.usePersistentLicense),2);case 2:return m(o,Ns(i),3);case 3:return m(o,zl(i),4);case 4:return o.return(i)}})}function pw(e,t,n){var r=new Map,i=Yh(n),o=new Map;i=h(i);for(var s=i.next();!s.done;s=i.next()){s=s.value;var u=gw(e,t,n,s,r);o.set(s.id,u)}for(e=h(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),be:Array.from(r.values())}}function gw(e,t,n,r,i){var o={id:r.id,originalId:r.originalId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,kind:r.kind,language:r.language,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout};return mw(r,n.presentationTimeline.Xa(),function(s){var u=ea(s),a=void 0;if(!i.has(u)){var l=s.endTime-s.startTime;l=Kh(t,r.id)*l,l=Rh(e.Cb,l),i.set(u,new Ch(s,l,r.id,!1))}s.g&&(a=ea(s.g),i.has(a)||(l=.5*Kh(t,r.id),l=Rh(e.Cb,l),i.set(a,new Ch(s.g,l,r.id,!0)))),o.segments.push({pendingInitSegmentRefId:a,initSegmentKey:a?0:null,startTime:s.startTime,endTime:s.endTime,appendWindowStart:s.appendWindowStart,appendWindowEnd:s.appendWindowEnd,timestampOffset:s.timestampOffset,tilesLayout:s.tilesLayout,pendingSegmentRefId:u,dataKey:0})}),o}function mw(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function Ke(e){if(e.K.g)throw new x(2,9,7001)}function Ro(){if(!aa())throw new x(2,9,9e3)}function ca(e,t){return E(function(n){return n.g==1?(e.oc.push(t),Nn(n),m(n,t,4)):n.g!=2?n.return(n.h):(It(n),st(e.oc,t),At(n,0))})}function vw(e,t){var n=t.promise;return e.oc.push(n),t.finally(function(){st(e.oc,n)})}function yw(e){var t=new Set;e=h(e.streams);for(var n=e.next();!n.done;n=e.next()){n=h(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function ww(e,t,n,r){var i,o,s;return E(function(u){return u.g==1?r.drmInfo?(i=_1(n),o=r.sessionIds.map(function(a){return{sessionId:a,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Wh(r,!1),videoCapabilities:Wh(r,!0)}}),m(u,Hh(t,e,o),2)):u.return():u.g!=3?(s=u.h,m(u,i.remove(s),3)):m(u,i.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}function Yh(e){for(var t=new Set,n=h(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=h(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=h(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function Tw(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=h(t),r=n.next();!r.done;r=n.next()){r=h(t);for(var i=r.next();!i.done;i=r.next());}for(t=h(e),n=t.next();!n.done;n=t.next())for(n=h(e),r=n.next();!r.done;r=n.next());}O("shaka.offline.Storage",Ee),Ee.deleteAll=function(){var e;return E(function(t){return t.g==1?(e=new Le,Nn(t),m(t,U1(e),2)):t.g!=5?(It(t),m(t,e.destroy(),5)):At(t,0)})},Ee.prototype.list=Ee.prototype.list,Ee.prototype.removeEmeSessions=Ee.prototype.Yf,Ee.prototype.remove=Ee.prototype.remove,Ee.prototype.getStoreInProgress=Ee.prototype.yf,Ee.prototype.store=Ee.prototype.store,Ee.prototype.getNetworkingEngine=Ee.prototype.hc,Ee.prototype.getConfiguration=Ee.prototype.getConfiguration,Ee.prototype.configure=Ee.prototype.configure,Ee.prototype.destroy=Ee.prototype.destroy,Ee.support=aa;var $h=new Gh,xw=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Au.offline=aa;function Me(){}function Re(e,t){for(var n={priority:t||0,Se:e},r=h(Be(Do)),i=r.next();!i.done;i=r.next()){i=i.value;var o=i.ga;if(i.item.priority<n.priority){Do.splice(o,0,n);return}}Do.push(n)}O("shaka.polyfill",Me),Me.register=Re,Me.installAll=function(){for(var e=h(Do),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Se()}catch(n){me("Error installing polyfill!",n)}}};var Do=[];function Jh(){}function Qh(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=h(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Sw(t.value)}function Sw(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Me.Aria=Jh,Jh.install=Qh,Re(Qh);function Zh(){}function ep(){hg()}Me.EncryptionScheme=Zh,Zh.install=ep,Re(ep,-2);function tp(){}function np(){if(R.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ar),document.addEventListener("webkitfullscreenerror",ar),document.addEventListener("mozfullscreenchange",ar),document.addEventListener("mozfullscreenerror",ar),document.addEventListener("MSFullscreenChange",ar),document.addEventListener("MSFullscreenError",ar)}}function ar(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Me.Fullscreen=tp,tp.install=np,Re(np);function rp(){}function ip(){}Me.MathRound=rp,rp.install=ip,Re(ip);function fa(){}function op(){(kr()||Ei()||Ue("PlayStation 5")||!navigator.mediaCapabilities)&&(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),sp=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Ew)}function Ew(e){var t,n,r,i,o,s,u,a,l,c,f,d,g,v,y,T;return E(function(w){switch(w.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return w.return(t);if(e.type=="media-source"){if(!ut()||e.video&&(n=e.video.contentType,r=MediaSource.isTypeSupported(n),!r)||e.audio&&(i=e.audio.contentType,o=MediaSource.isTypeSupported(i),!o))return w.return(t)}else if(e.type=="file"){if(e.video&&(s=e.video.contentType,u=_n(s),!u)||e.audio&&(a=e.audio.contentType,l=_n(a),!l))return w.return(t)}else return w.return(t);return e.keySystemConfiguration?(c=e.keySystemConfiguration,f=[],d=[],c.audio&&(g={robustness:c.audio.robustness||"",contentType:e.audio.contentType},f.push(g)),c.video&&(v={robustness:c.video.robustness||"",contentType:e.video.contentType},d.push(v)),y={initDataTypes:[c.initDataType],distinctiveIdentifier:c.distinctiveIdentifier,persistentState:c.persistentState,sessionTypes:c.sessionTypes},f.length&&(y.audioCapabilities=f),d.length&&(y.videoCapabilities=d),q(w,3),m(w,navigator.requestMediaKeySystemAccess(c.keySystem,[y]),5)):(t.supported=!0,w.return(Promise.resolve(t)));case 5:T=w.h,ee(w,4);break;case 3:K(w);case 4:T&&(t.supported=!0,t.keySystemAccess=T);case 2:return w.return(t)}})}Me.MediaCapabilities=fa,fa.install=op;var sp=null;fa.originalMcap=sp,Re(op,-1);function up(){}function ap(){var e=cl();R.MediaSource&&(R.cast&&cast.__platform__&&cast.__platform__.canDisplayType?Cw():e?(Aw(),12>=e?(lp(),Iw()):lp()):(Ue("Tizen 2")||Ue("Tizen 3")||Ue("Tizen 4"))&&Mw()),R.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&kw()}function lp(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return n=e.apply(this,n),n.abort=function(){},n}}function Iw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Aw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return t.split(/ *; */)[0].split("/")[1].toLowerCase()=="mp2t"?!1:e(t)}}function Mw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return et(t)!="opus"&&e(t)}}function Cw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some(function(r){return r.startsWith("codecs=")})?cast.__platform__.canDisplayType(t):e(t)}}function kw(){var e=MediaSource.isTypeSupported;Ue("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(s){return s.startsWith("codecs=")});if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=i.findIndex(function(s){return s.startsWith("vp09")});return 0<=o&&(i[o]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}Me.MediaSource=up,up.install=ap,Re(ap);function cp(){}function fp(){screen.orientation||R.orientation!=null&&Rw()}function Rw(){function e(){switch(R.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new No;screen.orientation=t,e(),R.addEventListener("orientationchange",function(){e();var n=new U("change");t.dispatchEvent(n)})}Me.Orientation=cp,cp.install=fp;function No(){$.call(this),this.type="",this.angle=0}Ne(No,$),No.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},No.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Re(fp);function dp(){}function hp(){R.HTMLVideoElement&&R.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Nw,R.MediaKeys=bo,R.MediaKeySystemAccess=Po,navigator.requestMediaKeySystemAccess=Dw)}function Dw(e,t){try{var n=new Po(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Nw(e){var t=this.mediaKeys;return t&&t!=e&&pp(t,null),delete this.mediaKeys,(this.mediaKeys=e)?pp(e,this):Promise.resolve()}function Pw(e){if(e=Q(e.initData),Ve(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Xt(e.subarray(4),!0),e=fn(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=vt(e),this.dispatchEvent(t)}Me.PatchedMediaKeysApple=dp,dp.install=hp;function Po(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=h(t),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.persistentState=="required")r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var o=!1,s=!1;if(i.audioCapabilities)for(var u=h(i.audioCapabilities),a=u.next();!a.done;a=u.next())a=a.value,a.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(r.audioCapabilities.push(a),s=!0));if(i.videoCapabilities)for(i=h(i.videoCapabilities),a=i.next();!a.done;a=i.next())u=a.value,u.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(r.videoCapabilities.push(u),s=!0));o||(s=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=s?r:null}if(r){this.g=r;return}}throw n=Error("Unsupported keySystem"),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}Po.prototype.createMediaKeys=function(){var e=new bo(this.keySystem);return Promise.resolve(e)},Po.prototype.getConfiguration=function(){return this.g};function bo(e){this.g=new WebKitMediaKeys(e),this.h=new ue}bo.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new da(this.g,e)},bo.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function pp(e,t){if(e.h.vb(),!t)return Promise.resolve();e.h.C(t,"webkitneedkey",Pw);try{return Sn(t,HTMLMediaElement.HAVE_METADATA,e.h,function(){t.webkitSetMediaKeys(e.g)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function da(e){$.call(this),this.j=null,this.l=e,this.i=this.g=null,this.h=new ue,this.sessionId="",this.expiration=NaN,this.closed=new ae,this.keyStatuses=new gp}Ne(da,$),p=da.prototype,p.generateRequest=function(e,t){var n=this;this.g=new ae;try{var r=this.l.createSession("video/mp4",Q(t));this.j=r,this.sessionId=r.sessionId||"",this.h.C(this.j,"webkitkeymessage",function(i){n.g&&(n.g.resolve(),n.g=null),i=new Map().set("messageType",n.keyStatuses.g==null?"license-request":"license-renewal").set("message",vt(i.message)),i=new U("message",i),n.dispatchEvent(i)}),this.h.C(r,"webkitkeyadded",function(){n.i&&(Lo(n,"usable"),n.i.resolve(),n.i=null)}),this.h.C(r,"webkitkeyerror",function(){var i=Error("EME PatchedMediaKeysApple key error");if(i.errorCode=n.j.error,n.g!=null)n.g.reject(i),n.g=null;else if(n.i!=null)n.i.reject(i),n.i=null;else switch(n.j.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Lo(n,"output-not-allowed");break;default:Lo(n,"internal-error")}}),Lo(this,"status-pending")}catch(i){this.g.reject(i)}return this.g},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(e){this.i=new ae;try{this.j.update(Q(e))}catch(t){this.i.reject(t)}return this.i},p.close=function(){try{this.j.close(),this.closed.resolve(),this.h.vb()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Lo(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,n=new U("keystatuseschange"),e.dispatchEvent(n)}function gp(){this.size=0,this.g=void 0}p=gp.prototype,p.forEach=function(e){this.g&&e(this.g,Gn.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=Gn.value();return!!(this.g&&mt(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){},Re(hp);function mp(){}function vp(){!R.HTMLVideoElement||!R.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,R.MediaKeys=Oo,R.MediaKeySystemAccess=jo,navigator.requestMediaKeySystemAccess=bw,HTMLMediaElement.prototype.setMediaKeys=jw)}function bw(e,t){try{var n=new jo(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Lw(e){if(e.initData){var t=new CustomEvent("encrypted");t.initDataType="cenc",t.initData=vt(Zy(e.initData)),this.dispatchEvent(t)}}Me.PatchedMediaKeysMs=mp,mp.install=vp;function jo(e,t){this.keySystem=e;for(var n=!1,r=h(t),i=r.next();!i.done;i=r.next()){i=i.value;var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},s=!1;if(i.audioCapabilities)for(var u=h(i.audioCapabilities),a=u.next();!a.done;a=u.next())a=a.value,a.contentType&&(s=!0,MSMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(o.audioCapabilities.push(a),n=!0));if(i.videoCapabilities)for(u=h(i.videoCapabilities),a=u.next();!a.done;a=u.next())a=a.value,a.contentType&&(s=!0,MSMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(o.videoCapabilities.push(a),n=!0));if(s||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i.persistentState=="required"&&(n=!1),n){this.g=o;return}}throw n=Error("Unsupported keySystem"),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}jo.prototype.createMediaKeys=function(){var e=new Oo(this.keySystem);return Promise.resolve(e)},jo.prototype.getConfiguration=function(){return this.g};function jw(e){var t=this.mediaKeys;return t&&t!=e&&yp(t,null),delete this.mediaKeys,(this.mediaKeys=e)?yp(e,this):Promise.resolve()}function Oo(e){this.g=new MSMediaKeys(e),this.h=new ue}Oo.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new ha(this.g,e)},Oo.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function yp(e,t){if(e.h.vb(),!t)return Promise.resolve();e.h.C(t,"msneedkey",Lw);try{return Sn(t,HTMLMediaElement.HAVE_METADATA,e.h,function(){t.msSetMediaKeys(e.g)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function ha(e){$.call(this),this.j=null,this.l=e,this.i=this.g=null,this.h=new ue,this.sessionId="",this.expiration=NaN,this.closed=new ae,this.keyStatuses=new wp}Ne(ha,$),p=ha.prototype,p.generateRequest=function(e,t){var n=this;this.g=new ae;try{this.j=this.l.createSession("video/mp4",Q(t),null),this.h.C(this.j,"mskeymessage",function(r){n.g&&(n.g.resolve(),n.g=null),r=new Map().set("messageType",n.keyStatuses.g==null?"license-request":"license-renewal").set("message",vt(r.message)),r=new U("message",r),n.dispatchEvent(r)}),this.h.C(this.j,"mskeyadded",function(){n.g?(si(n,"usable"),n.g.resolve(),n.g=null):n.i&&(si(n,"usable"),n.i.resolve(),n.i=null)}),this.h.C(this.j,"mskeyerror",function(){var r=Error("EME PatchedMediaKeysMs key error");if(r.errorCode=n.j.error,n.g!=null)n.g.reject(r),n.g=null;else if(n.i!=null)n.i.reject(r),n.i=null;else switch(n.j.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:si(n,"output-not-allowed");break;default:si(n,"internal-error")}}),si(this,"status-pending")}catch(r){this.g.reject(r)}return this.g},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(e){this.i=new ae;try{this.j.update(Q(e))}catch(t){this.i.reject(t)}return this.i},p.close=function(){try{this.j.close(),this.closed.resolve(),this.h.vb()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function si(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,n=new U("keystatuseschange"),e.dispatchEvent(n)}function wp(){this.size=0,this.g=void 0}p=wp.prototype,p.forEach=function(e){this.g&&e(this.g,Gn.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=Gn.value();return!!(this.g&&mt(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){},Re(vp);function Tp(){}function xp(){!R.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Ow,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=_w,R.MediaKeys=pa,R.MediaKeySystemAccess=ga)}function Ow(){return Promise.reject(Error("The key system specified is not supported."))}function _w(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Me.PatchedMediaKeysNop=Tp,Tp.install=xp;function pa(){throw new TypeError("Illegal constructor.")}pa.prototype.createSession=function(){},pa.prototype.setServerCertificate=function(){};function ga(){throw this.keySystem="",new TypeError("Illegal constructor.")}ga.prototype.getConfiguration=function(){},ga.prototype.createMediaKeys=function(){},Re(xp,-10);function Sp(){}function Ep(){if(!(!R.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Ta="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Uw,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Bw,R.MediaKeys=Uo,R.MediaKeySystemAccess=_o}}function ma(e){var t=Ta;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function Uw(e,t){try{var n=new _o(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Bw(e){var t=this.mediaKeys;return t&&t!=e&&Ip(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Ip(e,this),Promise.resolve()}Me.PatchedMediaKeysWebkit=Sp,Sp.install=Ep;function _o(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var o=h(t),s=o.next();!s.done;s=o.next()){s=s.value;var u={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label},a=!1;if(s.audioCapabilities)for(var l=h(s.audioCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(a=!0,i.canPlayType(c.contentType.split(";")[0],this.g)&&(u.audioCapabilities.push(c),r=!0));if(s.videoCapabilities)for(l=h(s.videoCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(a=!0,i.canPlayType(c.contentType,this.g)&&(u.videoCapabilities.push(c),r=!0));if(a||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),s.persistentState=="required"&&(n?(u.persistentState="required",u.sessionTypes=["persistent-license"]):r=!1),r){this.h=u;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),n=Error(n),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}_o.prototype.createMediaKeys=function(){var e=new Uo(this.g);return Promise.resolve(e)},_o.prototype.getConfiguration=function(){return this.h};function Uo(e){this.l=e,this.g=null,this.h=new ue,this.i=[],this.j=new Map}function Ip(e,t){e.g=t,e.h.vb();var n=Ta;t&&(e.h.C(t,n+"needkey",function(r){var i=new CustomEvent("encrypted");i.initDataType="cenc",i.initData=vt(r.initData),e.g.dispatchEvent(i)}),e.h.C(t,n+"keymessage",function(r){var i=va(e,r.sessionId);i&&(r=new Map().set("messageType",i.keyStatuses.g==null?"licenserequest":"licenserenewal").set("message",r.message),r=new U("message",r),i.h&&(i.h.resolve(),i.h=null),i.dispatchEvent(r))}),e.h.C(t,n+"keyadded",function(r){(r=va(e,r.sessionId))&&(Bo(r,"usable"),r.g&&r.g.resolve(),r.g=null)}),e.h.C(t,n+"keyerror",function(r){var i=va(e,r.sessionId);i&&i.handleError(r)}))}Uo.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.g||document.createElement("video");return t.src||(t.src="about:blank"),e=new ya(t,this.l,e),this.i.push(e),e},Uo.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function va(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function ya(e,t,n){$.call(this),this.j=e,this.o=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new ae,this.keyStatuses=new Mp}Ne(ya,$),p=ya.prototype,p.handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(e.systemCode==45&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Bo(this,"output-restricted"):t==1?Bo(this,"expired"):Bo(this,"internal-error"))};function Ap(e,t,n){if(e.o)return Promise.reject(Error("The session is already initialized."));e.o=!0;try{if(e.l=="persistent-license")if(n)var r=Q(fn("LOAD_SESSION|"+n));else{var i=fn("PERSISTENT|");r=Er(i,t)}else r=Q(t)}catch(s){return Promise.reject(s)}e.h=new ae;var o=ma("generateKeyRequest");try{e.j[o](e.i,r)}catch(s){if(s.name!="InvalidStateError")return e.h=null,Promise.reject(s);new G(function(){try{e.j[o](e.i,r)}catch(u){e.h.reject(u),e.h=null}}).W(.01)}return e.h}function wa(e,t,n){if(e.g)e.g.then(function(){return wa(e,t,n)}).catch(function(){return wa(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=be(n),i=JSON.parse(r);i.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Wt(i.keys[0].k),i=Wt(i.keys[0].kid)}else r=Q(n),i=null;var o=ma("addKey");try{e.j[o](e.i,r,i,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function Bo(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,n=new U("keystatuseschange"),e.dispatchEvent(n)}p.generateRequest=function(e,t){return Ap(this,t,null)},p.load=function(e){return this.l=="persistent-license"?Ap(this,null,e):Promise.reject(Error("Not a persistent session."))},p.update=function(e){var t=new ae;return wa(this,t,e),t},p.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=ma("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},p.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Mp(){this.size=0,this.g=void 0}p=Mp.prototype,p.forEach=function(e){this.g&&e(this.g,Gn.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var t=Gn.value();return!!(this.g&&mt(e,t))},p.entries=function(){},p.keys=function(){},p.values=function(){};var Ta="";Re(Ep);function Cp(){}function kp(){if(R.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=Vw,Object.defineProperty(e,"disablePictureInPicture",{get:qw,set:Kw,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Hw,document.addEventListener("webkitpresentationmodechanged",Fw,!0))}}function Fw(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Vw(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Hw(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function qw(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function Kw(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Me.PiPWebkit=Cp,Cp.install=kp,Re(kp);function Rp(){}function Dp(){R.crypto&&("randomUUID"in R.crypto||(R.crypto.randomUUID=Gw))}function Gw(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Me.RandomUUID=Rp,Rp.install=Dp,Re(Dp);function Np(){}function Pp(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=zw)}function zw(){return new Promise(function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(n,r){e({usage:n,quota:r})},t)})}Me.StorageEstimate=Np,Np.install=Pp,Re(Pp);function bp(){}function Lp(){if(R.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Me.VideoPlayPromise=bp,bp.install=Lp,Re(Lp);function jp(){}function Op(){if(R.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=Xw)}}function Xw(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Me.VideoPlaybackQuality=jp,jp.install=Op,Re(Op);function _p(){}function Up(){if(!R.VTTCue&&R.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=xa;else if(t==6)e=Ww;else{try{var n=!!xa(1,2,"")}catch{n=!1}n&&(e=xa)}e&&(R.VTTCue=function(r,i,o){return e(r,i,o)})}}function xa(e,t,n){return new R.TextTrackCue(e,t,n)}function Ww(e,t,n){return new R.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Me.VTTCue=_p,_p.install=Up,Re(Up);function en(){}en.prototype.parseInit=function(){},en.prototype.parseMedia=function(e,t){var n=null,r=[],i=be(e).split(/\r?\n/);i=h(i);for(var o=i.next();!o.done;o=i.next())if((o=o.value)&&!/^\s+$/.test(o)&&(o=Yw.exec(o))){var s=$w.exec(o[1]);s=60*parseInt(s[1],10)+parseFloat(s[2].replace(",",".")),o=new se(s,t.segmentEnd?t.segmentEnd:s+2,o[2]),n&&(n.endTime=s,r.push(n)),n=o}return n&&r.push(n),r},O("shaka.text.LrcTextParser",en),en.prototype.parseMedia=en.prototype.parseMedia,en.prototype.parseInit=en.prototype.parseInit;var Yw=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,$w=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Ce["application/x-subtitle-lrc"]=function(){return new en};function Bt(){}Bt.prototype.parseInit=function(){},Bt.prototype.parseMedia=function(e,t){var n=be(e),r=[],i=new DOMParser,o=null;if(n=="")return r;try{o=i.parseFromString(n,"text/xml")}catch{throw new x(2,2,2005,"Failed to parse TTML.")}if(o){if(n=o.getElementsByTagName("parsererror")[0])throw new x(2,2,2005,n.textContent);var s=o.getElementsByTagName("tt")[0];if(!s)throw new x(2,2,2005,"TTML does not contain <tt> tag.");if(o=s.getElementsByTagName("body")[0],!o)return[];var u=bt(s,ui,"frameRate"),a=bt(s,ui,"subFrameRate"),l=bt(s,ui,"frameRateMultiplier"),c=bt(s,ui,"tickRate"),f=bt(s,ui,"cellResolution");if(n=s.getAttribute("xml:space")||"default",i=bt(s,Ho,"extent"),n!="default"&&n!="preserve")throw new x(2,2,2005,"Invalid xml:space value: "+n);n=n=="default",u=new Zw(u,a,l,c),f=f&&(f=/^(\d+) (\d+)$/.exec(f))?{columns:parseInt(f[1],10),rows:parseInt(f[2],10)}:null,a=(a=s.getElementsByTagName("metadata")[0])?e0(a):[],l=Array.from(s.getElementsByTagName("style")),s=Array.from(s.getElementsByTagName("region")),c=[];for(var d=h(s),g=d.next();!g.done;g=d.next()){var v=g.value;g=new Pn;var y=v.getAttribute("xml:id");if(y){g.id=y;var T=null;i&&(T=Aa.exec(i)||Ma.exec(i)),y=T?Number(T[1]):null,T=T?Number(T[2]):null;var w,A;(w=Fo(v,l,"extent"))&&(w=(A=Aa.exec(w))||Ma.exec(w),w!=null&&(g.width=Number(w[1]),g.height=Number(w[2]),A||(y!=null&&(g.width=100*g.width/y),T!=null&&(g.height=100*g.height/T)),g.widthUnits=A||y!=null?Gt:0,g.heightUnits=A||T!=null?Gt:0)),(v=Fo(v,l,"origin"))&&(w=(A=Aa.exec(v))||Ma.exec(v),w!=null&&(g.viewportAnchorX=Number(w[1]),g.viewportAnchorY=Number(w[2]),A||(T!=null&&(g.viewportAnchorY=100*g.viewportAnchorY/T),y!=null&&(g.viewportAnchorX=100*g.viewportAnchorX/y)),g.viewportAnchorUnits=A||y!=null?Gt:0))}else g=null;g&&c.push(g)}if(ge(o,"p").length)throw new x(2,2,2001,"<p> can only be inside <div> in TTML");for(i=h(ge(o,"div")),d=i.next();!d.done;d=i.next())if(ge(d.value,"span").length)throw new x(2,2,2001,"<span> can only be inside <p> in TTML");(o=Bp(o,t.periodStart,u,a,l,s,c,n,f,null,!1))&&r.push(o)}return r};function Bp(e,t,n,r,i,o,s,u,a,l,c){var f=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!c)return null;var d=document.createElement("span");d.textContent=e.textContent}else d=e;for(var g=null,v=h(rT),y=v.next();!y.done&&!(g=Vo(d,"backgroundImage",r,"#",y.value)[0]);y=v.next());if(v=c,(e.nodeName=="p"||g)&&(c=!0),u=(d.getAttribute("xml:space")||(u?"default":"preserve"))=="default",y=Array.from(d.childNodes).every(function(S){return S.nodeType==Node.TEXT_NODE}),e=[],!y)for(var T=h(d.childNodes),w=T.next();!w.done;w=T.next())(w=Bp(w.value,t,n,r,i,o,s,u,a,d,c))&&e.push(w);r=l!=null,T=/\S/.test(d.textContent);var A=d.hasAttribute("begin")||d.hasAttribute("end")||d.hasAttribute("dur");if(!(A||T||d.tagName=="br"||e.length!=0||r&&!u))return null;for(w=Hp(d,n),T=w.start,w=w.end;f&&f.nodeType==Node.ELEMENT_NODE&&f.tagName!="tt";)w=Qw(f,n,T,w),T=w.start,w=w.end,f=f.parentNode;if(T==null&&(T=0),T+=t,w=w==null?1/0:w+t,!A&&0<e.length)for(T=1/0,w=0,t=h(e),n=t.next();!n.done;n=t.next())n=n.value,T=Math.min(T,n.startTime),w=Math.max(w,n.endTime);if(d.tagName=="br")return i=new se(T,w,""),i.lineBreak=!0,i;if(t="",y&&(t=d.textContent,u&&(t=t.trim(),t=t.replace(/\s+/g," "))),t=new se(T,w,t),t.nestedCues=e,c||(t.isContainer=!0),a&&(t.cellResolution=a),a=Vo(d,"region",o,"")[0],d.hasAttribute("region")&&a&&a.getAttribute("xml:id")){var I=a.getAttribute("xml:id");t.region=s.filter(function(S){return S.id==I})[0]}return s=a,l&&r&&!d.getAttribute("region")&&!d.getAttribute("style")&&(s=Vo(l,"region",o,"")[0]),Jw(t,d,s,g,i,v,e.length==0),t}function Jw(e,t,n,r,i,o,s){if(o=o||s,je(t,n,i,"direction",o)=="rtl"&&(e.direction="rtl"),s=je(t,n,i,"writingMode",o),s=="tb"||s=="tblr"?e.writingMode="vertical-lr":s=="tbrl"?e.writingMode="vertical-rl":s=="rltb"||s=="rl"?e.direction="rtl":s&&(e.direction=ss),(s=je(t,n,i,"textAlign",!0))?(e.positionAlign=nT[s],e.lineAlign=tT[s],e.textAlign=os[s.toUpperCase()]):e.textAlign="start",(s=je(t,n,i,"displayAlign",!0))&&(e.displayAlign=Ga[s.toUpperCase()]),(s=je(t,n,i,"color",o))&&(e.color=s),(s=je(t,n,i,"backgroundColor",o))&&(e.backgroundColor=s),(s=je(t,n,i,"border",o))&&(e.border=s),(s=je(t,n,i,"fontFamily",o))&&(e.fontFamily=s),(s=je(t,n,i,"fontWeight",o))&&s=="bold"&&(e.fontWeight=700),s=je(t,n,i,"wrapOption",o),e.wrapLine=!(s&&s=="noWrap"),(s=je(t,n,i,"lineHeight",o))&&s.match(lr)&&(e.lineHeight=s),(s=je(t,n,i,"fontSize",o))&&(s.match(lr)||s.match(eT))&&(e.fontSize=s),(s=je(t,n,i,"fontStyle",o))&&(e.fontStyle=Ya[s.toUpperCase()]),r){s=r.getAttribute("imageType")||r.getAttribute("imagetype");var u=r.getAttribute("encoding");r=r.textContent.trim(),s=="PNG"&&u=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(r=je(t,n,i,"textOutline",o))&&(r=r.split(" "),r[0].match(lr)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(lr)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=je(t,n,i,"letterSpacing",o))&&r.match(lr)&&(e.letterSpacing=r),(r=je(t,n,i,"linePadding",o))&&r.match(lr)&&(e.linePadding=r),(o=je(t,n,i,"opacity",o))&&(e.opacity=parseFloat(o)),(n=Fo(n,i,"textDecoration"))&&Fp(e,n),(t=Sa(t,i,"textDecoration"))&&Fp(e,t)}function Fp(e,t){for(var n=h(t.split(" ")),r=n.next();!r.done;r=n.next())switch(r.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&st(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&st(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&st(e.textDecoration,"overline")}}function je(e,t,n,r,i){return i=i===void 0?!0:i,(e=Sa(e,n,r))?e:i?Fo(t,n,r):null}function Fo(e,t,n){if(!e)return null;var r=bt(e,Ho,n);return r||Vp(e,t,n)}function Sa(e,t,n){var r=bt(e,Ho,n);return r||Vp(e,t,n)}function Vp(e,t,n){e=Vo(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var o=Mn(e[i],"urn:ebu:tt:style",n);o||(o=bt(e[i],Ho,n)),o||(o=Sa(e[i],t,n)),o&&(r=o)}return r}function Vo(e,t,n,r,i){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;s&&!(e=i?Mn(s,i,t):s.getAttribute(t))&&(s=s.parentNode,s instanceof Element););if(t=e){for(t=h(t.split(" ")),i=t.next();!i.done;i=t.next())for(i=i.value,e=h(n),s=e.next();!s.done;s=e.next())if(s=s.value,r+s.getAttribute("xml:id")==i){o.push(s);break}}return o}function Qw(e,t,n,r){return e=Hp(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function Hp(e,t){var n=Ea(e.getAttribute("begin"),t),r=Ea(e.getAttribute("end"),t),i=Ea(e.getAttribute("dur"),t);return r==null&&i!=null&&(r=n+i),{start:n,end:r}}function Ea(e,t){var n=null;if(qp.test(e)){n=qp.exec(e);var r=Number(n[1]),i=Number(n[2]),o=Number(n[3]),s=Number(n[4]);s+=(Number(n[5])||0)/t.h,o+=s/t.frameRate,n=o+60*i+3600*r}else if(Kp.test(e))n=Ia(Kp,e);else if(Gp.test(e))n=Ia(Gp,e);else if(zp.test(e))n=zp.exec(e),n=Number(n[1])/t.frameRate;else if(Xp.test(e))n=Xp.exec(e),n=Number(n[1])/t.g;else if(Wp.test(e))n=Ia(Wp,e);else if(e)throw new x(2,2,2001,"Could not parse cue time range in TTML");return n}function Ia(e,t){var n=e.exec(t);return n==null||n[0]==""?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}O("shaka.text.TtmlTextParser",Bt),Bt.prototype.parseMedia=Bt.prototype.parseMedia,Bt.prototype.parseInit=Bt.prototype.parseInit;function Zw(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var Aa=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,eT=/^(\d{1,2}(?:\.\d+)?|100)%$/,lr=/^(\d+px|\d+em|\d*\.?\d+c)$/,Ma=/^(\d+)px (\d+)px$/,qp=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Kp=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Gp=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,zp=/^(\d*(?:\.\d*)?)f$/,Xp=/^(\d*(?:\.\d*)?)t$/,Wp=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,tT={left:un,center:"center",right:"end",start:un,end:"end"},nT={left:"line-left",center:"center",right:"line-right"},ui=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Ho=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],rT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Ce["application/ttml+xml"]=function(){return new Bt};function ht(){this.u=new Bt}ht.prototype.parseInit=function(e){var t=!1;if(new oe().box("moov",pe).box("trak",pe).box("mdia",pe).box("minf",pe).box("stbl",pe).V("stsd",Li).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new x(2,2,2007)},ht.prototype.parseMedia=function(e,t){var n=this,r=!1,i=[];if(new oe().box("mdat",zn(function(o){r=!0,i=i.concat(n.u.parseMedia(o,t))})).parse(e,!1),!r)throw new x(2,2,2007);return i},O("shaka.text.Mp4TtmlParser",ht),ht.prototype.parseMedia=ht.prototype.parseMedia,ht.prototype.parseInit=ht.prototype.parseInit,Ce['application/mp4; codecs="stpp"']=function(){return new ht},Ce['application/mp4; codecs="stpp.ttml"']=function(){return new ht},Ce['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new ht},Ce['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new ht};function pt(){}pt.prototype.parseInit=function(){},pt.prototype.parseMedia=function(e,t){var n=be(e);n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var r=n.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new x(2,2,2e3);if(n=t.periodStart,r[0].includes("X-TIMESTAMP-MAP")){var i=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=r[0].match(/MPEGTS:(\d+)/m);if(i&&o){if(n=Ca(new or(i[1])),n==null)throw new x(2,2,2e3);for(o=Number(o[1]),i=t.segmentStart;95443.7176888889<=i;)i-=95443.7176888889,o+=8589934592;n=t.periodStart+o/9e4-n}}o=[],i=h(r[0].split(`
`));for(var s=i.next();!s.done;s=i.next())if(s=s.value,/^Region:/.test(s)){s=new or(s);var u=new Pn;Cn(s),sr(s);for(var a=Cn(s);a;){var l=u,c=a;(a=/^id=(.*)$/.exec(c))?l.id=a[1]:(a=/^width=(\d{1,2}|100)%$/.exec(c))?l.width=Number(a[1]):(a=/^lines=(\d+)$/.exec(c))?(l.height=Number(a[1]),l.heightUnits=2):(a=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(l.regionAnchorX=Number(a[1]),l.regionAnchorY=Number(a[2])):(a=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(l.viewportAnchorX=Number(a[1]),l.viewportAnchorY=Number(a[2])):/^scroll=up$/.exec(c)&&(l.scroll="up"),sr(s),a=Cn(s)}o.push(u)}for(i=new Map,Yp(i),s=[],r=h(r.slice(1)),u=r.next();!u.done;u=r.next()){if(u=u.value.split(`
`),(u.length!=1||u[0])&&!/^NOTE($|[ \t])/.test(u[0])&&u[0]=="STYLE"&&u[1].includes("::cue")){l="global",(a=u[1].match(/\((.*)\)/))&&(l=a.pop()),a=u.slice(2,-1),u[1].includes("}")&&(c=/\{(.*?)\}/.exec(u[1]))&&(a=c[1].split(";")),c=new se(0,0,"");for(var f=!1,d=0;d<a.length;d++){var g=/^\s*([^:]+):\s*(.*)/.exec(a[d]);if(g){var v=g[2].trim().replace(";","");switch(g[1].trim()){case"background-color":f=!0,c.backgroundColor=v;break;case"color":f=!0,c.color=v;break;case"font-family":f=!0,c.fontFamily=v;break;case"font-size":f=!0,c.fontSize=v;break;case"font-weight":700<=parseInt(v,10)&&(f=!0,c.fontWeight=700);break;case"font-style":switch(v){case"normal":f=!0,c.fontStyle=ls;break;case"italic":f=!0,c.fontStyle="italic";break;case"oblique":f=!0,c.fontStyle="oblique"}break;case"opacity":f=!0,c.opacity=parseFloat(v);break;case"white-space":f=!0,c.wrapLine=v!="noWrap"}}}f&&i.set(l,c)}if(d=n,u.length==1&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||u[0]=="STYLE")u=null;else{if(l=null,u[0].includes("-->")||(l=u[0],u.splice(0,1)),a=new or(u[0]),c=Ca(a),g=Zt(a,/[ \t]+--\x3e[ \t]+/g),f=Ca(a),c==null||g==null||f==null)throw new x(2,2,2001,"Could not parse cue time range in WebVTT");for(c+=d,f+=d,d=u.slice(1).join(`
`).trim(),i.has("global")?(u=i.get("global").clone(),u.startTime=c,u.endTime=f,u.payload=""):u=new se(c,f,""),$p(d,u,i),sr(a),c=Cn(a);c;)Qp(u,c,o),sr(a),c=Cn(a);l!=null&&(u.id=l)}u&&s.push(u)}return s};function Yp(e){for(var t=h(Object.entries(za)),n=t.next();!n.done;n=t.next()){var r=h(n.value);n=r.next().value,r=r.next().value;var i=new se(0,0,"");i.color=r,e.set(n,i)}for(t=h(Object.entries(Xa)),n=t.next();!n.done;n=t.next())r=h(n.value),n=r.next().value,r=r.next().value,i=new se(0,0,""),i.backgroundColor=r,e.set(n,i)}function $p(e,t,n){n.size===0&&Yp(n),e=iT(e);var r=Bu("<span>"+e+"</span>","span");if(r){var i=[];if(r=r.childNodes,r.length==1){var o=r[0];if(o.nodeType==Node.TEXT_NODE||o.nodeType==Node.CDATA_SECTION_NODE){t.payload=e;return}}for(e=h(r),r=e.next();!r.done;r=e.next())Jp(r.value,t,i,n);t.nestedCues=i}else t.payload=e}function iT(e){for(var t=[],n=-1,r="",i=0;i<e.length;i++)if(e[i]==="/"){var o=e.indexOf(">",i);if(o<=i)return e;o=e.substring(i+1,o);var s=t.pop();if(o&&s){if(s===o)r+="/"+o+">";else{if(!s.startsWith("c.")||o!=="c")return e;r+="/"+s+">"}i+=o.length+1}else return e}else e[i]==="<"?n=i+1:e[i]===">"&&0<n&&(t.push(e.substr(n,i-n)),n=-1),r+=e[i];return r}function qo(e,t){return e&&0<e.length?e:t}function Jp(e,t,n,r){var i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var o=h(e.nodeName.split(/[ .]+/)),s=o.next();!s.done;s=o.next()){if(s=s.value,r.has(s)){var u=r.get(s);u&&(i.backgroundColor=qo(u.backgroundColor,i.backgroundColor),i.color=qo(u.color,i.color),i.fontFamily=qo(u.fontFamily,i.fontFamily),i.fontSize=qo(u.fontSize,i.fontSize),i.fontWeight=u.fontWeight,i.fontStyle=u.fontStyle,i.opacity=u.opacity,i.wrapLine=u.wrapLine)}switch(s){case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline")}}if(Nd(e))for(o=!0,r=h(e.textContent.split(`
`)),e=r.next();!e.done;e=r.next())e=e.value,o||(o=t.clone(),o.lineBreak=!0,n.push(o)),0<e.length&&(o=i.clone(),o.payload=e,n.push(o)),o=!1;else for(t=h(e.childNodes),e=t.next();!e.done;e=t.next())Jp(e.value,i,n,r)}function Qp(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=Kt:e.textAlign=os[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=oT(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=as[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=us,e.line=Number(n[1]),n[2]&&(e.lineAlign=as[n[2].toUpperCase()]))}function oT(e,t){var n=e.filter(function(r){return r.id==t});return n.length?n[0]:null}function Ca(e){if(e=Zt(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}O("shaka.text.VttTextParser",pt),pt.prototype.parseMedia=pt.prototype.parseMedia,pt.prototype.parseInit=pt.prototype.parseInit,Ce["text/vtt"]=function(){return new pt},Ce['text/vtt; codecs="vtt"']=function(){return new pt},Ce['text/vtt; codecs="wvtt"']=function(){return new pt};function tn(){this.g=null}tn.prototype.parseInit=function(e){var t=this,n=!1;if(new oe().box("moov",pe).box("trak",pe).box("mdia",pe).V("mdhd",function(r){r=Vs(r.reader,r.version),t.g=r.timescale}).box("minf",pe).box("stbl",pe).V("stsd",Li).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new x(2,2,2008);if(!n)throw new x(2,2,2008)},tn.prototype.parseMedia=function(e,t){if(!this.g)throw new x(2,2,2008);var n=0,r=[],i,o=[],s=!1,u=!1,a=!1,l=null;if(new oe().box("moof",pe).box("traf",pe).V("tfdt",function(S){s=!0,n=Fs(S.reader,S.version).rd}).V("tfhd",function(S){l=Mc(S.reader,S.flags).ke}).V("trun",function(S){u=!0,r=Cc(S.reader,S.version,S.flags).Ce}).box("mdat",zn(function(S){a=!0,i=S})).parse(e,!1),!a&&!s&&!u)throw new x(2,2,2008);for(var c=n,f=new Z(i,0),d=h(r),g=d.next();!g.done;g=d.next()){g=g.value;var v=g.Td||l,y=g.Xc?n+g.Xc:c;c=y+(v||0);var T=0;do{var w=f.O();T+=w;var A=f.O(),I=null;oc(A)=="vttc"?8<w&&(I=f.hb(w-8)):f.skip(w-8),v&&I&&(w=sT(I,t.periodStart+y/this.g,t.periodStart+c/this.g),o.push(w))}while(g.sampleSize&&T<g.sampleSize)}return o.filter(zt)};function sT(e,t,n){var r,i,o;return new oe().box("payl",zn(function(s){r=be(s)})).box("iden",zn(function(s){i=be(s)})).box("sttg",zn(function(s){o=be(s)})).parse(e),r?uT(r,i,o,t,n):null}function uT(e,t,n,r,i){if(r=new se(r,i,""),$p(e,r,new Map),t&&(r.id=t),n)for(e=new or(n),t=Cn(e);t;)Qp(r,t,[]),sr(e),t=Cn(e);return r}O("shaka.text.Mp4VttParser",tn),tn.prototype.parseMedia=tn.prototype.parseMedia,tn.prototype.parseInit=tn.prototype.parseInit,Ce['application/mp4; codecs="wvtt"']=function(){return new tn};function nn(){}nn.prototype.parseInit=function(){},nn.prototype.parseMedia=function(e){var t=be(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=h(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var r=new or(n[0]),i=Zp(r),o=Zt(r,/,/g);if(r=Zp(r),i==null||o==null||r==null)throw new x(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new se(i,r,n.slice(1).join(`
`).trim()))}return e};function Zp(e){if(e=Zt(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}O("shaka.text.SbvTextParser",nn),nn.prototype.parseMedia=nn.prototype.parseMedia,nn.prototype.parseInit=nn.prototype.parseInit,Ce["text/x-subviewer"]=function(){return new nn};function Ft(){this.u=new pt}Ft.prototype.parseInit=function(){},Ft.prototype.parseMedia=function(e,t){var n=be(e);return n=eg(n),n=Q(fn(n)),this.u.parseMedia(n,t)};function eg(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=h(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`)+`

`;return t}O("shaka.text.SrtTextParser",Ft),Ft.srt2webvtt=eg,Ft.prototype.parseMedia=Ft.prototype.parseMedia,Ft.prototype.parseInit=Ft.prototype.parseInit,Ce["text/srt"]=function(){return new Ft};function rn(){}rn.prototype.parseInit=function(){},rn.prototype.parseMedia=function(e){var t="",n="";e=be(e).split(/\r?\n\s*\r?\n/),e=h(e);for(var r=e.next();!r.done;r=e.next()){var i=lT.exec(r.value);i&&(r=i[1],i=i[2],r=="V4 Styles"||r=="V4+ Styles"?t=i:r=="Events"&&(n=i))}e=[],r=null,t=h(t.split(/\r?\n/));for(var o=t.next();!o.done;o=t.next())if(i=o.value,!/^\s*;/.test(i)&&(o=rg.exec(i))){if(i=o[1].trim(),o=o[2].trim(),i=="Format")r=o.split(Ko);else if(i=="Style"){i=o.split(Ko),o={};for(var s=0;s<r.length&&s<i.length;s++)o[r[s]]=i[s];e.push(o)}}for(r=[],t=null,i={},n=h(n.split(/\r?\n/)),o=n.next();!o.done;i={od:i.od},o=n.next())if(o=o.value,!/^\s*;/.test(o)&&(s=rg.exec(o))){if(o=s[1].trim(),s=s[2].trim(),o=="Format")t=s.split(Ko);else if(o=="Dialogue"){s=s.split(Ko),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];u=ng(o.Start);var a=ng(o.End);s=new se(u,a,s.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),i.od=o.Style,(o=e.find(function(l){return function(c){return c.Name==l.od}}(i)))&&aT(s,o),r.push(s)}}return r};function aT(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=tg(n))&&(e.color=n),(n=t.BackColour)&&(n=tg(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=pr,e.textAlign="start";break;case 2:e.displayAlign=pr,e.textAlign=Kt;break;case 3:e.displayAlign=pr,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Kt;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Kt;break;case 11:e.displayAlign="center",e.textAlign="end"}(n=t.AlphaLevel)&&(e.opacity=parseFloat(n))}function tg(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function ng(e){return e=cT.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}O("shaka.text.SsaTextParser",rn),rn.prototype.parseMedia=rn.prototype.parseMedia,rn.prototype.parseInit=rn.prototype.parseInit;var lT=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,rg=/^\s*([^:]+):\s*(.*)/,Ko=/\s*,\s*/,cT=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Ce["text/x-ssa"]=function(){return new rn};/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function ig(){}var ai;function og(){ai?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(ai=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=fT):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function fT(e,t){var n=this,r;return E(function(i){return i.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),m(i,ai.call(n,e,t),2)):(r=i.h,dg(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=ai,i.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=sg,i.return(sg.call(n,e,t))))})}function sg(e,t){var n=this,r,i,o,s,u,a,l,c,f,d;return E(function(g){if(g.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=fg(e),i=[],o=h(t),s=o.next();!s.done;s=o.next())u=s.value,a=ug(u.videoCapabilities,r),l=ug(u.audioCapabilities,r),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||(c=Object.assign({},u),c.videoCapabilities=a,c.audioCapabilities=l,i.push(c));if(!i.length)throw f=Error("Unsupported keySystem or supportedConfigurations."),f.name="NotSupportedError",f.code=DOMException.NOT_SUPPORTED_ERR,f;return m(g,ai.call(n,e,i),2)}return d=g.h,g.return(new Go(d,r))})}function ug(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}O("EmeEncryptionSchemePolyfill",ig),ig.install=og;function ag(){}var li;function lg(){li?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(li=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=dT):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function dT(e){var t=this,n,r;return E(function(i){return i.g==1?(console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),m(i,li.call(t,e),2)):(n=i.h,e.keySystemConfiguration?(r=n.keySystemAccess)&&dg(r)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=li,i.return(n)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=cg,i.return(cg.call(t,e))):i.return(n))})}function cg(e){var t=this,n,r,i,o,s,u,a,l,c;return E(function(f){switch(f.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,i=r.keySystem,o=r.audio&&r.audio.encryptionScheme,s=r.video&&r.video.encryptionScheme,n=fg(i),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=n||s&&s!=n)?f.return(u):m(f,li.call(t,e),2);case 2:if(a=f.h,a.keySystemAccess){a.keySystemAccess=new Go(a.keySystemAccess,n),f.A(3);break}if(!e.keySystemConfiguration){f.A(3);break}var d=e.keySystemConfiguration,g=[],v=[];return d.audio&&g.push({robustness:d.audio.robustness||"",contentType:e.audio.contentType}),d.video&&v.push({robustness:d.video.robustness||"",contentType:e.video.contentType}),d={initDataTypes:d.initDataType?[d.initDataType]:[],distinctiveIdentifier:d.distinctiveIdentifier,persistentState:d.persistentState,sessionTypes:d.sessionTypes},g.length&&(d.audioCapabilities=g),v.length&&(d.videoCapabilities=v),l=d,c=a,m(f,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[l]),5);case 5:c.keySystemAccess=f.h;case 3:return f.return(a)}})}O("McEncryptionSchemePolyfill",ag),ag.install=lg;function Go(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}Go.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=h(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=h(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Go.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function fg(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function dg(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function ka(){}function hg(){og(),lg()}O("EncryptionSchemePolyfills",ka),ka.install=hg,typeof Xo<"u"&&Xo.exports&&(Xo.exports=ka)}).call(gt,fi,fi,void 0);for(var Ht in gt.shaka)cr[Ht]=gt.shaka[Ht]})()})(Na);var wT=Object.freeze(pT({__proto__:null,[Symbol.toStringTag]:"Module",default:Na},[Na]));export{wT as s};
