import{r as e,s as t,e as i,a as r,g as n,b as o,c as d}from"./index.25802f82.js";import{e as a}from"./base.50b98d34.js";import"./vendor.03bc8c46.js";function s(...e){console.log(...e)}function l(e,t,i,r){if(Array.isArray(r)){if(1!==r[0].data.children.length)return c(t,r);const n=r[0].data.children[0];if("t3"!==n.kind)return c(t,r);n.data.name;const o=r[1].data.children[0];o&&"t1"===o.kind&&o.data.parent_id;let d=_(e,{kind:"post",post:n,replies:r[1]});if("comments"===i.kind&&null!=i.focus_comment){const t="t1_"+i.focus_comment.toLowerCase();e.has(t)?d=t:s("focused comment not found in tree `"+t+"`")}return b(e,d)}if("Listing"===r.kind){const t={kind:"subreddit_unloaded",listing:r,details:"subreddit"===i.kind?i.sub:"unknown"};_(e,t);return b(e,p(t))}if("wikipage"===r.kind){const i={kind:"wikipage",listing:r,pathraw:t};_(e,i);return b(e,p(i))}return"t5"===r.kind?s("TODO t5"):"UserList"===r.kind?s("TODO userlist"):S(r.kind),c(t,r)}function u(e){return"homepage"===e.kind?"SR_home":"mod"===e.kind?"SR_mod":"multireddit"===e.kind?"SR_multi/u:"+e.user.toLowerCase()+"/m:"+e.multireddit.toLowerCase():"userpage"===e.kind?"SR_user/"+e.user.toLowerCase():"subreddit"===e.kind?"SR_sub/"+e.subreddit.toLowerCase():void r(e)}function c(t,i){return{ref:{kind:"post",parent:null,url:null,replies:null,content:{kind:"post",title:{text:"Error!"},collapsible:!1,body:{kind:"richtext",content:[...H(t),e.pre(JSON.stringify(i,null,"  "),"json")]},show_replies_when_below_pivot:!1},internal_data:null,display_style:"centered"},err:void 0}}function m(e){const t=k(e,void 0);return t?p(t):"__ERROR_FULLNAME__"}function p(e){return"comment"===e.kind?e.comment.data.name:"post"===e.kind?e.post.data.name:"subreddit_unloaded"===e.kind?"unknown"===e.details?"__UNKNOWN_LISTING_ROOT":u(e.details):"depth_more"===e.kind?"DEPTH_MORE_"+e.parent_permalink:"more"===e.kind?"MORE_"+e.item.data.children.join(","):"wikipage"===e.kind?"WIKIPAGE_there_should_only_be_one":void r(e)}function k(e,t){return"t1"===e.kind?{kind:"comment",comment:e}:"t3"===e.kind?{kind:"post",post:e,replies:"not_loaded"}:"more"===e.kind?0===e.data.children.length?null==t?void s("TODO setUpCommentOrUnmounted was called with not loaded parent but req. parent submission"):{kind:"depth_more",item:e,parent_permalink:t}:{kind:"more",item:e}:(S(e.kind),void s("TODO setUpCommentOrUnmounted",e.kind,e))}function h(e,t,i){const r=k(t,i);null!=r&&_(e,r)}function _(e,t){const i=p(t);if(e.get(i))return console.log("Note: Two objects with the same id were created. ID: `"+i+"`"),i;if("comment"===t.kind){const r=t.comment;if("t1"===r.kind){const t=r.data;if(t.replies)for(const i of t.replies.data.children)h(e,i,t.permalink)}else if("more"===r.kind){if("t1__"===r.data.name)return i}else console.log("TODO setUpMap "+r.kind)}else if("post"===t.kind){const i=t.post.data;if(i.crosspost_parent_list)for(const t of i.crosspost_parent_list)_(e,{kind:"post",post:{kind:"t3",data:t},replies:"not_loaded"});if("not_loaded"!==t.replies)for(const r of t.replies.data.children)h(e,r,i.permalink)}else if("subreddit_unloaded"===t.kind)for(const r of t.listing.data.children)h(e,r,"not_loaded");else"more"===t.kind||"depth_more"===t.kind||"wikipage"===t.kind||r(t);return e.set(i,{kind:"unprocessed",link:{ref:void 0,err:"processing not completed"},data:t}),i}function b(e,t){const i=e.get(t);if(!i)return{ref:void 0,err:"post was not found in tree (TODO load more) ("+t+")"};if("unprocessed"===i.kind){i.kind="processing";const t=function(e,t){var i,n;if("comment"===t.data.kind){const r=t.data.comment,o=r.data,d={reply:{action:ue(o.name),locked:o.locked},items:[]};if(o.replies)for(const t of o.replies.data.children)d.items.push(b(e,m(t)));const a=e.get(o.parent_id);return{kind:"post",url:A(o.permalink,{context:"3"}),parent:b(e,o.parent_id),replies:d,content:{kind:"post",title:null,author:pe(o,x(null!=(i=o.all_awardings)?i:[])),body:we(o),info:f(r),collapsible:{default_collapsed:null!=(n=o.collapsed)&&n},show_replies_when_below_pivot:!0,actions:{vote:"post"===(null==a?void 0:a.data.kind)&&"CHAT"===a.data.post.data.discussion_type?void 0:re(o),code:fe(o.body),other:[ae(o.name),ce(o.name,o.saved),le(o.name,o.subreddit)]}},internal_data:t.data,display_style:"centered"}}if("post"===t.data.kind){const i=t.data.post,r=i.data;return{kind:"post",url:r.permalink,parent:b(e,u({kind:"subreddit",subreddit:r.subreddit,base:["r",r.subreddit]})),replies:"not_loaded"!==t.data.replies?{reply:{action:ue(r.name),locked:r.locked},items:t.data.replies.data.children.map((t=>b(e,m(t))))}:null,content:{kind:"post",title:{text:r.title},collapsible:{default_collapsed:!0},flair:xe(r),author:pe(r),body:ge(r),thumbnail:ye(r,"open"),info:f(i),show_replies_when_below_pivot:!1,actions:{vote:re(r),code:fe(r.is_self?r.selftext:r.url),other:[{kind:"link",url:"/domain/"+r.domain,text:r.domain},ae(r.name),ce(r.name,r.saved),{kind:"link",url:r.permalink.replace("/comments/","/duplicates/"),text:"Duplicates"},le(r.name,r.subreddit)]}},internal_data:t.data,display_style:"centered"}}if("subreddit_unloaded"===t.data.kind){const i=[];for(const r of t.data.listing.data.children)i.push(b(e,m(r)));return null!=t.data.listing.data.after&&i.push(b(e,"TODO next")),{kind:"post",url:null,parent:null,replies:{items:i},content:{kind:"post",title:{text:p(t.data)},collapsible:!1,body:{kind:"none"},show_replies_when_below_pivot:!1},internal_data:t.data,display_style:"fullscreen"}}if("depth_more"===t.data.kind){const i=t.data.item.data;return{kind:"loader",parent:b(e,i.parent_id),replies:null,url:null}}if("more"===t.data.kind){const i=t.data.item.data;return{kind:"loader",parent:b(e,i.parent_id),replies:null,url:null}}if("wikipage"===t.data.kind){const e=t.data.listing,i=t.data.pathraw.substr(t.data.pathraw.lastIndexOf("/")+1);return{kind:"post",url:t.data.pathraw,parent:null,replies:null,content:{kind:"post",title:{text:i},collapsible:!1,body:{kind:"text",content:e.data.content_html,markdown_format:"reddit_html"},show_replies_when_below_pivot:!1,info:{edited:{date:1e3*e.data.revision_date}},author:ke(e.data.revision_by),actions:{other:e.data.may_revise?[{kind:"link",text:"Edit",url:"TODO edit wiki page"}]:[]}},internal_data:t.data,display_style:"centered"}}r(t.data)}(e,i);return[i.link.ref,i.link.err]=[t,void 0],i.kind="processed",i.link}if("processing"===i.kind||"processed"===i.kind)return i.link;r(i.kind)}function f(e){const t=e.data;return{creation_date:1e3*t.created_utc,edited:t.edited?{date:1e3*t.edited}:void 0,pinned:t.pinned||t.stickied||!1,in:"t3"===e.kind?{name:t.subreddit_name_prefixed,link:"/"+t.subreddit_name_prefixed}:void 0,comments:"t3"===e.kind?e.data.num_comments:void 0}}const w="biw1k0YZmDUrjg",g="https://thread.pfg.pw/login/reddit";function y(e){var t,i;if(null==e.type)return[];if("text"===e.type&&(null==e.text||""===e.text))return[];const r="richtext"===e.type?(null!=(t=e.richtext)?t:[]).map((e=>"text"===e.e?{kind:"text",text:e.t}:"emoji"===e.e?{kind:"emoji",url:e.u,name:e.a,w:16,h:16}:(S(e.e),{kind:"text",text:"#TODO("+e.e+")"}))):"text"===e.type?[{kind:"text",text:e.text}]:[{kind:"text",text:"TODO: "+e.type}],n=r.map((e=>"text"===e.kind?e.text:"")).join("");return[{color:null!=(i=e.background_color)?i:void 0,fg_color:"light"===e.text_color?"light":"dark",elems:r,content_warning:n.toLowerCase().startsWith("cw:")||n.toLowerCase().startsWith("tw:")}]}function x(e){const t=[];for(const i of e.sort(((e,t)=>t.count-e.count))){t.length>0&&t.push({kind:"text",text:" "});const e=i.resized_static_icons[0];t.push({kind:"emoji",url:e.url,w:e.width,h:e.height,name:i.name}),i.count>1&&t.push({kind:"text",text:"Ã—"+i.count})}return 0===t.length?[]:[{elems:t,content_warning:!1,system:""}]}function v(e){return T.encode({kind:"vote",query:e})}function N(e){return T.encode({kind:"delete",fullname:e})}const T=a("act");function O(t,i){try{return E(t.document,i)}catch(r){return console.log("Error parsing richtext:",r),[e.p(e.error("Error parsing richtext: "+r,r))]}}function E(t,i){return t.map((t=>function(t,i){var r,n,o;switch(t.e){case"par":if(1!==t.c.length||"gif"!==(null==(r=t.c[0])?void 0:r.e)&&"img"!==(null==(n=t.c[0])?void 0:n.e))return 1===t.c.length&&"text"===(null==(o=t.c[0])?void 0:o.e)&&t.c[0].t.match(/^---+$/)?e.hr():e.p(...I(t.c,i));{const r=t.c[0],n=i.media_metadata[r.id];return n?e.kind("body",{body:P(n,r.id.split("|")[0]).body}):e.p(e.error("Missing media id "+r.id,n))}case"img":case"video":case"gif":{const r=i.media_metadata[t.id];return r?e.kind("body",{body:P(r,t.c).body}):e.p(e.error("unknown id "+t.id,i))}case"h":return e.hn(t.l,...I(t.c,i));case"hr":return e.hr();case"blockquote":return e.blockquote(...E(t.c,i));case"list":return e.kind("list",{ordered:t.o},t.c.map((t=>e.li(...E(t.c,i)))));case"code":return e.pre(t.c.map((e=>{switch(e.e){case"raw":return e.t;case"unsupported":return"Err Â«"+JSON.stringify(e)+"Â»"}})).join("\n"));case"table":return e.table(t.h.map((t=>function(t,i){var r;return e.th(null!=t.a?{L:"left",C:"center",R:"right"}[t.a]:void 0,...I(null!=(r=t.c)?r:[],i))}(t,i))),...t.c.map((t=>t.map((t=>function(t,i){return e.td(...I(t.c,i))}(t,i))))))}return S(t.e),e.p(e.error("TODO "+t.e,t))}(t,i)))}function S(e){console.log("Expected unsupported",e)}function P(t,i){var r,o,d,a;if("valid"!==t.status)return{thumb:null,aspect:void 0,body:{kind:"richtext",content:[e.p(e.error("Bad Status "+t.status+", "+i,t))]}};if("Image"===t.e){const e=null!=(r=t.p[0])?r:t.s;return{thumb:null!=(o=e.u)?o:"error",aspect:e.x/e.y,body:{kind:"captioned_image",url:t.s.u,w:t.s.x,h:t.s.y,caption:i}}}if("AnimatedImage"===t.e){const e=null==(d=t.p)?void 0:d[0];return{thumb:e?e.u:"error",aspect:e?e.x/e.y:void 0,body:{kind:"video",source:null!=t.s.mp4?{kind:"video",sources:[{url:t.s.mp4,quality:t.s.x+"Ã—"+t.s.y}]}:{kind:"img",url:t.s.gif},aspect:t.s.x/t.s.y,gifv:!0,caption:i}}}return"RedditVideo"===t.e?{thumb:null,aspect:void 0,body:{kind:"video",source:n(t.id),aspect:t.x/t.y,gifv:null!=(a=t.isGif)&&a,caption:i}}:(S(t.e),{thumb:null,aspect:void 0,body:{kind:"richtext",content:[e.p(e.error("TODO "+t.e+", "+i,t))]}})}function j(e){return e>=10240&&e<=10495}function R(t,i,r){if(0===i.length){t=t.replaceAll("Â¯_(ãƒ„)_/Â¯","Â¯\\_(ãƒ„)_/Â¯");let i=0,r=0;if([...t].forEach((e=>{const t=e.codePointAt(0);8206!==t&&32!==t&&(r+=1),j(t)&&i++})),i>.9*r&&i>10){const i=[];let r=[];for(const e of t.split(" ")){[...e].filter((e=>j(e.codePointAt(0)))).length>5?i.length>0?(r.length>0&&(i[i.length-1]+=" "+r.join(" ")),r=[],i.push(e)):(i.push([...r,e].join(" ")),r=[]):r.push(e)}return i.push(...r),[e.txt(i.join("\n"))]}return[e.txt(t)]}const n=[];let o=0;const d=i=>{const r=t.substring(o,i);r.length>0&&n.push(e.txt(r))};return i.forEach((([i,r,a])=>{d(r),o=r+a;const s=t.substr(r,a),l={strong:!!(1&(u=i)),emphasis:!!(2&u),strike:!!(8&u),super:!!(32&u),code:!!(64&u),error:-108&u?"unsupported style "+u.toString(2):void 0};var u;null!=l.error?n.push(e.error(s,l.error)):l.code?n.push(e.code(s)):n.push(e.txt(s,{strong:l.strong,emphasis:l.emphasis,strikethrough:l.strike,superscript:l.super}))})),d(t.length),n}function I(t,i){return(null!=t?t:[]).flatMap((t=>function(t,i){var r,n,o;switch(t.e){case"text":return R(t.t,null!=(r=t.f)?r:[]);case"r/":case"u/":return[e.link("/"+t.e+t.t,{is_user_link:"u/"===t.e?t.t:void 0},e.txt((t.l?"/":"")+t.e+t.t))];case"link":return[e.link(t.u,{title:t.a},...R(t.t,null!=(n=t.f)?n:[]))];case"br":return[e.br()];case"spoilertext":return[e.spoiler(...I(t.c,i))];case"raw":return[e.txt(t.t)];case"gif":case"img":{const r=i.media_metadata[t.id];return r?"valid"!==r.status?[e.error("Bad status "+r.status,r)]:"AnimatedImage"===r.e?[e.link(null!=(o=r.s.mp4)?o:r.s.gif,{},e.txt("[embedded "+t.id.split("|")[0]+"]"))]:"Image"===r.e?"emoji"===r.t?[{kind:"emoji",url:r.s.u,name:":"+t.id.split("|")[2]+":"}]:[e.link(r.s.u,{},e.txt("[embedded "+t.id.split("|")[0]+"]"))]:[e.error("Unsupported "+r.e,r)]:[e.error("Missing media id "+t.id,r)]}}return S(t.e),[e.error("TODO "+t.e,t)]}(t,i)))}function C(e){return"https://"+(e?"oauth.reddit.com":"www.reddit.com")}let D=[];function q(){return new Promise((e=>{D.push(e),1===D.length&&async function(){var e;const t=localStorage.getItem("reddit-secret");if(""===t||null==t){const e=localStorage.getItem("reddit-app-data");let t;if(null!=e){const i=JSON.parse(e);if(!(i.expires<Date.now()))return i.access_token;t=i.device_id}else t=[...crypto.getRandomValues(new Uint8Array(25))].map((e=>e.toString(16).padStart(2,"0"))).join("");const r=await fetch("https://www.reddit.com/api/v1/access_token",{method:"POST",mode:"cors",credentials:"omit",headers:{Authorization:"Basic "+btoa(w+":"),"Content-Type":"application/x-www-form-urlencoded"},body:i({grant_type:"https://oauth.reddit.com/grants/installed_client",device_id:t,redirect_uri:g})}).then((e=>e.json()));if(r.error)throw console.log(r),new Error("error: "+JSON.stringify(r));const n={access_token:r.access_token,expires:Date.now()+1e3*r.expires_in,scope:r.scope,device_id:t};return localStorage.setItem("reddit-app-data",JSON.stringify(n)),n.access_token}const r=JSON.parse(t);if(console.log(r.expires,Date.now()),r.expires<Date.now()){console.log("Token expired, refreshingâ€¦");const[t,i]=await fetch("https://www.reddit.com/api/v1/access_token",{method:"POST",mode:"cors",credentials:"omit",headers:{Authorization:"Basic "+btoa(w+":"),"Content-Type":"application/x-www-form-urlencoded"},body:d`grant_type=refresh_token&refresh_token=${r.refresh_token}`}).then((async e=>[e.status,await e.json()]));if(200!==t)throw console.log("Error! got",i,"with status code",t),new Error("Status code "+t);if("error"in i)throw console.log("refresh attempt: ",i,r),new Error("Got error while refreshing token: "+i.error);const n={access_token:i.access_token,refresh_token:null!=(e=i.refresh_token)?e:r.refresh_token,expires:Date.now()+1e3*i.expires_in,scope:i.scope};return console.log("Refresh info:",i,n),localStorage.setItem("reddit-secret",JSON.stringify(n)),console.log("Refreshed âˆš"),n.access_token}return r.access_token}().then((e=>{D.forEach((t=>t(e))),D=[]})).catch((e=>{console.log("Get access token error",e),D.forEach((e=>e(null))),D=[]}))}))}function U(e){const[t,...i]=e.split("?");return[null!=t?t:"",new URLSearchParams(i.join("?"))]}function A(e,t){const[i,r]=U(e);for(const[n,o]of Object.entries(t))null!=o?r.set(n,o):r.delete(n);return i+"?"+r.toString()}function L(e,t,i){return{kind:"counter",unique_id:"/subscribe/"+e+"/",time:Date.now(),label:"Subscribe",incremented_label:"Subscribed",style:"pill-filled",incremented_style:"pill-empty",count_excl_you:i?t-1:t,you:i?"increment":void 0,actions:{increment:T.encode({kind:"subscribe",subreddit:e,direction:"sub"}),reset:T.encode({kind:"subscribe",subreddit:e,direction:"unsub"})}}}function M(t,i){try{return function(t,i){if("moderators"===t.kind)return{kind:"widget",title:"Moderators",raw_value:t,widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.link("/message/compose?to=/r/"+i,{style:"pill-empty"},e.txt("Message the mods"))),e.ul(...t.mods.map((t=>e.li(e.p(e.link("/u/"+t.name,{is_user_link:t.name},e.txt("u/"+t.name)),...y({type:t.authorFlairType,text:t.authorFlairText,text_color:t.authorFlairTextColor,background_color:t.authorFlairBackgroundColor,richtext:t.authorFlairRichText}).flatMap((t=>[e.txt(" "),e.flair(t)]))))))),e.p(e.link("/r/"+i+"/about/moderators",{},e.txt("View All Moderators")))]}}};if("community-list"===t.kind)return{kind:"widget",title:t.shortName,raw_value:t,widget_content:{kind:"list",items:t.data.map((t=>"subreddit"===t.type?{icon:t.communityIcon||void 0,name:{kind:"text",text:"r/"+t.name},click:{kind:"link",url:"/r/"+t.name},action:L(t.name,t.subscribers,t.isSubscribed)}:(S(t.type),{name:{kind:"text",text:"ERROR UNSUPPORTED"+t.type},click:{kind:"body",body:{kind:"richtext",content:[e.pre(JSON.stringify(t,null,"\t"),"json")]}}})))},actions_top:[{kind:"link",url:"/message/compose?to="+i,text:"Message the mods"}],actions_bottom:[{kind:"link",url:"/r/"+i+"/about/moderators",text:"View All Moderators"}]};if("id-card"===t.kind)return{kind:"widget",title:"Error!",raw_value:t,widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.error("Not supported "+t.kind,t))]}}};if("menu"===t.kind)return{kind:"widget",title:"Error!",raw_value:t,widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.error("Uh oh! TODO widget "+t.kind,t))]}}};if("textarea"===t.kind)return{kind:"widget",title:t.shortName,raw_value:t,widget_content:{kind:"body",body:{kind:"text",content:t.text,markdown_format:"reddit"}}};if("subreddit-rules"===t.kind)return{kind:"widget",title:t.shortName,raw_value:t,widget_content:{kind:"list",items:t.data.map(((e,t)=>({name:{kind:"text",text:t+1+". "+e.shortName},click:{kind:"body",body:{kind:"text",content:e.description,markdown_format:"reddit"}}})))}};if("image"===t.kind)return{kind:"widget",title:t.shortName,raw_value:t,widget_content:{kind:"image",src:t.data[t.data.length-1].url,link_url:t.data[t.data.length-1].linkUrl,width:t.data[t.data.length-1].width,height:t.data[t.data.length-1].height}};if("post-flair"===t.kind)return{kind:"widget",title:t.shortName,raw_value:t,widget_content:{kind:"list",items:t.order.map((e=>{const r=t.templates[e],n=y({type:r.type,text:r.text,text_color:r.textColor,background_color:r.backgroundColor,richtext:r.richtext});if(1!==n.length)throw new Error("bad flair");return{name:{kind:"flair",flair:n[0]},click:{kind:"link",url:"/r/"+i+'/search?q=flair:"'+encodeURIComponent(r.text)+'"&restrict_sr=1'}}}))}};if("custom"===t.kind)return{kind:"widget",title:t.shortName,raw_value:t,widget_content:{kind:"iframe",height:""+t.height,srcdoc:`\n            <head>\n                <link rel="stylesheet" href="${t.stylesheetUrl}">\n                <base target="_blank">\n            </head>\n            <body>${t.textHtml}</body>\n        `}};if("button"===t.kind)return{kind:"widget",title:t.shortName,raw_value:t,widget_content:{kind:"list",above_text:{kind:"text",content:t.description,markdown_format:"reddit"},items:t.buttons.map((e=>"text"===e.kind?{name:{kind:"text",text:e.text},click:{kind:"link",url:e.url}}:"image"===e.kind?{name:{kind:"image",src:e.url,w:e.width,h:e.height,alt:e.text},click:{kind:"link",url:e.linkUrl}}:(S(e.kind),{name:{kind:"text",text:"TODO "+e.kind},click:{kind:"body",body:{kind:"none"}}})))}};if("calendar"===t.kind)return{kind:"widget",title:t.shortName,raw_value:t,widget_content:{kind:"body",body:{kind:"array",body:t.data.flatMap(((t,i)=>[...0!==i?[{kind:"richtext",content:[e.hr()]}]:[],{kind:"text",content:t.title,markdown_format:"reddit"},{kind:"richtext",content:[e.p(e.timeAgo(1e3*t.startTime))]},{kind:"text",content:t.location,markdown_format:"reddit"},{kind:"text",content:t.description,markdown_format:"reddit"}]))}}};return S(t.kind),{kind:"widget",title:"Error!",raw_value:t,widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.error("Uh oh! Unsupported widget "+t.kind,t))]}}}}(t,i)}catch(r){return console.log("widget error",r),{kind:"widget",title:"Error!",raw_value:t,widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.error("Uh oh! Error "+r.toString(),t))]}}}}}function G(e,t,{collapsed:i}){return{kind:"thread",raw_value:e,body:{kind:"text",markdown_format:"reddit",content:e.data.description},display_mode:{body:i?"collapsed":"visible",comments:"visible"},link:"/r/"+t+"/about/sidebar",layout:"reddit-post",title:{text:"old.reddit sidebar"},actions:[],default_collapsed:!1}}function F(t){const i=t.widgets,r=e=>{const t=i.items[e];if(!t)throw new Error("bad widget "+e);return t},n=e=>M(e,t.subreddit),o=[...t.sub_t5?[(d=t.sub_t5,a=t.subreddit,{kind:"widget",title:d.data.title,raw_value:d,widget_content:{kind:"community-details",description:d.data.public_description},actions_bottom:[L(a,d.data.subscribers,null!=(s=d.data.user_is_subscriber)&&s)]})]:[],...t.sub_t5?[G(t.sub_t5,t.subreddit,{collapsed:!!i})]:[],...i?i.layout.sidebar.order.map((e=>n(r(e)))):[],...i?[n(r(i.layout.moderatorWidget))]:[]];var d,a,s;return 0===o.length&&o.push({kind:"widget",title:"Error",widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.txt("Failed to fetch sidebar for this page :("))]}},raw_value:t}),o}function V(e){var t,i,r;if(!e)return{kind:"thread",title:{text:"Listing"},body:{kind:"text",content:"Listing",markdown_format:"none"},display_mode:{body:"collapsed",comments:"collapsed"},link:"TODO no link",layout:"error",actions:[],default_collapsed:!1,raw_value:e};const n=[{text:"Posts",action:{kind:"link",url:"/r/"+e.subreddit},selected:!0}];e:if(e.widgets){const i=null==(t=e.widgets)?void 0:t.layout.topbar.order.length;if(0===i)break e;if(1!==i){n.push({text:"ERROR Topbar Order",action:{kind:"link",url:"error"},selected:!1});break e}const r=e.widgets.items[e.widgets.layout.topbar.order[0]];if("menu"!==r.kind){n.push({text:"ERROR Topbar Item",action:{kind:"link",url:"error"},selected:!1});break e}r.showWiki&&n.push({text:"Wiki",action:{kind:"link",url:"/r/"+e.subreddit+"/wiki/index"},selected:!1});const o=e=>"children"in e?{text:e.text,selected:!1,action:{kind:"menu",children:e.children.map(o)}}:"url"in e?{text:e.text,selected:!1,action:{kind:"link",url:e.url}}:void Re(e);n.push(...r.data.map((e=>({...o(e),selected:!1}))))}return{kind:"bio",...e.sub_t5?Ee(e.sub_t5.data):{banner:null,icon:null},name:{display:null==(i=e.sub_t5)?void 0:i.data.title,link_name:e.sub_t5?e.sub_t5.data.display_name_prefixed:"r/"+e.subreddit},body:null,subscribe:e.sub_t5?L(e.subreddit,e.sub_t5.data.subscribers,null!=(r=e.sub_t5.data.user_is_subscriber)&&r):void 0,menu:1===n.length?null:n,raw_value:e}}const W=a("deferred_inbox");function J(){return function(){const e=localStorage.getItem("reddit-secret");return null!=e&&""!==e}()?{actions:[{kind:"act",action:T.encode({kind:"log_out"}),text:"Log Out"}],inboxes:[{id:"/messages",name:"Messages",active_color:"orange",hydrate:W.encode({kind:"inbox"}),url:"/message/inbox"},{id:"/modmail",name:"Modmail",active_color:"green",hydrate:W.encode({kind:"modmail"}),url:"/mod/mail/all"}]}:{actions:[{kind:"link",url:Ne(),text:"Log In"},{kind:"link",url:"raw!https://www.reddit.com/register",text:"Sign Up"}],inboxes:[]}}function z(t,i,r){var n;const o=[];return r.warning&&o.push(...r.warning),{title:"Error View",navbar:J(),body:{kind:"one",item:{parents:[{kind:"thread",raw_value:i,body:{kind:"richtext",content:[...o,e.pre(JSON.stringify(i,null,"\t"),"json")]},display_mode:{body:"visible",comments:"visible"},link:t,layout:"error",actions:[],default_collapsed:!1}],replies:[]}},sidebar:null!=(n=r.sidebar)?n:void 0,display_style:"comments-view"}}function B(t,i,r,n){var o,d,a,s,l,u,c,m;const p=i;if(Array.isArray(r)){if(1!==r[0].data.children.length)return z(t,r,{sidebar:n.sidebar,warning:H(t)});const i=r[0].data.children[0];if("t3"!==i.kind)return z(t,r,{sidebar:n.sidebar,warning:H(t)});const s=i.data.name,l=null!=(o=i.data.suggested_sort)?o:"confidence",u=i.data.contest_mode,c=i.data.can_mod_post,m=i.data.permalink,k=i.data.locked,h="CHAT"===i.data.discussion_type,_=r[1].data.children,b=[],f=_[0];f&&"t1"===f.kind&&f.data.parent_id!==s&&b.push(oe(f.data.subreddit,(null!=s?s:"").replace("t3_",""),f.data.parent_id.replace("t1_","")));let w,g=_.map((e=>de(e,{link_fullname:s},{permalink:m,sort:l,is_chat:h})));if("comments"===p.kind&&null!=p.focus_comment){const e=e=>{if(1!==e.length)return;const t=e[0];return"thread"===t.kind?t:void 0},t=e=>{const t=e.raw_value;if("object"==typeof t&&t&&"data"in t&&"object"==typeof t.data&&t.data&&"name"in t.data&&"string"==typeof t.data.name){const e=t.data.name;return e.startsWith("t1_")?e.replace("t1_",""):void 0}};let i,r=e(g);for(;r;){if(t(r)===p.focus_comment){i=r;break}r=e(null!=(d=r.replies)?d:[])}if(i){for(r=e(g);r&&r!==i;){b.push(r);const t=r.replies;r.replies=void 0,r=e(null!=t?t:[])}if(r){b.push(r);const e=r.replies;r.replies=void 0,g=null!=e?e:[]}else g=[]}}return null!=r[1].data.after&&g.push({kind:"load_more",url:"TODO",load_more:ie.encode({kind:"duplicates",lmurl:"todo"}),raw_value:r[1]}),w="comments"===p.kind?u&&!c?[{selected:!0,text:"Random",action:{kind:"link",url:A(m,{sort:"random"})}}]:[["confidence","Best"],["top","Top"],["new","New"],["controversial","Controversial"],["old","Old"],["random","Random"],["qa","Q&A"],["live","Live"]].map((([e,t])=>{var i;return{selected:(null!=(i=p.sort_override)?i:l)===e,text:t,action:{kind:"link",url:A(m,{sort:e})}}})):"duplicates"===p.kind?[["num_comments","Comments"],["new","New"]].map((([e,t])=>({selected:p.sort===e,text:t,action:{kind:"link",url:A(m.replace("/comments","/duplicates"),{sort:e})}}))):[{selected:!1,text:"error "+p.kind,action:{kind:"link",url:"error"}}],{title:"t3"===i.kind?i.data.title:"ERR top not t3",navbar:J(),body:{kind:"one",item:{parents:[de(i,{force_expand:b.length>0?"closed":"open",show_post_reply_button:!0},{permalink:m,sort:"unsupported",is_chat:h}),...u?[{kind:"thread",body:{kind:"richtext",content:[e.p(e.txt("This thread is in contest mode.")),e.p(e.txt(c?"As a mod, you can sort comments however you wish. Regular users have randomized sorting and cannot see scores.":"Sorting is randomized and scores are hidden."))]},display_mode:{body:"visible",comments:"collapsed"},raw_value:u,link:"no",actions:[],default_collapsed:!1,layout:"reddit-post"}]:[],...k?[{kind:"thread",body:{kind:"richtext",content:[e.p(e.txt("This thread is locked.")),e.p(e.txt(c?"Only mods like you can comment on this thread.":"You are not able to comment on this thread."))]},display_mode:{body:"visible",comments:"collapsed"},raw_value:k,link:"no",actions:[],default_collapsed:!1,layout:"reddit-post"}]:[],...b],menu:w,replies:g}},sidebar:null!=(a=n.sidebar)?a:void 0,display_style:"comments-view"}}if("wikipage"===r.kind)return{title:t+" | Wiki",navbar:J(),body:{kind:"one",item:{parents:[{kind:"thread",raw_value:r,body:{kind:"text",markdown_format:"reddit_html",content:r.data.content_html},display_mode:{body:"visible",comments:"visible"},link:t,layout:"error",actions:[],default_collapsed:!1}],replies:[]}},sidebar:null!=(s=n.sidebar)?s:void 0,display_style:"comments-view"};if("t5"===r.kind)return{title:t+" | Sidebar",navbar:J(),body:{kind:"one",item:{parents:[{kind:"thread",raw_value:r,body:{kind:"text",markdown_format:"reddit",content:r.data.description},display_mode:{body:"visible",comments:"visible"},link:t,layout:"reddit-post",title:{text:"old.reddit sidebar"},actions:[],default_collapsed:!1}],replies:[]}},sidebar:null!=(l=n.sidebar)?l:void 0,display_style:"comments-view"};if("UserList"===r.kind)return{title:t,navbar:J(),body:{kind:"one",item:{parents:[{kind:"thread",body:{kind:"richtext",content:[e.h1(e.txt("User List")),e.table([e.th("left",e.txt("Username")),e.th("left",e.txt("Added")),e.th("left",e.txt("Perms"))],...r.data.children.map((t=>[e.td(e.link("/u/"+t.name,{is_user_link:t.name},e.txt("u/"+t.name))),e.td(e.timeAgo(1e3*t.date)),e.td(...t.mod_permissions.flatMap(((t,i)=>[...0!==i?[e.txt(", ")]:[],e.txt(t)])))])))]},display_mode:{body:"visible",comments:"visible"},raw_value:r,layout:"reddit-post",link:t,actions:[],default_collapsed:!1}],replies:[]}},sidebar:null!=(u=n.sidebar)?u:void 0,display_style:"comments-view"};if("Listing"===r.kind){let i;if(r.data.before,null!=r.data.after){const e=A(t,{before:void 0,after:r.data.after});i={kind:"load_more_unmounted",load_more_unmounted:te.encode({kind:"listing",url:e}),url:e,count:void 0,raw_value:r}}const o=[["overview","Overview"],["comments","Comments"],["submitted","Submitted"]],d=[["upvoted","Upvoted"],["downvoted","Downvoted"],["hidden","Hidden"],["saved","Saved"]];return{title:t,navbar:J(),body:{kind:"listing",menu:"subreddit"===p.kind?[{selected:"hot"===p.current_sort.v,text:"Hot",action:{kind:"link",url:"/"+[...p.sub.base,...p.is_user_page?["hot"]:[]].join("/")}},{selected:"best"===p.current_sort.v,text:"Best",action:{kind:"link",url:"/"+[...p.sub.base,"best"].join("/")}},{selected:"new"===p.current_sort.v,text:"New",action:{kind:"link",url:"/"+[...p.sub.base,"new"].join("/")}},{selected:"rising"===p.current_sort.v,text:"Rising",action:{kind:"link",url:"/"+[...p.sub.base,"rising"].join("/")}},...[["top","Top"],["controversial","Controversial"]].map((([e,t])=>({selected:p.current_sort.v===e,text:p.current_sort.v===e?t+" ("+p.current_sort.t+")":t,action:{kind:"menu",children:[["hour","Hour"],["day","Day"],["week","Week"],["month","Month"],["year","Year"],["all","All Time"]].map((([t,i])=>({text:i,selected:p.current_sort.v===e&&p.current_sort.t===t,action:{kind:"link",url:"/"+[...p.sub.base,e].join("/")+"?t="+t}})))}})))]:"user"===p.kind?[...o.map((([e,t])=>({selected:p.current.tab===e,text:t,action:{kind:"show-line-two",children:[{selected:p.current.tab===e&&"hot"===p.current.sort.sort,text:"Hot",action:{kind:"link",url:A("/"+["u",p.username,e].join("/"),{sort:"hot"})}},{selected:p.current.tab===e&&"new"===p.current.sort.sort,text:"New",action:{kind:"link",url:A("/"+["u",p.username,e].join("/"),{sort:"new"})}},...[["top","Top"],["controversial","Controversial"]].map((([t,i])=>({selected:p.current.tab===e&&p.current.sort.sort===t,text:p.current.tab===e&&p.current.sort.sort===t?i+" ("+p.current.sort.t+")":i,action:{kind:"menu",children:[["hour","Hour"],["day","Day"],["week","Week"],["month","Month"],["year","Year"],["all","All Time"]].map((([i,r])=>({text:r,selected:p.current.tab===e&&p.current.sort.sort===t&&p.current.sort.t===i,action:{kind:"link",url:A("/"+["u",p.username,e].join("/"),{sort:t,t:i})}})))}})))]}}))),{selected:"gilded"===p.current.tab,text:"Gilded",action:{kind:"show-line-two",children:[{selected:"gilded"===p.current.tab&&"received"===p.current.by,text:"Received",action:{kind:"link",url:"/"+["u",p.username,"gilded"].join("/")}},{selected:"gilded"===p.current.tab&&"given"===p.current.by,text:"Given",action:{kind:"link",url:"/"+["u",p.username,"gilded","given"].join("/")}}]}},...d.map((([e,t])=>({selected:p.current.tab===e,text:t,action:{kind:"link",url:"/"+["u",p.username,e].join("/")}})))]:"inbox"===p.kind?[{selected:"compose"===p.current.tab,text:"Compose",action:{kind:"link",url:"/message/compose"}},{selected:"inbox"===p.current.tab,text:"Inbox",action:{kind:"show-line-two",children:[["inbox","All"],["unread","Unread"],["messages","Messages"],["comments","Comment Replies"],["selfreply","Post Replies"],["mentions","Username Mentions"]].map((([e,t])=>({text:t,selected:"inbox"===p.current.tab&&p.current.inbox_tab===e,action:{kind:"link",url:"/message/"+e}})))}},{selected:"sent"===p.current.tab,text:"Sent",action:{kind:"link",url:"/message/sent"}}]:[{text:"Error! "+p.kind,selected:!1,action:{kind:"link",url:t}}],header:null!=(c=n.header)?c:{kind:"thread",title:{text:"Listing"},body:{kind:"text",content:"Listing",markdown_format:"none"},display_mode:{body:"collapsed",comments:"collapsed"},link:"TODO no link",layout:"error",actions:[],default_collapsed:!1,raw_value:p},items:"inbox"===p.kind?r.data.children.map((t=>function(t){if("t1"===t.kind||"t4"===t.kind){const e=t.data;return{parents:[{kind:"thread",title:{text:e.subject},body:{kind:"none"},display_mode:{body:"visible",comments:"collapsed"},link:"no",layout:"reddit-post",default_collapsed:!1,actions:[],raw_value:t},ne(t)],replies:"object"==typeof e.replies?e.replies.data.children.map((e=>ne(e))):[]}}return{parents:[{kind:"thread",body:{kind:"richtext",content:[e.p(e.error("Unsupported "+t.kind,t))]},display_mode:{body:"visible",comments:"collapsed"},layout:"error",default_collapsed:!1,actions:[],raw_value:t,link:"no"}],replies:[]}}(t))):r.data.children.map((e=>function(e,t={},i){const r=de(e,t,i);if("t1"===e.kind&&"link_title"in e.data)return{parents:[{kind:"thread",title:{text:e.data.link_title},info:{time:!1,edited:!1,in:{name:e.data.subreddit_name_prefixed,link:"/"+e.data.subreddit_name_prefixed},author:{color_hash:e.data.link_author,name:e.data.link_author,link:"/u/"+e.data.link_author},pinned:!1},body:{kind:"link",url:e.data.link_permalink},display_mode:{body:"visible",comments:"collapsed"},link:e.data.link_permalink,layout:"reddit-post",default_collapsed:!1,actions:[{kind:"link",url:e.data.link_permalink,text:"Permalink"}],raw_value:e,replies:[]},...e.data.parent_id===e.data.link_id?[]:[oe(e.data.subreddit,e.data.link_id.replace("t3_",""),e.data.parent_id.replace("t1_",""))],r],replies:[]};return{parents:[r],replies:[]}}(e,void 0,{permalink:t,sort:"unsupported",is_chat:!1}))),next:i},sidebar:null!=(m=n.sidebar)?m:void 0,display_style:"fullscreen-view"}}return S(r.kind),z(t,r,{sidebar:n.sidebar,warning:H(t)})}function H(t){const i=t.startsWith("/mod/")||t.startsWith("/mod?")||t.startsWith("/mod#")||"/mod"===t;return i&&(t=t.replace("/mod","")),[e.h1(e.txt("This url is not supported yet")),i?e.h2(e.txt("View it on mod.reddit.com: "),e.link("raw!https://mod.reddit.com"+t,{},e.txt("mod.reddit.com"+t))):e.h2(e.txt("View it on reddit.com: "),e.link("raw!https://www.reddit.com"+t,{},e.txt("reddit.com"+t))),e.p(e.txt("Submit an issue "),e.link("https://github.com/pfgithub/threadclient/issues",{},e.txt("here")),e.txt(" if you would like to see this supported. Mention the url: "),e.code(t))]}const Y=o(),$=[],K=new Set(["/acknowledgements","/appeal","/appeals","/avatar","/user/me/avatar","/u/me/avatar","/user/:profileName/avatar","/coins","/coins/mobile","/user/me","/user/me/:rest(.*)","/r/u_:profileName","/r/u_:profileName/:rest(.*)","/u/:profileName","/u/:profileName/:rest(.*)","/user/:profileName/submitted","/user/:profileName/submitted/:rest(.*)","/:routePrefix(r)/:subredditName/collection/:collectionId/:partialPostId/:partialCommentId","/:routePrefix(r)/:subredditName/collection/:collectionId/:partialPostId","/:routePrefix(r)/:subredditName/collection/:collectionId","/:routePrefix(user)/:subredditName/collection/:collectionId/:partialPostId/:partialCommentId","/:routePrefix(user)/:subredditName/collection/:collectionId/:partialPostId","/:routePrefix(user)/:subredditName/collection/:collectionId","/:routePrefix(r)/:subredditName/comments/:partialPostId/:urlSafePostTitle/:partialCommentId","/:routePrefix(r)/:subredditName/comments/:partialPostId/:urlSafePostTitle?","/comments/:partialPostId/:urlSafePostTitle/:partialCommentId","/comments/:partialPostId/:urlSafePostTitle?","/:routePrefix(r)/:subredditName/duplicates/:partialPostId/:urlSafePostTitle?","/:routePrefix(user)/:subredditName/duplicates/:partialPostId/:urlSafePostTitle?","/duplicates/:partialPostId/:urlSafePostTitle?","/:routePrefix(user)/:subredditName/comments/:partialPostId/:urlSafePostTitle/:partialCommentId","/:routePrefix(user)/:subredditName/comments/:partialPostId/:urlSafePostTitle?","/verification/:verificationToken","/","/:sort(best|hot|new|rising|controversial|top|gilded|awarded)?","/label/subreddits","/premium","/framedGild/:thingId","/framedModal/:type","/submit","/r/:subredditName/submit","/user/:profileName/submit","/user/:profileName/draft/:draftId","/original/submit","/original","/original/:categoryName/:sort([a-z]+)?","/explore","/explore/:categoryName","/community-points/","/vault/","/web/community-points/","/web/special-membership/:subredditName","/web/membership/:subredditName","/vault/burn","/me/m/:multiredditName","/user/:username/m/:multiredditName","/me/m/:multiredditName/:sort(best)?","/me/m/:multiredditName/:sort(hot)?","/me/m/:multiredditName/:sort(new)?","/me/m/:multiredditName/:sort(rising)?","/me/m/:multiredditName/:sort(controversial)?","/me/m/:multiredditName/:sort(top)?","/me/m/:multiredditName/:sort(gilded)?","/me/m/:multiredditName/:sort(awarded)?","/user/:username/m/:multiredditName/:sort(best)?","/user/:username/m/:multiredditName/:sort(hot)?","/user/:username/m/:multiredditName/:sort(new)?","/user/:username/m/:multiredditName/:sort(rising)?","/user/:username/m/:multiredditName/:sort(controversial)?","/user/:username/m/:multiredditName/:sort(top)?","/user/:username/m/:multiredditName/:sort(gilded)?","/user/:username/m/:multiredditName/:sort(awarded)?","/r/mod/about/:pageName(edited|modqueue|reports|spam|unmoderated)?","/r/mod/:sort(best)?","/r/mod/:sort(hot)?","/r/mod/:sort(new)?","/r/mod/:sort(rising)?","/r/mod/:sort(controversial)?","/r/mod/:sort(top)?","/r/mod/:sort(gilded)?","/r/mod/:sort(awarded)?","/me/f/mod/:sort(best)?","/me/f/mod/:sort(hot)?","/me/f/mod/:sort(new)?","/me/f/mod/:sort(rising)?","/me/f/mod/:sort(controversial)?","/me/f/mod/:sort(top)?","/me/f/mod/:sort(gilded)?","/me/f/mod/:sort(awarded)?","/notifications/","/message/:pageName(inbox|unread|messages|comments|selfreply|mentions|compose|sent|moderator)","/message/messages/:messageId","/user/:profileName/comments","/user/:profileName/about/edit/moderation","/user/:profileName","/user/:profileName/posts","/user/:profileName/snoo","/user/:profileName/:listingType(downvoted|hidden|saved|upvoted|gilded|given)","/user/:profileName/gilded/:listingType(given)","/rpan/r/:subredditName/:partialPostId?","/rpan/:partialPostId?","/settings/:page(account|messaging|profile|privacy|notifications|feed|gold|payments|premium|creator|special)?","/settings/data-request","inexact|/prefs/:page(deactivate|blocked)?","inexact|/user/:username/about/edit","inexact|/user/:username/about/edit/privacy","/search","/r/:subredditName/search","/me/m/:multiredditName/search","/user/:username/m/:multiredditName/search","/wiki/","/r/:subredditName/wiki/","/r/:subredditName/w/:wikiPageName*","/w/:wikiPageName*","/r/:subredditName/wiki/:wikiSubRoute(settings)/:wikiPageName+","/r/:subredditName/wiki/:wikiSubRoute(revisions)","/r/:subredditName/wiki/:wikiSubRoute(edit|create|revisions)/:wikiPageName+","/r/:subredditName/wiki/:wikiPageName+","/wiki/:wikiPageName+","/t/:topicSlug","/r/:subredditName","/r/:subredditName/:sort(best)?","/r/:subredditName/:sort(hot)?","/r/:subredditName/:sort(new)?","/r/:subredditName/:sort(rising)?","/r/:subredditName/:sort(controversial)?","/r/:subredditName/:sort(top)?","/r/:subredditName/:sort(gilded)?","/r/:subredditName/:sort(awarded)?","/subreddits/create","/subreddits/leaderboard","/subreddits/leaderboard/:categoryName/","/r/:subredditName/about","/r/:subredditName/about/:pageName(awards|muted|badges|banned|chat|settings|contributors|emojis|emotes|eventposts|moderators|rules|removal|modqueue|reports|spam|unmoderated|edited|postflair|log|flair|edit|userflair|wiki|wikicontributors|wikibanned|traffic|scheduledposts|broadcasting|content)","/user/:profileName/about/:pageName(awards)","/r/:subredditName/about/:pageName(wiki)/:wikiSubRoute(revisions|wikibanned|wikicontributors)","/r/:subredditName/about/:pageName(wiki)/:wikiSubRoute(edit|create|settings|revisions)/:wikiPageName+","/r/:subredditName/about/:pageName(wiki)/:wikiPageName*","/report"]),Q=e=>({kind:"link_out",out:"https://www.reddit.com"+e.path+"?"+i(e.query)}),Z=e=>t=>({kind:"todo",path:t.path+"?"+i(t.query),msg:e});function X(e,t){const i=e=>null!=e.multireddit&&null!=e.user?{kind:"multireddit",multireddit:e.multireddit,user:e.user,base:["user",e.user,"m",e.multireddit]}:null!=e.user?{kind:"userpage",user:e.user,base:["user",e.user]}:null!=e.subreddit?{kind:"subreddit",subreddit:e.subreddit,base:["r",e.subreddit]}:{kind:"homepage",base:[]};"home"!==t&&"subreddit"!==t&&"user"!==t||("home"===t&&$.push("/submit"),"subreddit"===t&&$.push("/r/:subredditName/submit"),"user"===t&&$.push("/user/:profileName/submit"),e.route(["submit"],Z("submit post")));const r=["best","hot","new","rising","controversial","top","gilded","awarded"];if("home"===t&&$.push("/","/:sort("+r.join("|")+")?"),"subreddit"===t&&$.push("/r/:subredditName",...r.map((e=>"/r/:subredditName/:sort("+e+")?"))),"multireddit"===t&&$.push("/user/:username/m/:multiredditName",...r.map((e=>"/user/:username/m/:multiredditName/:sort("+e+")?"))),e.route([{sort:[...r,..."user"===t?[]:[null]]}],(e=>{var t,r,n,o;return{kind:"subreddit",sub:i(e),is_user_page:!1,current_sort:{v:null!=(t=e.sort)?t:"hot",t:null!=(r=e.query.t)?r:"all"},before:null!=(n=e.query.before)?n:null,after:null!=(o=e.query.after)?o:null}})),"subreddit"===t||"user"===t||"home"===t){const r="subreddit"===t?"/:routePrefix(r)/:subredditName":"user"===t?"/:routePrefix(user)/:subredditName":"home"===t?"":Re(t);$.push(r+"/duplicates/:partialPostId/:urlSafePostTitle?"),e.route(["duplicates",{post_id_unprefixed:"any"},{url_safe_post_title:"optional"}],(e=>{var t,r,n;return{kind:"duplicates",sub:i(e),post_id_unprefixed:e.post_id_unprefixed,after:null!=(t=e.query.after)?t:null,before:null!=(r=e.query.before)?r:null,crossposts_only:"true"===e.query.crossposts_only,sort:null!=(n=e.query.sort)?n:"num_comments"}})),$.push(r+"/comments/:partialPostId/:urlSafePostTitle?"),e.route(["comments",{post_id_unprefixed:"any"},{url_safe_post_title:"optional"}],(e=>{var t,r,n;return{kind:"comments",sub:i(e),post_id_unprefixed:e.post_id_unprefixed,focus_comment:null!=(t=e.query.comment)?t:null,sort_override:null!=(r=e.query.sort)?r:null,context:null!=(n=e.query.context)?n:null}})),$.push(r+"/comments/:partialPostId/:urlSafePostTitle/:partialCommentId"),e.route(["comments",{post_id_unprefixed:"any"},{url_safe_post_title:"any"},{partial_comment_id:"any"}],(e=>{var t,r;return{kind:"comments",sub:i(e),post_id_unprefixed:e.post_id_unprefixed,focus_comment:e.partial_comment_id,sort_override:null!=(t=e.query.sort)?t:null,context:null!=(r=e.query.context)?r:null}}))}}Y.route(["raw",{path:"rest"}],(e=>({kind:"raw",path:"/"+e.path.join("/")+"?"+i(e.query)}))),$.push("/acknowledgements"),Y.route(["acknowledgements"],Q),$.push("/appeal"),Y.route(["appeal"],Q),$.push("/appeals"),Y.route(["appeals"],Q),$.push("/avatar"),Y.route(["appeals"],Q),$.push("/coins"),Y.route(["coins"],Q),$.push("/coins/mobile"),Y.route(["coins","mobile"],Q),$.push("/r/u_:profileName","/r/u_:profileName/:rest(.*)"),Y.route(["r",{user:{kind:"starts-with",text:"u_"}},{remainder:"rest"}],(e=>({kind:"redirect",to:"/"+["user",e.user,...e.remainder].join("/")+"?"+i(e.query)}))),$.push("/u/:profileName","/u/:profileName/:rest(.*)","/u/me/avatar"),Y.route(["u",{user:"any"},{remainder:"rest"}],(e=>({kind:"redirect",to:"/"+["user",e.user,...e.remainder].join("/")+"?"+i(e.query)}))),$.push("/verification/:verificationToken"),Y.route(["verification",{vtoken:"any"}],Q),$.push("/label/subreddits"),Y.route(["label","subreddits"],Q),$.push("/premium"),Y.route(["premium"],Q),$.push("/framedGild/:thingId"),Y.route(["framedGild",{thing:"any"}],Q),$.push("/framedModal/:type"),Y.route(["framedModal",{type:"any"}],Q),$.push("/community-points/","/vault/","/web/community-points/"),Y.route(["community-points"],Q),Y.route(["vault"],Q),Y.route(["web","community-points"],Q),Y.with(["user","me"],(e=>{$.push("/user/me/avatar"),e.catchall(Z("redirect to current user"))})),Y.with(["user",{user:"any"}],(e=>{$.push("/user/:profileName/avatar"),e.route(["user",{profile_name:"any"},"avatar"],(e=>({kind:"redirect",to:"/avatar"}))),$.push("/user/:profileName","/user/:profileName/comments","/user/:profileName/submitted","/user/:profileName/submitted/:rest(.*)"),e.route([{tab:["overview","comments","submitted",null]}],(e=>{var t,i,r;return{kind:"user",username:e.user,current:{kind:"sorted-tab",tab:null!=(t=e.tab)?t:"overview",sort:{sort:null!=(i=e.query.sort)?i:"submitted"===e.tab?"hot":"new",t:null!=(r=e.query.t)?r:"all"}}}})),$.push("/user/:profileName/posts"),e.route(["posts"],(e=>({kind:"redirect",to:"/user/"+e.user+"/submitted?"+i(e.query)})));const t=["downvoted","hidden","saved","upvoted"];$.push("/user/:profileName/:listingType("+t.join("|")+"|gilded|given)"),$.push("/user/:profileName/gilded/:listingType(given)"),e.route([{tab:t}],(e=>({kind:"user",username:e.user,current:{kind:"unsorted-tab",tab:e.tab}}))),e.route(["gilded",{by:["received","given",null]}],(e=>{var t,i;return{kind:"user",username:e.user,current:{kind:"gild-tab",tab:"gilded",by:null!=(i=null!=(t=e.by)?t:e.query.show)?i:"received"}}})),e.route(["given"],(e=>({kind:"user",username:e.user,current:{kind:"gild-tab",tab:"gilded",by:"given"}}))),$.push("/user/:profileName/snoo"),e.route(["snoo"],Z("snoo")),$.push("/user/:profileName/draft/:draftId"),e.route(["draft",{draft_id:"any"}],Z("drafts")),$.push("/user/:profileName/about/edit/moderation"),e.route(["about","edit","moderation"],Z("user profile moderation settings")),e.with(["m",{multireddit:"any"}],(e=>X(e,"multireddit"))),X(e,"user")})),Y.with(["r",{subreddit:"any"}],(e=>{$.push("/r/:subredditName/wiki/:wikiSubRoute(revisions)","/r/:subredditName/wiki/:wikiSubRoute(settings)/:wikiPageName+","/r/:subredditName/wiki/:wikiSubRoute(edit|create|revisions)/:wikiPageName+","/r/:subredditName/wiki/","/r/:subredditName/w/:wikiPageName*","/r/:subredditName/wiki/:wikiPageName+"),e.with([{w_wiki:["w","wiki"]}],(e=>{e.route([{wiki_path:"rest"}],(e=>({kind:"wiki",sub:{kind:"subreddit",base:["r",e.subreddit],subreddit:e.subreddit},path:0===e.wiki_path.length?["index"]:e.wiki_path,query:e.query})))})),X(e,"subreddit")})),Y.route([{w_wiki:["w","wiki"]},{wiki_path:"rest"}],(e=>({kind:"wiki",sub:{kind:"homepage",base:[]},path:e.wiki_path,query:e.query}))),Y.with(["message"],(e=>{const t=["inbox","unread","messages","comments","selfreply","mentions"];$.push("/message/:pageName("+t.join("|")+"|compose|sent|moderator)"),e.route([{tab:[...t]}],(e=>({kind:"inbox",current:{tab:"inbox",inbox_tab:e.tab}}))),e.route(["compose"],(e=>({kind:"inbox",current:{tab:"compose",to:e.query.to,subject:e.query.subject,message:e.query.message}}))),e.route(["sent"],(e=>({kind:"inbox",current:{tab:"sent"}}))),e.route(["moderator"],(e=>({kind:"inbox",current:{tab:"mod"}}))),$.push("/message/messages/:messageId"),e.route(["messages",{message_id:"any"}],(e=>({kind:"inbox",current:{tab:"message",msgid:e.message_id}})))})),X(Y,"home"),Y.with(["mod"],(e=>{Y.catchall(Z("not supported"))})),Y.catchall(Z("not supported"));const ee=[];for(const Le of $)K.has(Le)?K.delete(Le):ee.push("â€¢ unknown: "+Le);if(K.size>0)for(const Le of K)ee.push("â€¢ missing: "+Le);if(ee.length>0){console.log("reddit router ::");for(const e of ee)console.log(e)}const te=a("load_more_unmounted"),ie=a("load_more");function re(e){var t,i,r;const n={id:e.name,rank:"2"};return{kind:"counter",unique_id:"/vote/"+e.name+"/",time:Date.now(),special:"reddit-points",label:"Vote",incremented_label:"Voted",decremented_label:"Voted",count_excl_you:null!=(i=null!=(t=e.score_hidden)?t:e.hide_score)&&i?"hidden":e.score+(!0===e.likes?-1:!1===e.likes?1:0),you:!0===e.likes?"increment":!1===e.likes?"decrement":void 0,percent:e.upvote_ratio,actions:null!=(r=e.archived)&&r?{error:"archived <6mo"}:{increment:v({...n,dir:"1"}),decrement:v({...n,dir:"-1"}),reset:v({...n,dir:"0"})}}}function ne(t){if("t1"===t.kind||"t4"===t.kind){const e=t.data;return{kind:"thread",info:{time:1e3*e.created_utc,edited:!1,author:{name:"u/"+e.author,color_hash:e.author,link:"/u/"+e.author},pinned:!1},body:{kind:"text",content:e.body,markdown_format:"reddit"},display_mode:{body:"visible",comments:"collapsed"},link:e.context,layout:"reddit-comment",default_collapsed:!1,actions:[..."t1"===t.kind?[re(e)]:[],...e.context?[{kind:"link",url:e.context,text:"Context"}]:[],..."t4"===t.kind?[{kind:"link",url:"/message/messages/"+e.id,text:"Permalink"}]:[],{kind:"counter",count_excl_you:"none",you:e.new?"increment":void 0,unique_id:"/unread/"+e.name+"/",time:Date.now(),label:"Mark Unread",incremented_label:"ðŸ ¶ New",actions:{increment:T.encode({kind:"mark_read",direction:"un",fullname:e.name}),reset:T.encode({kind:"mark_read",direction:"",fullname:e.name})}}],raw_value:t}}return{kind:"thread",body:{kind:"richtext",content:[e.p(e.error("Unsupported "+t.kind,t))]},display_mode:{body:"visible",comments:"collapsed"},layout:"error",default_collapsed:!1,actions:[],raw_value:t,link:"no"}}function oe(e,t,i){return{kind:"load_more",load_more:ie.encode({kind:"context",subreddit:e,link_id:t,parent_id:i}),url:"/r/"+e+"/comments/"+t+"?comment="+i.replace("t1_","")+"&context=8",raw_value:[e,t,i]}}function de(t,i={},r){try{return function(t,i={},r){var n,o,d;if(null!=i.force_expand||(i.force_expand="closed"),"t1"===t.kind){const o=t.data;return{kind:"thread",body:we(o),display_mode:{body:"visible",comments:"visible"},raw_value:t,link:A(o.permalink,{context:"3",sort:r.sort}),layout:"reddit-comment",info:{time:1e3*o.created_utc,edited:!1!==o.edited&&1e3*o.edited,author:pe(o,x(null!=(n=o.all_awardings)?n:[])),pinned:o.pinned||o.stickied||!1},actions:[ue(o.name),{kind:"link",text:"Permalink",url:o.permalink?A(o.permalink,{context:"3",sort:r.sort}):"Error no permalink"},ae(o.name),ce(o.name,o.saved),le(o.name,o.subreddit),...r.is_chat?[]:[re(o)],fe(o.body)],default_collapsed:o.collapsed,replies:[...o.locked?[{kind:"thread",body:{kind:"richtext",content:[e.p(e.txt("This comment is locked.")),e.p(e.txt("Only moderators are able to comment on this thread."))]},display_mode:{body:"visible",comments:"collapsed"},raw_value:o.locked,link:"no",actions:[],default_collapsed:!1,layout:"reddit-post"}]:[],...o.replies?o.replies.data.children.map((e=>de(e,i,_e(r,o.permalink)))):[]]}}if("t3"===t.kind){const e=t.data,r=null!=e.removed_by_category?(null!=(o=be[e.removed_by_category])?o:be.unsupported)(e.removed_by_category,e.subreddit_name_prefixed):void 0,n=e.name.substring(3);e.mod_reports.length,e.user_reports.length;const a=ge(e);return{kind:"thread",title:{text:e.title},flair:xe(e),body:null!=r?{kind:"removed",removal_message:r,fetch_path:he.encode({path:"https://api.pushshift.io/reddit/submission/search?ids="+n}),body:a}:a,display_mode:"crosspost"===i.force_expand?{body:"visible",comments:"collapsed"}:{body:"collapsed",body_default:i.force_expand,comments:"collapsed"},raw_value:t,link:e.permalink,thumbnail:ye(e,i.force_expand),layout:"reddit-post",info:{time:1e3*e.created_utc,edited:!1!==e.edited&&1e3*e.edited,author:pe(e,[]),in:{link:"/"+e.subreddit_name_prefixed,name:e.subreddit_name_prefixed},pinned:e.stickied||!1},actions:[...null!=(d=i.show_post_reply_button)&&d?[ue(e.name)]:[],{kind:"link",url:e.permalink,text:e.num_comments.toLocaleString()+" comment"+(1===e.num_comments?"":"s")},{kind:"link",url:"/domain/"+e.domain,text:e.domain},ae(e.name),ce(e.name,e.saved),re(e),{kind:"link",url:e.permalink.replace("/comments/","/duplicates/"),text:"Duplicates"},le(e.name,e.subreddit)],default_collapsed:!1}}if("more"===t.kind){const e=t.data;if(0===e.children.length)return{kind:"load_more",load_more:ie.encode({kind:"parent_permalink",permalink:r.permalink}),url:r.permalink,count:void 0,raw_value:t};if(null==i.link_fullname)throw new Error("!options.link_fullname");return{kind:"load_more",load_more:ie.encode({kind:"api_loadmore",link_fullname:i.link_fullname,children:e.children,parent_permalink:r}),url:r.permalink,count:e.children.length,raw_value:t}}return{kind:"thread",title:{text:"unsupported listing kind "+t.kind},body:{kind:"text",content:"unsupported",markdown_format:"none"},display_mode:{body:"collapsed",comments:"collapsed"},raw_value:t,link:"TODO no link",layout:"error",actions:[],default_collapsed:!1}}(t,i,r)}catch(n){return console.log(n),{kind:"thread",body:{kind:"richtext",content:[e.p(e.error("Error! "+n.toString(),n))]},display_mode:{body:"visible",comments:"visible"},raw_value:{error:n,listing:t},link:"Error!",layout:"error",actions:[],default_collapsed:!1}}}function ae(e){return{kind:"delete",data:N(e)}}const se=a("report");function le(e,t){return{kind:"report",data:se.encode({subreddit:t,fullname:e})}}function ue(e){return{kind:"reply",text:"Reply",reply_info:Ue.encode({parent_id:e})}}function ce(e,t){return{kind:"counter",unique_id:`/save/${e}/`,time:Date.now(),label:"Save",incremented_label:"Unsave",style:"action-button",incremented_style:"save-button-saved",count_excl_you:"none",you:t?"increment":void 0,actions:{increment:T.encode({kind:"save",fullname:e,direction:""}),reset:T.encode({kind:"save",fullname:e,direction:"un"})}}}function me(e){var t,i,r;const n={admin:"text-red-500",moderator:"text-green-500",unsupported:"text-red-500"};return{color_hash:e.author,name:e.author,link:"/u/"+e.author,flair:[...e.flair_bits?y(e.flair_bits):[],...e.is_submitter?ve([{elems:[{kind:"text",text:"Â«OPÂ»"}],content_warning:!1,system:"text-blue-500"}]):[],...null!=(t=e.author_cakeday)&&t?ve([{elems:[{kind:"text",text:"Â«ðŸ°Â»"}],content_warning:!1,system:"text-gray-500"}]):[],...null!=e.distinguished?ve([{elems:[{kind:"text",text:"Â«"+e.distinguished+"Â»"}],content_warning:!1,system:null!=(i=n[e.distinguished])?i:n.unsupported}]):[],...null!=(r=e.additional_flairs)?r:[]],pfp:null!=e.pfp&&""!==e.pfp?{url:e.pfp,hover:e.pfp}:void 0}}function pe(e,t){var i;return me({author:e.author,flair_bits:{type:e.author_flair_type,text:e.author_flair_text,text_color:e.author_flair_text_color,background_color:e.author_flair_background_color,richtext:e.author_flair_richtext},additional_flairs:t,distinguished:e.distinguished,is_submitter:"is_submitter"in e&&(null!=(i=e.is_submitter)&&i),author_cakeday:e.author_cakeday,pfp:e.profile_img})}function ke(e){return me({author:e.data.name,flair_bits:null,additional_flairs:[],distinguished:null,is_submitter:!1,author_cakeday:!1,pfp:e.data.icon_img})}const he=a("fetch_removed_path");function _e(e,t){return{permalink:A(t,{sort:e.sort}),sort:e.sort,is_chat:e.is_chat}}const be={anti_evil_ops:()=>({short:"Anti-Evil Operations",title:"Removed by Reddit's Anti-Evil Operations",body:"For violations of reddit's Content Policy: https://reddit.com/help/contentpolicy"}),community_ops:()=>({short:"Community Operations",title:"Sorry, this post was removed by Reddit's Community team.",body:"It's rare, but Reddit's Community Team will occasionally remove posts from feeds to keep communities safe and civil."}),legal_operations:()=>({short:"Legal Operations",title:"This post was removed for legal reasons",body:"Â«TODO fill thisÂ»"}),copyright_takedown:()=>({short:"Copyright Takedown",title:"Removed for Copyright Infringement",body:"Â«TODO fill thisÂ»"}),reddit:()=>({short:"Spam Filters",title:"Sorry, this post was removed by Reddit's spam filters.",body:"Reddit's automated bots frequently filter posts it thinks might be spam."}),author:()=>({short:"Author",title:"Removed by the author",body:"The author of this post decided to remove it."}),deleted:()=>({short:"Author",title:"Deleted by the author",body:"The author of this post decided to delete it."}),moderator:(e,t)=>({short:"Moderators",title:"Removed by moderators of "+t,body:"Moderators of "+t+" decided to remove this post, likely due to a violation of the subreddit rules."}),automod_filtered:()=>({short:"Filtered by AutoModerator",title:"This post was filtered by AutoModerator",body:"Â«TODO fill thisÂ»"}),unsupported:e=>({short:e,title:"This post was removed for Â«"+e+"Â»",body:"ThreadClient does not know what that means."})};function fe(t){return{kind:"code",body:{kind:"richtext",content:[e.pre(t,"markdown")]}}}function we(e){var t;let i;"[deleted]"===e.author&&(JSON.stringify(e.rtjson)===JSON.stringify({document:[{c:[{e:"text",t:"[deleted]"}],e:"par"}]})?i=be.deleted("deleted",e.subreddit_name_prefixed):JSON.stringify(e.rtjson)===JSON.stringify({document:[{c:[{e:"text",t:"[removed]"}],e:"par"}]})&&(i=be.moderator("moderator",e.subreddit_name_prefixed)));const r={kind:"richtext",content:O(e.rtjson,{media_metadata:null!=(t=e.media_metadata)?t:{}})};return null!=i?{kind:"removed",removal_message:i,fetch_path:he.encode({path:"https://api.pushshift.io/reddit/comment/search?ids="+e.id}),body:r}:r}function ge(e){var t,i,r;if(e.crosspost_parent_list&&1===e.crosspost_parent_list.length)return{kind:"crosspost",source:de({kind:"t3",data:e.crosspost_parent_list[0]},{force_expand:"crosspost"},_e({permalink:e.permalink,sort:"unsupported",is_chat:!1},e.permalink))};if(e.is_self)return{kind:"array",body:[e.rtjson.document.length?{kind:"richtext",content:O(e.rtjson,{media_metadata:null!=(t=e.media_metadata)?t:{}})}:e.url==="https://www.reddit.com"+e.permalink?{kind:"none"}:{kind:"link",url:e.url,embed_html:null==(i=e.media_embed)?void 0:i.content},e.poll_data?{kind:"poll",votable:"Cannot vote",total_votes:e.poll_data.total_vote_count,choices:e.poll_data.options.map((e=>{var t;return{name:e.text,votes:null!=(t=e.vote_count)?t:"hidden",id:e.id}})),vote_data:"",select_many:!1,your_votes:null!=e.poll_data.user_selection?[{id:e.poll_data.user_selection}]:[],close_time:e.poll_data.voting_end_timestamp}:void 0]};if(e.gallery_data)return{kind:"gallery",images:e.gallery_data.items.map((t=>{if(!e.media_metadata)throw new Error("missing media metadata");const i=e.media_metadata[t.media_id];if(!i)throw new Error("missing mediameta for "+t.media_id);return P(i,t.caption)}))};if(e.rpan_video)return{kind:"video",source:{kind:"video",sources:[{url:e.rpan_video.hls_url}]},gifv:!1};if(e.preview&&1===e.preview.images.length){const t=e.preview.images[0];if(t.variants.mp4){const e=t.variants.mp4,i=[...e.resolutions,e.source].sort(((e,t)=>t.width-e.width)).map((e=>({url:e.url,quality:e.width+"Ã—"+e.height})));return{kind:"video",source:{kind:"video",sources:i,preview:[...i].reverse()},gifv:!0}}if(e.preview.enabled)return{kind:"captioned_image",url:t.source.url,w:t.source.width,h:t.source.height}}return{kind:"link",url:e.url,embed_html:null==(r=e.media_embed)?void 0:r.content}}function ye(e,t){var i,r,n,o,d,a;if("crosspost"!==t)return null!=(null==(d=null==(o=null==(n=null==(r=null==(i=e.preview)?void 0:i.images)?void 0:r[0])?void 0:n.resolutions)?void 0:o[0])?void 0:d.url)?{kind:"image",url:e.preview.images[0].resolutions[0].url}:e.rpan_video?{kind:"image",url:e.rpan_video.scrubber_media_url}:null!=e.thumbnail&&""!==e.thumbnail?e.thumbnail.includes("/")?{kind:"image",url:e.thumbnail}:{kind:"default",thumb:null!=(a=ve({self:"self",default:"default",image:"image",spoiler:"spoiler",nsfw:"nsfw",account:"account"})[e.thumbnail])?a:"error"}:{kind:"default",thumb:"default"}}function xe(e){var t;const i=[];return i.push(...y({type:e.link_flair_type,text:e.link_flair_text,text_color:e.link_flair_text_color,background_color:e.link_flair_background_color,richtext:e.link_flair_richtext})),e.spoiler&&i.push({elems:[{kind:"text",text:"Spoiler"}],content_warning:!0}),e.over_18&&i.push({elems:[{kind:"text",text:"NSFW"}],content_warning:!0}),e.is_original_content&&i.push({elems:[{kind:"text",text:"OC"}],content_warning:!1}),i.push(...x(null!=(t=e.all_awardings)?t:[])),!0===e.approved&&i.push({elems:[{kind:"text",text:"âœ“ Approved"}],content_warning:!1,system:"text-green-500"}),i}const ve=e=>e;function Ne(){const e="undefined"!=typeof location?location.host:"NOSTATE",t=["account","creddits","edit","flair","history","identity","livemanage","modconfig","modcontributors","modflair","modlog","modmail","modothers","modposts","modself","modwiki","mysubreddits","privatemessages","read","report","save","structuredstyles","submit","subscribe","vote","wikiedit","wikiread"].join(" ");return"raw!https://www.reddit.com/api/v1/authorize?"+i({client_id:w,response_type:"code",state:e,redirect_uri:g,duration:"permanent",scope:t})}async function Te(e){if("homepage"===e.kind)return{sidebar:null};if("userpage"===e.kind)return{sidebar:null};if("mod"===e.kind)return{sidebar:null};if("subreddit"===e.kind){const[t,i]=await Promise.all([qe("/r/"+e.subreddit+"/api/widgets",{method:"GET",onerror:e=>{},cache:!0}),qe("/r/"+e.subreddit+"/about",{method:"GET",onerror:e=>{},cache:!0})]),r={subreddit:e.subreddit,sub_t5:null!=i?i:null,widgets:null!=t?t:null};return{sidebar:F(r),header:V(r)}}if("multireddit"===e.kind){const[t]=await Promise.all([qe("/"+["api","multi",...e.base].join("/"),{method:"GET",onerror:e=>{},cache:!0})]);return{sidebar:t?Oe(t):null}}Re(e)}function Oe(t){const i=t.data;return[{kind:"widget",title:i.display_name,raw_value:t,widget_content:{kind:"body",body:{kind:"array",body:[{kind:"richtext",content:[e.p(e.txt("Curated by "),e.link("/u/"+i.owner,{is_user_link:i.owner.toLowerCase()},e.txt("u/"+i.owner))),e.p(e.txt("Created "),e.timeAgo(1e3*i.created_utc))]},{kind:"text",content:i.description_md,markdown_format:"reddit"}]}},actions_bottom:[{kind:"link",text:"Create a copy",url:"TODO"}]},{kind:"widget",title:"Subreddits ("+i.subreddits.length+")",raw_value:i.subreddits,widget_content:{kind:"list",items:i.subreddits.map((e=>({name:{kind:"text",text:"r/"+e.name},click:{kind:"link",url:"/r/"+e.name}})))}}]}function Ee(e){const t=e.banner_background_image||e.banner_img||"",i=e.community_icon||e.icon_img||"";return{banner:t?{desktop:t}:null,icon:i?{url:i}:null}}function Se(t,i,r){const n=[];return(null==t?void 0:t.data)?n.push({kind:"bio",...Ee(t.data.subreddit),name:{display:t.data.name,link_name:"u/"+t.data.name},menu:null,raw_value:t,body:{kind:"text",content:t.data.subreddit.public_description,markdown_format:"reddit"},subscribe:{kind:"counter",unique_id:"/follow/"+t.data.name+"/",time:Date.now(),label:"Follow",incremented_label:"Following",style:"pill-filled",incremented_style:"pill-empty",count_excl_you:t.data.is_friend?t.data.subreddit.subscribers-1:t.data.subreddit.subscribers,you:t.data.is_friend?"increment":void 0,actions:{error:"TODO implement add friend"}}},{kind:"widget",title:"About",widget_content:{kind:"body",body:{kind:"richtext",content:[e.h1(e.link("/u/"+t.data.name,{is_user_link:t.data.name},e.txt(t.data.name))),e.p(e.txt(t.data.link_karma+" post karma")),e.p(e.txt(t.data.comment_karma+" comment karma")),e.p(e.txt("Account created "),e.timeAgo(1e3*t.data.created_utc))]}},raw_value:t}):n.push({kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.txt("Failed to fetch user info for this user :("))]}},raw_value:t}),(null==r?void 0:r.data)?n.push({kind:"widget",title:"Moderates",raw_value:r,widget_content:{kind:"list",items:r.data.map((e=>({icon:e.community_icon||e.icon_img||"undefined",name:{kind:"text",text:e.sr_display_name_prefixed},click:{kind:"link",url:e.url}})))}}):r||n.push({kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.txt("Failed to fetch modded subs for this user :("))]}},raw_value:r}),(null==i?void 0:i.data)?n.push({kind:"widget",title:"Trophy Case",widget_content:{kind:"body",body:{kind:"richtext",content:[...i.data.trophies.map((({data:t})=>{const i=[...null!=t.url?[e.p(e.link(t.url,{},e.txt(t.url)))]:[],...null!=t.description?[e.p(e.txt(t.description))]:[]];return{kind:"body",body:{kind:"crosspost",source:{kind:"thread",title:{text:t.name},body:i.length?{kind:"richtext",content:i}:{kind:"none"},thumbnail:{kind:"image",url:t.icon_70},display_mode:{body:"collapsed",comments:"collapsed",body_default:"closed"},raw_value:t,link:t.icon_70,layout:"reddit-post",info:{time:null!=t.granted_at&&1e3*t.granted_at,edited:!1,pinned:!0},actions:[],default_collapsed:!1}}}}))]}},raw_value:t}):n.push({kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.txt("Failed to fetch trophy case for this user :("))]}},raw_value:i}),n}function Pe(e){let t=Y.parse(e);for(let i=0;"redirect"===t.kind&&i<100;i++)e=t.to,t=Y.parse(e);return[t,e]}const je={id:"reddit",getPage:async function(r){const n=new Map,o=Date.now();try{const[o,d]=Pe(r);if(console.log("PARSED URL:",o),"link_out"===o.kind)return{pivot:{ref:{kind:"post",content:{kind:"post",title:{text:"Not Supported"},body:{kind:"richtext",content:[e.h1(e.link("raw!"+o.out,{},e.txt("View on reddit.com"))),e.p(e.txt("ThreadClient does not support this URL"))]},show_replies_when_below_pivot:!1,collapsible:!1},display_style:"centered",parent:null,replies:null,url:null,internal_data:o}}};if("todo"===o.kind)return{pivot:{ref:{kind:"post",content:{kind:"post",title:{text:"Not Supported"},body:{kind:"richtext",content:[e.h1(e.link("raw!https://www.reddit.com"+o.path,{},e.txt("View on reddit.com"))),e.p(e.txt("ThreadClient does not yet support this URL")),e.p(e.txt(o.msg))]},show_replies_when_below_pivot:!1,collapsible:!1},display_style:"centered",parent:null,replies:null,url:null,internal_data:o}}};if("raw"===o.kind){const e=await qe(o.path,{method:"GET"});return{pivot:c(d,e)}}if("redirect"===o.kind)return{pivot:{ref:{kind:"post",content:{kind:"post",title:{text:"Not Supported"},body:{kind:"richtext",content:[e.h1(e.link("raw!https://www.reddit.com"+d,{},e.txt("View on reddit.com"))),e.p(e.txt("Error! Redirect Loop. ThreadClient tried to redirect more than 100 times."))]},show_replies_when_below_pivot:!1,collapsible:!1},display_style:"centered",parent:null,replies:null,url:null,internal_data:o}}};const a=t(o,{comments:e=>"/comments/"+e.post_id_unprefixed+"?"+i({sort:e.sort_override,comment:e.focus_comment,context:e.context}),duplicates:e=>"/duplicates/"+e.post_id_unprefixed+"?"+i({after:e.after,before:e.before,sort:e.sort,crossposts_only:""+e.crossposts_only}),subreddit:e=>"/"+[...e.sub.base,e.current_sort.v].join("/")+"?"+i({t:e.current_sort.t,before:e.before,after:e.after}),wiki:e=>"/"+[...e.sub.base,"wiki",...e.path].join("/")+"?"+i(e.query),user:()=>d,inbox:()=>d}),s=await qe(a,{method:"GET"});return{pivot:l(n,d,o,s)}}catch(d){const t=d;console.log(t);const i=t.toString().includes("NetworkError"),n=o>Date.now()-50,a=navigator.userAgent.includes("Firefox");if(i)return{pivot:{ref:{kind:"post",content:{kind:"post",title:{text:"Error Loading Page"},body:{kind:"richtext",content:[...n&&a?[e.h1(e.txt("Firefox Enhanced Tracking Protection may be active")),e.p(e.txt("Try disabling Enhanced Tracking Protection for this site.")),e.ul(e.ili(e.txt("Look at the left side of the URL bar for a shield icon")),e.ili(e.txt("Click it")),e.ili(e.txt("Flip the switch to turn Enhanced Tracking Protection off"))),e.p(e.txt("Enhanced Tracking Protection blocks ThreadClient from sending requests to Reddit, which prevents ThreadClient from functioning.")),e.h2(e.txt("Other things to check:"))]:[e.h1(e.txt("There was a network error loading this page")),e.h2(e.txt("Things to check:"))],e.ul(e.ili(e.txt("Make sure your internet is working")),e.ili(e.txt("Make sure "),e.link("https://www.redditstatus.com/",{},e.txt("Reddit is working"))),e.ili(e.txt("If your browser has tracking protection, try disabling it.")))]},show_replies_when_below_pivot:!1,collapsible:!1},display_style:"centered",parent:null,replies:null,url:null,internal_data:[r,t,{is_networkerror:i,error_was_instant:n,browser_is_firefox:a}]}}};throw t}},async getThread(t){try{const[r,n]=Pe(t);if(console.log("PARSED URL:",r),"comments"===r.kind){const e="/comments/"+r.post_id_unprefixed+"?"+i({sort:r.sort_override,comment:r.focus_comment,context:r.context}),[t,o]=await Promise.all([qe(e,{method:"GET"}),Te(r.sub)]);return B(n,r,t,{...o})}if("duplicates"===r.kind){const e="/duplicates/"+r.post_id_unprefixed+"?"+i({after:r.after,before:r.before,sort:r.sort,crossposts_only:""+r.crossposts_only}),[t,o]=await Promise.all([qe(e,{method:"GET"}),Te(r.sub)]);return B(n,r,t,{...o})}if("subreddit"===r.kind){const e="/"+[...r.sub.base,r.current_sort.v].join("/")+"?"+i({t:r.current_sort.t,before:r.before,after:r.after}),[t,o]=await Promise.all([qe(e,{method:"GET"}),Te(r.sub)]);return B(n,r,t,{...o})}if("wiki"===r.kind){const e="/"+[...r.sub.base,"wiki",...r.path].join("/")+"?"+i(r.query),[t,o]=await Promise.all([qe(e,{method:"GET"}),Te(r.sub)]);return B(n,r,t,{...o})}if("user"===r.kind){const e=n,[t,i,o,d]=await Promise.all([qe(e,{method:"GET"}),qe("/user/"+r.username+"/about",{method:"GET",onerror:e=>{},cache:!0}),qe("/api/v1/user/"+r.username+"/trophies",{method:"GET",onerror:e=>{},cache:!0}),qe("/user/"+r.username+"/moderated_subreddits",{method:"GET",onerror:e=>{},cache:!0})]);return B(n,r,t,{sidebar:Se(i,o,d)})}if("inbox"===r.kind)if("compose"===r.current.tab);else if("mod"===r.current.tab);else if("message"===r.current.tab);else{if("inbox"===r.current.tab){const e="/message/"+r.current.inbox_tab;return B(n,r,await qe(e,{method:"GET"}),{sidebar:null})}"sent"===r.current.tab||Re(r.current)}else{if("link_out"===r.kind)return{title:"LinkOut",navbar:J(),body:{kind:"one",item:{parents:[{kind:"thread",body:{kind:"richtext",content:[e.h1(e.link("raw!"+r.out,{},e.txt("View on reddit.com"))),e.p(e.txt("ThreadClient does not support this URL"))]},display_mode:{comments:"visible",body:"visible"},link:n,raw_value:r,layout:"reddit-post",actions:[],default_collapsed:!1}],replies:[]}},display_style:"comments-view"};if("todo"===r.kind){return B(n,r,await qe(r.path,{method:"GET",onerror:e=>({kind:"unsupported",extra:{title:e.message,stack:e.stack,console:e}})}),{sidebar:[{kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.txt("This page "),e.code(n),e.txt(" is not supported (yet)")),e.p(e.link("raw!https://www.reddit.com"+r.path,{},e.txt("View on reddit.com"))),e.p(e.txt(r.msg))]}},raw_value:r}]})}if("raw"===r.kind){return z(n,await qe(r.path,{method:"GET"}),{sidebar:[{kind:"widget",title:"Raw",widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.txt("This is a raw page.")),e.p(e.link(r.path,{},e.txt("View Rendered")))]}},raw_value:r}]})}if("redirect"===r.kind)return{title:"LinkOut",navbar:J(),body:{kind:"one",item:{parents:[{kind:"thread",body:{kind:"richtext",content:[e.h1(e.txt("Error! Redirect Loop")),e.p(e.txt("ThreadClient tried to redirect over 100 times.")),e.p(e.txt("Path: "),e.code(n),e.error("Code",r))]},display_mode:{comments:"visible",body:"visible"},link:n,raw_value:r,layout:"reddit-post",actions:[],default_collapsed:!1}],replies:[]}},display_style:"comments-view"};Re(r)}return z(n,r,{sidebar:[{kind:"widget",title:"TODO",widget_content:{kind:"body",body:{kind:"richtext",content:[e.p(e.txt("This page "),e.code(n),e.txt(" is not supported (yet)")),e.p(e.txt(r.kind)),e.p(e.txt("View it on "),e.link("raw!https://reddit.com"+n,{},e.txt("reddit.com")),e.txt("."))]}},raw_value:r}]})}catch(r){const e=r;console.log(e);const i=e.toString().includes("NetworkError");return{title:"Error",navbar:J(),body:{kind:"one",item:{parents:[{kind:"thread",title:{text:"Error"},body:{kind:"text",content:`Error ${e.toString()}`+(i?". If you're using Firefox, try disabling 'Enhanced Tracker Protection'  for this site. Enhanced tracker protection indiscriminately blocks all  requests to social media sites, including Reddit.":"."),markdown_format:"none"},display_mode:{body:"visible",comments:"collapsed"},link:t,layout:"error",actions:[],default_collapsed:!1,raw_value:{}}],replies:[]}},display_style:"comments-view"}}},async login(e,t){const r=t.get("code"),n=t.get("state");if(null==r||null==n)throw new Error("No login requested");if(n!==location.host)throw new Error("Login was for "+n);const o=await fetch("https://www.reddit.com/api/v1/access_token",{method:"POST",mode:"cors",credentials:"omit",headers:{Authorization:"Basic "+btoa(w+":"),"Content-Type":"application/x-www-form-urlencoded"},body:i({grant_type:"authorization_code",code:r,redirect_uri:g})}).then((e=>e.json()));if(o.error)throw console.log(o.error),new Error("error "+o.error);const d={access_token:o.access_token,refresh_token:o.refresh_token,expires:Date.now()+1e3*o.expires_in,scope:o.scope};console.log(o,d),localStorage.setItem("reddit-secret",JSON.stringify(d))},async fetchRemoved(e){const t=he.decode(e),[i,r]=await fetch(t.path).then((async e=>[e.status,await e.text()])),n=JSON.parse(r.split("&lt;").join("<").split("&gt;").join(">").split("&amp;").join("&"));if(200!==i)throw console.log(i,n),new Error("Got status "+i);if(0===n.data.length)throw console.log(i,n),new Error("Post was deleted before it could be saved:.");const o=n.data[0];if("[deleted]"===o.selftext||"[removed]"===o.selftext||"[deleted]"===o.body||"[removed]"===o.body)throw new Error("Post was deleted before it could be saved.");if(o.selftext)return{kind:"text",content:o.selftext,markdown_format:"reddit"};if(o.body)return{kind:"text",content:o.body,markdown_format:"reddit"};throw new Error("no selftext or body")},async act(e){const t=T.decode(e);if("vote"===t.kind){const e=await qe("/api/vote",{method:"POST",mode:"urlencoded",body:t.query});console.log(e)}else if("delete"===t.kind){const e=await qe("/api/del",{method:"POST",mode:"urlencoded",body:{id:t.fullname}});console.log(e)}else if("save"===t.kind){const e=await qe("/api/"+t.direction+"save",{method:"POST",mode:"urlencoded",body:{id:t.fullname}});console.log(e)}else if("subscribe"===t.kind){const e=await qe("/api/subscribe",{method:"POST",mode:"urlencoded",body:{action:t.direction,sr_name:t.subreddit}});console.log(e)}else if("mark_read"===t.kind){const e=await qe("/api/"+t.direction+"read_message/",{method:"POST",mode:"urlencoded",body:{id:t.fullname},override:!0});console.log(e)}else"log_out"===t.kind?localStorage.removeItem("reddit-secret"):Ae(t)},previewReply(e,t){Ue.decode(t);return{kind:"legacy",thread:{kind:"thread",body:{kind:"text",content:e,markdown_format:"reddit"},display_mode:{body:"visible",comments:"visible"},raw_value:[e,t],link:"no link",layout:"reddit-comment",info:{time:Date.now(),edited:!1,author:{name:"TODO You",color_hash:"TODO You",link:"/u/TODO You"},pinned:!1},actions:[{kind:"counter",special:"reddit-points",unique_id:null,time:Date.now(),label:"Vote",incremented_label:"Voted",decremented_label:"Voted",count_excl_you:0,you:"increment",percent:1,actions:{error:"reply not posted"}}],default_collapsed:!1}}},async sendReply(e,t){const i=Ue.decode(t),r=[];for(let a=0;a<=7;a++){if(4===a)continue;if(7===a)continue;const e="Testing 1<<"+a;r.push({e:"par",c:[{e:"text",t:e,f:[[1<<a,0,7],[64,8,e.length]]}]})}const n={document:r},o={api_type:"json",thing_id:i.parent_id,return_rtjson:"true",..."richtext_demo"===e?{richtext_json:JSON.stringify(n)}:{text:e}},d=await qe("/api/comment",{method:"POST",mode:"urlencoded",body:o});if("json"in d){const e=d.json.errors.map((e=>"["+e[0]+"]: "+e[1]+" (in "+e[2]+")")).join("\n");throw console.log(e,d),new Error(e)}return console.log(d),de({kind:"t1",data:d},{},{permalink:"TODO",sort:"unsupported",is_chat:!1})},async fetchReportScreen(e){const t=se.decode(e),[i,r]=await Promise.all([await qe("/r/"+t.subreddit+"/about/rules",{method:"GET",cache:!0}),await qe("/r/"+t.subreddit+"/about",{method:"GET",cache:!0})]),n=t.fullname.startsWith("t1_")?"comment":t.fullname.startsWith("t3_")?"link":"unsupported",o=[],d=[];for(const a of i.rules){if("link"===a.kind){if("link"!==n)continue}else if("comment"===a.kind){if("comment"!==n)continue}else"all"===a.kind||S(a.kind);d.push({title:a.violation_reason,description:{kind:"text",content:a.description,markdown_format:"reddit"},report:{kind:"submit",data:Ce.encode({fullname:t.fullname,subreddit:t.subreddit,reason:{kind:"sub",id:a.short_name}})}})}if(r.data.free_form_reports){const e=100;d.push({title:"Custom Reason",report:{kind:"textarea",input_title:"Custom Reason",char_limit:e,data:Ce.encode({fullname:t.fullname,subreddit:t.subreddit,reason:{kind:"sub_other"},text_max:e})}})}o.push({title:"r/"+t.subreddit+"'s rules",report:{kind:"more",screens:d}});for(const a of i.site_rules_flow)o.push(Ie(t,a));return o},async sendReport(e,t){const i=Ce.decode(e);if(console.log(i,t),null==i.text_max){if(null!=t)throw new Error("never. got text in non-textual entry?")}else{if(null==t)throw new Error("never. missing text");if(t.length>i.text_max)throw new Error("report text too long (max "+i.text_max+")")}if("sub_other"===i.reason.kind&&null==t)throw new Error("never. missing text on sub_other");const r=await qe("/api/report",{method:"POST",mode:"urlencoded",body:{sr_name:i.subreddit,thing_id:i.fullname,..."sub"===i.reason.kind?{rule_reason:i.reason.id}:"site"===i.reason.kind?{site_reason:i.reason.id,custom_text:null==t?void 0:t}:"sub_other"===i.reason.kind?{reason:t}:Re(i.reason)}});if(console.log("GOT Response:",r),!0!==r.success)throw console.log(r),new Error("Got error response, check console");return{title:"sub_other"===i.reason.kind?"Report Sent!":i.reason.id,body:null!=t?{kind:"text",content:t,markdown_format:"none"}:{kind:"none"}}},async loadMore(e){var t;const i=ie.decode(e);if("api_loadmore"===i.kind){const e=[...i.children],r="/api/morechildren?api_type=json&limit_children=false&children="+e.splice(0,100).join(",")+"&link_id="+encodeURIComponent(i.link_fullname)+"&sort="+i.parent_permalink.sort,n=await qe(r,{method:"GET"});if(n.json.errors.length>0)throw console.log("got errors",n),new Error("Got errors: "+n.json.errors.join(", "));const o=[],d=new Map;for(const i of n.json.data.things){d.set(i.data.name,i);const e=d.get(i.data.parent_id);if(e){if("t1"!==e.kind)throw new Error("expected t1 here");(t=e.data).replies||(t.replies={kind:"Listing",data:{before:null,children:[],after:null}}),e.data.replies.data.children.push(i)}else o.push(i)}const a=o.map((e=>de(e,{link_fullname:i.link_fullname},i.parent_permalink)));if(e.length>0){const t=a[a.length-1];if(t&&"load_more"===t.kind){const i=ie.decode(t.load_more);if("api_loadmore"!==i.kind)throw new Error("bad (this is not good)");i.children=[...e,...i.children],t.load_more=ie.encode(i)}else a.push({kind:"load_more",load_more:ie.encode({kind:"api_loadmore",link_fullname:i.link_fullname,children:e,parent_permalink:i.parent_permalink}),url:i.parent_permalink.permalink,raw_value:e})}return a}if("parent_permalink"===i.kind){const e=await qe(i.permalink,{method:"GET"}),[t,r]=Pe(i.permalink);if("comments"!==t.kind)throw new Error("bad link to parent_permalink: "+t.kind);const n=B(r,t,e,{sidebar:null});if("one"===n.body.kind)return n.body.item.replies;throw console.log("Error",n),new Error("todo support load more returning other body ("+n.body.kind+")")}if("context"===i.kind)throw new Error("TODO load more context");if("duplicates"===i.kind)throw new Error("TODO load more duplicates");Re(i)},async loadMoreUnmounted(e){const t=te.decode(e);if("listing"===t.kind){const e=await qe(t.url,{method:"GET"}),[i,r]=Pe(t.url),n=B(r,i,e,{sidebar:null});if("listing"===n.body.kind)return{children:n.body.items,next:n.body.next};throw console.log("Error",n),new Error("todo support load more returning other body ("+n.body.kind+")")}if("TODO more"===t.kind)throw new Error("TODO more");Re(t)},async hydrateInbox(e){const t=W.decode(e);if("inbox"===t.kind){const e=await qe("/message/unread",{method:"GET"}),t=null!=e.data.after?{kind:"minimum",min:e.data.children.length}:e.data.children.length>0?{kind:"exact",value:e.data.children.length}:{kind:"zero"};return{messages:t,url:"zero"===t.kind?"/message/inbox":"/message/unread"}}if("modmail"===t.kind){const e=await qe("/api/mod/conversations/unread/count",{method:"GET"});return{messages:e.notifications>0?{kind:"exact",value:e.notifications}:{kind:"zero"},url:"/mod/mail/all"}}Re(t)}};function Re(e){throw console.log("not never:",e),new Error("Expected never")}function Ie(e,t){var i;let r;if("nextStepReasons"in t)r={kind:"more",screens:t.nextStepReasons.map((t=>Ie(e,t)))};else if("fileComplaint"in t&&!0===t.fileComplaint){const i=t.complaintUrl.replace("%25%28thing%29",encodeURIComponent(e.fullname));r={kind:"more",screens:[{title:t.complaintPageTitle,description:{kind:"text",content:t.complaintPrompt,markdown_format:"none"},report:{kind:"link",url:"raw!"+i,text:t.complaintButtonText}}]}}else if("canWriteNotes"in t&&!0===t.canWriteNotes){const n=null!=(i=t.isAbuseOfReportButton)&&i?250:2e3;r={kind:"textarea",input_title:t.notesInputTitle,char_limit:n,data:Ce.encode({fullname:e.fullname,subreddit:e.subreddit,text_max:n,reason:{kind:"site",id:t.reasonText}})}}else r="canSpecifyUsernames"in t&&!0===t.canSpecifyUsernames?{kind:"link",url:"raw!https://reddit.com/report",text:"Open Reddit"}:{kind:"submit",data:Ce.encode({fullname:e.fullname,subreddit:e.subreddit,reason:{kind:"site",id:t.reasonText}})};return{title:t.reasonTextToShow,report:r}}const Ce=a("send_report"),De=new Map;async function qe(e,t){var i,r;try{const n=await async function(){const e=await q();return null==e?"":"Bearer "+e}(),o=function(e,t,i){var r;const[n,o]=U(t);if(!n.startsWith("/"))throw new Error("path didn't start with `/` : `"+t+"`");return null!=(r=i.override)&&r?C(e)+n+o.toString():(o.set("raw_json","1"),o.set("rtj","yes"),o.set("emotes_as_images","true"),o.set("gilding_detail","1"),o.set("profile_img","true"),C(e)+n+".json?"+o.toString())}(!!n,e,{override:t.override}),d={method:t.method,mode:"cors",credentials:"omit",headers:{...n?{Authorization:n}:{},..."POST"===t.method?{"Content-Type":{json:"application/json",urlencoded:"application/x-www-form-urlencoded"}[t.mode]}:{}},..."POST"===t.method?{body:"json"===t.mode?JSON.stringify(t.body):"urlencoded"===t.mode?Object.entries(t.body).flatMap((([e,t])=>null==t?[]:[encodeURIComponent(e)+"="+encodeURIComponent(t)])).join("&"):Ae(t)}:{}},a=JSON.stringify([o,d]),s=De.get(a);if(null!=s&&null!=(i=t.cache)&&i)return s;const[l,u]=await fetch(o,d).then((async e=>[e.status,await e.json()]));if(200!==l){if(t.onstatus)return t.onstatus(l,u);throw console.log(l,u),new Error("got status "+l)}const c=u;if("object"==typeof c){if("json"in c&&"object"==typeof c.json&&"errors"in c.json&&c.json.errors.length>0)throw new Error(c.json.errors.map((([e,t])=>e+": "+t)).join(", "));if("jquery"in c&&Array.isArray(c.jquery)&&"success"in c&&!1===c.success)throw new Error(c.jquery.flatMap((e=>"call"===e[2]?e[3].map((e=>"string"==typeof e?e:"")):[])).join(", "))}return null!=(r=t.cache)&&r&&De.set(a,u),u}catch(n){if(console.log("Got error",n),t.onerror)return t.onerror(n);throw n}}const Ue=a("reply");function Ae(e){throw console.log(e),new Error("not unreachable")}export{me as authorFromInfo,pe as authorFromPostOrComment,ke as authorFromT2,x as awardingsToFlair,je as client,ae as deleteButton,S as expectUnsupported,fe as getCodeButton,we as getCommentBody,re as getPointsOn,ge as getPostBody,xe as getPostFlair,ye as getPostThumbnail,B as pageFromListing,Pe as parseLink,qe as redditRequest,ue as replyButton,le as reportButton,ce as saveButton,_e as sortWrap,A as updateQuery,H as urlNotSupportedYet};
